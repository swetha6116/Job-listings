{"code":"!function(t,e){for(var n in e)t[n]=e[n]}(exports,function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=686)}([,function(t,e,n){\"use strict\";e.arrayAtomicsBackupSymbol=Symbol(\"mongoose#Array#atomicsBackup\"),e.arrayAtomicsSymbol=Symbol(\"mongoose#Array#_atomics\"),e.arrayParentSymbol=Symbol(\"mongoose#Array#_parent\"),e.arrayPathSymbol=Symbol(\"mongoose#Array#_path\"),e.arraySchemaSymbol=Symbol(\"mongoose#Array#_schema\"),e.documentArrayParent=Symbol(\"mongoose:documentArrayParent\"),e.documentIsSelected=Symbol(\"mongoose#Document#isSelected\"),e.documentIsModified=Symbol(\"mongoose#Document#isModified\"),e.documentModifiedPaths=Symbol(\"mongoose#Document#modifiedPaths\"),e.documentSchemaSymbol=Symbol(\"mongoose#Document#schema\"),e.getSymbol=Symbol(\"mongoose#Document#get\"),e.modelSymbol=Symbol(\"mongoose#Model\"),e.objectIdSymbol=Symbol(\"mongoose#ObjectId\"),e.populateModelSymbol=Symbol(\"mongoose.PopulateOptions#Model\"),e.schemaTypeSymbol=Symbol(\"mongoose#schemaType\"),e.sessionNewDocuments=Symbol(\"mongoose:ClientSession#newDocuments\"),e.scopeSymbol=Symbol(\"mongoose#Document#scope\"),e.validatorErrorSymbol=Symbol(\"mongoose:validatorError\")},function(t,e){t.exports=require(\"util\")},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(40).UUID,r=n(294),i=n(23),s=n(27),c=n(297),a=n(12),l=n(20),u=n(33),p=n(86),h=n(298),f=n(16),d=n(148),y=n(51),m=n(87),g=n(88),_=n(50),{trustedSymbol:b}=n(52);let O;function $(t){if(Array.isArray(t.populate)){const n=[];t.populate.forEach((function(t){if(/[\\s]/.test(t.path)){const o=Object.assign({},t);o.path.split(\" \").forEach((function(t){o.path=t,n.push(e.populate(o)[0])}))}else n.push(e.populate(t)[0])})),t.populate=e.populate(n)}else null!=t.populate&&\"object\"==typeof t.populate&&(t.populate=e.populate(t.populate));const n=[],o=t.path.split(\" \");null!=t.options&&(t.options=a(t.options));for(const e of o)n.push(new c(Object.assign({},t,{path:e})));return n}e.specialProperties=_,e.isMongooseArray=p.isMongooseArray,e.isMongooseDocumentArray=h.isMongooseDocumentArray,e.registerMongooseArray=p.registerMongooseArray,e.registerMongooseDocumentArray=h.registerMongooseDocumentArray,e.toCollectionName=function(t,e){return\"system.profile\"===t||\"system.indexes\"===t?t:\"function\"==typeof e?e(t):t},e.deepEqual=function t(n,o){if(n===o)return!0;if(\"object\"!=typeof n||\"object\"!=typeof o)return n===o;if(n instanceof Date&&o instanceof Date)return n.getTime()===o.getTime();if(f(n,\"ObjectId\")&&f(o,\"ObjectId\")||f(n,\"Decimal128\")&&f(o,\"Decimal128\"))return n.toString()===o.toString();if(n instanceof RegExp&&o instanceof RegExp)return n.source===o.source&&n.ignoreCase===o.ignoreCase&&n.multiline===o.multiline&&n.global===o.global&&n.dotAll===o.dotAll&&n.unicode===o.unicode&&n.sticky===o.sticky&&n.hasIndices===o.hasIndices;if(null==n||null==o)return!1;if(n.prototype!==o.prototype)return!1;if(n instanceof Map||o instanceof Map)return n instanceof Map&&o instanceof Map&&(t(Array.from(n.keys()),Array.from(o.keys()))&&t(Array.from(n.values()),Array.from(o.values())));if(n instanceof Number&&o instanceof Number)return n.valueOf()===o.valueOf();if(Buffer.isBuffer(n))return e.buffer.areEqual(n,o);if(Array.isArray(n)||Array.isArray(o)){if(!Array.isArray(n)||!Array.isArray(o))return!1;const e=n.length;if(e!==o.length)return!1;for(let r=0;r<e;++r)if(!t(n[r],o[r]))return!1;return!0}null!=n.$__?n=n._doc:y(n)&&(n=n.toObject()),null!=o.$__?o=o._doc:y(o)&&(o=o.toObject());const r=Object.keys(n),i=Object.keys(o),s=r.length;if(s!==i.length)return!1;for(let t=s-1;t>=0;t--)if(r[t]!==i[t])return!1;for(const e of r)if(!t(n[e],o[e]))return!1;return!0},e.last=function(t){if(t.length>0)return t[t.length-1]},\n/*!\n * ignore\n */\ne.promiseOrCallback=m,\n/*!\n * ignore\n */\ne.cloneArrays=function(t){return Array.isArray(t)?t.map(t=>e.cloneArrays(t)):t},\n/*!\n * ignore\n */\ne.omit=function(t,e){if(null==e)return Object.assign({},t);Array.isArray(e)||(e=[e]);const n=Object.assign({},t);for(const t of e)delete n[t];return n},e.options=function(t,e){const n=Object.keys(t);let o,r=n.length;for(e=e||{};r--;)o=n[r],o in e||(e[o]=t[o]);return e},e.merge=function t(n,o,r,i){r=r||{};const c=Object.keys(o);let a=0;const l=c.length;let u;o[b]&&(n[b]=o[b]),i=i||\"\";const p=r.omitNested||{};for(;a<l;)if(u=c[a++],!(r.omit&&r.omit[u]||p[i]||_.has(u)))if(null==n[u])n[u]=o[u];else if(e.isObject(o[u])){if(e.isObject(n[u])||(n[u]={}),null!=o[u]){if(r.isDiscriminatorSchemaMerge&&o[u].$isSingleNested&&n[u].$isMongooseDocumentArray||o[u].$isMongooseDocumentArray&&n[u].$isSingleNested)continue;if(o[u].instanceOfSchema){n[u].instanceOfSchema?g(n[u],o[u].clone(),r.isDiscriminatorSchemaMerge):n[u]=o[u].clone();continue}if(f(o[u],\"ObjectId\")){n[u]=new s(o[u]);continue}}t(n[u],o[u],r,i?i+\".\"+u:u)}else r.overwrite&&(n[u]=o[u])},e.toObject=function t(o){let r;if(O||(O=n(17)),null==o)return o;if(o instanceof O)return o.toObject();if(Array.isArray(o)){r=[];for(const e of o)r.push(t(e));return r}if(e.isPOJO(o)){r={},o[b]&&(r[b]=o[b]);for(const e of Object.keys(o))_.has(e)||(r[e]=t(o[e]));return r}return o},e.isObject=u,e.isPOJO=n(149),e.isNonBuiltinObject=function(t){return!(\"object\"!=typeof t||e.isNativeObject(t)||e.isMongooseType(t)||t instanceof o||null==t)},e.isNativeObject=function(t){return Array.isArray(t)||t instanceof Date||t instanceof Boolean||t instanceof Number||t instanceof String},e.isEmptyObject=function(t){return null!=t&&\"object\"==typeof t&&0===Object.keys(t).length},e.hasKey=function(t,n){const o=Object.keys(t);for(const r of o){if(r===n)return!0;if(e.isPOJO(t[r])&&e.hasKey(t[r],n))return!0}return!1},e.tick=function(t){if(\"function\"==typeof t)return function(){try{t.apply(this,arguments)}catch(t){l((function(){throw t}))}}},e.isMongooseType=function(t){return f(t,\"ObjectId\")||f(t,\"Decimal128\")||t instanceof Buffer},e.isMongooseObject=y,e.expires=function(t){t&&\"Object\"===t.constructor.name&&\"expires\"in t&&(t.expireAfterSeconds=\"string\"!=typeof t.expires?t.expires:Math.round(r(t.expires)/1e3),delete t.expires)},e.populate=function(t,n,o,r,i,s,a,l){let u=null;if(1===arguments.length){if(t instanceof c)return t._docs=[],t._childDocs=[],[t];if(Array.isArray(t)){return p(t).map(t=>e.populate(t)[0])}u=e.isObject(t)?Object.assign({},t):{path:t}}else u=\"object\"==typeof o?{path:t,select:n,match:o,options:r}:{path:t,select:n,model:o,match:r,options:i,populate:s,justOne:a,count:l};if(\"string\"!=typeof u.path)throw new TypeError(\"utils.populate: invalid path. Expected string. Got typeof `\"+typeof t+\"`\");return $(u);function p(t){const e=[];return t.forEach((function(t){if(/[\\s]/.test(t.path)){t.path.split(\" \").forEach((function(n){const o=Object.assign({},t);o.path=n,e.push(o)}))}else e.push(t)})),e}},e.getValue=function(t,e,n){return i.get(t,e,\"_doc\",n)},e.setValue=function(t,e,n,o,r){i.set(t,e,n,\"_doc\",o,r)},e.object={},e.object.vals=function(t){const e=Object.keys(t);let n=e.length;const o=[];for(;n--;)o.push(t[e[n]]);return o},e.object.shallowCopy=e.options;const w=Object.prototype.hasOwnProperty;e.object.hasOwnProperty=function(t,e){return w.call(t,e)},e.isNullOrUndefined=function(t){return null==t},\n/*!\n * ignore\n */\ne.array={},e.array.flatten=function t(e,n,o){return o||(o=[]),e.forEach((function(e){Array.isArray(e)?t(e,n,o):n&&!n(e)||o.push(e)})),o};\n/*!\n * ignore\n */\nconst v=Object.prototype.hasOwnProperty;e.hasUserDefinedProperty=function(t,n){if(null==t)return!1;if(Array.isArray(n)){for(const o of n)if(e.hasUserDefinedProperty(t,o))return!0;return!1}if(v.call(t,n))return!0;if(\"object\"==typeof t&&n in t){const e=t[n];return e!==Object.prototype[n]&&e!==Array.prototype[n]}return!1};\n/*!\n * ignore\n */\nconst E=Math.pow(2,32)-1;e.isArrayIndex=function(t){return\"number\"==typeof t?t>=0&&t<=E:\"string\"==typeof t&&(!!/^\\d+$/.test(t)&&((t=+t)>=0&&t<=E))},e.array.unique=function(t){const e=new Set,n=new Set,o=[];for(const r of t)if(\"number\"==typeof r||\"string\"==typeof r||null==r){if(e.has(r))continue;o.push(r),e.add(r)}else if(f(r,\"ObjectId\")){if(n.has(r.toString()))continue;o.push(r),n.add(r.toString())}else o.push(r);return o},e.buffer={},e.buffer.areEqual=function(t,e){if(!Buffer.isBuffer(t))return!1;if(!Buffer.isBuffer(e))return!1;if(t.length!==e.length)return!1;for(let n=0,o=t.length;n<o;++n)if(t[n]!==e[n])return!1;return!0},e.getFunctionName=d,e.decorate=function(t,e){for(const n in e)_.has(n)||(t[n]=e[n])},e.mergeClone=function(t,n){y(n)&&(n=n.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1}));const o=Object.keys(n),r=o.length;let i,s=0;for(;s<r;)if(i=o[s++],!_.has(i))if(void 0===t[i])t[i]=a(n[i],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{let o=n[i];if(null==o||!o.valueOf||o instanceof Date||(o=o.valueOf()),e.isObject(o)){let n=o;y(o)&&!o.isMongooseBuffer&&(n=n.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1})),o.isMongooseBuffer&&(n=Buffer.from(n)),e.mergeClone(t[i],n)}else t[i]=a(o,{flattenDecimals:!1})}},e.each=function(t,e){for(const n of t)e(n)},\n/*!\n * ignore\n */\ne.getOption=function(t){const e=Array.prototype.slice.call(arguments,1);for(const n of e)if(null!=n&&null!=n[t])return n[t];return null},\n/*!\n * ignore\n */\ne.noop=function(){},e.errorToPOJO=function(t){if(!(t instanceof Error))throw new Error(\"`error` must be `instanceof Error`.\");const e={};for(const n of Object.getOwnPropertyNames(t))e[n]=t[n];return e},\n/*!\n * ignore\n */\ne.warn=function(t){return process.emitWarning(t,{code:\"MONGOOSE\"})},e.injectTimestampsOption=function(t,e){null!=e&&(t.timestamps=e)}},,,,,function(t,e){t.exports=require(\"events\")},function(t,e,n){\"use strict\";const o=n(11);\n/*!\n * Module exports.\n */t.exports=o,o.messages=n(299),o.Messages=o.messages,o.DocumentNotFoundError=n(89),o.CastError=n(15),o.ValidationError=n(41),o.ValidatorError=n(151),o.VersionError=n(152),o.ParallelSaveError=n(153),o.OverwriteModelError=n(154),o.MissingSchemaError=n(300),o.MongooseServerSelectionError=n(301),o.DivergentArrayError=n(155),o.StrictModeError=n(34),o.StrictPopulateError=n(156)},function(t,e,n){\"use strict\";function o(t,e){return null==t?t:t instanceof Map?t.get(e):t[e]}t.exports=function(t,e,n){let r,i=!1;if(\"string\"==typeof e){if(-1===e.indexOf(\".\")){const r=o(t,e);return null==r?n:r}r=e.split(\".\")}else if(i=!0,r=e,1===r.length){const e=o(t,r[0]);return null==e?n:e}let s=e,c=t;for(const t of r){if(null==c)return n;if(!i&&null!=c[s])return c[s];c=o(c,t),i||(s=s.substr(t.length+1))}return null==c?n:c}},function(t,e,n){\"use strict\";\n/*!\n * ignore\n */class o extends Error{}Object.defineProperty(o.prototype,\"name\",{value:\"MongooseError\"}),t.exports=o},function(t,e,n){\"use strict\";const o=n(85),r=n(27),i=n(50),s=n(51),c=n(148),a=n(16),l=n(86).isMongooseArray,u=n(33),p=n(149),h=n(1),f=n(52).trustedSymbol;function d(t,e,n){if(null==t)return t;if(Array.isArray(t))return function(t,e){let n=0;const o=t.length,r=new Array(o);for(n=0;n<o;++n)r[n]=d(t[n],e,!0);return r}(l(t)?t.__array:t,e);if(s(t)){e&&e._skipSingleNestedGetters&&t.$isSingleNested&&(e=Object.assign({},e,{getters:!1}));const n=t.$isSingleNested;if(p(t)&&null!=t.$__&&null!=t._doc)return t._doc;let o;if(o=e&&e.json&&\"function\"==typeof t.toJSON?t.toJSON(e):t.toObject(e),e&&e.minimize&&n&&0===Object.keys(o).length)return;return o}const i=t.constructor;if(i)switch(c(i)){case\"Object\":return y(t,e,n);case\"Date\":return new i(+t);case\"RegExp\":return function(t){const e=new RegExp(t.source,t.flags);e.lastIndex!==t.lastIndex&&(e.lastIndex=t.lastIndex);return e}(t)}return a(t,\"ObjectId\")?new r(t.id):a(t,\"Decimal128\")?e&&e.flattenDecimals?t.toJSON():o.fromString(t.toString()):!i&&u(t)?y(t,e,n):\"object\"==typeof t&&t[h.schemaTypeSymbol]?t.clone():e&&e.bson&&\"function\"==typeof t.toBSON?t:\"function\"==typeof t.valueOf?t.valueOf():y(t,e,n)}\n/*!\n * ignore\n */\nfunction y(t,e,n){const o=e&&e.minimize,r=e&&e.omitUndefined,s=e&&e._seen,c={};let a;if(s&&s.has(t))return s.get(t);s&&s.set(t,c),f in t&&(c[f]=t[f]);let l=0,u=\"\";const p=Object.keys(t),h=p.length;for(l=0;l<h;++l){if(i.has(u=p[l]))continue;const n=d(t[u],e,!1);!1!==o&&!r||void 0!==n?!0===o&&void 0===n||(a||(a=!0),c[u]=n):delete c[u]}return o&&!n?a&&c:c}t.exports=d},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(9),r=n(19),i=n(90),s=n(157),c=n(12),a=n(305),l=n(306),u=n(307),p=n(20),h=n(1).schemaTypeSymbol,f=n(3),d=n(1).validatorErrorSymbol,y=n(1).documentIsModified,m=n(1).populateModelSymbol,g=o.CastError,_=o.ValidatorError,b={_skipMarkModified:!0};function O(t,e,n){this[h]=!0,this.path=t,this.instance=n,this.validators=[],this.getters=this.constructor.hasOwnProperty(\"getters\")?this.constructor.getters.slice():[],this.setters=[],this.splitPath(),e=e||{};const o=this.constructor.defaultOptions||{},i=Object.keys(o);for(const t of i)o.hasOwnProperty(t)&&!Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=o[t]);null==e.select&&delete e.select;const s=this.OptionsConstructor||r;this.options=new s(e),this._index=null,f.hasUserDefinedProperty(this.options,\"immutable\")&&(this.$immutable=this.options.immutable,a(this));const c=Object.keys(this.options);for(const t of c)if(\"cast\"!==t){if(f.hasUserDefinedProperty(this.options,t)&&\"function\"==typeof this[t]){if(\"index\"===t&&this._index){if(!1===e.index){const t=this._index;if(\"object\"==typeof t&&null!=t){if(t.unique)throw new Error('Path \"'+this.path+'\" may not have `index` set to false and `unique` set to true');if(t.sparse)throw new Error('Path \"'+this.path+'\" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}const n=e[t];if(\"default\"===t){this.default(n);continue}const o=Array.isArray(n)?n:[n];this[t].apply(this,o)}}else this.castFunction(this.options[t]);Object.defineProperty(this,\"$$context\",{enumerable:!1,configurable:!1,writable:!0,value:null})}function $(t,e){if(void 0!==t&&!t){const t=new(e.ErrorConstructor||_)(e);return t[d]=!0,t}}\n/*!\n * ignore\n */\nfunction w(t,e){return this.castForQuery(null,t,e)}\n/*!\n * ignore\n */function v(t,e){const n=this;return Array.isArray(t)?t.map((function(t){return Array.isArray(t)&&0===t.length?t:n.castForQuery(null,t,e)})):[this.castForQuery(null,t,e)]}\n/*!\n * ignore\n */O.prototype.OptionsConstructor=r,O.prototype.path,O.prototype.validators,O.prototype.isRequired,O.prototype.splitPath=function(){return null!=this._presplitPath?this._presplitPath:null!=this.path?(this._presplitPath=-1===this.path.indexOf(\".\")?[this.path]:this.path.split(\".\"),this._presplitPath):void 0},O.cast=function(t){return 0===arguments.length||(!1===t&&(t=t=>t),this._cast=t),this._cast},O.prototype.castFunction=function(t){return 0===arguments.length||(!1===t&&(t=this.constructor._defaultCaster||(t=>t)),this._castFunction=t),this._castFunction},O.prototype.cast=function(){throw new Error(\"Base SchemaType class does not implement a `cast()` function\")},O.set=function(t,e){this.hasOwnProperty(\"defaultOptions\")||(this.defaultOptions=Object.assign({},this.defaultOptions)),this.defaultOptions[t]=e},O.get=function(t){this.getters=this.hasOwnProperty(\"getters\")?this.getters:[],this.getters.push(t)},O.prototype.default=function(t){if(1===arguments.length){if(void 0===t)return void(this.defaultValue=void 0);if(null!=t&&t.instanceOfSchema)throw new o(\"Cannot set default value of path `\"+this.path+\"` to a mongoose Schema instance.\");return this.defaultValue=t,this.defaultValue}return arguments.length>1&&(this.defaultValue=[...arguments]),this.defaultValue},O.prototype.index=function(t){return this._index=t,f.expires(this._index),this},O.prototype.unique=function(t){if(!1===this._index){if(!t)return;throw new Error('Path \"'+this.path+'\" may not have `index` set to false and `unique` set to true')}return this.options.hasOwnProperty(\"index\")||!1!==t?(null==this._index||!0===this._index?this._index={}:\"string\"==typeof this._index&&(this._index={type:this._index}),this._index.unique=t,this):this},O.prototype.text=function(t){if(!1===this._index){if(!t)return this;throw new Error('Path \"'+this.path+'\" may not have `index` set to false and `text` set to true')}return this.options.hasOwnProperty(\"index\")||!1!==t?(null===this._index||void 0===this._index||\"boolean\"==typeof this._index?this._index={}:\"string\"==typeof this._index&&(this._index={type:this._index}),this._index.text=t,this):this},O.prototype.sparse=function(t){if(!1===this._index){if(!t)return this;throw new Error('Path \"'+this.path+'\" may not have `index` set to false and `sparse` set to true')}return this.options.hasOwnProperty(\"index\")||!1!==t?(null==this._index||\"boolean\"==typeof this._index?this._index={}:\"string\"==typeof this._index&&(this._index={type:this._index}),this._index.sparse=t,this):this},O.prototype.immutable=function(t){return this.$immutable=t,a(this),this},O.prototype.transform=function(t){return this.options.transform=t,this},O.prototype.set=function(t){if(\"function\"!=typeof t)throw new TypeError(\"A setter must be a function.\");return this.setters.push(t),this},O.prototype.get=function(t){if(\"function\"!=typeof t)throw new TypeError(\"A getter must be a function.\");return this.getters.push(t),this},O.prototype.validate=function(t,e,n){if(\"function\"==typeof t||t&&\"RegExp\"===f.getFunctionName(t.constructor)){let r;return\"function\"==typeof e?(r={validator:t,message:e},r.type=n||\"user defined\"):e instanceof Object&&!n?(r=u(e)?Object.assign({},e):c(e),r.message||(r.message=r.msg),r.validator=t,r.type=r.type||\"user defined\"):(null==e&&(e=o.messages.general.default),n||(n=\"user defined\"),r={message:e,type:n,validator:t}),this.validators.push(r),this}let r,i,s;for(r=0,i=arguments.length;r<i;r++){if(s=arguments[r],!f.isPOJO(s)){throw new Error(\"Invalid validator. Received (\"+typeof s+\") \"+s+\". See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()\")}this.validate(s.validator,s)}return this},O.prototype.required=function(t,e){let n={};if(arguments.length>0&&null==t)return this.validators=this.validators.filter((function(t){return t.validator!==this.requiredValidator}),this),this.isRequired=!1,delete this.originalRequiredValue,this;if(\"object\"==typeof t&&(n=t,e=n.message||e,t=t.isRequired),!1===t)return this.validators=this.validators.filter((function(t){return t.validator!==this.requiredValidator}),this),this.isRequired=!1,delete this.originalRequiredValue,this;const r=this;this.isRequired=!0,this.requiredValidator=function(e){const n=this&&this.$__&&this.$__.cachedRequired;if(null!=n&&!this.$__isSelected(r.path)&&!this[y](r.path))return!0;if(null!=n&&r.path in n){const t=!n[r.path]||r.checkRequired(e,this);return delete n[r.path],t}return\"function\"==typeof t&&!t.apply(this)||r.checkRequired(e,this)},this.originalRequiredValue=t,\"string\"==typeof t&&(e=t,t=void 0);const i=e||o.messages.general.required;return this.validators.unshift(Object.assign({},n,{validator:this.requiredValidator,message:i,type:\"required\"})),this},O.prototype.ref=function(t){return this.options.ref=t,this},O.prototype.getDefault=function(t,e,n){let o;if(o=\"function\"==typeof this.defaultValue?this.defaultValue===Date.now||this.defaultValue===Array||\"objectid\"===this.defaultValue.name.toLowerCase()?this.defaultValue.call(t):this.defaultValue.call(t,t):this.defaultValue,null!=o){if(\"object\"!=typeof o||this.options&&this.options.shared||(o=c(o)),n&&n.skipCast)return this._applySetters(o,t);const r=this.applySetters(o,t,e,void 0,b);return r&&!Array.isArray(r)&&r.$isSingleNested&&(r.$__parent=t),r}return o},O.prototype._applySetters=function(t,e,n,o,r){let i=t;if(n)return i;const s=this.setters;for(let t=s.length-1;t>=0;t--)i=s[t].call(e,i,o,this,r);return i},\n/*!\n * ignore\n */\nO.prototype._castNullish=function(t){return t},O.prototype.applySetters=function(t,e,n,o,r){let i=this._applySetters(t,e,n,o,r);return null==i?this._castNullish(i):(i=this.cast(i,e,n,o,r),i)},O.prototype.applyGetters=function(t,e){let n=t;const o=this.getters,r=o.length;if(0===r)return n;for(let t=0;t<r;++t)n=o[t].call(e,n,this);return n},O.prototype.select=function(t){return this.selected=!!t,this},O.prototype.doValidate=function(t,e,n,o){let r=!1;const i=this.path,s=this.validators.filter(t=>\"object\"==typeof t&&null!==t);let a=s.length;if(!a)return e(null);for(let e=0,a=s.length;e<a&&!r;++e){const r=s[e],a=r.validator;let p;const h=u(r)?Object.assign({},r):c(r);if(h.path=o&&o.path?o.path:i,h.value=t,a instanceof RegExp)l(a.test(t),h,n);else if(\"function\"==typeof a)if(void 0!==t||a===this.requiredValidator){try{p=h.propsParameter?a.call(n,t,h):a.call(n,t)}catch(t){p=!1,h.reason=t,t.message&&(h.message=t.message)}null!=p&&\"function\"==typeof p.then?p.then((function(t){l(t,h,n)}),(function(t){h.reason=t,h.message=t.message,p=!1,l(p,h,n)})):l(p,h,n)}else l(!0,h,n)}function l(t,n,o){if(!r)if(void 0===t||t)--a<=0&&p((function(){e(null)}));else{const t=n.ErrorConstructor||_;r=new t(n,o),r[d]=!0,p((function(){e(r)}))}}},O.prototype.doValidateSync=function(t,e,n){const o=this.path;if(!this.validators.length)return null;let r=this.validators;if(void 0===t){if(0===this.validators.length||\"required\"!==this.validators[0].type)return null;r=[this.validators[0]]}let i=null,s=0;const a=r.length;for(s=0;s<a;++s){const a=r[s];if(null===a||\"object\"!=typeof a)continue;const p=a.validator,h=u(a)?Object.assign({},a):c(a);h.path=n&&n.path?n.path:o,h.value=t;let f=!1;if(!l(p))if(p instanceof RegExp)i=$(p.test(t),h);else if(\"function\"==typeof p){try{f=h.propsParameter?p.call(e,t,h):p.call(e,t)}catch(t){f=!1,h.reason=t}if((null==f||\"function\"!=typeof f.then)&&(i=$(f,h),i))break}}return i},O._isRef=function(t,e,n,o){let r=o&&t.options&&(t.options.ref||t.options.refPath);if(!r&&n&&null!=n.$__){const e=n.$__fullPath(t.path,!0),o=n.ownerDocument();r=null!=e&&o.$populated(e)||n.$populated(t.path)}return!!r&&(null==e||(!(Buffer.isBuffer(e)||\"Binary\"===e._bsontype||!f.isObject(e))||o))},\n/*!\n * ignore\n */\nO.prototype._castRef=function(t,e,n){if(null==t)return t;if(null!=t.$__)return t.$__.wasPopulated=t.$__.wasPopulated||!0,t;if(Buffer.isBuffer(t)||!f.isObject(t)){if(n)return t;throw new g(this.instance,t,this.path,null,this)}const o=e.$__fullPath(this.path,!0),r=e.ownerDocument().$populated(o,!0);let i=t;return e.$__.populated&&e.$__.populated[o]&&e.$__.populated[o].options&&e.$__.populated[o].options.options&&e.$__.populated[o].options.options.lean||(i=new r.options[m](t),i.$__.wasPopulated=!0),i},O.prototype.$conditionalHandlers={$all:function(t,e){const n=this;return Array.isArray(t)?t.map((function(t){return n.castForQuery(null,t,e)})):[this.castForQuery(null,t,e)]},$eq:w,$in:v,$ne:w,$nin:v,$exists:i,$type:s},O.prototype.castForQuery=function(t,e,n){let o;if(null!=t){if(o=this.$conditionalHandlers[t],!o)throw new Error(\"Can't use \"+t);return o.call(this,e,n)}return this.applySetters(e,n)},O.checkRequired=function(t){return 0!==arguments.length&&(this._checkRequired=t),this._checkRequired},O.prototype.checkRequired=function(t){return null!=t},O.prototype.clone=function(){const t=Object.assign({},this.options),e=new this.constructor(this.path,t,this.instance);return e.validators=this.validators.slice(),void 0!==this.requiredValidator&&(e.requiredValidator=this.requiredValidator),void 0!==this.defaultValue&&(e.defaultValue=this.defaultValue),void 0!==this.$immutable&&void 0===this.options.immutable&&(e.$immutable=this.$immutable,a(e)),void 0!==this._index&&(e._index=this._index),void 0!==this.selected&&(e.selected=this.selected),void 0!==this.isRequired&&(e.isRequired=this.isRequired),void 0!==this.originalRequiredValue&&(e.originalRequiredValue=this.originalRequiredValue),e.getters=this.getters.slice(),e.setters=this.setters.slice(),e},\n/*!\n * Module exports.\n */\nt.exports=e=O,e.CastError=g,e.ValidatorError=_},function(t,e,n){\"use strict\";t.exports=function(t){if(null!=t&&\"function\"==typeof t.constructor)return t.constructor.name}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(11),r=n(2);class i extends o{constructor(t,e,n,o,r){if(arguments.length>0){const i=s(e),u=c(e);super(l(null,t,i,n,a(r),u,o)),this.init(t,e,n,o,r)}else super(l())}toJSON(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}\n/*!\n   * ignore\n   */init(t,e,n,o,r){this.stringValue=s(e),this.messageFormat=a(r),this.kind=t,this.value=e,this.path=n,this.reason=o,this.valueType=c(e)}copy(t){this.messageFormat=t.messageFormat,this.stringValue=t.stringValue,this.kind=t.kind,this.value=t.value,this.path=t.path,this.reason=t.reason,this.message=t.message,this.valueType=t.valueType}\n/*!\n   * ignore\n   */setModel(t){this.model=t,this.message=l(t,this.kind,this.stringValue,this.path,this.messageFormat,this.valueType)}}function s(t){let e=r.inspect(t);return e=e.replace(/^'|'$/g,'\"'),e.startsWith('\"')||(e='\"'+e+'\"'),e}function c(t){if(null==t)return\"\"+t;const e=typeof t;return\"object\"!==e||\"function\"!=typeof t.constructor?e:t.constructor.name}function a(t){const e=t&&t.options&&t.options.cast||null;if(\"string\"==typeof e)return e}\n/*!\n * ignore\n */function l(t,e,n,o,r,i,s){if(null!=r){let i=r.replace(\"{KIND}\",e).replace(\"{VALUE}\",n).replace(\"{PATH}\",o);return null!=t&&(i=i.replace(\"{MODEL}\",t.modelName)),i}{let r=\"Cast to \"+e+\" failed for value \"+n+(i?\" (type \"+i+\")\":\"\")+' at path \"'+o+'\"';return null!=t&&(r+=' for model \"'+t.modelName+'\"'),null!=s&&\"function\"==typeof s.constructor&&\"AssertionError\"!==s.constructor.name&&\"Error\"!==s.constructor.name&&(r+=' because of \"'+s.constructor.name+'\"'),r}}\n/*!\n * exports\n */Object.defineProperty(i.prototype,\"name\",{value:\"CastError\"}),t.exports=i},function(t,e,n){\"use strict\";t.exports=function(t,e){return\"object\"==typeof t&&null!==t&&t._bsontype===e}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(8).EventEmitter,r=n(292),i=n(9),s=n(42),c=n(158),a=n(159),l=n(308),u=n(68),p=n(34),h=n(41),f=n(151),d=n(179),y=n(103),m=n(169),g=n(12),_=n(106).compile,b=n(106).defineKey,O=n(56).flatten,$=n(349),w=n(10),v=n(350),E=n(351),A=n(98),S=n(20),j=n(57),x=n(74),P=n(2).inspect,k=n(35).internalToObjectOptions,M=n(180),C=n(23),D=n(58),N=n(3),T=n(353),I=N.deepEqual,R=N.isMongooseObject,F=n(1).arrayAtomicsBackupSymbol,B=n(1).arrayAtomicsSymbol,V=n(1).documentArrayParent,U=n(1).documentIsModified,L=n(1).documentModifiedPaths,q=n(1).documentSchemaSymbol,z=n(1).getSymbol,K=n(1).populateModelSymbol,W=n(1).scopeSymbol,Q=n(43).schemaMixedSymbol,H=n(109);let G,Y,J;const X=N.specialProperties;function Z(t,e,n,o){if(\"object\"==typeof n&&null!=n&&(n=(o=n).skipId),o=Object.assign({},o),null==this.$__schema){const t=N.isObject(e)&&!e.instanceOfSchema?new u(e):e;this.$__setSchema(t),e=n,n=o,o=arguments[4]||{}}if(this.$__=new r,null!=o.isNew&&!0!==o.isNew&&(this.$isNew=o.isNew),null!=o.priorDoc&&(this.$__.priorDoc=o.priorDoc),n&&(this.$__.skipId=n),null!=t&&\"object\"!=typeof t)throw new a(t,\"obj\",\"Document\");let i=!0;void 0!==o.defaults&&(this.$__.defaults=o.defaults,i=o.defaults);const s=this.$__schema;\"boolean\"==typeof e||\"throw\"===e?(!0!==e&&(this.$__.strictMode=e),e=void 0):!0!==s.options.strict&&(this.$__.strictMode=s.options.strict);const c=s.requiredPaths(!0);for(const t of c)this.$__.activePaths.require(t);let l=null;N.isPOJO(e)&&Object.keys(e).length>0&&(l=x(e),this.$__.selected=e,this.$__.exclude=l);const p=!1===l&&e?d(e):null;if(null==this._doc&&(this.$__buildDoc(t,e,n,l,p,!1),i&&y(this,e,l,p,!0,null)),t&&(this.$__original_set?this.$__original_set(t,void 0,!0,o):this.$set(t,void 0,!0,o),t instanceof Z&&(this.$isNew=t.$isNew)),o.willInit&&i?o.skipDefaults&&(this.$__.skipDefaults=o.skipDefaults):i&&y(this,e,l,p,!1,o.skipDefaults),!this.$__.strictMode&&t){const t=this;Object.keys(this._doc).forEach((function(e){e in s.tree||e in s.methods||e in s.virtuals||e.startsWith(\"$\")||b({prop:e,subprops:null,prototype:t})}))}ot(this)}Z.prototype.$isMongooseDocumentPrototype=!0,Object.defineProperty(Z.prototype,\"isNew\",{get:function(){return this.$isNew},set:function(t){this.$isNew=t}}),Object.defineProperty(Z.prototype,\"errors\",{get:function(){return this.$errors},set:function(t){this.$errors=t}}),\n/*!\n * ignore\n */\nZ.prototype.$isNew=!0,\n/*!\n * Document exposes the NodeJS event emitter API, so you can use\n * `on`, `once`, etc.\n */\nN.each([\"on\",\"once\",\"emit\",\"listeners\",\"removeListener\",\"setMaxListeners\",\"removeAllListeners\",\"addListener\"],(function(t){Z.prototype[t]=function(){if(!this.$__.emitter){if(\"emit\"===t)return;this.$__.emitter=new o,this.$__.emitter.setMaxListeners(0)}return this.$__.emitter[t].apply(this.$__.emitter,arguments)},Z.prototype[\"$\"+t]=Z.prototype[t]})),Z.prototype.constructor=Z;for(const t in o.prototype)Z[t]=o.prototype[t];\n/*!\n * ignore\n */\nfunction tt(t,e,n){if(null==t)return;$(t);const o=Object.keys(n.$__schema.paths),r=o.length,i=-1===e.indexOf(\".\")?[e]:e.split(\".\");for(let s=0;s<r;++s){let r=\"\";const c=o[s];if(!c.startsWith(e+\".\"))continue;const a=n.$__schema.paths[c],l=a.splitPath().slice(i.length),u=l.length;if(void 0===a.defaultValue)continue;let p=t;for(let t=0;t<u&&null!=p;++t){const o=l[t];if(t===u-1){if(void 0!==p[o])break;try{const t=a.getDefault(n,!1);void 0!==t&&(p[o]=t)}catch(t){n.invalidate(e+\".\"+r,t);break}break}r+=(r.length?\".\":\"\")+o,p[o]=p[o]||{},p=p[o]}}}\n/*!\n * ignore\n */\nfunction et(t){if(null==t)return!0;if(\"object\"!=typeof t||Array.isArray(t))return!1;for(const e of Object.keys(t))if(!et(t[e]))return!1;return!0}\n/*!\n * ignore\n */\nfunction nt(t,e,n){const o={};!\n/*!\n * ignore\n */\nfunction(t){const e=Object.keys(t.$__.activePaths.getStatePaths(\"require\"));let n=0;const o=e.length;for(n=0;n<o;++n){const o=e[n],r=t.$__schema.path(o);if(null!=r&&\"function\"==typeof r.originalRequiredValue){t.$__.cachedRequired=t.$__.cachedRequired||{};try{t.$__.cachedRequired[o]=r.originalRequiredValue.call(t,t)}catch(e){t.invalidate(o,e)}}}}(t);let r=new Set(Object.keys(t.$__.activePaths.getStatePaths(\"require\")).filter((function(e){return!(!t.$__isSelected(e)&&!t.$isModified(e))&&(null==t.$__.cachedRequired||!(e in t.$__.cachedRequired)||t.$__.cachedRequired[e])})));function i(t){r.add(t)}Object.keys(t.$__.activePaths.getStatePaths(\"init\")).forEach(i),Object.keys(t.$__.activePaths.getStatePaths(\"modify\")).forEach(i),Object.keys(t.$__.activePaths.getStatePaths(\"default\")).forEach(i);const s=t.$getAllSubdocs(),c=t.modifiedPaths();for(const e of s)if(e.$basePath){const n=e.$__fullPathWithIndexes();for(const t of r)(null==t||t.startsWith(n+\".\"))&&r.delete(t);!t.$isModified(n,c)||t.isDirectModified(n)||t.$isDefault(n)||(r.add(n),o[n]=!0)}for(const e of r){const n=t.$__schema.path(e);if(n){if(n.$isMongooseDocumentArray)for(const t of r)(null==t||t.startsWith(n.path+\".\"))&&r.delete(t);(n.caster||0!==n.validators.length)&&(!n.$isMongooseArray||n.$isMongooseDocumentArray||n.$embeddedSchemaType.$isMongooseArray||0!==n.validators.length||0!==n.$embeddedSchemaType.validators.length)||r.delete(e)}}for(const e of r)t.$__schema.singleNestedPaths.hasOwnProperty(e)&&r.delete(e);Array.isArray(e)?r=\n/*!\n * ignore\n */\nfunction(t,e){const n=new Set(e),o=new Map([]);for(const t of e){if(-1===t.indexOf(\".\"))continue;const e=t.split(\".\");let n=e[0];for(let r=1;r<e.length;++r)o.set(n,t),n=n+\".\"+e[r]}const r=new Set;for(const e of t)n.has(e)?r.add(e):o.has(e)&&r.add(o.get(e));return r}\n/*!\n * ignore\n */(r,e):Array.isArray(n)&&(r=function(t,e){return e=new Set(e),t=Array.from(t).filter(t=>!e.has(t)),new Set(t)}(r,n));for(const e of r){const n=t.$__schema.path(e);if(!n)continue;if(!n.$isMongooseArray||!Array.isArray(n)&&n.$isMongooseDocumentArray&&!(n&&n.schemaOptions&&n.schemaOptions.required))continue;if(n.$isMongooseArray&&!n.$isMongooseDocumentArray&&!n.$embeddedSchemaType.$isMongooseArray&&0===n.$embeddedSchemaType.validators.length)continue;a(t.$__getValue(e),r,e)}function a(t,e,n){if(null!=t){const o=t.length;for(let r=0;r<o;++r)Array.isArray(t[r])?a(t[r],e,n+\".\"+r):e.add(n+\".\"+r)}}const l={skipArrays:!0};for(const e of r)if(t.$__schema.nested[e]){let n=t.$__getValue(e);R(n)&&(n=n.toObject({transform:!1}));const o=O(n,e,l,t.$__schema);Object.keys(o).forEach(i)}for(const e of r){const n=t.$__schema.path(e);if(!n||!n.$isSchemaMap)continue;const o=t.$__getValue(e);if(null!=o)for(const t of o.keys())r.add(e+\".\"+t)}return r=Array.from(r),[r,o]}\n/*!\n * ignore\n */\n/*!\n * Runs queued functions\n */\nfunction ot(t){const e=t.$__schema&&t.$__schema.callQueue;if(e.length)for(const n of e)\"pre\"!==n[0]&&\"post\"!==n[0]&&\"on\"!==n[0]&&t[n[0]].apply(t,n[1])}\n/*!\n * ignore\n */\n/*!\n * Applies virtuals properties to `json`.\n */\nfunction rt(t,e,n,o){const r=t.$__schema,i=Object.keys(r.virtuals);let s=i.length;const c=s;let a,l,u,p=t._doc;const h=\"boolean\"!=typeof(o&&o.aliases)||o.aliases;let f=null;if(Array.isArray(n.virtuals))f=new Set(n.virtuals);else if(n.virtuals&&n.virtuals.pathsToSkip){f=new Set(i);for(let t=0;t<n.virtuals.pathsToSkip.length;t++)f.has(n.virtuals.pathsToSkip[t])&&f.delete(n.virtuals.pathsToSkip[t])}if(!p)return e;for(n=n||{},s=0;s<c;++s){if(a=i[s],null!=f&&!f.has(a))continue;if(!h&&r.aliases.hasOwnProperty(a))continue;if(l=a,null!=n.path){if(!a.startsWith(n.path+\".\"))continue;l=a.substring(n.path.length+1)}const o=l.split(\".\");if(u=g(t.get(a),n),void 0===u)continue;const c=o.length;p=e;for(let t=0;t<c-1;++t)p[o[t]]=p[o[t]]||{},p=p[o[t]];p[o[c-1]]=u}return e}function it(t,e){if(T(e))throw new Error(\"`transform` function must be synchronous, but the transform on path `\"+t+\"` returned a promise.\")}\n/*!\n * ignore\n */Z.prototype.$__schema,Z.prototype.schema,Object.defineProperty(Z.prototype,\"$locals\",{configurable:!1,enumerable:!1,get:function(){return null==this.$__.locals&&(this.$__.locals={}),this.$__.locals},set:function(t){this.$__.locals=t}}),Z.prototype.isNew,Object.defineProperty(Z.prototype,\"$where\",{configurable:!1,enumerable:!1,writable:!0}),Z.prototype.id,Z.prototype.$errors,Object.defineProperty(Z.prototype,\"$op\",{get:function(){return this.$__.op||null},set:function(t){this.$__.op=t}}),Z.prototype.$__buildDoc=function(t,e,n,o,r){const i={},s=Object.keys(this.$__schema.paths).filter(t=>!t.includes(\"$*\")),c=s.length;let a=0;for(;a<c;++a){const c=s[a];if(\"_id\"===c){if(n)continue;if(t&&\"_id\"in t)continue}const l=this.$__schema.paths[c].splitPath(),u=l.length,p=u-1;let h=\"\",f=i,d=!1;for(let t=0;t<u;++t){const n=l[t];if(h.length?h+=\".\"+n:h=n,!0===o){if(h in e)break}else if(!1===o&&e&&!d)if(h in e)d=!0;else if(!r[h])break;t<p&&(f=f[n]||(f[n]={}))}}this._doc=i},\n/*!\n * Converts to POJO when you use the document for querying\n */\nZ.prototype.toBSON=function(){return this.toObject(k)},Z.prototype.init=function(t,e,n){return\"function\"==typeof e&&(n=e,e=null),this.$__init(t,e),n&&n(null,this),this},Z.prototype.$init=function(){return this.constructor.prototype.init.apply(this,arguments)},Z.prototype.$__init=function(t,e){if(this.$isNew=!1,e=e||{},null!=t._id&&e.populated&&e.populated.length){const n=String(t._id);for(const o of e.populated)if(o.isVirtual?this.$populated(o.path,N.getValue(o.path,t),o):this.$populated(o.path,o._docs[n],o),null!=o._childDocs){for(const t of o._childDocs)null!=t&&null!=t.$__&&(t.$__.parent=this);o._childDocs=[]}}!function t(e,n,o,r,i){i=i||\"\",null!=n.$__&&(n=n._doc);const s=Object.keys(n),c=s.length;let a,l,u,p=0;const h=e.$__.strictMode,d=e.$__schema;for(;p<c;)y(p++);function y(c){if(u=s[c],l=i+u,a=d.path(l),!d.$isRootDiscriminator||e.$__isSelected(l))if(!a&&N.isPOJO(n[u]))o[u]||(o[u]={},h||u in d.tree||u in d.methods||u in d.virtuals||(e[u]=o[u])),t(e,n[u],o[u],r,l+\".\");else if(a){if(o.hasOwnProperty(u)&&void 0!==n[u]&&delete o[u],null===n[u])o[u]=a._castNullish(null);else if(void 0!==n[u]){const t=null==n[u].$__?null:n[u].$__.wasPopulated;if(a&&!t)try{if(r&&r.setters){const t=!1;o[u]=a.applySetters(n[u],e,t)}else o[u]=a.cast(n[u],e,!0)}catch(t){e.invalidate(t.path,new f({path:t.path,message:t.message,type:\"cast\",value:t.value,reason:t}))}else o[u]=n[u]}e.$isModified(l)||e.$__.activePaths.init(l)}else o[u]=n[u],h||i||(e[u]=n[u])}}(this,t,this._doc,e),M(this,e.populated),this.$emit(\"init\",this),this.constructor.emit(\"init\",this);const n=!1===this.$__.exclude&&this.$__.selected?d(this.$__.selected):null;return y(this,this.$__.selected,this.$__.exclude,n,!1,this.$__.skipDefaults),this},Z.prototype.updateOne=function(t,e,n){const o=this.constructor.updateOne({_id:this._id},t,e),r=this;return o.pre((function(t){r.constructor._middleware.execPre(\"updateOne\",r,[r],t)})),o.post((function(t){r.constructor._middleware.execPost(\"updateOne\",r,[r],{},t)})),null!=this.$session()&&(\"session\"in o.options||(o.options.session=this.$session())),null!=n?o.exec(n):o},Z.prototype.replaceOne=function(){const t=[...arguments];return t.unshift({_id:this._id}),this.constructor.replaceOne.apply(this.constructor,t)},Z.prototype.$session=function(t){if(0===arguments.length)return null!=this.$__.session&&this.$__.session.hasEnded?(this.$__.session=null,null):this.$__.session;if(null!=t&&t.hasEnded)throw new i(\"Cannot set a document's session to a session that has ended. Make sure you haven't called `endSession()` on the session you are passing to `$session()`.\");if(null!=t||null!=this.$__.session){if(this.$__.session=t,!this.$isSubdocument){const e=this.$getAllSubdocs();for(const n of e)n.$session(t)}return t}},Z.prototype.$timestamps=function(t){if(0===arguments.length)return null!=this.$__.timestamps?this.$__.timestamps:this.$__schema?this.$__schema.options.timestamps:void 0;const e=this.$timestamps();return t!==e&&(this.$__.timestamps=t),this},Z.prototype.overwrite=function(t){const e=Array.from(new Set(Object.keys(this._doc).concat(Object.keys(t))));for(const n of e)\"_id\"!==n&&(this.$__schema.options.versionKey&&n===this.$__schema.options.versionKey||this.$__schema.options.discriminatorKey&&n===this.$__schema.options.discriminatorKey||this.$set(n,t[n]));return this},Z.prototype.$set=function(t,e,n,o){N.isPOJO(n)&&(o=n,n=void 0);const r=o&&o.merge,a=n&&!0!==n,l=!0===n;let u,h,f,d,y,g=0;const _=o&&\"strict\"in o?o.strict:this.$__.strictMode;if(a&&(u=this.$__.adhocPaths||(this.$__.adhocPaths={}),u[t]=this.$__schema.interpretAsType(t,n,this.$__schema.options)),null==t)[t,e]=[e,t];else if(\"string\"!=typeof t){t instanceof Z&&(t=t.$__isNested?t.toObject():t._doc),null==t&&([t,e]=[e,t]),y=e?e+\".\":\"\",h=E(this.$__schema,t);const r=h.length,i=o&&o._skipMinimizeTopLevel||!1;if(0===r&&i)return delete o._skipMinimizeTopLevel,e&&this.$set(e,{}),this;for(let e=0;e<r;++e){d=h[e];const r=y+d;f=this.$__schema.pathType(r);const i=t[d];if(!0!==n||y||null==i||\"nested\"!==f||null==this._doc[d]?o=Object.assign({},o,{_skipMinimizeTopLevel:!1}):(delete this._doc[d],o=Object.assign({},o,{_skipMinimizeTopLevel:!0})),N.isNonBuiltinObject(i)&&\"nested\"===f)this.$set(y+d,t[d],l,Object.assign({},o,{_skipMarkModified:!0})),tt(this.$get(y+d),y+d,this);else if(_){if(l&&void 0===t[d]&&void 0!==this.$get(r))continue;if(\"adhocOrUndefined\"===f&&(f=v(this,r,{typeOnly:!0})),\"real\"===f||\"virtual\"===f){const e=t[d];this.$set(y+d,e,l,o)}else if(\"nested\"===f&&t[d]instanceof Z)this.$set(y+d,t[d].toObject({transform:!1}),l,o);else if(\"throw\"===_)throw\"nested\"===f?new c(d,t[d]):new p(d)}else void 0!==t[d]&&this.$set(y+d,t[d],l,o)}const s={},a=Object.keys(this.$__schema.tree);for(let t=0,e=a.length;t<e;++t)(d=a[t])&&this._doc.hasOwnProperty(d)&&(s[d]=void 0);return this._doc=Object.assign(s,this._doc),this}let b=this.$__schema.pathType(t);\"adhocOrUndefined\"===b&&(b=v(this,t,{typeOnly:!0})),e=A(e);const O=(()=>null!=this.$__.priorDoc?this.$__.priorDoc.$__getValue(t):l?void 0:this.$__getValue(t))();if(\"nested\"===b&&e){if(\"object\"==typeof e&&null!=e){if(null!=e.$__&&(e=e.toObject(k)),null==e)return this.invalidate(t,new i.CastError(\"Object\",e,t)),this;const n=null!=this.$__.savedState&&this.$__.savedState.hasOwnProperty(t);if(null!=this.$__.savedState&&!this.$isNew&&!this.$__.savedState.hasOwnProperty(t)){const e=this.$__getValue(t);this.$__.savedState[t]=e;const n=Object.keys(e||{});for(const o of n)this.$__.savedState[t+\".\"+o]=e[o]}if(r)return this.$set(e,t,l);this.$__setValue(t,null),m(this,t);const s=E(this.$__schema,e,t);this.$__setValue(t,{});for(const n of s)this.$set(t+\".\"+n,e[n],l,o);return null!=O&&N.deepEqual(n?this.$__.savedState[t]:O,e)?this.unmarkModified(t):this.markModified(t),this}return this.invalidate(t,new i.CastError(\"Object\",e,t)),this}let $;const w=-1===t.indexOf(\".\")?[t]:t.split(\".\");if(\"string\"==typeof this.$__schema.aliases[w[0]]&&(w[0]=this.$__schema.aliases[w[0]]),\"adhocOrUndefined\"===b&&_){let n;for(g=0;g<w.length;++g){const o=w.slice(0,g+1).join(\".\");if(g+1<w.length&&\"virtual\"===this.$__schema.pathType(o))return C.set(t,e,this),this;if($=this.$__schema.path(o),null!=$&&$ instanceof s){n=!0;break}}if(null==$&&($=v(this,t)),!n&&!$){if(\"throw\"===_)throw new p(t);return this}}else{if(\"virtual\"===b)return $=this.$__schema.virtualpath(t),$.applySetters(e,this),this;$=this.$__path(t)}let S,j=this._doc,x=\"\";for(g=0;g<w.length-1;++g)j=j[w[g]],x+=(0!==x.length?\".\":\"\")+w[g],j||(this.$set(x,{}),this.$__isSelected(x)||this.unmarkModified(x),j=this.$__getValue(x));if(w.length<=1)S=t;else{const e=w.length;for(g=0;g<e;++g){const t=w.slice(0,g+1).join(\".\");if(null===this.$get(t,null,{getters:!1})){S=t;break}}S||(S=t)}if(!$)return this.$__set(S,t,o,l,w,$,e,O),\"nested\"===b&&null==e&&m(this,t),this;if(($.$isSingleNested||$.$isMongooseArray)&&\n/*!\n * ignore\n */\nfunction(t,e){if(!t.$__.validationError)return;const n=Object.keys(t.$__.validationError.errors);for(const o of n)o.startsWith(e+\".\")&&delete t.$__.validationError.errors[o];0===Object.keys(t.$__.validationError.errors).length&&(t.$__.validationError=null)}\n/*!\n * ignore\n */(this,t),null!=e&&r&&$.$isSingleNested){e instanceof Z&&(e=e.toObject({virtuals:!1,transform:!1}));const n=Object.keys(e);for(const r of n)this.$set(t+\".\"+r,e[r],l,o);return this}let P=!0;try{const n=(()=>{if(null==$.options)return!1;if(!(e instanceof Z))return!1;const t=e.constructor,n=$.options.ref;if(null!=n&&(n===t.modelName||n===t.baseModelName))return!0;const o=$.options.refPath;if(null==o)return!1;const r=e.get(o);return r===t.modelName||r===t.baseModelName})();let r,i=!1;if(n&&e instanceof Z&&(!e.$__.wasPopulated||N.deepEqual(e.$__.wasPopulated.value,e._id))){const n=$&&$.$isSingleNested?$.cast(e,this):e._id;this.$populated(t,n,{[K]:e.constructor}),e.$__.wasPopulated={value:n},i=!0}const s=this.$__schema.options.typeKey;if($.options&&Array.isArray($.options[s])&&$.options[s].length&&$.options[s][0].ref&&\n/*!\n * ignore\n */\nfunction(t,e){if(!Array.isArray(t))return!1;if(0===t.length)return!1;for(const n of t){if(!(n instanceof Z))return!1;if(null==n.constructor.modelName)return!1;if(n.constructor.modelName!=e&&n.constructor.baseModelName!=e)return!1}return!0}(e,$.options[s][0].ref)){r={[K]:e[0].constructor},this.$populated(t,e.map((function(t){return t._id})),r);for(const t of e)t.$__.wasPopulated={value:t._id};i=!0}if(null!=this.$__schema.singleNestedPaths[t]||n&&$.$isSingleNested&&e.$__||(e=null!=o&&o.overwriteImmutable?$.applySetters(e,this,!1,O,{overwriteImmutable:!0}):$.applySetters(e,this,!1,O)),Array.isArray(e)&&!Array.isArray($)&&$.$isMongooseDocumentArray&&0!==e.length&&null!=e[0]&&null!=e[0].$__&&null!=e[0].$__.populated){const n=Object.keys(e[0].$__.populated);for(const o of n)this.$populated(t+\".\"+o,e.map(t=>t.$populated(o)),e[0].$__.populated[o].options);i=!0}if(!i&&this.$__.populated){if(Array.isArray(e)&&this.$__.populated[t])for(let t=0;t<e.length;++t)e[t]instanceof Z&&e.set(t,e[t]._id,!0);delete this.$__.populated[t]}null!=e&&$.$isSingleNested&&function(t,e,n){const o=e.schema;if(null==o)return;for(const e of Object.keys(o.paths)){const r=o.paths[e];if(null==r.$immutableSetter)continue;const i=null==n?void 0:n.$__getValue(e);r.$immutableSetter.call(t,i)}}(e,$,O),this.$markValid(t)}catch(n){n instanceof i.StrictModeError&&n.isImmutableError?this.invalidate(t,n):n instanceof i.CastError?(this.invalidate(n.path,n),n.$originalErrorPath&&this.invalidate(t,new i.CastError($.instance,e,t,n.$originalErrorPath))):this.invalidate(t,new i.CastError($.instance,e,t,n)),P=!1}if(P){let n=null,r=null;if(!l){const e=this.$isSubdocument?this.ownerDocument():this;n=e.$__.savedState,r=this.$isSubdocument?this.$__.fullPath+\".\"+t:t,e.$__saveInitialState(r)}this.$__set(S,t,o,l,w,$,e,O),null!=n&&n.hasOwnProperty(r)&&N.deepEqual(e,n[r])&&this.unmarkModified(t)}return $.$isSingleNested&&(this.isDirectModified(t)||null==e)&&m(this,t),this},Z.prototype.set=Z.prototype.$set,Z.prototype.$__shouldModify=function(t,e,n,o,r,i,s,c){return(!n||!n._skipMarkModified)&&(!!this.$isNew||(e in this.$__.activePaths.getStatePaths(\"modify\")||null==this.$__schema.singleNestedPaths[e]&&(void 0===s&&!this.$__isSelected(e)||(void 0!==s||!(e in this.$__.activePaths.getStatePaths(\"default\")))&&(!(this.$populated(e)&&s instanceof Z&&I(s._id,c))&&(!I(s,void 0!==c?c:N.getValue(e,this))||!(o||null==s||!(e in this.$__.activePaths.getStatePaths(\"default\"))||!I(s,i.getDefault(this,o))))))))},Z.prototype.$__set=function(t,e,o,r,i,s,c,a){J=J||n(54);this.$__shouldModify(t,e,o,r,i,s,c,a)?(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[e]&&(delete this.$__.primitiveAtomics[e],0===Object.keys(this.$__.primitiveAtomics).length&&delete this.$__.primitiveAtomics),this.markModified(t),Y||(Y=n(168)),c&&N.isMongooseArray(c)&&(c._registerAtomic(\"$set\",c),N.isMongooseDocumentArray(c)&&c.forEach((function(t){t&&t.__parentArray&&(t.__parentArray=c)})))):Array.isArray(c)&&Array.isArray(a)&&N.isMongooseArray(c)&&N.isMongooseArray(a)&&(c[B]=a[B],c[F]=a[F],N.isMongooseDocumentArray(c)&&c.forEach(t=>{t.isNew=!1}));let l=this._doc,u=0;const p=i.length;let h=\"\";for(;u<p;u++){const t=u+1===p;if(h+=h?\".\"+i[u]:i[u],X.has(i[u]))return;t?l instanceof Map?l.set(i[u],c):l[i[u]]=c:(N.isPOJO(l[i[u]])||l[i[u]]&&l[i[u]]instanceof J||l[i[u]]&&!Array.isArray(l[i[u]])&&l[i[u]].$isSingleNested||l[i[u]]&&Array.isArray(l[i[u]])||(l[i[u]]=l[i[u]]||{}),l=l[i[u]])}},Z.prototype.$__getValue=function(t){return N.getValue(t,this._doc)},Z.prototype.$inc=function(t,e){if(null==e&&(e=1),Array.isArray(t))return t.forEach(t=>this.$inc(t,e)),this;const n=this.$__path(t);if(null==n){if(\"throw\"===this.$__.strictMode)throw new p(t);if(!0===this.$__.strictMode)return this}else if(\"Number\"!==n.instance)return this.invalidate(t,new i.CastError(n.instance,e,t)),this;const o=this.$__getValue(t)||0;let r=!1,s=null,c=e;try{e=n.cast(e),s=n.applySetters(o+e,this),c=s-o,r=!0}catch(n){this.invalidate(t,new i.CastError(\"number\",e,t,n))}return r&&(this.$__.primitiveAtomics=this.$__.primitiveAtomics||{},this.$__.primitiveAtomics[t]={$inc:c},this.markModified(t),this.$__setValue(t,s)),this},Z.prototype.$__setValue=function(t,e){return N.setValue(t,e,this._doc),this},Z.prototype.get=function(t,e,n){let o;null==n&&(n={}),e&&(o=this.$__schema.interpretAsType(t,e,this.$__schema.options));const r=n.noDottedPath;let i=r?this.$__schema.paths[t]:this.$__path(t);if(null==i&&(i=this.$__schema.virtualpath(t),null!=i))return i.applyGetters(void 0,this);if(r){let e=this._doc[t];return o&&(e=o.cast(e)),null!=i&&!1!==n.getters?i.applyGetters(e,this):e}if(null!=i&&\"Mixed\"===i.instance){const e=this.$__schema.virtualpath(t);null!=e&&(i=e)}const s=-1!==t.indexOf(\".\");let c=this._doc;const a=s?t.split(\".\"):[t];\"string\"==typeof this.$__schema.aliases[a[0]]&&(a[0]=this.$__schema.aliases[a[0]]);for(let t=0,e=a.length;t<e;t++)c&&c._doc&&(c=c._doc),c=null==c?void 0:c instanceof Map?c.get(a[t],{getters:!1}):t===e-1?N.getValue(a[t],c):c[a[t]];if(o&&(c=o.cast(c)),null!=i&&!1!==n.getters)c=i.applyGetters(c,this);else if(this.$__schema.nested[t]&&n.virtuals)return rt(this,g(c)||{},{path:t});return c},\n/*!\n * ignore\n */\nZ.prototype[z]=Z.prototype.get,Z.prototype.$get=Z.prototype.get,Z.prototype.$__path=function(t){const e=this.$__.adhocPaths,n=e&&e.hasOwnProperty(t)?e[t]:null;return n||this.$__schema.path(t)},Z.prototype.markModified=function(t,e){this.$__saveInitialState(t),this.$__.activePaths.modify(t),null==e||this.$isSubdocument||(this.$__.pathsToScopes=this.$__pathsToScopes||{},this.$__.pathsToScopes[t]=e)},\n/*!\n * ignore\n */\nZ.prototype.$__saveInitialState=function(t){const e=this.$__.savedState,n=t;if(null!=e){const t=n.indexOf(\".\"),o=-1===t?n:n.slice(0,t);e.hasOwnProperty(o)||(e[o]=g(this.$__getValue(o)))}},Z.prototype.unmarkModified=function(t){this.$__.activePaths.init(t),null!=this.$__.pathsToScopes&&delete this.$__.pathsToScopes[t]},Z.prototype.$ignore=function(t){this.$__.activePaths.ignore(t)},Z.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.getStatePaths(\"modify\"))},Z.prototype.$isEmpty=function(t){const e={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(0!==arguments.length){const n=this.$get(t);return null==n||\"object\"==typeof n&&(N.isPOJO(n)?et(n):0===Object.keys(n.toObject(e)).length)}return 0===Object.keys(this.toObject(e)).length},Z.prototype.modifiedPaths=function(t){t=t||{};const e=Object.keys(this.$__.activePaths.getStatePaths(\"modify\")),n=new Set;let o=0,r=0;const i=e.length;for(o=0;o<i;++o){const i=e[o],s=H(i),c=s.length;for(r=0;r<c;++r)n.add(s[r]);if(!t.includeChildren)continue;let a=0,l=this.$get(i);if(\"object\"==typeof l&&null!==l){l._doc&&(l=l._doc);const t=l.length;if(Array.isArray(l))for(a=0;a<t;++a){const t=i+\".\"+a;if(!n.has(t)&&(n.add(t),null!=l[a]&&l[a].$__)){const e=l[a].modifiedPaths();let o=0;const r=e.length;for(o=0;o<r;++o)n.add(t+\".\"+e[o])}}else{const t=Object.keys(l);let e=0;const o=t.length;for(e=0;e<o;++e)n.add(i+\".\"+t[e])}}}return Array.from(n)},Z.prototype[L]=Z.prototype.modifiedPaths,Z.prototype.isModified=function(t,e){if(t){const n=Object.keys(this.$__.activePaths.getStatePaths(\"modify\"));if(0===n.length)return!1;Array.isArray(t)||(t=-1===t.indexOf(\" \")?[t]:t.split(\" \"));const o=e||this[L]();return t.some((function(t){return!!~o.indexOf(t)}))||t.some((function(t){return n.some((function(e){return e===t||t.startsWith(e+\".\")}))}))}return this.$__.activePaths.some(\"modify\")},Z.prototype.$isModified=Z.prototype.isModified,Z.prototype[U]=Z.prototype.isModified,Z.prototype.$isDefault=function(t){if(null==t)return this.$__.activePaths.some(\"default\");if(\"string\"==typeof t&&-1===t.indexOf(\" \"))return this.$__.activePaths.getStatePaths(\"default\").hasOwnProperty(t);let e=t;return Array.isArray(e)||(e=e.split(\" \")),e.some(t=>this.$__.activePaths.getStatePaths(\"default\").hasOwnProperty(t))},Z.prototype.$isDeleted=function(t){return 0===arguments.length?!!this.$__.isDeleted:(this.$__.isDeleted=!!t,this)},Z.prototype.isDirectModified=function(t){if(null==t)return this.$__.activePaths.some(\"modify\");if(\"string\"==typeof t&&-1===t.indexOf(\" \"))return this.$__.activePaths.getStatePaths(\"modify\").hasOwnProperty(t);let e=t;return Array.isArray(e)||(e=e.split(\" \")),e.some(t=>this.$__.activePaths.getStatePaths(\"modify\").hasOwnProperty(t))},Z.prototype.isInit=function(t){if(null==t)return this.$__.activePaths.some(\"init\");if(\"string\"==typeof t&&-1===t.indexOf(\" \"))return this.$__.activePaths.getStatePaths(\"init\").hasOwnProperty(t);let e=t;return Array.isArray(e)||(e=e.split(\" \")),e.some(t=>this.$__.activePaths.getStatePaths(\"init\").hasOwnProperty(t))},Z.prototype.isSelected=function(t){if(null==this.$__.selected)return!0;if(!t)return!1;if(\"_id\"===t)return 0!==this.$__.selected._id;if(-1!==t.indexOf(\" \")&&(t=t.split(\" \")),Array.isArray(t))return t.some(t=>this.$__isSelected(t));const e=Object.keys(this.$__.selected);let n=null;if(1===e.length&&\"_id\"===e[0])return 0===this.$__.selected._id;for(const t of e)if(\"_id\"!==t&&j(this.$__.selected[t])){n=!!this.$__.selected[t];break}if(null===n)return!0;if(t in this.$__.selected)return n;const o=t+\".\";for(const t of e)if(\"_id\"!==t){if(t.startsWith(o))return n||t!==o;if(o.startsWith(t+\".\"))return n}return!n},Z.prototype.$__isSelected=Z.prototype.isSelected,Z.prototype.isDirectSelected=function(t){if(null==this.$__.selected)return!0;if(\"_id\"===t)return 0!==this.$__.selected._id;if(-1!==t.indexOf(\" \")&&(t=t.split(\" \")),Array.isArray(t))return t.some(t=>this.isDirectSelected(t));const e=Object.keys(this.$__.selected);let n=null;if(1===e.length&&\"_id\"===e[0])return 0===this.$__.selected._id;for(const t of e)if(\"_id\"!==t&&j(this.$__.selected[t])){n=!!this.$__.selected[t];break}return null===n||(this.$__.selected.hasOwnProperty(t)?n:!n)},Z.prototype.validate=async function(t,e){if(\"function\"==typeof t||\"function\"==typeof e||\"function\"==typeof arguments[2])throw new i(\"Document.prototype.validate() no longer accepts a callback\");let n;if(this.$op=\"validate\",null!=this.$isSubdocument||(this.$__.validating?n=new l(this,{parentStack:e&&e.parentStack,conflictStack:this.$__.validating.stack}):this.$__.validating=new l(this,{parentStack:e&&e.parentStack})),1===arguments.length&&(\"object\"!=typeof arguments[0]||Array.isArray(arguments[0])||(e=arguments[0],t=null)),e&&\"string\"==typeof e.pathsToSkip){const t=-1===e.pathsToSkip.indexOf(\" \");e.pathsToSkip=t?[e.pathsToSkip]:e.pathsToSkip.split(\" \")}if(null!=n)throw n;return new Promise((n,o)=>{this.$__validate(t,e,t=>{if(this.$op=null,this.$__.validating=null,null!=t)return o(t);n()})})},Z.prototype.$validate=Z.prototype.validate,Z.prototype.$__validate=function(t,e,n){\"function\"==typeof t?(n=t,e=null,t=null):\"function\"==typeof e&&(n=e,e=null);const o=e&&\"object\"==typeof e&&\"validateModifiedOnly\"in e,r=e&&e.pathsToSkip||null;let s;s=o?!!e.validateModifiedOnly:this.$__schema.options.validateModifiedOnly;const c=this,a=()=>{let t=this.$__.validationError;if(this.$__.validationError=null,this.$__.validating=null,s&&null!=t){const e=Object.keys(t.errors);for(const n of e)this.$isModified(n)||delete t.errors[n];0===Object.keys(t.errors).length&&(t=void 0)}if(this.$__.cachedRequired={},this.$emit(\"validate\",c),this.constructor.emit(\"validate\",c),t){for(const e in t.errors)!this[V]&&t.errors[e]instanceof i.CastError&&this.invalidate(e,t.errors[e]);return t}},l=nt(this,t,r),u=s?l[0].filter(t=>this.$isModified(t)):l[0],p=l[1];if(\"string\"==typeof t&&(t=t.split(\" \")),0===u.length)return S((function(){const t=a();if(t)return c.$__schema.s.hooks.execPost(\"validate:error\",c,[c],{error:t},(function(t){n(t)}));n(null,c)}));const f={};let d=0;for(const t of u)y(t);function y(t){null==t||f[t]||(f[t]=!0,d++,S((function(){const e=c.$__schema.path(t);if(!e)return--d||m();if(!c.$isValid(t))return void(--d||m());if(null!=e[Q]&&t!==e.path)return--d||m();let n,o=c.$__getValue(t);(n=c.$populated(t))?o=n:null!=o&&null!=o.$__&&o.$__.wasPopulated&&(o=o._id);const r=null!=c.$__.pathsToScopes&&t in c.$__.pathsToScopes?c.$__.pathsToScopes[t]:c,i={skipSchemaValidators:p[t],path:t,validateModifiedOnly:s};e.doValidate(o,(function(n){if(n){if((e.$isSingleNested||e.$isArraySubdocument||e.$isMongooseDocumentArray)&&n instanceof h)return--d||m();c.invalidate(t,n,void 0,!0)}--d||m()}),r,i)})))}function m(){const t=a();if(t)return c.$__schema.s.hooks.execPost(\"validate:error\",c,[c],{error:t},(function(t){n(t)}));n(null,c)}},Z.prototype.validateSync=function(t,e){const n=this;1!==arguments.length||\"object\"!=typeof arguments[0]||Array.isArray(arguments[0])||(e=arguments[0],t=null);const o=e&&\"object\"==typeof e&&\"validateModifiedOnly\"in e;let r;r=o?!!e.validateModifiedOnly:this.$__schema.options.validateModifiedOnly;let s=e&&e.pathsToSkip;if(\"string\"==typeof t){const e=-1===t.indexOf(\" \");t=e?[t]:t.split(\" \")}else\"string\"==typeof s&&-1!==s.indexOf(\" \")&&(s=s.split(\" \"));const c=nt(this,t,s),a=r?c[0].filter(t=>this.$isModified(t)):c[0],l=c[1],u={};for(let t=0,e=a.length;t<e;++t){const e=a[t];if(u[e])continue;u[e]=!0;const o=n.$__schema.path(e);if(!o)continue;if(!n.$isValid(e))continue;const i=n.$__getValue(e),s=o.doValidateSync(i,n,{skipSchemaValidators:l[e],path:e,validateModifiedOnly:r});if(s){if((o.$isSingleNested||o.$isArraySubdocument||o.$isMongooseDocumentArray)&&s instanceof h)continue;n.invalidate(e,s,void 0,!0)}}const p=n.$__.validationError;if(n.$__.validationError=void 0,n.$emit(\"validate\",n),n.constructor.emit(\"validate\",n),p)for(const t in p.errors)p.errors[t]instanceof i.CastError&&n.invalidate(t,p.errors[t]);return p},Z.prototype.invalidate=function(t,e,n,o){if(this.$__.validationError||(this.$__.validationError=new h(this)),!this.$__.validationError.errors[t])return e&&\"string\"!=typeof e||(e=new f({path:t,message:e,type:o||\"user defined\",value:n})),this.$__.validationError===e||this.$__.validationError.addError(t,e),this.$__.validationError},Z.prototype.$markValid=function(t){this.$__.validationError&&this.$__.validationError.errors[t]&&(delete this.$__.validationError.errors[t],0===Object.keys(this.$__.validationError.errors).length&&(this.$__.validationError=null))},Z.prototype.$isValid=function(t){return null==this.$__.validationError||0===Object.keys(this.$__.validationError.errors).length||null!=t&&(-1!==t.indexOf(\" \")&&(t=t.split(\" \")),Array.isArray(t)?t.some(t=>null==this.$__.validationError.errors[t]):null==this.$__.validationError.errors[t])},Z.prototype.$__reset=function(){let t=this;const e=this.$parent()===this?this.$getAllSubdocs():[],n=new Set;for(const t of e){const e=t.$__fullPathWithIndexes();if(this.isModified(e)||o(e))if(t.$__reset(),t.$isDocumentArrayElement){if(!n.has(t.parentArray())){const o=t.parentArray();this.$__.activePaths.clearPath(e.replace(/\\.\\d+$/,\"\").slice(-t.$basePath-1)),o[F]=o[B],o[B]={},n.add(o)}}else t.$parent()===this?this.$__.activePaths.clearPath(t.$basePath):null!=t.$parent()&&t.$parent().$isSubdocument&&t.$parent().$__reset()}function o(e){e=-1===e.indexOf(\".\")?[e]:e.split(\".\");let n=\"\";for(let o=0;o<e.length;++o)if(n+=(n.length?\".\":\"\")+e[o],\"init\"===t.$__.activePaths[n])return!0;return!1}return this.$__dirty().forEach((function(t){const e=t.value;e&&e[B]&&(e[F]=e[B],e[B]={})})),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.getStatePaths(\"modify\")),default:Object.assign({},this.$__.activePaths.getStatePaths(\"default\"))},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.$errors,this.$__.activePaths.clear(\"modify\"),this.$__.activePaths.clear(\"default\"),this.$__.validationError=void 0,this.$errors=void 0,t=this,this.$__schema.requiredPaths().forEach((function(e){t.$__.activePaths.require(e)})),this},\n/*!\n * ignore\n */\nZ.prototype.$__undoReset=function(){if(null!=this.$__.backup&&null!=this.$__.backup.activePaths){this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.$errors=this.$__.backup.errors;for(const t of this.$__dirty()){const e=t.value;e&&e[B]&&e[F]&&(e[B]=e[F])}for(const t of this.$getAllSubdocs())t.$__undoReset()}},Z.prototype.$__dirty=function(){const t=this;let e=this.$__.activePaths.map(\"modify\",(function(e){return{path:e,value:t.$__getValue(e),schema:t.$__path(e)}}));e=e.concat(this.$__.activePaths.map(\"default\",(function(e){if(\"_id\"!==e&&null!=t.$__getValue(e))return{path:e,value:t.$__getValue(e),schema:t.$__path(e)}})));const n=new Map(e.filter(t=>null!=t).map(t=>[t.path,t.value])),o=[];return e.forEach((function(t){if(!t)return;let e=null;const r=H(t.path);for(let t=0;t<r.length-1;t++)if(n.has(r[t])){e=n.get(r[t]);break}null==e?o.push(t):null!=e&&null!=e[B]&&e.hasAtomics()&&(e[B]={},e[B].$set=e)})),o},Z.prototype.$__setSchema=function(t){_(t.tree,this,void 0,t.options);for(const e of Object.keys(t.virtuals))t.virtuals[e]._applyDefaultGetters();null==t.path(\"schema\")&&(this.schema=t),this.$__schema=t,this[q]=t},Z.prototype.$__getArrayPathsToValidate=function(){return G||(G=n(44)),this.$__.activePaths.map(\"init\",\"modify\",function(t){return this.$__getValue(t)}.bind(this)).filter((function(t){return t&&Array.isArray(t)&&N.isMongooseDocumentArray(t)&&t.length})).reduce((function(t,e){return t.concat(e)}),[]).filter((function(t){return t}))},Z.prototype.$getAllSubdocs=function(){function t(e,n,o){let r=e,i=!1;if(o&&(e instanceof Z&&e[q].paths[o]?r=e._doc[o]:e instanceof Z&&e[q].nested[o]?(r=e._doc[o],i=!0):r=e[o]),r instanceof J)n.push(r);else if(r instanceof Map)n=Array.from(r.keys()).reduce((function(e,n){return t(r.get(n),e,null)}),n);else if(r&&!Array.isArray(r)&&r.$isSingleNested)(n=Object.keys(r._doc).reduce((function(e,n){return t(r,e,n)}),n)).push(r);else if(r&&N.isMongooseDocumentArray(r))r.forEach((function(e){e&&e._doc&&(n=Object.keys(e._doc).reduce((function(n,o){return t(e._doc,n,o)}),n),e instanceof J&&n.push(e))}));else if(i&&null!=r)for(const e of Object.keys(r))t(r,n,e);return n}G||(G=n(44)),J=J||n(54);const e=[];for(const n of Object.keys(this._doc))t(this,e,n);return e},Z.prototype.$__handleReject=function(t){this.$listeners(\"error\").length?this.$emit(\"error\",t):this.constructor.listeners&&this.constructor.listeners(\"error\").length&&this.constructor.emit(\"error\",t)},Z.prototype.$toObject=function(t,e){let n={transform:!0,flattenDecimals:!0};const o=e?\"toJSON\":\"toObject\",r=this.constructor&&this.constructor.base&&this.constructor.base.options&&w(this.constructor.base.options,o)||{},i=this.$__schema&&this.$__schema.options||{};let s,c;n=N.options(n,g(r)),n=N.options(n,g(i[o]||{})),(t=N.isPOJO(t)?{...t}:{})._calledWithOptions=t._calledWithOptions||{...t},s=null!=t._calledWithOptions.minimize?t.minimize:null!=n.minimize?n.minimize:i.minimize,c=null!=t._calledWithOptions.flattenMaps?t.flattenMaps:null!=n.flattenMaps?n.flattenMaps:i.flattenMaps;const a=Object.assign({},t,{_isNested:!0,json:e,minimize:s,flattenMaps:c,_seen:t&&t._seen||new Map});N.hasUserDefinedProperty(t,\"getters\")&&(a.getters=t.getters),N.hasUserDefinedProperty(t,\"virtuals\")&&(a.virtuals=t.virtuals);if((t.depopulate||t._parentOptions&&t._parentOptions.depopulate||!1)&&t._isNested&&this.$__.wasPopulated)return g(this.$__.wasPopulated.value||this._id,a);(t=N.options(n,t))._isNested=!0,t.json=e,t.minimize=s,a._parentOptions=t,a._skipSingleNestedGetters=!1;const l=Object.assign({},a);l._skipSingleNestedGetters=!0;const u=t.transform;let p=g(this._doc,a)||{};t.getters&&(!function(t,e,n){const o=t.$__schema,r=Object.keys(o.paths);let i,s,c=r.length,a=t._doc;if(!a)return e;for(;c--;){i=r[c];const o=i.split(\".\"),l=o.length,u=l-1;let p,h=e;if(a=t._doc,t.$__isSelected(i))for(let e=0;e<l;++e){if(p=o[e],s=a[p],e===u){const e=t.$get(i);h[p]=g(e,n)}else{if(null==s){p in a&&(h[p]=s);break}h=h[p]||(h[p]={})}a=s}}}(this,p,l),t.minimize&&(p=function t(e){const n=Object.keys(e);let o,r,i,s=n.length;for(;s--;)r=n[s],i=e[r],N.isPOJO(i)&&(e[r]=t(i)),void 0!==e[r]?o=!0:delete e[r];return o?e:void 0}(p)||{})),(t.virtuals||t.getters&&!1!==t.virtuals)&&rt(this,p,l,t),!1===t.versionKey&&this.$__schema.options.versionKey&&delete p[this.$__schema.options.versionKey];let h=t.transform;if(h&&function(t,e){const n=t.$__schema,o=Object.keys(n.paths||{});if(!t._doc)return e;for(const r of o){const o=n.paths[r];if(\"function\"==typeof o.options.transform){const n=t.$get(r);if(void 0===n)continue;const i=o.options.transform.call(t,n);it(r,i),N.setValue(r,i,e)}else if(null!=o.$embeddedSchemaType&&\"function\"==typeof o.$embeddedSchemaType.options.transform){const n=t.$get(r);if(void 0===n)continue;const i=[].concat(n),s=o.$embeddedSchemaType.options.transform;for(let e=0;e<i.length;++e){const n=s.call(t,i[e]);i[e]=n,it(r,n)}e[r]=i}}}(this,p),t.useProjection&&function(t,e){const n=t.$__schema,o=Object.keys(n.paths||{});if(!t._doc)return e;let r=t.$__.selected;void 0===r&&(r={},D.applyPaths(r,n));if(null==r||0===Object.keys(r).length)return e;for(const t of o)null==r[t]||r[t]||delete e[t]}(this,p),!0===h||i.toObject&&h){const e=t.json?i.toJSON:i.toObject;e&&(h=\"function\"==typeof t.transform?t.transform:e.transform)}else t.transform=u;if(\"function\"==typeof h){const e=h(this,p,t);void 0!==e&&(p=e)}return p},Z.prototype.toObject=function(t){return this.$toObject(t)},Z.prototype.toJSON=function(t){return this.$toObject(t,!0)},Z.prototype.ownerDocument=function(){return this},Z.prototype.parent=function(){return this.$isSubdocument||this.$__.wasPopulated?this.$__.parent:this},Z.prototype.$parent=Z.prototype.parent,Z.prototype.inspect=function(t){let e;N.isPOJO(t)&&(e=t,e.minimize=!1);const n=this.toObject(e);return null==n?\"MongooseDocument { \"+n+\" }\":n},P.custom&&(Z.prototype[P.custom]=Z.prototype.inspect),Z.prototype.toString=function(){const t=this.inspect();return\"string\"==typeof t?t:P(t)},Z.prototype.equals=function(t){if(!t)return!1;const e=this.$__getValue(\"_id\"),n=null!=t.$__?t.$__getValue(\"_id\"):t;return e||n?e&&e.equals?e.equals(n):e===n:I(this,t)},Z.prototype.populate=async function(){const t={},e=[...arguments];if(\"function\"==typeof e[e.length-1])throw new i(\"Document.prototype.populate() no longer accepts a callback\");if(0!==e.length){const n=N.populate.apply(null,e);for(const e of n)t[e.path]=e}const n=N.object.vals(t);let o=this.constructor;if(this.$__isNested){o=this.$__[W].constructor;const t=this.$__.nestedPath;n.forEach((function(e){e.path=t+\".\"+e.path}))}if(null!=this.$session()){const t=this.$session();n.forEach(e=>{null!=e.options?\"session\"in e.options||(e.options.session=t):e.options={session:t}})}return n.forEach(t=>{t._localModel=o}),o.populate(this,n)},Z.prototype.$getPopulatedDocs=function(){let t=[];null!=this.$__.populated&&(t=t.concat(Object.keys(this.$__.populated)));let e=[];for(const n of t){const t=this.$get(n);Array.isArray(t)?e=e.concat(t):t instanceof Z&&e.push(t)}return e},Z.prototype.populated=function(t,e,n){if(null==e||!0===e){if(!this.$__.populated)return;if(\"string\"!=typeof t)return;const n=t.endsWith(\".$*\")?t.replace(/\\.\\$\\*$/,\"\"):t,o=this.$__.populated[n];return o?!0===e?o:o.value:void 0}this.$__.populated||(this.$__.populated={}),this.$__.populated[t]={value:e,options:n};const o=t.split(\".\");for(let t=0;t<o.length-1;++t){const r=o.slice(0,t+1).join(\".\"),i=this.$get(r);if(null!=i&&null!=i.$__&&this.$populated(r)){const r=o.slice(t+1).join(\".\");i.$populated(r,e,n);break}}return e},Z.prototype.$populated=Z.prototype.populated,Z.prototype.$assertPopulated=function(t,e){if(Array.isArray(t))return t.forEach(t=>this.$assertPopulated(t,e)),this;if(arguments.length>1&&this.$set(e),!this.$populated(t))throw new i(`Expected path \"${t}\" to be populated`);return this},Z.prototype.depopulate=function(t){let e;\"string\"==typeof t&&(t=-1===t.indexOf(\" \")?[t]:t.split(\" \"));const n=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],o=this.$__&&this.$__.populated||{};if(0===arguments.length){for(const t of n)delete this.$$populatedVirtuals[t],delete this._doc[t],delete o[t];const t=Object.keys(o);for(const n of t)e=this.$populated(n),e&&(delete o[n],N.setValue(n,e,this._doc));return this}for(const r of t)e=this.$populated(r),delete o[r],-1!==n.indexOf(r)?(delete this.$$populatedVirtuals[r],delete this._doc[r]):e&&N.setValue(r,e,this._doc);return this},Z.prototype.$__fullPath=function(t){return t||\"\"},Z.prototype.getChanges=function(){const t=this.$__delta();return t?t[1]:{}},Z.prototype.$clone=function(){const t=new(0,this.constructor);if(t.$isNew=this.$isNew,this._doc&&(t._doc=g(this._doc)),this.$__){const e=new(0,this.$__.constructor);for(const t of Object.getOwnPropertyNames(this.$__))\"activePaths\"!==t&&(e[t]=g(this.$__[t]));Object.assign(e.activePaths,g({...this.$__.activePaths})),t.$__=e}return t},\n/*!\n * Module exports.\n */\nZ.ValidationError=h,t.exports=Z},,function(t,e,n){\"use strict\";const o=n(12);class r{constructor(t){if(null==t)return this;Object.assign(this,o(t))}}const i=n(21);Object.defineProperty(r.prototype,\"type\",i),Object.defineProperty(r.prototype,\"validate\",i),Object.defineProperty(r.prototype,\"cast\",i),Object.defineProperty(r.prototype,\"required\",i),Object.defineProperty(r.prototype,\"default\",i),Object.defineProperty(r.prototype,\"ref\",i),Object.defineProperty(r.prototype,\"refPath\",i),Object.defineProperty(r.prototype,\"select\",i),Object.defineProperty(r.prototype,\"index\",i),Object.defineProperty(r.prototype,\"unique\",i),Object.defineProperty(r.prototype,\"immutable\",i),Object.defineProperty(r.prototype,\"sparse\",i),Object.defineProperty(r.prototype,\"text\",i),Object.defineProperty(r.prototype,\"transform\",i),t.exports=r},function(t,e,n){\"use strict\";\n/*!\n * Centralize this so we can more easily work around issues with people\n * stubbing out `process.nextTick()` in tests using sinon:\n * https://github.com/sinonjs/lolex#automatically-incrementing-mocked-time\n * See gh-6074\n */const o=\"undefined\"!=typeof process&&\"function\"==typeof process.nextTick?process.nextTick.bind(process):t=>setTimeout(t,0);t.exports=function(t){return o(t)}},function(t,e,n){\"use strict\";t.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})},function(t,e){t.exports=require(\"stream\")},function(t,e,n){\"use strict\";t.exports=n(295)},function(t,e,n){\"use strict\";const o=n(171);t.exports=function(t,e){if(null==t)return null;for(const n of Object.keys(t)){const r=t[n];if(r.schema&&r.schema.discriminatorMapping&&o(r.schema.discriminatorMapping.value,e))return r}return null}},,function(t,e){throw new Error(\"Module parse failed: Unexpected token (597:33)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|             this.reason = reason;\\n|         }\\n>         this.code = reason.error?.code;\\n|     }\\n|     get name() {\")},function(t,e,n){\"use strict\";const o=n(40).ObjectId,r=n(1).objectIdSymbol;Object.defineProperty(o.prototype,\"_id\",{enumerable:!1,configurable:!0,get:function(){return this}}),\n/*!\n * Convenience `valueOf()` to allow comparing ObjectIds using double equals re: gh-7299\n */\no.prototype.hasOwnProperty(\"valueOf\")||(o.prototype.valueOf=function(){return this.toString()}),o.prototype[r]=!0,t.exports=o},,,,function(t,e){t.exports=require(\"path\")},,function(t,e,n){\"use strict\";t.exports=function(t){return Buffer.isBuffer(t)||\"[object Object]\"===Object.prototype.toString.call(t)}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(9);class r extends o{constructor(t,e,n){super(e=e||\"Field `\"+t+\"` is not in schema and strict mode is set to throw.\"),this.isImmutableError=!!n,this.path=t}}Object.defineProperty(r.prototype,\"name\",{value:\"StrictModeError\"}),t.exports=r},function(t,e,n){\"use strict\";\n/*!\n * ignore\n */e.internalToObjectOptions={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1}},,,,function(t,e){t.exports=require(\"fs\")},function(t,e){throw new Error(\"Module parse failed: Cannot use keyword 'await' outside an async function (95:26)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|     return nodeJsByteUtils.fromNumberArray(Array.from({ length: byteLength }, () => Math.floor(Math.random() * 256)));\\n| }\\n> const nodejsRandomBytes = await (async () => {\\n|     try {\\n|         return (await import('crypto')).randomBytes;\")},function(t,e,n){\"use strict\";\n/*!\n * Module requirements\n */const o=n(11),r=n(14),i=n(2),s=n(150);class c extends o{constructor(t){let e;e=\"model\"===r(t)?t.constructor.modelName+\" validation failed\":\"Validation failed\",super(e),this.errors={},this._message=e,t&&(t.$errors=this.errors)}toString(){return this.name+\": \"+s(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(t,e){if(e instanceof c){const{errors:n}=e;for(const e of Object.keys(n))this.addError(`${t}.${e}`,n[e])}else this.errors[t]=e,this.message=this._message+\": \"+s(this)}}i.inspect.custom&&(c.prototype[i.inspect.custom]=c.prototype.inspect),Object.defineProperty(c.prototype,\"toJSON\",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}}),Object.defineProperty(c.prototype,\"name\",{value:\"ValidationError\"}),\n/*!\n * Module exports\n */\nt.exports=c},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(13),r=n(43),i=n(33),s=n(3);function c(t,e){if(e&&e.default){const t=e.default;Array.isArray(t)&&0===t.length?e.default=Array:!e.shared&&i(t)&&0===Object.keys(t).length&&(e.default=function(){return{}})}o.call(this,t,e,\"Mixed\"),this[r.schemaMixedSymbol]=!0}c.schemaName=\"Mixed\",c.defaultOptions={},\n/*!\n * Inherits from SchemaType.\n */\nc.prototype=Object.create(o.prototype),c.prototype.constructor=c,c.get=o.get,c.set=o.set,c.prototype.cast=function(t){return t instanceof Error?s.errorToPOJO(t):t},c.prototype.castForQuery=function(t,e){return e},\n/*!\n * Module exports.\n */\nt.exports=c},function(t,e,n){\"use strict\";e.schemaMixedSymbol=Symbol.for(\"mongoose:schema_mixed\"),e.builtInMiddleware=Symbol.for(\"mongoose:built-in-middleware\")},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(95),r=n(315),i=n(17),s=n(1).arrayAtomicsSymbol,c=n(1).arrayAtomicsBackupSymbol,a=n(1).arrayParentSymbol,l=n(1).arrayPathSymbol,u=n(1).arraySchemaSymbol,p=Array.prototype.push,h=/^\\d+$/;\n/*!\n * Module exports.\n */\nt.exports=function(t,e,n){const f=[],d={[s]:{},[c]:void 0,[l]:e,[u]:void 0,[a]:void 0};if(Array.isArray(t)&&(t[l]===e&&t[a]===n&&(d[s]=Object.assign({},t[s])),t.forEach(t=>{p.call(f,t)})),d[l]=e,d.__array=f,n&&n instanceof i)for(d[a]=n,d[u]=n.$__schema.path(e);null!=d[u]&&d[u].$isMongooseArray&&!d[u].$isMongooseDocumentArray;)d[u]=d[u].casterConstructor;const y=new Proxy(f,{get:function(t,e){return\"isMongooseArray\"===e||\"isMongooseArrayProxy\"===e||\"isMongooseDocumentArray\"===e||\"isMongooseDocumentArrayProxy\"===e||(d.hasOwnProperty(e)?d[e]:r.hasOwnProperty(e)?r[e]:o.hasOwnProperty(e)?o[e]:f[e])},set:function(t,e,n){return\"string\"==typeof e&&h.test(e)?r.set.call(y,e,n,!1):d.hasOwnProperty(e)?d[e]=n:f[e]=n,!0}});return y}},,function(t,e){t.exports=require(\"assert\")},,,function(t,e){throw new Error(\"Module parse failed: Unexpected token (96:26)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|     }\\n|     get id() {\\n>         return this[kId] ?? undefined;\\n|     }\\n|     /** @internal */\")},function(t,e,n){\"use strict\";t.exports=new Set([\"__proto__\",\"constructor\",\"prototype\"])},function(t,e,n){\"use strict\";const o=n(86).isMongooseArray;t.exports=function(t){return null!=t&&(o(t)||null!=t.$__||t.isMongooseBuffer||t.$isMongooseMap)}},function(t,e,n){\"use strict\";const o=Symbol(\"mongoose#trustedSymbol\");e.trustedSymbol=o,e.trusted=function(t){return null==t||\"object\"!=typeof t||(t[o]=!0),t}},function(t,e,n){\"use strict\";\n/*!\n * Module exports.\n */e.Array=n(168),e.Buffer=n(70),e.Document=e.Embedded=n(54),e.DocumentArray=n(44),e.Decimal128=n(85),e.ObjectId=n(27),e.Map=n(97),e.Subdocument=n(96),e.UUID=n(316)},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(8).EventEmitter,r=n(96),i=n(3),s=n(1).documentArrayParent;function c(t,e,n,o,c){i.isMongooseDocumentArray(e)?(this.__parentArray=e,this[s]=e.$parent()):(this.__parentArray=void 0,this[s]=void 0),this.$setIndex(c),this.$__parent=this[s],r.call(this,t,o,this[s],n,{isNew:!0})}\n/*!\n * Inherit from Subdocument\n */c.prototype=Object.create(r.prototype),c.prototype.constructor=c,Object.defineProperty(c.prototype,\"$isSingleNested\",{configurable:!1,writable:!1,value:!1}),Object.defineProperty(c.prototype,\"$isDocumentArrayElement\",{configurable:!1,writable:!1,value:!0});for(const t in o.prototype)c[t]=o.prototype[t];\n/*!\n * ignore\n */c.prototype.$setIndex=function(t){if(this.__index=t,null!=this.$__&&null!=this.$__.validationError){const t=Object.keys(this.$__.validationError.errors);for(const e of t)this.invalidate(e,this.$__.validationError.errors[e])}},\n/*!\n * ignore\n */\nc.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate(\"path\")`, use `doc.populate(\"arr.0.path\")`')},\n/*!\n * ignore\n */\nc.prototype.$__removeFromParent=function(){const t=this._doc._id;if(!t)throw new Error(\"For your own good, Mongoose does not know how to remove an ArraySubdocument that has no _id\");this.__parentArray.pull({_id:t})},c.prototype.$__fullPath=function(t,e){return null==this.__index?null:(this.$__.fullPath||this.ownerDocument(),e?t?this.$__.fullPath+\".\"+t:this.$__.fullPath:t?this.$__.fullPath+\".\"+this.__index+\".\"+t:this.$__.fullPath+\".\"+this.__index)},c.prototype.$__pathRelativeToParent=function(t,e){return null==this.__index?null:e?null==t?this.__parentArray.$path():this.__parentArray.$path()+\".\"+t:null==t?this.__parentArray.$path()+\".\"+this.__index:this.__parentArray.$path()+\".\"+this.__index+\".\"+t},c.prototype.$parent=function(){return this[s]},c.prototype.parentArray=function(){return this.__parentArray},\n/*!\n * Module exports.\n */\nt.exports=c},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(15),r=n(34),i=n(71),s=n(319),c=n(320),a=n(10),l=n(14),u=n(100),p=n(101),h=n(2),f=n(33),d=n(51),y=[\"Polygon\",\"MultiPolygon\"];function m(t,e,n){if(Array.isArray(t))t.forEach((function(o,r){if(Array.isArray(o)||f(o))return m(o,e,n);t[r]=e.castForQuery(null,o,n)}));else{const o=Object.keys(t);let r=o.length;for(;r--;){const i=o[r],s=t[i];Array.isArray(s)||f(s)?(m(s,e,n),t[i]=s):t[i]=e.castForQuery({val:s,context:n})}}}function g(t,e,n,o){if(\"strictQuery\"in t)return t.strictQuery;if(\"strictQuery\"in e)return e.strictQuery;const r=o&&o.mongooseCollection&&o.mongooseCollection.conn&&o.mongooseCollection.conn.base&&o.mongooseCollection.conn.base.options;return r&&\"strictQuery\"in r?r.strictQuery:n.strictQuery}t.exports=function t(e,n,_,b){if(Array.isArray(n))throw new Error(\"Query filter must be an object, got an array \",h.inspect(n));if(null==n)return n;null!=e&&null!=e.discriminators&&null!=n[e.options.discriminatorKey]&&(e=u(e,n[e.options.discriminatorKey])||e);const O=Object.keys(n);let $,w,v,E,A,S,j,x=O.length;for(_=_||{};x--;)if(A=O[x],j=n[A],\"$or\"===A||\"$nor\"===A||\"$and\"===A){if(!Array.isArray(j))throw new o(\"Array\",j,A);for(let n=0;n<j.length;++n){if(null==j[n]||\"object\"!=typeof j[n])throw new o(\"Object\",j[n],A+\".\"+n);j[n]=t(e,j[n],_,b)}}else{if(\"$where\"===A){if(S=typeof j,\"string\"!==S&&\"function\"!==S)throw new Error(\"Must have a string or function for $where\");\"function\"===S&&(n[A]=j.toString());continue}if(\"$expr\"===A){j=s(j,e);continue}if(\"$elemMatch\"===A)j=t(e,j,_,b);else if(\"$text\"===A)j=c(j,A);else{if(!e)continue;if(v=e.path(A),!v){const t=A.split(\".\");let o=t.length;for(;o--;){const r=t.slice(0,o).join(\".\"),i=t.slice(o).join(\".\"),s=e.path(r),c=s&&s.schema&&s.schema.options&&s.schema.options.discriminatorKey;if(null!=s&&null!=(s.schema&&s.schema.discriminators)&&null!=c&&i!==c){const t=a(n,r+\".\"+c);null!=t&&(v=s.schema.discriminators[t].path(i))}}}if(v){if(null==j)continue;if(\"Object\"===l(j))if(w=Object.keys(j).some(p),w){const t=Object.keys(j);let e,n=t.length;for(;n--;)if(e=t[n],E=j[e],\"$not\"===e){if(E&&v){if($=Object.keys(E),$.length&&p($[0]))for(const t in E)E[t]=v.castForQuery(t,E[t],b);else j[e]=v.castForQuery(e,E,b);continue}}else j[e]=v.castForQuery(e,E,b)}else n[A]=v.castForQuery(null,j,b);else if(Array.isArray(j)&&-1===[\"Buffer\",\"Array\"].indexOf(v.instance)){const t=[],e=j;for(const n of e)t.push(v.castForQuery(null,n,b));n[A]={$in:t}}else n[A]=v.castForQuery(null,j,b)}else{const o=A.split(\".\");let s,c,a,l=o.length;for(;l--&&(s=o.slice(0,l).join(\".\"),v=e.path(s),!v););if(v){if(v.caster&&v.caster.schema){a={},c=o.slice(l).join(\".\"),a[c]=j;const e=t(v.caster.schema,a,_,b)[c];void 0===e?delete n[A]:n[A]=e}else n[A]=j;continue}if(f(j)){let t=\"\";if(j.$near?t=\"$near\":j.$nearSphere?t=\"$nearSphere\":j.$within?t=\"$within\":j.$geoIntersects?t=\"$geoIntersects\":j.$geoWithin&&(t=\"$geoWithin\"),t){const e=new i.Number(\"__QueryCasting__\");let n=j[t];if(null!=j.$maxDistance&&(j.$maxDistance=e.castForQuery(null,j.$maxDistance,b)),null!=j.$minDistance&&(j.$minDistance=e.castForQuery(null,j.$minDistance,b)),\"$within\"===t){const t=n.$center||n.$centerSphere||n.$box||n.$polygon;if(!t)throw new Error(\"Bad $within parameter: \"+JSON.stringify(j));n=t}else if(\"$near\"===t&&\"string\"==typeof n.type&&Array.isArray(n.coordinates))n=n.coordinates;else if((\"$near\"===t||\"$nearSphere\"===t||\"$geoIntersects\"===t)&&n.$geometry&&\"string\"==typeof n.$geometry.type&&Array.isArray(n.$geometry.coordinates))null!=n.$maxDistance&&(n.$maxDistance=e.castForQuery(null,n.$maxDistance,b)),null!=n.$minDistance&&(n.$minDistance=e.castForQuery(null,n.$minDistance,b)),d(n.$geometry)&&(n.$geometry=n.$geometry.toObject({transform:!1,virtuals:!1})),n=n.$geometry.coordinates;else if(\"$geoWithin\"===t)if(n.$geometry){d(n.$geometry)&&(n.$geometry=n.$geometry.toObject({virtuals:!1}));const t=n.$geometry.type;if(-1===y.indexOf(t))throw new Error('Invalid geoJSON type for $geoWithin \"'+t+'\", must be \"Polygon\" or \"MultiPolygon\"');n=n.$geometry.coordinates}else n=n.$box||n.$polygon||n.$center||n.$centerSphere,d(n)&&(n=n.toObject({virtuals:!1}));m(n,e,b);continue}}if(e.nested[A])continue;const u=\"strict\"in _?_.strict:e.options.strict,p=g(_,e._userProvidedOptions,e.options,b);if(_.upsert&&u){if(\"throw\"===u)throw new r(A);throw new r(A,'Path \"'+A+'\" is not in schema, strict mode is `true`, and upsert is `true`.')}if(\"throw\"===p)throw new r(A,'Path \"'+A+\"\\\" is not in schema and strictQuery is 'throw'.\");p&&delete n[A]}}}return n}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(40).Binary,r=n(16),i=n(51),s=n(9),c=n(2);\n/*!\n * ignore\n */\nfunction a(t){return t&&\"object\"==typeof t&&!(t instanceof Date)&&!r(t,\"ObjectId\")&&(!Array.isArray(t)||0!==t.length)&&!(t instanceof Buffer)&&!r(t,\"Decimal128\")&&!(t instanceof o)}e.flatten=\n/*!\n * ignore\n */\nfunction t(e,n,o,r){let s;s=e&&i(e)&&!Buffer.isBuffer(e)?Object.keys(e.toObject({transform:!1,virtuals:!1})||{}):Object.keys(e||{});const c=s.length,l={};n=n?n+\".\":\"\";for(let i=0;i<c;++i){const c=s[i],u=e[c];l[n+c]=u;const p=r&&r.path&&r.path(n+c),h=r&&r.nested&&r.nested[n+c];if(!p||\"Mixed\"!==p.instance){if(a(u)){if(o&&o.skipArrays&&Array.isArray(u))continue;const e=t(u,n+c,o,r);for(const t in e)l[t]=e[t];Array.isArray(u)&&(l[n+c]=u)}if(h){const t=Object.keys(r.paths);for(const e of t)e.startsWith(n+c+\".\")&&!l.hasOwnProperty(e)&&(l[e]=void 0)}}}return l}\n/*!\n * ignore\n */,e.modifiedPaths=function t(e,n,o,r=null){if(null==e||\"object\"!=typeof e)return;null==r&&(r={raw:{update:e,path:n},trace:new WeakSet});if(r.trace.has(e))throw new s(`a circular reference in the update value, updateValue:\\n${c.inspect(r.raw.update,{showHidden:!1,depth:1})}\\nupdatePath: '${r.raw.path}'`);r.trace.add(e);const l=Object.keys(e||{}),u=l.length;o=o||{},n=n?n+\".\":\"\";for(let s=0;s<u;++s){const c=l[s];let u=e[c];o[n+c]=!0,!Buffer.isBuffer(u)&&i(u)&&(u=u.toObject({transform:!1,virtuals:!1})),a(u)&&t(u,n+c,o,r)}return r.trace.delete(e),o}},function(t,e,n){\"use strict\";\n/*!\n * ignore\n */t.exports=function(t){return null==t||(\"object\"!=typeof t||!(\"$meta\"in t)&&!(\"$slice\"in t))}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies\n */const o=n(352),r=n(10),i=n(24),s=n(57),c=n(12),a=n(108);function l(t){return function(e){e.options||(e.options={}),null!=t&&Array.isArray(t.virtuals)&&((t=Object.assign({},t)).virtuals=t.virtuals.filter(t=>\"string\"==typeof t&&t.startsWith(e.path+\".\")).map(t=>t.slice(e.path.length+1))),e.options.lean=t}}e.preparePopulationOptions=function(t,e){const n=t.options.populate,o=Object.keys(n).reduce((t,e)=>t.concat([n[e]]),[]);return null!=e.lean&&o.filter(t=>null==(t&&t.options&&t.options.lean)).forEach(l(e.lean)),o.forEach(e=>{e._localModel=t.model}),o},e.preparePopulationOptionsMQ=function(t,e){const n=t._mongooseOptions.populate,o=Object.keys(n).reduce((t,e)=>t.concat([n[e]]),[]);null!=e.lean&&o.filter(t=>null==(t&&t.options&&t.options.lean)).forEach(l(e.lean));const r=t&&t.options&&t.options.session||null;null!=r&&o.forEach(t=>{null!=t.options?\"session\"in t.options||(t.options.session=r):t.options={session:r}});const i=t._fieldsForExec();return o.forEach(t=>{t._queryProjection=i}),o.forEach(e=>{e._localModel=t.model}),o},e.createModel=function(t,n,o,r,s){t.hooks.execPreSync(\"createModel\",n);const a=t.schema?t.schema.discriminatorMapping:null,l=a&&a.isRoot?a.key:null,u=n[l];if(l&&u&&t.discriminators){const n=t.discriminators[u]||i(t.discriminators,u);if(n){const t=c(r);return e.applyPaths(t,n.schema),new n(void 0,t,!0)}}const p={skipId:!0,isNew:!1,willInit:!0};return null!=s&&\"defaults\"in s&&(p.defaults=s.defaults),new t(void 0,o,p)},\n/*!\n * ignore\n */\ne.createModelAndInit=function(t,n,o,r,i,s,c){const a=s?{populated:s}:void 0,l=e.createModel(t,n,o,r,i);try{l.$init(n,a,c)}catch(t){c(t,l)}},\n/*!\n * ignore\n */\ne.applyPaths=function(t,e){let n,i;const c=new Set;if(t){i=Object.keys(t);const o=[];for(let e=0;e<i.length;++e){const n=i[e];\"-\"===i[e][0]&&(delete t[n],\"-_id\"===n?t._id=0:o.push(n.slice(1)))}i=Object.keys(t);for(let e=0;e<i.length;++e){if(\"+\"===i[e][0])continue;const o=t[i[e]];if(s(o)&&!(\"_id\"===i[e]&&i.length>1)){n=!o;break}}for(const r of o){const o=e.path(r);o&&o.selected&&!1===n?o&&o.selected&&!1===n&&c.add(r):t[r]=0}}const l=[],u=[],p=[];switch(function e(r,i){if(i||(i=\"\"),-1!==p.indexOf(r))return[];p.push(r);const s=[];return r.eachPath((function(r,c){if(i&&(r=i+\".\"+r),c.$isSchemaMap||r.endsWith(\".$*\")){const e=\"+\"+r,n=t&&e in t;return void(c.options&&!1===c.options.select&&!n&&u.push(r))}let a=h(r,c);if(null!=a||Array.isArray(c)||!c.$isMongooseArray||c.$isMongooseDocumentArray||(a=h(r,c.caster)),null!=a&&s.push(a),c.schema){const i=e(c.schema,r);!1===n&&o(t,r,c.schema,l,i)}})),p.pop(),s}(e),n){case!0:for(const e of u)t[e]=0;break;case!1:e&&e.paths._id&&e.paths._id.options&&!1===e.paths._id.options.select&&(t._id=0);for(const e of l)c.has(e)||a(t,e)||(t[e]=t[e]||1);break;case void 0:if(null==t)break;for(const e of Object.keys(t||{}))e.startsWith(\"+\")&&delete t[e];for(const e of u)null==t[e]&&(t[e]=0)}function h(o,s){if(null==t)return;if(\"boolean\"!=typeof s.selected)return;if(!1===s.selected&&t[o])return;if(n&&s.selected&&o===e.options.discriminatorKey&&null!=t[o]&&!t[o])return void delete t[o];if(!1===n&&s.selected&&null!=t[o]&&!t[o])return void delete t[o];const c=\"+\"+o;if(t&&c in t)return delete t[c],void(!1===n&&i.length>1&&!~i.indexOf(o)&&(t[o]=1));const a=o.split(\".\");let p=\"\";for(let t=0;t<a.length;++t)if(p+=p.length?\".\"+a[t]:a[t],-1!==u.indexOf(p))return;if(!n&&s&&s.options&&s.options.$skipDiscriminatorCheck){let e=\"\";for(let n=0;n<a.length;++n){e+=(0===e.length?\"\":\".\")+a[n];const o=r(t,e,!1)||r(t,e+\".$\",!1);if(o&&\"object\"!=typeof o)return}}return(s.selected?l:u).push(o),o}}},,,,,function(t,e,n){\"use strict\";\n/*!\n * Connection states\n */const o=t.exports=Object.create(null);o[0]=\"disconnected\",o[1]=\"connected\",o[2]=\"connecting\",o[3]=\"disconnecting\",o[99]=\"uninitialized\",o.disconnected=0,o.connected=1,o.connecting=2,o.disconnecting=3,o.uninitialized=99},function(t,e){throw new Error(\"Module parse failed: Unexpected token (51:53)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|         throw new error_1.MongoCompatibilityError('Snapshot reads require MongoDB 5.0 or later');\\n|     }\\n>     const readPreference = operation.readPreference ?? read_preference_1.ReadPreference.primary;\\n|     const inTransaction = !!session?.inTransaction();\\n|     if (inTransaction && !readPreference.equals(read_preference_1.ReadPreference.primary)) {\")},function(t,e){throw new Error(\"Module parse failed: Unexpected token (15:32)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|     constructor(parent, options) {\\n|         super(options);\\n>         this.options = options ?? {};\\n|         // NOTE: this was explicitly added for the add/remove user operations, it's likely\\n|         //       something we'd want to reconsider. Perhaps those commands can use `Admin`\")},function(t,e){throw new Error(\"Module parse failed: Unexpected token (46:33)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|  */\\n| function resolveBSONOptions(options, parent) {\\n>     const parentOptions = parent?.bsonOptions;\\n|     return {\\n|         raw: options?.raw ?? parentOptions?.raw ?? false,\")},function(t,e){throw new Error(\"Module parse failed: Unexpected token (57:52)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|     constructor(bulkResult) {\\n|         this.result = bulkResult;\\n>         this.insertedCount = this.result.nInserted ?? 0;\\n|         this.matchedCount = this.result.nMatched ?? 0;\\n|         this.modifiedCount = this.result.nModified ?? 0;\")},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(8).EventEmitter,r=n(92),i=n(11),s=n(13),c=n(19),a=n(309),l=n(160),u=n(161),p=n(12),h=n(10),f=n(14),d=n(310),y=n(163),m=n(311),g=n(88),_=n(23),b=n(312),O=n(3),$=n(314),w=n(2);let v;const E=n(93).middlewareFunctions,A=n(94).middlewareFunctions,S=E.concat(A).reduce((t,e)=>t.add(e),new Set),j=O.isPOJO;let x=0;function P(t,e){if(!(this instanceof P))return new P(t,e);if(this.obj=t,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this.methods=e&&e.methods||{},this.methodOptions={},this.statics=e&&e.statics||{},this.tree={},this.query=e&&e.query||{},this.childSchemas=[],this.plugins=[],this.$id=++x,this.mapPaths=[],this.s={hooks:new r},this.options=this.defaultOptions(e),Array.isArray(t))for(const e of t)this.add(e);else t&&this.add(t);if(e&&e.virtuals){const t=e.virtuals,n=Object.keys(t);for(const e of n){const n=t[e].options?t[e].options:void 0,o=this.virtual(e,n);t[e].get&&o.get(t[e].get),t[e].set&&o.set(t[e].set)}}const n=t&&t._id&&O.isObject(t._id);!this.paths._id&&this.options._id&&!n&&u(this),this.setupTimestamp(this.options.timestamps)}function k(t,e){for(const n of Object.keys(e)){let o=null;if(null!=e[n])o=e[n];else{const e=h(t.paths[n],\"options\");if(null==e)continue;o=e.alias}if(!o)continue;const r=t.paths[n].path;if(Array.isArray(o))for(const e of o){if(\"string\"!=typeof e)throw new Error(\"Invalid value for alias option on \"+r+\", got \"+e);t.aliases[e]=r,t.virtual(e).get(function(t){return function(){return\"function\"==typeof this.get?this.get(t):this[t]}}(r)).set(function(t){return function(e){return this.$set(t,e)}}(r))}else{if(\"string\"!=typeof o)throw new Error(\"Invalid value for alias option on \"+r+\", got \"+o);t.aliases[o]=r,t.virtual(o).get(function(t){return function(){return\"function\"==typeof this.get?this.get(t):this[t]}}(r)).set(function(t){return function(e){return this.$set(t,e)}}(r))}}}\n/*!\n * Inherit from EventEmitter.\n */P.prototype=Object.create(o.prototype),P.prototype.constructor=P,P.prototype.instanceOfSchema=!0,\n/*!\n * ignore\n */\nObject.defineProperty(P.prototype,\"$schemaType\",{configurable:!1,enumerable:!1,writable:!0}),Object.defineProperty(P.prototype,\"childSchemas\",{configurable:!1,enumerable:!0,writable:!0}),Object.defineProperty(P.prototype,\"virtuals\",{configurable:!1,enumerable:!0,writable:!0}),P.prototype.obj,P.prototype.paths,P.prototype.tree,P.prototype.clone=function(){const t=this._clone();return t.on(\"init\",t=>this.emit(\"init\",t)),t},\n/*!\n * ignore\n */\nP.prototype._clone=function(t){const e=new(t=t||(null==this.base?P:this.base.Schema))({},this._userProvidedOptions);return e.base=this.base,e.obj=this.obj,e.options=p(this.options),e.callQueue=this.callQueue.map((function(t){return t})),e.methods=p(this.methods),e.methodOptions=p(this.methodOptions),e.statics=p(this.statics),e.query=p(this.query),e.plugins=Array.prototype.slice.call(this.plugins),e._indexes=p(this._indexes),e.s.hooks=this.s.hooks.clone(),e.tree=p(this.tree),e.paths=p(this.paths),e.nested=p(this.nested),e.subpaths=p(this.subpaths),e.singleNestedPaths=p(this.singleNestedPaths),e.childSchemas=\n/*!\n * ignore\n */\nfunction(t){const e=[];for(const n of Object.keys(t.paths)){const o=t.paths[n];(o.$isMongooseDocumentArray||o.$isSingleNested)&&e.push({schema:o.schema,model:o.caster})}return e}\n/*!\n * ignore\n */(e),e.virtuals=p(this.virtuals),e.$globalPluginsApplied=this.$globalPluginsApplied,e.$isRootDiscriminator=this.$isRootDiscriminator,e.$implicitlyCreated=this.$implicitlyCreated,e.$id=++x,e.$originalSchemaId=this.$id,e.mapPaths=[].concat(this.mapPaths),null!=this.discriminatorMapping&&(e.discriminatorMapping=Object.assign({},this.discriminatorMapping)),null!=this.discriminators&&(e.discriminators=Object.assign({},this.discriminators)),null!=this._applyDiscriminators&&(e._applyDiscriminators=Object.assign({},this._applyDiscriminators)),e.aliases=Object.assign({},this.aliases),e},P.prototype.pick=function(t,e){const n=new P({},e||this.options);if(!Array.isArray(t))throw new i('Schema#pick() only accepts an array argument, got \"'+typeof t+'\"');for(const e of t)if(this.nested[e])n.add({[e]:h(this.tree,e)});else{const t=this.path(e);if(null==t)throw new i(\"Path `\"+e+\"` is not in the schema\");n.add({[e]:t})}return n},P.prototype.omit=function(t,e){const n=new P(this,e||this.options);if(!Array.isArray(t))throw new i('Schema#omit() only accepts an array argument, got \"'+typeof t+'\"');n.remove(t);for(const e in n.singleNestedPaths)t.includes(e)&&delete n.singleNestedPaths[e];return n},P.prototype.defaultOptions=function(t){this._userProvidedOptions=null==t?{}:p(t);const e=this.base&&this.base.options||{},n=!(\"strict\"in e)||e.strict,o=\"strictQuery\"in e&&e.strictQuery,r=!(\"id\"in e)||e.id;if((t=O.options({strict:n,strictQuery:o,bufferCommands:!0,capped:!1,versionKey:\"__v\",optimisticConcurrency:!1,minimize:!0,autoIndex:null,discriminatorKey:\"__t\",shardKey:null,read:null,validateBeforeSave:!0,_id:!0,id:r,typeKey:\"type\"},p(t))).versionKey&&\"string\"!=typeof t.versionKey)throw new i(\"`versionKey` must be falsy or string, got `\"+typeof t.versionKey+\"`\");if(\"string\"==typeof t.read?t.read=y(t.read):Array.isArray(t.read)&&\"string\"==typeof t.read[0]&&(t.read={mode:y(t.read[0]),tags:t.read[1]}),t.optimisticConcurrency&&!t.versionKey)throw new i(\"Must set `versionKey` if using `optimisticConcurrency`\");return t},P.prototype.discriminator=function(t,e){return this._applyDiscriminators=Object.assign(this._applyDiscriminators||{},{[t]:e}),this},P.prototype.add=function(t,e){if(t instanceof P||null!=t&&t.instanceOfSchema)return g(this,t),this;if(!1===t._id&&null==e&&(this.options._id=!1),\"__proto__.\"===(e=e||\"\")||\"constructor.\"===e||\"prototype.\"===e)return this;const n=Object.keys(t),o=this.options.typeKey;for(const r of n){if(O.specialProperties.has(r))continue;const n=e+r,i=t[r];if(null==i)throw new TypeError(\"Invalid value for schema path `\"+n+'`, got value \"'+i+'\"');if(\"_id\"===r&&!1===i)continue;let s=!1;if(\"string\"==typeof i){s=null!=(null!=this.base?this.base.Schema.Types:P.Types)[i.charAt(0).toUpperCase()+i.substring(1)]}if(\"_id\"!==r&&(\"object\"!=typeof i&&\"function\"!=typeof i&&!s||null==i))throw new TypeError(`Invalid schema configuration: \\`${i}\\` is not a valid type at path \\`${r}\\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if(i instanceof l||\"VirtualType\"===(i.constructor&&i.constructor.name||null))this.virtual(i);else{if(Array.isArray(i)&&1===i.length&&null==i[0])throw new TypeError(\"Invalid value for schema Array path `\"+n+'`, got value \"'+i[0]+'\"');if(j(i)||i instanceof c)if(Object.keys(i).length<1)e&&(this.nested[e.substring(0,e.length-1)]=!0),this.path(n,i);else if(!i[o]||\"type\"===o&&j(i.type)&&i.type.type)this.nested[n]=!0,this.add(i,n+\".\");else{const t=i[o];if(j(t)&&Object.keys(t).length>0){e&&(this.nested[e.substring(0,e.length-1)]=!0);const n={};this._userProvidedOptions.typeKey&&(n.typeKey=this._userProvidedOptions.typeKey);const s=new P(t,n);s.$implicitlyCreated=!0;const c=Object.assign({},i,{[o]:s});this.path(e+r,c)}else if(e&&(this.nested[e.substring(0,e.length-1)]=!0),this.path(e+r,i),null!=i&&!i.instanceOfSchema&&O.isPOJO(i.discriminators)){const t=this.path(e+r);for(const e in i.discriminators)t.discriminator(e,i.discriminators[e])}}else if(e&&(this.nested[e.substring(0,e.length-1)]=!0),this.path(e+r,i),null!=i[0]&&!i[0].instanceOfSchema&&O.isPOJO(i[0].discriminators)){const t=this.path(e+r);for(const e in i[0].discriminators)t.discriminator(e,i[0].discriminators[e])}else if(null!=i[0]&&i[0].instanceOfSchema&&O.isPOJO(i[0]._applyDiscriminators)){const t=i[0]._applyDiscriminators||[],n=this.path(e+r);for(const e in t)n.discriminator(e,t[e])}else if(null!=i&&i.instanceOfSchema&&O.isPOJO(i._applyDiscriminators)){const t=i._applyDiscriminators||[],n=this.path(e+r);for(const e in t)n.discriminator(e,t[e])}}}return k(this,Object.fromEntries(Object.entries(t).map(([t])=>[e+t,null]))),this},P.prototype.alias=function(t,e){return k(this,{[t]:e}),this},P.prototype.removeIndex=function(t){if(arguments.length>1)throw new Error(\"removeIndex() takes only 1 argument\");if(\"object\"!=typeof t&&\"string\"!=typeof t)throw new Error(\"removeIndex() may only take either an object or a string as an argument\");if(\"object\"==typeof t)for(let e=this._indexes.length-1;e>=0;--e)w.isDeepStrictEqual(this._indexes[e][0],t)&&this._indexes.splice(e,1);else for(let e=this._indexes.length-1;e>=0;--e)null!=this._indexes[e][1]&&this._indexes[e][1].name===t&&this._indexes.splice(e,1);return this},P.prototype.clearIndexes=function(){return this._indexes.length=0,this},P.reserved=Object.create(null),P.prototype.reserved=P.reserved;const M=P.reserved;\n/*!\n * ignore\n */\nfunction C(t){return/\\.\\d+/.test(t)?t.replace(/\\.\\d+\\./g,\".$.\").replace(/\\.\\d+$/,\".$\"):t}\n/*!\n * ignore\n */function D(t,e){if(0===t.mapPaths.length)return null;for(const n of t.mapPaths){const o=n.path;if(new RegExp(\"^\"+o.replace(/\\.\\$\\*/g,\"\\\\.[^.]+\")+\"$\").test(e))return t.paths[o]}return null}function N(t,e){const n=e.split(/\\.(\\d+)\\.|\\.(\\d+)$/).filter(Boolean);if(n.length<2)return t.paths.hasOwnProperty(n[0])?t.paths[n[0]]:\"adhocOrUndefined\";let o=t.path(n[0]),r=!1;if(!o)return\"adhocOrUndefined\";const i=n.length-1;for(let t=1;t<n.length;++t){r=!1;const e=n[t];if(t===i&&o&&!/\\D/.test(e)){o=o.$isMongooseDocumentArray?o.$embeddedSchemaType:o instanceof v.Array?o.caster:void 0;break}if(!/\\D/.test(e)){o instanceof v.Array&&t!==i&&(o=o.caster);continue}if(!o||!o.schema){o=void 0;break}r=\"nested\"===o.schema.pathType(e),o=o.schema.path(e)}return t.subpaths[e]=o,o?\"real\":r?\"nested\":\"adhocOrUndefined\"}\n/*!\n * ignore\n */M.prototype=M.emit=M.listeners=M.removeListener=M.collection=M.errors=M.get=M.init=M.isModified=M.isNew=M.populated=M.remove=M.save=M.toObject=M.validate=1,M.collection=1,P.prototype.path=function(t,e){if(void 0===e){const e=C(t);let n=function(t,e,n){if(t.paths.hasOwnProperty(e))return t.paths[e];if(t.subpaths.hasOwnProperty(n))return t.subpaths[n];if(t.singleNestedPaths.hasOwnProperty(n)&&\"object\"==typeof t.singleNestedPaths[n])return t.singleNestedPaths[n];return null}(this,t,e);if(null!=n)return n;const o=D(this,t);return null!=o?o:(n=this.hasMixedParent(e),null!=n?n:/\\.\\d+\\.?.*$/.test(t)?function(t,e){return N(t,e),t.subpaths[e]}(this,t):void 0)}const n=t.split(\".\")[0];if(M[n]&&!this.options.suppressReservedKeysWarning){const t=`\\`${n}\\` is a reserved schema pathname and may break some functionality. You are allowed to use it, but use at your own risk. To disable this warning pass \\`suppressReservedKeysWarning\\` as a schema option.`;O.warn(t)}\"object\"==typeof e&&O.hasUserDefinedProperty(e,\"ref\")&&$(e.ref,t);const o=t.split(/\\./),r=o.pop();let i=this.tree,c=\"\";for(const e of o){if(O.specialProperties.has(e))throw new Error(\"Cannot set special property `\"+e+\"` on a schema\");if(c=c+=(c.length>0?\".\":\"\")+e,i[e]||(this.nested[c]=!0,i[e]={}),\"object\"!=typeof i[e]){const n=\"Cannot set nested path `\"+t+\"`. Parent path `\"+c+\"` already set to type \"+i[e].name+\".\";throw new Error(n)}i=i[e]}i[r]=p(e),this.paths[t]=this.interpretAsType(t,e,this.options);const a=this.paths[t];if(a.$isSchemaMap){const e=t+\".$*\";this.paths[e]=a.$__schemaType,this.mapPaths.push(this.paths[e])}if(a.$isSingleNested){for(const e of Object.keys(a.schema.paths))this.singleNestedPaths[t+\".\"+e]=a.schema.paths[e];for(const e of Object.keys(a.schema.singleNestedPaths))this.singleNestedPaths[t+\".\"+e]=a.schema.singleNestedPaths[e];for(const e of Object.keys(a.schema.subpaths))this.singleNestedPaths[t+\".\"+e]=a.schema.subpaths[e];for(const e of Object.keys(a.schema.nested))this.singleNestedPaths[t+\".\"+e]=\"nested\";Object.defineProperty(a.schema,\"base\",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),a.caster.base=this.base,this.childSchemas.push({schema:a.schema,model:a.caster})}else a.$isMongooseDocumentArray&&(Object.defineProperty(a.schema,\"base\",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),a.casterConstructor.base=this.base,this.childSchemas.push({schema:a.schema,model:a.casterConstructor}));if(a.$isMongooseArray&&a.caster instanceof s){let e=t,n=a;const o=[];for(;n.$isMongooseArray;)e+=\".$\",n.$isMongooseDocumentArray?(n.$embeddedSchemaType._arrayPath=e,n.$embeddedSchemaType._arrayParentPath=t,n=n.$embeddedSchemaType.clone()):(n.caster._arrayPath=e,n.caster._arrayParentPath=t,n=n.caster.clone()),n.path=e,o.push(n);for(const t of o)this.subpaths[t.path]=t}if(a.$isMongooseDocumentArray){for(const e of Object.keys(a.schema.paths)){const n=a.schema.paths[e];this.subpaths[t+\".\"+e]=n,\"object\"==typeof n&&null!=n&&(n.$isUnderneathDocArray=!0)}for(const e of Object.keys(a.schema.subpaths)){const n=a.schema.subpaths[e];this.subpaths[t+\".\"+e]=n,\"object\"==typeof n&&null!=n&&(n.$isUnderneathDocArray=!0)}for(const e of Object.keys(a.schema.singleNestedPaths)){const n=a.schema.singleNestedPaths[e];this.subpaths[t+\".\"+e]=n,\"object\"==typeof n&&null!=n&&(n.$isUnderneathDocArray=!0)}}return this},Object.defineProperty(P.prototype,\"base\",{configurable:!0,enumerable:!1,writable:!0,value:null}),P.prototype.interpretAsType=function(t,e,o){if(e instanceof s){if(e.path===t)return e;const n=e.clone();return n.path=t,n}const r=null!=this.base?this.base.Schema.Types:P.Types,a=null!=this.base?this.base.Types:n(53);if(!(O.isPOJO(e)||e instanceof c)){if(\"Object\"!==O.getFunctionName(e.constructor)){const t=e;(e={})[o.typeKey]=t}}let l,u=e[o.typeKey]&&(e[o.typeKey]instanceof Function||\"type\"!==o.typeKey||!e.type.type)?e[o.typeKey]:{};if(O.isPOJO(u)||\"mixed\"===u)return new r.Mixed(t,e);if(Array.isArray(u)||u===Array||\"array\"===u||u===r.Array){let n=u===Array||\"array\"===u?e.cast||e.of:u[0];if(n&&n.instanceOfSchema){if(!(n instanceof P))throw new TypeError(\"Schema for array path `\"+t+\"` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with `npm list mongoose`. If you are still getting this error, please add `new Schema()` around the path: \"+t+\": new Schema(...)\");return new r.DocumentArray(t,n,e)}if(n&&n[o.typeKey]&&n[o.typeKey].instanceOfSchema){if(!(n[o.typeKey]instanceof P))throw new TypeError(\"Schema for array path `\"+t+\"` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with `npm list mongoose`. If you are still getting this error, please add `new Schema()` around the path: \"+t+\": new Schema(...)\");return new r.DocumentArray(t,n[o.typeKey],e,n)}if(Array.isArray(n))return new r.Array(t,this.interpretAsType(t,n,o),e);const i=null==n||!n[o.typeKey]||\"type\"===o.typeKey&&n.type.type?n:n[o.typeKey];if(\"string\"==typeof n)n=r[n.charAt(0).toUpperCase()+n.substring(1)];else if(O.isPOJO(i)){if(Object.keys(i).length){const n={minimize:o.minimize};o.typeKey&&(n.typeKey=o.typeKey),o.hasOwnProperty(\"strict\")&&(n.strict=o.strict),o.hasOwnProperty(\"strictQuery\")&&(n.strictQuery=o.strictQuery),this._userProvidedOptions.hasOwnProperty(\"_id\")?n._id=this._userProvidedOptions._id:null!=P.Types.DocumentArray.defaultOptions._id&&(n._id=P.Types.DocumentArray.defaultOptions._id);const s=new P(i,n);return s.$implicitlyCreated=!0,new r.DocumentArray(t,s,e)}return new r.Array(t,r.Mixed,e)}if(n){if(u=!n[o.typeKey]||\"type\"===o.typeKey&&n.type.type?n:n[o.typeKey],Array.isArray(u))return new r.Array(t,this.interpretAsType(t,u,o),e);if(l=\"string\"==typeof u?u:u.schemaName||O.getFunctionName(u),\"ClockDate\"===l&&(l=\"Date\"),void 0===l)throw new TypeError(`Invalid schema configuration: Could not determine the embedded type for array \\`${t}\\`. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(!r.hasOwnProperty(l))throw new TypeError(`Invalid schema configuration: \\`${l}\\` is not a valid type within the array \\`${t}\\`.See https://bit.ly/mongoose-schematypes for a list of valid schema types.`)}return new r.Array(t,n||r.Mixed,e,o)}if(u&&u.instanceOfSchema)return new r.Subdocument(u,t,e);if(l=Buffer.isBuffer(u)?\"Buffer\":\"function\"==typeof u||\"object\"==typeof u?u.schemaName||O.getFunctionName(u):u===a.ObjectId?\"ObjectId\":u===a.Decimal128?\"Decimal128\":null==u?\"\"+u:u.toString(),l&&(l=l.charAt(0).toUpperCase()+l.substring(1)),\"ObjectID\"===l&&(l=\"ObjectId\"),\"ClockDate\"===l&&(l=\"Date\"),void 0===l)throw new TypeError(`Invalid schema configuration: \\`${t}\\` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(null==r[l])throw new TypeError(`Invalid schema configuration: \\`${l}\\` is not a valid type at path \\`${t}\\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);const p=new r[l](t,e);return p.$isSchemaMap&&\n/*!\n * ignore\n */\nfunction(t,e,n,o,r){const s=n+\".$*\";let c={type:{}};if(O.hasUserDefinedProperty(o,\"of\")){const e=O.isPOJO(o.of)&&Object.keys(o.of).length>0&&!O.hasUserDefinedProperty(o.of,t.options.typeKey);if(c=e?{[t.options.typeKey]:new P(o.of)}:O.isPOJO(o.of)?Object.assign({},o.of):{[t.options.typeKey]:o.of},c[t.options.typeKey]&&c[t.options.typeKey].instanceOfSchema){c[t.options.typeKey].eachPath((t,e)=>{if(!0===e.options.select||!1===e.options.select)throw new i('Cannot use schema-level projections (`select: true` or `select: false`) within maps at path \"'+n+\".\"+t+'\"')})}O.hasUserDefinedProperty(o,\"ref\")&&(c.ref=o.ref)}e.$__schemaType=t.interpretAsType(s,c,r)}(this,p,t,e,o),p},P.prototype.eachPath=function(t){const e=Object.keys(this.paths),n=e.length;for(let o=0;o<n;++o)t(e[o],this.paths[e[o]]);return this},P.prototype.requiredPaths=function(t){if(this._requiredpaths&&!t)return this._requiredpaths;const e=Object.keys(this.paths);let n=e.length;const o=[];for(;n--;){const t=e[n];this.paths[t].isRequired&&o.push(t)}return this._requiredpaths=o,this._requiredpaths},P.prototype.indexedPaths=function(){return this._indexedpaths||(this._indexedpaths=this.indexes()),this._indexedpaths},P.prototype.pathType=function(t){const e=C(t);if(this.paths.hasOwnProperty(t))return\"real\";if(this.virtuals.hasOwnProperty(t))return\"virtual\";if(this.nested.hasOwnProperty(t))return\"nested\";if(this.subpaths.hasOwnProperty(e)||this.subpaths.hasOwnProperty(t))return\"real\";const n=this.singleNestedPaths.hasOwnProperty(e)||this.singleNestedPaths.hasOwnProperty(t);if(n)return\"nested\"===n?\"nested\":\"real\";return null!=D(this,t)?\"real\":/\\.\\d+\\.|\\.\\d+$/.test(t)?N(this,t):\"adhocOrUndefined\"},P.prototype.hasMixedParent=function(t){const e=t.split(/\\./g);t=\"\";for(let n=0;n<e.length;++n)if(t=n>0?t+\".\"+e[n]:e[n],this.paths.hasOwnProperty(t)&&this.paths[t]instanceof v.Mixed)return this.paths[t];return null},P.prototype.setupTimestamp=function(t){return b(this,t)},P.prototype.queue=function(t,e){return this.callQueue.push([t,e]),this},P.prototype.pre=function(t){if(t instanceof RegExp){const e=Array.prototype.slice.call(arguments,1);for(const n of S)t.test(n)&&this.pre.apply(this,[n].concat(e));return this}if(Array.isArray(t)){const e=Array.prototype.slice.call(arguments,1);for(const n of t)this.pre.apply(this,[n].concat(e));return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this},P.prototype.post=function(t){if(t instanceof RegExp){const e=Array.prototype.slice.call(arguments,1);for(const n of S)t.test(n)&&this.post.apply(this,[n].concat(e));return this}if(Array.isArray(t)){const e=Array.prototype.slice.call(arguments,1);for(const n of t)this.post.apply(this,[n].concat(e));return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this},P.prototype.plugin=function(t,e){if(\"function\"!=typeof t)throw new Error('First param to `schema.plugin()` must be a function, got \"'+typeof t+'\"');if(e&&e.deduplicate)for(const e of this.plugins)if(e.fn===t)return this;return this.plugins.push({fn:t,opts:e}),t(this,e),this},P.prototype.method=function(t,e,n){if(\"string\"!=typeof t)for(const e in t)this.methods[e]=t[e],this.methodOptions[e]=p(n);else this.methods[t]=e,this.methodOptions[t]=p(n);return this},P.prototype.static=function(t,e){if(\"string\"!=typeof t)for(const e in t)this.statics[e]=t[e];else this.statics[t]=e;return this},P.prototype.index=function(t,e){return t||(t={}),e||(e={}),e.expires&&O.expires(e),this._indexes.push([t,e]),this},P.prototype.set=function(t,e,n){if(1===arguments.length)return this.options[t];switch(t){case\"read\":\"string\"==typeof e?this.options[t]={mode:y(e),tags:n}:Array.isArray(e)&&\"string\"==typeof e[0]?this.options[t]={mode:y(e[0]),tags:e[1]}:this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break;case\"timestamps\":this.setupTimestamp(e),this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break;case\"_id\":this.options[t]=e,this._userProvidedOptions[t]=this.options[t],e&&!this.paths._id?u(this):!e&&null!=this.paths._id&&this.paths._id.auto&&this.remove(\"_id\");break;default:this.options[t]=e,this._userProvidedOptions[t]=this.options[t]}return this},P.prototype.get=function(t){return this.options[t]};const T=\"2d 2dsphere hashed text\".split(\" \");\n/*!\n * ignore\n */\nfunction I(t,e){const n=e.split(\".\"),o=n.pop();let r=t.tree;for(const t of n)r=r[t];delete r[o]}\n/*!\n * ignore\n */\nfunction R(t){return t.startsWith(\"$[\")&&t.endsWith(\"]\")}Object.defineProperty(P,\"indexTypes\",{get:function(){return T},set:function(){throw new Error(\"Cannot overwrite Schema.indexTypes\")}}),P.prototype.indexes=function(){return d(this)},P.prototype.virtual=function(t,e){if(t instanceof l||\"VirtualType\"===f(t))return this.virtual(t.path,t.options);if(e=new a(e),O.hasUserDefinedProperty(e,[\"ref\",\"refPath\"])){if(null==e.localField)throw new Error(\"Reference virtuals require `localField` option\");if(null==e.foreignField)throw new Error(\"Reference virtuals require `foreignField` option\");this.pre(\"init\",(function(n){if(_.has(t,n)){const o=_.get(t,n);this.$$populatedVirtuals||(this.$$populatedVirtuals={}),e.justOne||e.count?this.$$populatedVirtuals[t]=Array.isArray(o)?o[0]:o:this.$$populatedVirtuals[t]=Array.isArray(o)?o:null==o?[]:[o],_.unset(t,n)}}));const n=this.virtual(t);n.options=e,n.set((function(n){this.$$populatedVirtuals||(this.$$populatedVirtuals={}),e.justOne||e.count?(this.$$populatedVirtuals[t]=Array.isArray(n)?n[0]:n,\"object\"!=typeof this.$$populatedVirtuals[t]&&(this.$$populatedVirtuals[t]=e.count?n:null)):(this.$$populatedVirtuals[t]=Array.isArray(n)?n:null==n?[]:[n],this.$$populatedVirtuals[t]=this.$$populatedVirtuals[t].filter((function(t){return t&&\"object\"==typeof t})))})),\"function\"==typeof e.get&&n.get(e.get);const o=t.split(\".\");let r=o[0];for(let t=0;t<o.length-1;++t)if(null!=this.paths[r]){if(this.paths[r].$isMongooseDocumentArray||this.paths[r].$isSingleNested){const n=o.slice(t+1).join(\".\");this.paths[r].schema.virtual(n,e);break}r+=\".\"+o[t+1]}return n}const n=this.virtuals,o=t.split(\".\");if(\"real\"===this.pathType(t))throw new Error('Virtual path \"'+t+'\" conflicts with a real path in the schema');return n[t]=o.reduce((function(n,r,i){return n[r]||(n[r]=i===o.length-1?new l(e,t):{}),n[r]}),this.tree),n[t]},P.prototype.virtualpath=function(t){return this.virtuals.hasOwnProperty(t)?this.virtuals[t]:null},P.prototype.remove=function(t){return\"string\"==typeof t&&(t=[t]),Array.isArray(t)&&t.forEach((function(t){if(null!=this.path(t)||this.nested[t]){if(this.nested[t]){const e=Object.keys(this.paths).concat(Object.keys(this.nested));for(const n of e)n.startsWith(t+\".\")&&(delete this.paths[n],delete this.nested[n],I(this,n));return delete this.nested[t],void I(this,t)}delete this.paths[t],I(this,t)}}),this),this},P.prototype.removeVirtual=function(t){if(\"string\"==typeof t&&(t=[t]),Array.isArray(t)){for(const e of t)if(null==this.virtuals[e])throw new i(`Attempting to remove virtual \"${e}\" that does not exist.`);for(const e of t)delete this.paths[e],delete this.virtuals[e],-1!==e.indexOf(\".\")?_.unset(e,this.tree):delete this.tree[e]}return this},P.prototype.loadClass=function(t,e){return t===Object.prototype||t===Function.prototype||t.prototype.hasOwnProperty(\"$isMongooseModelPrototype\")||t.prototype.hasOwnProperty(\"$isMongooseDocumentPrototype\")||(this.loadClass(Object.getPrototypeOf(t),e),e||Object.getOwnPropertyNames(t).forEach((function(e){if(e.match(/^(length|name|prototype|constructor|__proto__)$/))return;const n=Object.getOwnPropertyDescriptor(t,e);n.hasOwnProperty(\"value\")&&this.static(e,n.value)}),this),Object.getOwnPropertyNames(t.prototype).forEach((function(n){if(n.match(/^(constructor)$/))return;const o=Object.getOwnPropertyDescriptor(t.prototype,n);e||\"function\"==typeof o.value&&this.method(n,o.value),\"function\"==typeof o.get&&(this.virtuals[n]&&(this.virtuals[n].getters=[]),this.virtual(n).get(o.get)),\"function\"==typeof o.set&&(this.virtuals[n]&&(this.virtuals[n].setters=[]),this.virtual(n).set(o.set))}),this)),this},\n/*!\n * ignore\n */\nP.prototype._getSchema=function(t){const e=this.path(t),n=[];if(e)return e.$fullPath=t,e;const o=t.split(\".\");for(let t=0;t<o.length;++t)(\"$\"===o[t]||R(o[t]))&&(o[t]=\"0\");return function t(e,o){let r,i,s=e.length+1;for(;s--;)if(i=e.slice(0,s).join(\".\"),r=o.path(i),r){if(n.push(i),r.caster){if(r.caster instanceof v.Mixed)return r.caster.$fullPath=n.join(\".\"),r.caster;if(s!==e.length&&r.schema){let n;return\"$\"===e[s]||R(e[s])?s+1===e.length?r:(n=t(e.slice(s+1),r.schema),n&&(n.$isUnderneathDocArray=n.$isUnderneathDocArray||!r.schema.$isSingleNested),n):(n=t(e.slice(s),r.schema),n&&(n.$isUnderneathDocArray=n.$isUnderneathDocArray||!r.schema.$isSingleNested),n)}}else if(r.$isSchemaMap){if(s>=e.length)return r;if(s+1>=e.length)return r.$__schemaType;if(r.$__schemaType instanceof v.Mixed)return r.$__schemaType;if(null!=r.$__schemaType.schema){return t(e.slice(s+1),r.$__schemaType.schema)}}return r.$fullPath=n.join(\".\"),r}}(o,this)},\n/*!\n * ignore\n */\nP.prototype._getPathType=function(t){if(this.path(t))return\"real\";return function t(e,n){let o,r,i=e.length+1;for(;i--;){if(r=e.slice(0,i).join(\".\"),o=n.path(r),o)return o.caster?o.caster instanceof v.Mixed?{schema:o,pathType:\"mixed\"}:i!==e.length&&o.schema?\"$\"===e[i]||R(e[i])?i===e.length-1?{schema:o,pathType:\"nested\"}:t(e.slice(i+1),o.schema):t(e.slice(i),o.schema):{schema:o,pathType:o.$isSingleNested?\"nested\":\"array\"}:{schema:o,pathType:\"real\"};if(i===e.length&&n.nested[r])return{schema:n,pathType:\"nested\"}}return{schema:o||n,pathType:\"undefined\"}}(t.split(\".\"),this)},P.prototype._preCompile=function(){m(this)},\n/*!\n * Module exports.\n */\nt.exports=e=P,P.Types=v=n(71),\n/*!\n * ignore\n */\ne.ObjectId=v.ObjectId},function(t,e,n){\"use strict\";t.exports=function(t){return t.replace(/\\.\\$(\\[[^\\]]*\\])?(?=\\.)/g,\".0\").replace(/\\.\\$(\\[[^\\]]*\\])?$/g,\".0\")}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(40).Binary,r=n(3);function i(t,e,n){let o,s,a,l,u=t;return null==t&&(u=0),Array.isArray(e)?(s=e[0],a=e[1]):o=e,l=\"number\"==typeof u||u instanceof Number?Buffer.alloc(u):Buffer.from(u,o,n),r.decorate(l,i.mixin),l.isMongooseBuffer=!0,l[i.pathSymbol]=s,l[c]=a,l._subtype=0,l}const s=Symbol.for(\"mongoose#Buffer#_path\"),c=Symbol.for(\"mongoose#Buffer#_parent\");i.pathSymbol=s,\n/*!\n * Inherit from Buffer.\n */\ni.mixin={_subtype:void 0,_markModified:function(){const t=this[c];return t&&t.markModified(this[i.pathSymbol]),this},write:function(){const t=Buffer.prototype.write.apply(this,arguments);return t>0&&this._markModified(),t},copy:function(t){const e=Buffer.prototype.copy.apply(this,arguments);return t&&t.isMongooseBuffer&&t._markModified(),e}},\n/*!\n * Compile other Buffer methods marking this buffer as modified.\n */\nr.each([\"writeUInt8\",\"writeUInt16\",\"writeUInt32\",\"writeInt8\",\"writeInt16\",\"writeInt32\",\"writeFloat\",\"writeDouble\",\"fill\",\"utf8Write\",\"binaryWrite\",\"asciiWrite\",\"set\",\"writeUInt16LE\",\"writeUInt16BE\",\"writeUInt32LE\",\"writeUInt32BE\",\"writeInt16LE\",\"writeInt16BE\",\"writeInt32LE\",\"writeInt32BE\",\"writeFloatLE\",\"writeFloatBE\",\"writeDoubleLE\",\"writeDoubleBE\"],(function(t){Buffer.prototype[t]&&(i.mixin[t]=function(){const e=Buffer.prototype[t].apply(this,arguments);return this._markModified(),e})})),i.mixin.toObject=function(t){const e=\"number\"==typeof t?t:this._subtype||0;return new o(Buffer.from(this),e)},i.mixin.$toObject=i.mixin.toObject,i.mixin.toBSON=function(){return new o(this,this._subtype||0)},i.mixin.equals=function(t){if(!Buffer.isBuffer(t))return!1;if(this.length!==t.length)return!1;for(let e=0;e<this.length;++e)if(this[e]!==t[e])return!1;return!0},i.mixin.subtype=function(t){if(\"number\"!=typeof t)throw new TypeError(\"Invalid subtype. Expected a number\");this._subtype!==t&&this._markModified(),this._subtype=t},\n/*!\n * Module exports.\n */\ni.Binary=o,t.exports=i},function(t,e,n){\"use strict\";\n/*!\n * Module exports.\n */e.Array=n(99),e.Boolean=n(322),e.BigInt=n(323),e.Buffer=n(325),e.Date=n(327),e.Decimal128=e.Decimal=n(330),e.DocumentArray=n(332),e.Map=n(342),e.Mixed=n(42),e.Number=n(173),e.ObjectId=n(344),e.String=n(346),e.Subdocument=n(175),e.UUID=n(348),e.Oid=e.ObjectId,e.Object=e.Mixed,e.Bool=e.Boolean,e.ObjectID=e.ObjectId},function(t,e,n){\"use strict\";const o=n(46);t.exports=function(t){return null==t?t:\"\"===t?null:(\"string\"!=typeof t&&\"boolean\"!=typeof t||(t=Number(t)),o.ok(!isNaN(t)),t instanceof Number?t.valueOf():\"number\"==typeof t?t:Array.isArray(t)||\"function\"!=typeof t.valueOf?t.toString&&!Array.isArray(t)&&t.toString()==Number(t)?Number(t):void o.ok(!1):Number(t.valueOf()))}},function(t,e,n){\"use strict\";\n/*!\n * Module requirements.\n */const o=n(173);\n/*!\n * ignore\n */\n/*!\n * ignore\n */\nfunction r(t){return o.cast()(t)}e.castToNumber=r,e.castArraysOfNumbers=function t(e,n){e.forEach((function(o,i){Array.isArray(o)?t(o,n):e[i]=r.call(n,o)}))}},function(t,e,n){\"use strict\";const o=n(57);\n/*!\n * ignore\n */t.exports=function t(e){if(null==e)return null;const n=Object.keys(e);let r=n.length,i=null;if(1===r&&\"_id\"===n[0])i=!e._id;else for(;r--;){const s=n[r];if(\"_id\"!==s&&o(e[s])){i=null!=e[s]&&\"object\"==typeof e[s]?t(e[s]):!e[s];break}}return i}},function(t,e,n){\"use strict\";const o=[\"find\",\"findOne\",\"updateMany\",\"updateOne\",\"replaceOne\",\"count\",\"distinct\",\"findOneAndDelete\",\"findOneAndUpdate\",\"aggregate\",\"findCursor\",\"deleteOne\",\"deleteMany\"];function r(){}for(let t=0,e=o.length;t<e;++t){const e=o[t];r.prototype[e]=i(e)}function i(t){return function(){throw new Error(\"collection.\"+t+\" not implemented\")}}t.exports=r,r.methods=o},function(t,e,n){\"use strict\";\n/*!\n * ignore\n */t.exports=new WeakMap},,,,,function(t,e){t.exports=require(\"tty\")},,,function(t,e){throw new Error(\"Module parse failed: Unexpected token (118:27)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|  */\\n| function applyRetryableWrites(target, db) {\\n>     if (db && db.s.options?.retryWrites) {\\n|         target.retryWrites = true;\\n|     }\")},function(t,e,n){\"use strict\";t.exports=n(40).Decimal128},function(t,e,n){\"use strict\";e.isMongooseArray=function(t){return Array.isArray(t)&&t.isMongooseArray}},function(t,e,n){\"use strict\";const o=n(20),r=Symbol(\"mongoose:emitted\");t.exports=function(t,e,n,i){if(\"function\"==typeof t)try{return e((function(e){if(null==e)t.apply(this,arguments);else{null!=n&&null!=n.listeners&&n.listeners(\"error\").length>0&&!e[r]&&(e[r]=!0,n.emit(\"error\",e));try{t(e)}catch(e){return o(()=>{throw e})}}}))}catch(e){return null!=n&&null!=n.listeners&&n.listeners(\"error\").length>0&&!e[r]&&(e[r]=!0,n.emit(\"error\",e)),t(e)}return new(i=i||global.Promise)((t,o)=>{e((function(e,i){return null!=e?(null!=n&&null!=n.listeners&&n.listeners(\"error\").length>0&&!e[r]&&(e[r]=!0,n.emit(\"error\",e)),o(e)):arguments.length>2?t(Array.prototype.slice.call(arguments,1)):void t(i)}))})}},function(t,e,n){\"use strict\";t.exports=function(t,e,n){const o=Object.keys(e.tree),r={};for(const i of o)n&&(t.paths[i]||t.nested[i]||t.singleNestedPaths[i])||(r[i]=e.tree[i]);t.add(r),t.callQueue=t.callQueue.concat(e.callQueue),t.method(e.methods),t.static(e.statics);for(const[n,o]of Object.entries(e._userProvidedOptions))n in t._userProvidedOptions||(t._userProvidedOptions[n]=o,t.options[n]=o);for(const n in e.query)t.query[n]=e.query[n];for(const n in e.virtuals)t.virtuals[n]=e.virtuals[n].clone();t._indexes=t._indexes.concat(e._indexes||[]),t.s.hooks.merge(e.s.hooks,!1)}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(9),r=n(2);class i extends o{constructor(t,e,n,i){let s;const c=o.messages;s=null!=c.DocumentNotFoundError?\"function\"==typeof c.DocumentNotFoundError?c.DocumentNotFoundError(t,e):c.DocumentNotFoundError:'No document found for query \"'+r.inspect(t)+'\" on model \"'+e+'\"',super(s),this.result=i,this.numAffected=n,this.filter=t,this.query=t}}Object.defineProperty(i.prototype,\"name\",{value:\"DocumentNotFoundError\"}),\n/*!\n * exports\n */\nt.exports=i},function(t,e,n){\"use strict\";const o=n(91);\n/*!\n * ignore\n */t.exports=function(t){const e=null!=this?this.path:null;return o(t,e)}},function(t,e,n){\"use strict\";const o=n(15);t.exports=function(e,n){if(t.exports.convertToTrue.has(e))return!0;if(t.exports.convertToFalse.has(e))return!1;if(null==e)return e;throw new o(\"boolean\",e,n)},t.exports.convertToTrue=new Set([!0,\"true\",1,\"1\",\"yes\"]),t.exports.convertToFalse=new Set([!1,\"false\",0,\"0\",\"no\"])},function(t,e,n){\"use strict\";function o(){this._pres=new Map,this._posts=new Map}function r(t,e,n,o,r,i,s){return i.useErrorHandlers?t.execPost(n,o,r,{error:e},(function(t){return\"function\"==typeof s&&s(t)})):\"function\"==typeof s&&s(e)}function i(t,e,n,o){let r;try{r=t.apply(e,n)}catch(t){return o(t)}s(r)&&r.then(()=>o(),t=>o(t))}function s(t){return\"object\"==typeof t&&null!==t&&\"function\"==typeof t.then}function c(t){let e=!1;const n=this;return function(){if(!e)return e=!0,a(()=>t.apply(n,arguments))}}o.skipWrappedFunction=function(){if(!(this instanceof o.skipWrappedFunction))return new o.skipWrappedFunction(...arguments);this.args=[...arguments]},o.overwriteResult=function(){if(!(this instanceof o.overwriteResult))return new o.overwriteResult(...arguments);this.args=[...arguments]},o.prototype.execPre=function(t,e,n,r){3===arguments.length&&(r=n,n=[]);const l=this._pres.get(t)||[],u=l.length,p=l.numAsync||0;let h=0,f=p,d=!1;const y=n;let m=null;if(!u)return a((function(){r(null)}));function g(){if(h>=u)return;const t=l[h];if(t.isAsync){const n=[c(_),c((function(t){if(t){if(d)return;if(!(t instanceof o.skipWrappedFunction))return d=!0,r(t);m=t}if(0==--f&&h>=u)return r(m)}))];i(t.fn,e,n,n[0])}else if(t.fn.length>0){const n=[c(_)],o=arguments.length>=2?arguments:[null].concat(y);for(let t=1;t<o.length;++t)t===o.length-1&&\"function\"==typeof o[t]||n.push(o[t]);i(t.fn,e,n,n[0])}else{let n=null;try{n=t.fn.call(e)}catch(t){if(null!=t)return r(t)}if(s(n))n.then(()=>_(),t=>_(t));else{if(++h>=u)return f>0?void 0:a((function(){r(m)}));g()}}}function _(t){if(t){if(d)return;if(!(t instanceof o.skipWrappedFunction))return d=!0,r(t);m=t}if(++h>=u)return f>0?void 0:r(m);g.apply(e,arguments)}g.apply(null,[null].concat(n))},o.prototype.execPreSync=function(t,e,n){const o=this._pres.get(t)||[],r=o.length;for(let t=0;t<r;++t)o[t].fn.apply(e,n||[])},o.prototype.execPost=function(t,e,n,r,u){arguments.length<5&&(u=r,r=null);const p=this._posts.get(t)||[],h=p.length;let f=0,d=null;if(r&&r.error&&(d=r.error),!h)return a((function(){u.apply(null,[d].concat(n))}));function y(){const t=p[f].fn;let r=0;const a=n.length,m=[];for(let t=0;t<a;++t)r+=n[t]&&n[t]._kareemIgnore?0:1,n[t]&&n[t]._kareemIgnore||m.push(n[t]);if(d)if(l(p[f],r)){const r=c((function(t){if(t){if(t instanceof o.overwriteResult)return n=t.args,++f>=h?u.call(null,d):y();d=t}if(++f>=h)return u.call(null,d);y()}));i(t,e,[d].concat(m).concat([r]),r)}else{if(++f>=h)return u.call(null,d);y()}else{const a=c((function(t){return t?t instanceof o.overwriteResult?(n=t.args,++f>=h?u.apply(null,[null].concat(n)):y()):(d=t,y()):++f>=h?u.apply(null,[null].concat(n)):void y()}));if(l(p[f],r))return++f>=h?u.apply(null,[null].concat(n)):y();if(t.length===r+1)i(t,e,m.concat([a]),a);else{let r,i;try{i=t.apply(e,m)}catch(t){r=t,d=t}if(s(i))return i.then(t=>{a(t instanceof o.overwriteResult?t:null)},t=>a(t));if(i instanceof o.overwriteResult&&(n=i.args),++f>=h)return u.apply(null,[r].concat(n));y()}}}y()},o.prototype.execPostSync=function(t,e,n){const r=this._posts.get(t)||[],i=r.length;for(let t=0;t<i;++t){const i=r[t].fn.apply(e,n||[]);i instanceof o.overwriteResult&&(n=i.args)}return n},o.prototype.createWrapperSync=function(t,e){const n=this;return function(){n.execPreSync(t,this,arguments);const o=e.apply(this,arguments),r=n.execPostSync(t,this,[o]);return r[0]}},o.prototype.wrap=function(t,e,n,i,c){const a=i.length>0?i[i.length-1]:null,l=Array.from(i);\"function\"==typeof a&&l.pop();const u=this,p=(c=c||{}).checkForPromise;this.execPre(t,n,i,(function(i){if(i&&!(i instanceof o.skipWrappedFunction)){const e=c.numCallbackParams||0,o=c.contextParameter?[n]:[];for(let t=o.length;t<e;++t)o.push(null);return r(u,i,t,n,o,c,a)}const h=e.length;let f;if(i instanceof o.skipWrappedFunction)return f=i.args[0],d(null,...i.args);try{f=e.apply(n,l.concat(d))}catch(t){return d(t)}if(p){if(s(f))return f.then(t=>d(null,t),t=>d(t));if(h<l.length+1)return d(null,f)}function d(){const e=Array.from(arguments);if(e.shift(),c.nullResultByDefault&&0===e.length&&e.push(null),arguments[0])return r(u,arguments[0],t,n,e,c,a);u.execPost(t,n,e,(function(){null!==a&&(arguments[0]?a(arguments[0]):a.apply(n,arguments))}))}}))},o.prototype.filter=function(t){const e=this.clone(),n=Array.from(e._pres.keys());for(const o of n){const n=this._pres.get(o).map(t=>Object.assign({},t,{name:o})).filter(t);0!==n.length?(n.numAsync=n.filter(t=>t.isAsync).length,e._pres.set(o,n)):e._pres.delete(o)}const o=Array.from(e._posts.keys());for(const n of o){const o=this._posts.get(n).map(t=>Object.assign({},t,{name:n})).filter(t);0!==o.length?e._posts.set(n,o):e._posts.delete(n)}return e},o.prototype.hasHooks=function(t){return this._pres.has(t)||this._posts.has(t)},o.prototype.createWrapper=function(t,e,n,o){const r=this;return this.hasHooks(t)?function(){const i=n||this;r.wrap(t,e,i,Array.from(arguments),o)}:function(){a(()=>e.apply(this,arguments))}},o.prototype.pre=function(t,e,n,o,r){let i={};\"object\"==typeof e&&null!==e?(i=e,e=i.isAsync):\"boolean\"!=typeof arguments[1]&&(n=e,e=!1);const s=this._pres.get(t)||[];if(this._pres.set(t,s),e&&(s.numAsync=s.numAsync||0,++s.numAsync),\"function\"!=typeof n)throw new Error('pre() requires a function, got \"'+typeof n+'\"');return r?s.unshift(Object.assign({},i,{fn:n,isAsync:e})):s.push(Object.assign({},i,{fn:n,isAsync:e})),this},o.prototype.post=function(t,e,n,o){const r=this._posts.get(t)||[];if(\"function\"==typeof e&&(o=!!n,n=e,e={}),\"function\"!=typeof n)throw new Error('post() requires a function, got \"'+typeof n+'\"');return o?r.unshift(Object.assign({},e,{fn:n})):r.push(Object.assign({},e,{fn:n})),this._posts.set(t,r),this},o.prototype.clone=function(){const t=new o;for(const e of this._pres.keys()){const n=this._pres.get(e).slice();n.numAsync=this._pres.get(e).numAsync,t._pres.set(e,n)}for(const e of this._posts.keys())t._posts.set(e,this._posts.get(e).slice());return t},o.prototype.merge=function(t,e){const n=(e=1===arguments.length||e)?this.clone():this;for(const e of t._pres.keys()){const o=n._pres.get(e)||[],r=t._pres.get(e).filter(t=>-1===o.map(t=>t.fn).indexOf(t.fn)),i=o.concat(r);i.numAsync=o.numAsync||0,i.numAsync+=r.filter(t=>t.isAsync).length,n._pres.set(e,i)}for(const e of t._posts.keys()){const o=n._posts.get(e)||[],r=t._posts.get(e).filter(t=>-1===o.indexOf(t));n._posts.set(e,o.concat(r))}return n};const a=\"object\"==typeof process&&null!==process&&process.nextTick||function(t){setTimeout(t,0)};function l(t,e){return!!t.errorHandler||t.fn.length===e+2}t.exports=o},function(t,e,n){\"use strict\";\n/*!\n * ignore\n */t.exports=r;const o=n(167);\n/*!\n * ignore\n */function r(t,e){const n=e.schema.s.hooks.filter(t=>{const e=function(t){const e={};t.hasOwnProperty(\"query\")&&(e.query=t.query);t.hasOwnProperty(\"document\")&&(e.document=t.document);return e}(t);return\"validate\"===t.name?!!e.query:\"deleteOne\"===t.name||\"updateOne\"===t.name?!!e.query||0===Object.keys(e).length:null==t.query&&null==t.document||!!t.query});t.prototype._queryMiddleware=n}r.middlewareFunctions=o.concat([\"validate\"])},function(t,e,n){\"use strict\";const o=n(43),r=n(87);\n/*!\n * ignore\n */\nt.exports=s,\n/*!\n * ignore\n */\ns.middlewareFunctions=[\"deleteOne\",\"save\",\"validate\",\"remove\",\"updateOne\",\"init\"];\n/*!\n * ignore\n */\nconst i=new Set(s.middlewareFunctions.flatMap(t=>[t,\"$__\"+t]));function s(t,e,n){const c={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},a=(n=n||{}).decorateDoc?t:t.prototype;t.$appliedHooks=!0;for(const t of Object.keys(e.paths)){const o=e.paths[t];let r=null;if(o.$isSingleNested)r=o.caster;else{if(!o.$isMongooseDocumentArray)continue;r=o.Constructor}if(!r.$appliedHooks&&(s(r,o.schema,n),null!=r.discriminators)){const t=Object.keys(r.discriminators);for(const e of t)s(r.discriminators[e],r.discriminators[e].schema,n)}}const l=e.s.hooks.filter(t=>\"updateOne\"===t.name||\"deleteOne\"===t.name?!!t.document:\"remove\"===t.name||\"init\"===t.name?null==t.document||!!t.document:null==t.query&&null==t.document||!1!==t.document).filter(t=>!e.methods[t.name]||!t.fn[o.builtInMiddleware]);t._middleware=l,a.$__originalValidate=a.$__originalValidate||a.$__validate;for(const t of[\"save\",\"validate\",\"remove\",\"deleteOne\"]){const e=\"validate\"===t?\"$__originalValidate\":\"$__\"+t,n=l.createWrapper(t,a[e],null,c);a[\"$__\"+t]=n}a.$__init=l.createWrapperSync(\"init\",a.$__init,null,c);const u=Object.keys(e.methods),p=Object.assign({},c,{checkForPromise:!0});for(const e of u){if(i.has(e))continue;if(!l.hasHooks(e))continue;const n=a[e];a[e]=function(){const n=Array.prototype.slice.call(arguments),o=n.slice(-1).pop(),i=\"function\"==typeof o?n.slice(0,n.length-1):n;return r(o,t=>this[\"$__\"+e].apply(this,i.concat([t])),t.events)},a[\"$__\"+e]=l.createWrapper(e,n,null,p)}}},function(t,e,n){\"use strict\";const o=n(17),r=n(54),i=n(11),s=n(169),c=n(12),a=n(35).internalToObjectOptions,l=n(23),u=n(3),p=n(16),h=n(1).arrayAtomicsSymbol,f=n(1).arrayParentSymbol,d=n(1).arrayPathSymbol,y=n(1).arraySchemaSymbol,m=n(1).populateModelSymbol,g=Symbol(\"mongoose#Array#sliced\"),_=Array.prototype.push,b={$__getAtomics(){const t=[],e=Object.keys(this[h]||{});let n=e.length;const o=Object.assign({},a,{_isNested:!0});if(0===n)return t[0]=[\"$set\",this.toObject(o)],t;for(;n--;){const r=e[n];let i=this[h][r];u.isMongooseObject(i)?i=i.toObject(o):Array.isArray(i)?i=this.toObject.call(i,o):null!=i&&Array.isArray(i.$each)?i.$each=this.toObject.call(i.$each,o):null!=i&&\"function\"==typeof i.valueOf&&(i=i.valueOf()),\"$addToSet\"===r&&(i={$each:i}),t.push([r,i])}return t},\n/*!\n   * ignore\n   */\n$atomics(){return this[h]},\n/*!\n   * ignore\n   */\n$parent(){return this[f]},\n/*!\n   * ignore\n   */\n$path(){return this[d]},$shift(){this._registerAtomic(\"$pop\",-1),this._markModified();const t=this.__array;if(!t._shifted)return t._shifted=!0,[].shift.call(t)},$pop(){if(this._registerAtomic(\"$pop\",1),this._markModified(),!this._popped)return this._popped=!0,[].pop.call(this)},\n/*!\n   * ignore\n   */\n$schema(){return this[y]},_cast(t){let e,n=!1;const o=this[f];if(o&&(n=o.$populated(this[d],!0)),n&&null!=t){e=n.options[m],(Buffer.isBuffer(t)||p(t,\"ObjectId\")||!u.isObject(t))&&(t={_id:t});return t.schema&&t.schema.discriminatorMapping&&void 0!==t.schema.discriminatorMapping.key||(t=new e(t)),this[y].caster.applySetters(t,o,!0)}return this[y].caster.applySetters(t,o,!1)},_mapCast(t,e){return this._cast(t,this.length+e)},_markModified(t){const e=this[f];let n;if(e){if(n=this[d],arguments.length&&(n=n+\".\"+t),null!=n&&n.endsWith(\".$\"))return this;e.markModified(n,0!==arguments.length?t:e)}return this},_registerAtomic(t,e){if(this[g])return;if(\"$set\"===t)return this[h]={$set:e},s(this[f],this[d]),this._markModified(),this;const n=this[h];if(\"$pop\"===t&&!(\"$pop\"in n)){const t=this;this[f].once(\"save\",(function(){t._popped=t._shifted=null}))}if(n.$set||Object.keys(n).length&&!(t in n))return this[h]={$set:this},this;let o;if(\"$pullAll\"===t||\"$addToSet\"===t)n[t]||(n[t]=[]),n[t]=n[t].concat(e);else if(\"$pullDocs\"===t){const t=n.$pull||(n.$pull={});e[0]instanceof r?(o=t.$or||(t.$or=[]),Array.prototype.push.apply(o,e.map(t=>t.toObject({transform:(e,n)=>(null==t||null==t.$__||Object.keys(t.$__.activePaths.getStatePaths(\"default\")).forEach(t=>{l.unset(t,n),\n/*!\n * Minimize _just_ empty objects along the path chain specified\n * by `parts`, ignoring all other paths. Useful in cases where\n * you want to minimize after unsetting a path.\n *\n * #### Example:\n *\n *     const obj = { foo: { bar: { baz: {} } }, a: {} };\n *     _minimizePath(obj, 'foo.bar.baz');\n *     obj; // { a: {} }\n */\nfunction t(e,n,o){if(\"string\"==typeof n){if(-1===n.indexOf(\".\"))return;n=l.stringToParts(n)}if((o=o||0)>=n.length)return;if(null==e||\"object\"!=typeof e)return;t(e[n[0]],n,o+1),null!=e[n[0]]&&\"object\"==typeof e[n[0]]&&0===Object.keys(e[n[0]]).length&&delete e[n[0]]}\n/*!\n * ignore\n */(n,t)}),n),virtuals:!1})))):(o=t._id||(t._id={$in:[]}),o.$in=o.$in.concat(e))}else\"$push\"===t?(n.$push=n.$push||{$each:[]},null!=e&&u.hasUserDefinedProperty(e,\"$each\")?n.$push=e:n.$push.$each=n.$push.$each.concat(e)):n[t]=e;return this},addToSet(){O(this,arguments);let t=[].map.call(arguments,this._mapCast,this);t=this[y].applySetters(t,this[f]);const e=[];let n=\"\";t[0]instanceof r?n=\"doc\":t[0]instanceof Date?n=\"date\":p(t[0],\"ObjectId\")&&(n=\"ObjectId\");const o=u.isMongooseArray(t)?t.__array:this,i=u.isMongooseArray(this)?this.__array:this;return o.forEach((function(t){let o;const r=+t;switch(n){case\"doc\":o=this.some((function(e){return e.equals(t)}));break;case\"date\":o=this.some((function(t){return+t===r}));break;case\"ObjectId\":o=this.find(e=>e.toString()===t.toString());break;default:o=~this.indexOf(t)}o||(this._markModified(),i.push(t),this._registerAtomic(\"$addToSet\",t),[].push.call(e,t))}),this),e},hasAtomics(){return u.isPOJO(this[h])?Object.keys(this[h]).length:0},includes(t,e){return-1!==this.indexOf(t,e)},indexOf(t,e){p(t,\"ObjectId\")&&(t=t.toString()),e=null==e?0:e;const n=this.length;for(let o=e;o<n;++o)if(t==this[o])return o;return-1},inspect(){return JSON.stringify(this)},nonAtomicPush(){const t=[].map.call(arguments,this._mapCast,this);this._markModified();const e=[].push.apply(this,t);return this._registerAtomic(\"$set\",this),e},pop(){this._markModified();const t=[].pop.call(this);return this._registerAtomic(\"$set\",this),t},pull(){const t=[].map.call(arguments,this._cast,this),e=this[f].get(this[d]);let n,i=e.length;for(this._markModified();i--;)if(n=e[i],n instanceof o){t.some((function(t){return n.equals(t)}))&&[].splice.call(e,i,1)}else~e.indexOf.call(t,n)&&[].splice.call(e,i,1);return t[0]instanceof r?this._registerAtomic(\"$pullDocs\",t.map((function(t){const e=t.$__getValue(\"_id\");return void 0===e||t.$isDefault(\"_id\")?t:e}))):this._registerAtomic(\"$pullAll\",t),s(this[f],this[d])>0&&this._registerAtomic(\"$set\",this),this},push(){let t=arguments,e=t;const n=null!=t[0]&&u.hasUserDefinedProperty(t[0],\"$each\"),o=u.isMongooseArray(this)?this.__array:this;if(n&&(e=t[0],t=t[0].$each),null==this[y])return _.apply(this,t);O(this,t);const r=this[f];let s;t=[].map.call(t,this._mapCast,this),t=this[y].applySetters(t,r,void 0,void 0,{skipDocumentArrayCast:!0});const c=this[h];if(this._markModified(),n){if(e.$each=t,0!==(c.$push&&c.$push.$each&&c.$push.$each.length||0)&&c.$push.$position!=e.$position)throw new i(\"Cannot call `Array#push()` multiple times with different `$position`\");null!=e.$position?([].splice.apply(o,[e.$position,0].concat(t)),s=this.length):s=[].push.apply(o,t)}else{if(0!==(c.$push&&c.$push.$each&&c.$push.$each.length||0)&&null!=c.$push.$position)throw new i(\"Cannot call `Array#push()` multiple times with different `$position`\");e=t,s=[].push.apply(o,t)}return this._registerAtomic(\"$push\",e),s},remove(){return this.pull.apply(this,arguments)},set(t,e,n){const o=this.__array;if(n)return o[t]=e,this;const r=b._cast.call(this,e,t);return b._markModified.call(this,t),o[t]=r,this},shift(){const t=u.isMongooseArray(this)?this.__array:this;this._markModified();const e=[].shift.call(t);return this._registerAtomic(\"$set\",this),e},sort(){const t=u.isMongooseArray(this)?this.__array:this,e=[].sort.apply(t,arguments);return this._registerAtomic(\"$set\",this),e},splice(){let t;const e=u.isMongooseArray(this)?this.__array:this;if(this._markModified(),O(this,Array.prototype.slice.call(arguments,2)),arguments.length){let n;if(null==this[y])n=arguments;else{n=[];for(let t=0;t<arguments.length;++t)n[t]=t<2?arguments[t]:this._cast(arguments[t],arguments[0]+(t-2))}t=[].splice.apply(e,n),this._registerAtomic(\"$set\",this)}return t},\n/*!\n   * ignore\n   */\ntoBSON(){return this.toObject(a)},toObject(t){const e=u.isMongooseArray(this)?this.__array:this;return t&&t.depopulate?((t=c(t))._isNested=!0,[].concat(e).map((function(e){return e instanceof o?e.toObject(t):e}))):[].concat(e)},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},unshift(){let t;O(this,arguments),null==this[y]?t=arguments:(t=[].map.call(arguments,this._cast,this),t=this[y].applySetters(t,this[f]));const e=u.isMongooseArray(this)?this.__array:this;return this._markModified(),[].unshift.apply(e,t),this._registerAtomic(\"$set\",this),this.length}};function O(t,e){const n=null==t?null:t[y]&&t[y].caster&&t[y].caster.options&&t[y].caster.options.ref||null;0===t.length&&0!==e.length&&\n/*!\n * ignore\n */\nfunction(t,e){if(!e)return!1;for(const n of t){if(null==n)return!1;const t=n.constructor;if(!(n instanceof o)||t.modelName!==e&&t.baseModelName!==e)return!1}return!0}(e,n)&&t[f].$populated(t[d],[],{[m]:e[0].constructor})}const $=[\"filter\",\"flat\",\"flatMap\",\"map\",\"slice\"];for(const t of $)null!=Array.prototype[t]&&(b[t]=function(){const e=u.isMongooseArray(this)?this.__array:this,n=[].concat(e);return n[t].apply(n,arguments)});t.exports=b},function(t,e,n){\"use strict\";const o=n(17),r=n(20),i=n(35).internalToObjectOptions,s=n(2),c=n(3);function a(t,e,n,r,i){if(null!=n){const t={isNew:n.isNew};\"defaults\"in n.$__&&(t.defaults=n.$__.defaults),i=Object.assign(t,i)}null!=i&&null!=i.path&&(this.$basePath=i.path),o.call(this,t,e,r,i),delete this.$__.priorDoc}t.exports=a,a.prototype=Object.create(o.prototype),Object.defineProperty(a.prototype,\"$isSubdocument\",{configurable:!1,writable:!1,value:!0}),Object.defineProperty(a.prototype,\"$isSingleNested\",{configurable:!1,writable:!1,value:!0}),\n/*!\n * ignore\n */\na.prototype.toBSON=function(){return this.toObject(i)},a.prototype.save=async function(t){return(t=t||{}).suppressWarning||c.warn(\"mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app.\"),new Promise((t,e)=>{this.$__save(n=>{if(null!=n)return e(n);t(this)})})},a.prototype.$__fullPath=function(t){return this.$__.fullPath||this.ownerDocument(),t?this.$__.fullPath+\".\"+t:this.$__.fullPath},a.prototype.$__pathRelativeToParent=function(t){return null==t?this.$basePath:[this.$basePath,t].join(\".\")},a.prototype.$__save=function(t){return r(()=>t(null,this))},\n/*!\n * ignore\n */\na.prototype.$isValid=function(t){const e=this.$parent(),n=this.$__pathRelativeToParent(t);return null!=e&&null!=n?e.$isValid(n):o.prototype.$isValid.call(this,t)},\n/*!\n * ignore\n */\na.prototype.markModified=function(t){o.prototype.markModified.call(this,t);const e=this.$parent(),n=this.$__pathRelativeToParent(t);if(null==e||null==n)return;const r=this.$__pathRelativeToParent().replace(/\\.$/,\"\");e.isDirectModified(r)||this.isNew||this.$__parent.markModified(n,this)},\n/*!\n * ignore\n */\na.prototype.isModified=function(t,e){const n=this.$parent();return null!=n?(Array.isArray(t)||\"string\"==typeof t?t=(t=Array.isArray(t)?t:t.split(\" \")).map(t=>this.$__pathRelativeToParent(t)).filter(t=>null!=t):t||(t=this.$__pathRelativeToParent()),n.$isModified(t,e)):o.prototype.isModified.call(this,t,e)},a.prototype.$markValid=function(t){o.prototype.$markValid.call(this,t);const e=this.$parent(),n=this.$__pathRelativeToParent(t);null!=e&&null!=n&&e.$markValid(n)},\n/*!\n * ignore\n */\na.prototype.invalidate=function(t,e,n){o.prototype.invalidate.call(this,t,e,n);const r=this.$parent(),i=this.$__pathRelativeToParent(t);if(null!=r&&null!=i)r.invalidate(i,e,n);else if(\"cast\"===e.kind||\"CastError\"===e.name||null==i)throw e;return this.ownerDocument().$__.validationError},\n/*!\n * ignore\n */\na.prototype.$ignore=function(t){o.prototype.$ignore.call(this,t);const e=this.$parent(),n=this.$__pathRelativeToParent(t);null!=e&&null!=n&&e.$ignore(n)},a.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;let t=this;const e=[],n=new Set([t]);for(;\"function\"==typeof t.$__pathRelativeToParent;){e.unshift(t.$__pathRelativeToParent(void 0,!0));const o=t.$parent();if(null==o)break;if(t=o,n.has(t))throw new Error(\"Infinite subdocument loop: subdoc with _id \"+t._id+\" is a parent of itself\");n.add(t)}return this.$__.fullPath=e.join(\".\"),this.$__.ownerDocument=t,this.$__.ownerDocument},\n/*!\n * ignore\n */\na.prototype.$__fullPathWithIndexes=function(){let t=this;const e=[],n=new Set([t]);for(;\"function\"==typeof t.$__pathRelativeToParent;){e.unshift(t.$__pathRelativeToParent(void 0,!1));const o=t.$parent();if(null==o)break;if(t=o,n.has(t))throw new Error(\"Infinite subdocument loop: subdoc with _id \"+t._id+\" is a parent of itself\");n.add(t)}return e.join(\".\")},a.prototype.parent=function(){return this.$__parent},a.prototype.$parent=a.prototype.parent,a.prototype.$__deleteOne=function(t){if(null!=t)return t(null,this)},a.prototype.$__removeFromParent=function(){this.$__parent.set(this.$basePath,null)},a.prototype.deleteOne=function(t,e){return\"function\"==typeof t&&(e=t,t=null),function(t){let e=t.ownerDocument();function n(){e.$removeListener(\"save\",n),e.$removeListener(\"deleteOne\",n),t.emit(\"deleteOne\",t),t.constructor.emit(\"deleteOne\",t),e=t=null}e.$on(\"save\",n),e.$on(\"deleteOne\",n)}(this),t&&t.noop||this.$__removeFromParent(),this.$__deleteOne(e)},\n/*!\n * ignore\n */\na.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate(\"path\")`, use `doc.populate(\"nested.path\")`')},a.prototype.inspect=function(){return this.toObject({transform:!1,virtuals:!1,flattenDecimals:!1})},s.inspect.custom&&(a.prototype[s.inspect.custom]=a.prototype.inspect)},function(t,e,n){\"use strict\";const o=n(42),r=n(11),i=n(12),s=n(3).deepEqual,c=n(14),a=n(98),l=n(2),u=n(50),p=n(16),h=n(1).populateModelSymbol;\n/*!\n * ignore\n */\nclass f extends Map{constructor(t,e,n,r){\"Object\"===c(t)&&(t=Object.keys(t).reduce((e,n)=>e.concat([[n,t[n]]]),[])),super(t),this.$__parent=null!=n&&null!=n.$__?n:null,this.$__path=e,this.$__schemaType=null==r?new o(e):r,this.$__runDeferred()}$init(t,e){d(t),super.set(t,e),null!=e&&e.$isSingleNested&&(e.$basePath=this.$__path+\".\"+t)}$__set(t,e){super.set(t,e)}get(t,e){return p(t,\"ObjectId\")&&(t=t.toString()),!1===(e=e||{}).getters?super.get(t):this.$__schemaType.applyGetters(super.get(t),this.$__parent)}set(t,e){if(p(t,\"ObjectId\")&&(t=t.toString()),d(t),e=a(e),null==this.$__schemaType)return this.$__deferred=this.$__deferred||[],void this.$__deferred.push({key:t,value:e});const n=this.$__path+\".\"+t,o=null!=this.$__parent&&this.$__parent.$__?this.$__parent.$populated(n,!0)||this.$__parent.$populated(this.$__path,!0):null,i=this.get(t);if(null!=o){if(this.$__schemaType.$isSingleNested)throw new r(`Cannot manually populate single nested subdoc underneath Map at path \"${this.$__path}\". Try using an array instead of a Map.`);Array.isArray(e)&&this.$__schemaType.$isMongooseArray?e=e.map(t=>(null==t.$__&&(t=new o.options[h](t)),t.$__.wasPopulated={value:t._id},t)):(null==e.$__&&(e=new o.options[h](e)),e.$__.wasPopulated={value:e._id})}else try{e=this.$__schemaType.applySetters(e,this.$__parent,!1,this.get(t),{path:n})}catch(t){if(null!=this.$__parent&&null!=this.$__parent.$__)return void this.$__parent.invalidate(n,t);throw t}super.set(t,e),null!=e&&e.$isSingleNested&&(e.$basePath=this.$__path+\".\"+t);const c=this.$__parent;null==c||null==c.$__||s(e,i)||c.markModified(this.$__path+\".\"+t)}clear(){super.clear();const t=this.$__parent;null!=t&&t.markModified(this.$__path)}delete(t){return p(t,\"ObjectId\")&&(t=t.toString()),this.set(t,void 0),super.delete(t)}toBSON(){return new Map(this)}toObject(t){if(t&&t.flattenMaps){const e={},n=this.keys();for(const o of n)e[o]=i(this.get(o),t);return e}return new Map(this)}$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)}toJSON(t){if(\"boolean\"!=typeof(t&&t.flattenMaps)||t.flattenMaps){const e={},n=this.keys();for(const o of n)e[o]=i(this.get(o),t);return e}return new Map(this)}inspect(){return new Map(this)}$__runDeferred(){if(this.$__deferred){for(const t of this.$__deferred)this.set(t.key,t.value);this.$__deferred=null}}}function d(t){const e=typeof t;if(\"string\"!==e)throw new TypeError(\"Mongoose maps only support string keys, got \"+e);if(t.startsWith(\"$\"))throw new Error(`Mongoose maps do not support keys that start with \"$\", got \"${t}\"`);if(t.includes(\".\"))throw new Error(`Mongoose maps do not support keys that contain \".\", got \"${t}\"`);if(u.has(t))throw new Error(`Mongoose maps do not support reserved key name \"${t}\"`)}l.inspect.custom&&Object.defineProperty(f.prototype,l.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:f.prototype.inspect}),Object.defineProperty(f.prototype,\"$__set\",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(f.prototype,\"$__parent\",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(f.prototype,\"$__path\",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(f.prototype,\"$__schemaType\",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(f.prototype,\"$isMongooseMap\",{enumerable:!1,writable:!1,configurable:!1,value:!0}),Object.defineProperty(f.prototype,\"$__deferredCalls\",{enumerable:!1,writable:!1,configurable:!1,value:!0}),t.exports=f},function(t,e,n){\"use strict\";const o=n(3),r=new Set([\"__index\",\"__parentArray\",\"_doc\"]);t.exports=function(t,e){if(o.isPOJO(t)&&null!=t.$__&&null!=t._doc){if(e){const e={};for(const n of Object.keys(t))\"symbol\"!=typeof n&&\"$\"!==n[0]&&(r.has(n)||(e[n]=t[n]));return{...t._doc,...e}}return t._doc}return t}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(90),r=n(157),i=n(11),s=n(317),c=n(13),a=c.CastError,l=n(42),u=n(318),p=n(55),h=n(12),f=n(101),d=n(2),y=n(3),m=n(73).castToNumber,g=n(174),_=n(24);let b,O;const $=Symbol(\"mongoose#isNestedArray\"),w=Object.freeze({});function v(t,e,o,r){O||(O=n(53).Embedded);let i,s,a=\"type\";if(r&&r.typeKey&&(a=r.typeKey),this.schemaOptions=r,e){let r={};y.isPOJO(e)&&(e[a]?(r=h(e),delete r[a],e=e[a]):e=l),null!=o&&null!=o.ref&&null==r.ref&&(r.ref=o.ref),e===Object&&(e=l);const i=\"string\"==typeof e?e:y.getFunctionName(e),s=n(71),c=s.hasOwnProperty(i)?s[i]:e;if(this.casterConstructor=c,this.casterConstructor instanceof v&&(this.casterConstructor[$]=!0),\"function\"!=typeof c||c.$isArraySubdocument||c.$isSchemaMap)this.caster=c,this.caster instanceof O||(this.caster.path=t);else{const e=this.caster instanceof O?null:t;this.caster=new c(e,r)}this.$embeddedSchemaType=this.caster}if(this.$isMongooseArray=!0,c.call(this,t,o,\"Array\"),null!=this.defaultValue&&(i=this.defaultValue,s=\"function\"==typeof i),!(\"defaultValue\"in this)||void 0!==this.defaultValue){const t=function(){return s?i.call(this):null!=i?[].concat(i):[]};t.$runBeforeSetters=!s,this.default(t)}}v.schemaName=\"Array\",v.options={castNonArrays:!0},\n/*!\n * ignore\n */\nv.defaultOptions={},v.set=c.set,\n/*!\n * Inherits from SchemaType.\n */\nv.prototype=Object.create(c.prototype),v.prototype.constructor=v,v.prototype.OptionsConstructor=s,\n/*!\n * ignore\n */\nv._checkRequired=c.prototype.checkRequired,v.checkRequired=c.checkRequired,v.prototype.checkRequired=function(t,e){if(\"object\"==typeof t&&c._isRef(this,t,e,!0))return!!t;return(\"function\"==typeof this.constructor.checkRequired?this.constructor.checkRequired():v.checkRequired())(t)},v.prototype.enum=function(){let t=this;for(;;){const e=t&&t.caster&&t.caster.instance;if(\"Array\"!==e){if(\"String\"!==e&&\"Number\"!==e)throw new Error(\"`enum` can only be set on an array of strings or numbers , not \"+e);break}t=t.caster}let e=arguments;return!Array.isArray(arguments)&&y.isObject(arguments)&&(e=y.object.vals(e)),t.caster.enum.apply(t.caster,e),this},v.prototype.applyGetters=function(t,e){if(null!=e&&null!=e.$__&&e.$populated(this.path))return t;const n=c.prototype.applyGetters.call(this,t,e);if(Array.isArray(n)){const t=y.isMongooseArray(n)?n.__array:n,o=t.length;for(let n=0;n<o;++n)t[n]=this.caster.applyGetters(t[n],e)}return n},v.prototype._applySetters=function(t,e,n,o){if(this.casterConstructor.$isMongooseArray&&v.options.castNonArrays&&!this[$]){let e=0,n=this;for(;null!=n&&n.$isMongooseArray&&!n.$isMongooseDocumentArray;)++e,n=n.casterConstructor;if(null!=t&&0!==t.length){const n=u(t);if(n.min===n.max&&n.max<e&&n.containsNonArrayItem)for(let o=n.max;o<e;++o)t=[t]}}return c.prototype._applySetters.call(this,t,e,n,o)},v.prototype.cast=function(t,e,o,r,i){let s,c;if(b||(b=n(53).Array),Array.isArray(t)){if(!t.length&&e){const t=e.schema.indexedPaths(),n=this.path;for(s=0,c=t.length;s<c;++s){const e=t[s][0][n];if(\"2dsphere\"===e||\"2d\"===e)return}const o=this.path.endsWith(\".coordinates\")?this.path.substring(0,this.path.lastIndexOf(\".\")):null;if(null!=o)for(s=0,c=t.length;s<c;++s){if(\"2dsphere\"===t[s][0][o])return}}i=i||w;let n=y.isMongooseArray(t)?t.__array:t;if(n=(t=b(n,i.path||this._arrayPath||this.path,e,this)).__array,o&&null!=e&&null!=e.$__&&e.$populated(this.path))return t;const r=this.caster,u=r.$isMongooseArray;if(r&&this.casterConstructor!==l)try{const t=n.length;for(s=0;s<t;s++){const t={};u&&(null!=i.arrayPath||null!=r._arrayParentPath)&&(t.arrayPathIndex=s),n[s]=r.applySetters(n[s],e,o,void 0,t)}}catch(e){throw new a(\"[\"+e.kind+\"]\",d.inspect(t),this.path+\".\"+s,e,this)}return t}const u=null!=this.options.castNonArrays?this.options.castNonArrays:v.options.castNonArrays;if(o||u)return e&&o&&e.markModified(this.path),this.cast([t],e,o);throw new a(\"Array\",d.inspect(t),this.path,null,this)},\n/*!\n * ignore\n */\nv.prototype._castForPopulate=function(t,e){if(b||(b=n(53).Array),Array.isArray(t)){let n;const o=t.__array?t.__array:t,r=o.length,i=this.caster;if(i&&this.casterConstructor!==l)try{for(n=0;n<r;n++){const t={};i.$isMongooseArray&&null!=i._arrayParentPath&&(t.arrayPathIndex=n),o[n]=i.cast(o[n],e,!1,void 0,t)}}catch(e){throw new a(\"[\"+e.kind+\"]\",d.inspect(t),this.path+\".\"+n,e,this)}return t}throw new a(\"Array\",d.inspect(t),this.path,null,this)},v.prototype.$toObject=v.prototype.toObject,\n/*!\n * ignore\n */\nv.prototype.discriminator=function(...t){let e=this;for(;e.$isMongooseArray&&!e.$isMongooseDocumentArray;)if(e=e.casterConstructor,null==e||\"function\"==typeof e)throw new i(\"You can only add an embedded discriminator on a document array, \"+this.path+\" is a plain array\");return e.discriminator(...t)},\n/*!\n * ignore\n */\nv.prototype.clone=function(){const t=Object.assign({},this.options),e=new this.constructor(this.path,this.caster,t,this.schemaOptions);return e.validators=this.validators.slice(),void 0!==this.requiredValidator&&(e.requiredValidator=this.requiredValidator),e},v.prototype._castForQuery=function(t,e){let n=this.casterConstructor;if(t&&n.discriminators&&n.schema&&n.schema.options&&n.schema.options.discriminatorKey)if(\"string\"==typeof t[n.schema.options.discriminatorKey]&&n.discriminators[t[n.schema.options.discriminatorKey]])n=n.discriminators[t[n.schema.options.discriminatorKey]];else{const e=_(n.discriminators,t[n.schema.options.discriminatorKey]);e&&(n=e)}const o=this.casterConstructor.prototype,r=o&&o.castForQuery,i=o&&o.cast,s=n.castForQuery,c=this.caster;return Array.isArray(t)?(this.setters.reverse().forEach(e=>{t=e.call(this,t,this)}),t=t.map((function(t){return y.isObject(t)&&t.$elemMatch?t:r?t=r.call(c,null,t,e):i?t=i.call(c,t):s?t=s.call(c,null,t,e):null!=t?t=new n(t):t}))):r?t=r.call(c,null,t,e):i?t=i.call(c,t):s?t=s.call(c,null,t,e):null!=t&&(t=new n(t)),t},v.prototype.castForQuery=function(t,e,n){let o;if(null!=t){if(o=this.$conditionalHandlers[t],!o)throw new Error(\"Can't use \"+t+\" with Array.\");return o.call(this,e,n)}return this._castForQuery(e,n)};const E=v.prototype.$conditionalHandlers={};function A(t){return function(e){if(!Array.isArray(e))throw new TypeError(\"conditional \"+t+\" requires an array\");const n=[];for(const t of e)n.push(p(this.casterConstructor.schema,t,null,this&&this.$$context));return n}}E.$all=function(t,e){return Array.isArray(t)||(t=[t]),t=t.map(t=>{if(!y.isObject(t))return t;if(null!=t.$elemMatch)return{$elemMatch:p(this.casterConstructor.schema,t.$elemMatch,null,this&&this.$$context)};const e={};return e[this.path]=t,p(this.casterConstructor.schema,e,null,this&&this.$$context)[this.path]},this),this.castForQuery(null,t,e)},E.$options=String,E.$elemMatch=function(t,e){const n=Object.keys(t),o=n.length;for(let r=0;r<o;++r){const o=n[r],i=t[o];f(o)&&null!=i&&(t[o]=this.castForQuery(o,i,e))}const r=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.options&&this.casterConstructor.schema.options.discriminatorKey,i=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.discriminators||{};return null!=r&&null!=t[r]&&null!=i[t[r]]?p(i[t[r]],t,null,this&&this.$$context):p(this.casterConstructor.schema,t,null,this&&this.$$context)},E.$geoIntersects=g.cast$geoIntersects,E.$or=A(\"$or\"),E.$and=A(\"$and\"),E.$nor=A(\"$nor\"),E.$near=E.$nearSphere=g.cast$near,E.$within=E.$geoWithin=g.cast$within,E.$size=E.$minDistance=E.$maxDistance=m,E.$exists=o,E.$type=r,E.$eq=E.$gt=E.$gte=E.$lt=E.$lte=E.$not=E.$regex=E.$ne=v.prototype._castForQuery,E.$nin=c.prototype.$conditionalHandlers.$nin,E.$in=c.prototype.$conditionalHandlers.$in,\n/*!\n * Module exports.\n */\nt.exports=v},function(t,e,n){\"use strict\";const o=n(171);t.exports=function(t,e){if(null==t||null==t.discriminators)return null;for(const n of Object.keys(t.discriminators)){const r=t.discriminators[n];if(null!=r.discriminatorMapping&&o(r.discriminatorMapping.value,e))return r}return null}},function(t,e,n){\"use strict\";const o=new Set([\"$ref\",\"$id\",\"$db\"]);t.exports=function(t){return\"$\"===t[0]&&!o.has(t)}},function(t,e,n){\"use strict\";\n/*!\n * Module requirements.\n */const o=n(15);\n/*!\n * ignore\n */\n/*!\n * ignore\n */\nfunction r(t,e){const n=Number(e);if(isNaN(n))throw new o(\"number\",e,t);return n}t.exports=function(t){const e=this;return Array.isArray(t)?t.map((function(t){return r(e.path,t)})):Buffer.isBuffer(t)?t:r(e.path,t)}},function(t,e,n){\"use strict\";\n/*!\n * ignore\n */\nfunction o(t,e){t.$__.activePaths.default(e),t.$isSubdocument&&t.$isSingleNested&&null!=t.$parent()&&t.$parent().$__.activePaths.default(t.$__pathRelativeToParent(e))}t.exports=function(t,e,n,r,i,s){const c=Object.keys(t.$__schema.paths),a=c.length;for(let l=0;l<a;++l){let a,u=\"\";const p=c[l];if(\"_id\"===p&&t.$__.skipId)continue;const h=t.$__schema.paths[p],f=h.splitPath(),d=f.length;let y=!1,m=t._doc;for(let c=0;c<d&&null!=m;++c){const l=f[c];if(u+=(u.length?\".\":\"\")+l,!0===n){if(u in e)break}else if(!1===n&&e&&!y){const t=h.$isSingleNested||h.$isMongooseDocumentArray;if(u in e||c===d-1&&t&&null!=r&&r[u])y=!0;else if(null!=r&&!r[u])break}if(c===d-1){if(void 0!==m[l])break;if(null!=i)if(\"function\"==typeof h.defaultValue){if(!h.defaultValue.$runBeforeSetters&&i)break;if(h.defaultValue.$runBeforeSetters&&!i)break}else if(!i)continue;if(s&&s[u])break;if(e&&null!==n){if(!0===n){if(p in e)continue;try{a=h.getDefault(t,!1)}catch(e){t.invalidate(p,e);break}void 0!==a&&(m[l]=a,o(t,p))}else if(y){try{a=h.getDefault(t,!1)}catch(e){t.invalidate(p,e);break}void 0!==a&&(m[l]=a,o(t,p))}}else{try{a=h.getDefault(t,!1)}catch(e){t.invalidate(p,e);break}void 0!==a&&(m[l]=a,o(t,p))}}else m=m[l]}}}},function(t,e,n){\"use strict\";const o=n(42),r=n(335),i=n(12),s=n(106).defineKey,c=n(10),a=n(3),l=n(341),u={toJSON:!0,toObject:!0,_id:!0,id:!0,virtuals:!0,methods:!0};\n/*!\n * ignore\n */\nt.exports=function(t,e,n,p,h,f){if(!n||!n.instanceOfSchema)throw new Error(\"You must pass a valid discriminator Schema\");if(f=null==f||f,t.schema.discriminatorMapping&&!t.schema.discriminatorMapping.isRoot)throw new Error('Discriminator \"'+e+'\" can only be a discriminator of the root model');if(h){const e=c(t.base,\"options.applyPluginsToDiscriminators\",!1)||!f;t.base._applyPlugins(n,{skipTopLevel:!e})}else f||r(n);const d=t.schema.options.discriminatorKey,y=t.schema.path(d);if(null!=y)a.hasUserDefinedProperty(y.options,\"select\")||(y.options.select=!0),y.options.$skipDiscriminatorCheck=!0;else{const e={};e[d]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},e[d][t.schema.options.typeKey]=String,t.schema.add(e),s({prop:d,prototype:t.prototype,options:t.schema.options})}if(n.path(d)&&!0!==n.path(d).options.$skipDiscriminatorCheck)throw new Error('Discriminator \"'+e+'\" cannot have field with name \"'+d+'\"');let m=e;if((\"string\"==typeof p&&p.length||null!=p)&&(m=p),function(e,n){e._baseSchema=n,n.paths._id&&n.paths._id.options&&!n.paths._id.options.auto&&e.remove(\"_id\");const r=Object.keys(n.paths),s=[];for(const t of r){if(e.nested[t]){s.push(t);continue}if(-1===t.indexOf(\".\"))continue;const n=t.split(\".\").slice(0,-1);let r=\"\";for(const i of n)r+=(r.length?\".\":\"\")+i,(e.paths[r]instanceof o||e.singleNestedPaths[r]instanceof o)&&s.push(t)}l(e,n);for(const t of s)delete e.paths[t];e.childSchemas.forEach(t=>{t.model.prototype.$__setSchema(t.schema)});const c={};c[d]={default:m,select:!0,set:function(t){if(t===m||Array.isArray(m)&&a.deepEqual(t,m))return m;throw new Error(\"Can't set discriminator key \\\"\"+d+'\"')},$skipDiscriminatorCheck:!0},c[d][e.options.typeKey]=y?y.options[e.options.typeKey]:String,e.add(c),e.discriminatorMapping={key:d,value:m,isRoot:!1},n.options.collection&&(e.options.collection=n.options.collection);const p=e.options.toJSON,g=e.options.toObject,_=e.options._id,b=e.options.id,O=Object.keys(e.options);e.options.discriminatorKey=n.options.discriminatorKey;const $=e._userProvidedOptions;for(const t of O)if(!u[t]&&t in $&&!a.deepEqual(e.options[t],n.options[t]))throw new Error(\"Can't customize discriminator option \"+t+\" (can only modify \"+Object.keys(u).join(\", \")+\")\");e.options=i(n.options);for(const t of Object.keys($))e.options[t]=$[t];p&&(e.options.toJSON=p),g&&(e.options.toObject=g),void 0!==_&&(e.options._id=_),e.options.id=b,f&&(e.s.hooks=t.schema.s.hooks.merge(e.s.hooks)),h&&(e.plugins=Array.prototype.slice.call(n.plugins)),e.callQueue=n.callQueue.concat(e.callQueue),delete e._requiredpaths}(n,t.schema),t.discriminators||(t.discriminators={}),t.schema.discriminatorMapping||(t.schema.discriminatorMapping={key:d,value:null,isRoot:!0}),t.schema.discriminators||(t.schema.discriminators={}),t.schema.discriminators[e]=n,t.discriminators[e]&&!n.options.overwriteModels)throw new Error('Discriminator with name \"'+e+'\" already exists');return n}},function(t,e,n){\"use strict\";t.exports=function(t,e,n){if(0===t.length)return n();let o=t.length,r=null;for(const i of t)e(i,(function(t){if(null==r)return null!=t?(r=t,n(r)):--o<=0?n():void 0}))}},function(t,e,n){\"use strict\";const o=n(12),r=n(1).documentSchemaSymbol,i=n(35).internalToObjectOptions,s=n(3);let c;const a=n(1).getSymbol,l=n(1).scopeSymbol,u=s.isPOJO;\n/*!\n * exports\n */\ne.compile=f,e.defineKey=d;const p=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1}),h=Object.freeze({noDottedPath:!0});function f(t,e,o,r){c=c||n(17);const i=r.typeKey;for(const n of Object.keys(t)){const s=t[n];d({prop:n,subprops:u(s)&&Object.keys(s).length>0&&(!s[i]||\"type\"===i&&u(s.type)&&s.type.type)?s:null,prototype:e,prefix:o,options:r})}}function d({prop:t,subprops:e,prototype:s,prefix:u,options:d}){c=c||n(17);const y=(u?u+\".\":\"\")+t,m=(u=u||\"\")?Object.freeze({}):h;e?Object.defineProperty(s,t,{enumerable:!0,configurable:!0,get:function(){const t=this;if(this.$__.getters||(this.$__.getters={}),!this.$__.getters[y]){const n=Object.create(c.prototype,function(t){const e={};return Object.getOwnPropertyNames(t).forEach((function(n){-1===[\"isNew\",\"$__\",\"$errors\",\"errors\",\"_doc\",\"$locals\",\"$op\",\"__parentArray\",\"__index\",\"$isDocumentArrayElement\"].indexOf(n)||(e[n]=Object.getOwnPropertyDescriptor(t,n),e[n].enumerable=!1)})),e}(this));u||(n.$__[l]=this),n.$__.nestedPath=y,Object.defineProperty(n,\"schema\",{enumerable:!1,configurable:!0,writable:!1,value:s.schema}),Object.defineProperty(n,\"$__schema\",{enumerable:!1,configurable:!0,writable:!1,value:s.schema}),Object.defineProperty(n,r,{enumerable:!1,configurable:!0,writable:!1,value:s.schema}),Object.defineProperty(n,\"toObject\",{enumerable:!1,configurable:!0,writable:!1,value:function(){return o(t.get(y,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null}))}}),Object.defineProperty(n,\"$__get\",{enumerable:!1,configurable:!0,writable:!1,value:function(){return t.get(y,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null})}}),Object.defineProperty(n,\"toJSON\",{enumerable:!1,configurable:!0,writable:!1,value:function(){return t.get(y,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toJSON&&this.schema.options.toJSON.virtuals||null})}}),Object.defineProperty(n,\"$__isNested\",{enumerable:!1,configurable:!0,writable:!1,value:!0}),Object.defineProperty(n,\"$isEmpty\",{enumerable:!1,configurable:!0,writable:!1,value:function(){return 0===Object.keys(this.get(y,null,p)||{}).length}}),Object.defineProperty(n,\"$__parent\",{enumerable:!1,configurable:!0,writable:!1,value:this}),f(e,n,y,d),this.$__.getters[y]=n}return this.$__.getters[y]},set:function(t){null!=t&&t.$__isNested?t=t.$__get():t instanceof c&&!t.$__isNested&&(t=t.$toObject(i));(this.$__[l]||this).$set(y,t)}}):Object.defineProperty(s,t,{enumerable:!0,configurable:!0,get:function(){return this[a].call(this.$__[l]||this,y,null,m)},set:function(t){this.$set.call(this.$__[l]||this,y,t)}})}},function(t,e,n){\"use strict\";const o=n(50);t.exports=function(t,e,n){if(-1===e.indexOf(\".\")){if(o.has(e))return;return void(t[e]=n)}const r=e.split(\".\"),i=r.pop();let s=t;for(const t of r)o.has(t)||(null==s[t]&&(s[t]={}),s=s[t]);o.has(i)||(s[i]=n)}},function(t,e,n){\"use strict\";\n/*!\n * ignore\n */t.exports=function(t,e){const n=e.split(\".\");let o,r,i,s=\"\";for(let c=0;c<n.length;++c)if(s+=s.length?\".\":\"\"+n[c],t[s]){for(r=Object.keys(t),i=r.length,o=0;o<i;++o)0!==r[c].indexOf(s+\".\")||r[c].indexOf(e);return!0}return!1}},function(t,e,n){\"use strict\";const o=/\\./g;t.exports=function(t){if(-1===t.indexOf(\".\"))return[t];const e=t.split(o),n=e.length,r=new Array(n);let i=\"\";for(let t=0;t<n;++t)i+=0!==i.length?\".\"+e[t]:e[t],r[t]=i;return r}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(15),r=n(89),i=n(92),s=n(11),c=n(159),a=n(355),l=n(41),{applyGlobalMaxTimeMS:u,applyGlobalDiskUse:p}=n(182),h=n(163),f=n(183),d=n(55),y=n(357),m=n(72),g=n(186),_=n(12),b=n(363),O=n(24),$=n(111),w=n(58),v=n(20),E=n(74),A=n(112),S=n(108),j=n(364),x=n(23),P=n(187),k=n(190),M=n(374),C=n(191),D=n(375),N=n(376),T=n(192),I=n(377),R=n(2),F=n(3),B=n(167),V=new Set([\"allowDiskUse\",\"batchSize\",\"collation\",\"comment\",\"explain\",\"hint\",\"j\",\"lean\",\"limit\",\"maxTimeMS\",\"populate\",\"projection\",\"read\",\"select\",\"skip\",\"slice\",\"sort\",\"tailable\",\"w\",\"writeConcern\",\"wtimeout\"]);function U(t,e,n,o){this._mongooseOptions||(this._mongooseOptions={}),e=e||{},this._transforms=[],this._hooks=new i,this._executionStack=null;const r=Object.keys(e);for(const t of r)this._mongooseOptions[t]=e[t];o&&(this.mongooseCollection=o),n&&(this.model=n,this.schema=n.schema),this.model&&this.model._mapreduce&&this.lean(),P.call(this,null,e),o&&this.collection(o),t&&this.find(t),this.options=this.options||{},this.$useProjection=!0;const s=this&&this.schema&&this.schema.options&&this.schema.options.collation||null;null!=s&&(this.options.collation=s)}\n/*!\n * inherit mquery\n */U.prototype=new P,U.prototype.constructor=U,U.base=P.prototype,U.use$geoWithin=P.use$geoWithin,U.prototype.toConstructor=function(){const t=this.model,e=this.mongooseCollection,n=function(r,i){if(!(this instanceof n))return new n(r,i);this._mongooseOptions=_(o._mongooseOptions),U.call(this,r,i||null,t,e)};R.inherits(n,t.Query);const o=n.prototype;o.options={};const r=Object.assign({},this.options);return null!=r.sort&&(o.sort(r.sort),delete r.sort),o.setOptions(r),o.op=this.op,o._validateOp(),o._conditions=_(this._conditions),o._fields=_(this._fields),o._update=_(this._update,{flattenDecimals:!1}),o._path=this._path,o._distinct=this._distinct,o._collection=this._collection,o._mongooseOptions=this._mongooseOptions,n},U.prototype.clone=function(){const t=this.model,e=this.mongooseCollection,n=new this.model.Query({},{},t,e),o=Object.assign({},this.options);return null!=o.sort&&(n.sort(o.sort),delete o.sort),n.setOptions(o),n.op=this.op,n._validateOp(),n._conditions=_(this._conditions),n._fields=_(this._fields),n._update=_(this._update,{flattenDecimals:!1}),n._path=this._path,n._distinct=this._distinct,n._collection=this._collection,n._mongooseOptions=this._mongooseOptions,n},U.prototype.slice=function(){if(0===arguments.length)return this;let t,e;if(this._validate(\"slice\"),1===arguments.length){const n=arguments[0];if(\"object\"==typeof n&&!Array.isArray(n)){const t=Object.keys(n),e=t.length;for(let o=0;o<e;++o)this.slice(t[o],n[t[o]]);return this}this._ensurePath(\"slice\"),t=this._path,e=arguments[0]}else 2===arguments.length?\"number\"==typeof arguments[0]?(this._ensurePath(\"slice\"),t=this._path,e=[arguments[0],arguments[1]]):(t=arguments[0],e=arguments[1]):3===arguments.length&&(t=arguments[0],e=[arguments[1],arguments[2]]);const n={};return n[t]={$slice:e},this.select(n),this};\n/*!\n * ignore\n */\nconst L=new Set(B);\n/*!\n * ignore\n */\nfunction q(t){try{y(t)}catch(e){t.error(e)}}function z(t,e,n,o,r,i,s,c){if(o.rawResult&&null==e)return a(null),null;function a(t,r){return t?v(()=>c(t)):o.rawResult?(e&&r?(null!=o.session&&r.$session(o.session),n.value=r):n.value=null,v(()=>c(null,n))):(null!=o.session&&r.$session(o.session),void v(()=>c(null,r)))}w.createModelAndInit(t,e,r,i,o,s,a)}function K(t){if(!t||!t.model||!t.model.schema)return;const e=t.model.schema;e&&e.discriminatorMapping&&!e.discriminatorMapping.isRoot&&(t._conditions[e.discriminatorMapping.key]=e.discriminatorMapping.value)}function W(t){\"new\"in t&&(t.returnDocument=t.new?\"after\":\"before\",delete t.new),\"returnOriginal\"in t&&(t.returnDocument=t.returnOriginal?\"before\":\"after\",delete t.returnOriginal),\"string\"==typeof t.returnDocument&&(t.returnOriginal=\"before\"===t.returnDocument)}function Q(t,e,n){const o=t._optionsForExec(t.model);return e in o?o[e]:e in t.model.base.options?t.model.base.options[e]:n}\n/*!\n * ignore\n */function H(t,e,n,o,r,i){if(r.lean&&\"function\"==typeof r.lean.transform){r.lean.transform(e);for(let i=0;i<t.childSchemas.length;i++){const s=n?n+\".\"+t.childSchemas[i].model.path:t.childSchemas[i].model.path,c=t.childSchemas[i].schema,a=x.get(s,e);if(null!=a){if(Array.isArray(a))for(let t=0;t<a.length;t++)r.lean.transform(a[t]);else r.lean.transform(a);H(c,a,s,o,r)}}return i?i(null,e):void 0}return r.rawResult?i(null,o):i(null,e)}\n/*!\n * ignore\n */\n/*!\n * ignore\n */\nasync function G(t){if(this._castConditions(),q(this),null!=this.error())throw this.error();const e=this._conditions,n=this._optionsForExec(this.model);this._update=_(this._update,n);const o=this.options.overwrite&&!$(this._update);if(o){if(\"updateOne\"===t||\"updateMany\"===t)throw new s(\"The MongoDB server disallows overwriting documents using `\"+t+\"`. See: https://mongoosejs.com/docs/deprecations.html#update\");this._update=new this.model(this._update,null,!0)}else{if(this._update=this._castUpdate(this._update,n.overwrite),null==this._update||0===Object.keys(this._update).length)return{acknowledged:!1};const t=Object.assign({},n,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});this._update=T(this._conditions,this.model.schema,this._update,t)}Array.isArray(n.arrayFilters)&&(n.arrayFilters=M(this._update,n.arrayFilters));return Q(this,\"runValidators\",!1)&&await this.validate(this._update,n,o),this._update.toBSON&&(this._update=this._update.toBSON()),this._collection.collection[t](e,this._update,n)}function Y(t,e,n,o,r,i){return t.op=e,t._validateOp(),n=F.toObject(n),o=o||{},null!=r&&\"strict\"in r&&(t._mongooseOptions.strict=r.strict),n instanceof U||null==n||\"[object Object]\"===n.toString()?t.merge(n):t.error(new c(n,\"filter\",e)),F.isObject(r)&&t.setOptions(r),t._mergeUpdate(o),i?(t.exec(i),t):U.base[e].call(t,n,void 0,r,i)}function J(t,e){return\"function\"==typeof t&&(t=t.call(e)),null==t&&(t=new r(e.getQuery(),e.model.modelName)),t}\n/*!\n * ignore\n */\nfunction X(t){return new Promise((e,n)=>{t._hooks.execPost(\"exec\",t,[],{},t=>{if(t)return n(t);e()})})}\n/*!\n * ignore\n */function Z(t,e,n,o){return new Promise((r,i)=>{const s=n?{error:n}:{};t._queryMiddleware.execPost(o||t.op,t,[e],s,(t,e)=>{if(t)return i(t);r(e)})})}\n/*!\n * ignore\n */function tt(t){return new Promise((e,n)=>{t._hooks.execPre(\"exec\",t,[],t=>{if(null!=t)return n(t);e()})})}\n/*!\n * ignore\n */function et(t,e){return new Promise((n,o)=>{t._queryMiddleware.execPre(e||t.op,t,[],t=>{if(null!=t)return o(t);n()})})}\n/*!\n * ignore\n */function nt(t,e){return function(n,o){if(null!=n)return e(n);for(const r of t._transforms)try{o=r(o)}catch(n){return e(n)}return e(null,o)}}\n/*!\n * ignore\n */\nfunction ot(t,e,n){for(const o of e)t.push(n+o.path),Array.isArray(o.populate)&&ot(t,o.populate,n+o.path+\".\")}U.prototype._validateOp=function(){null==this.op||L.has(this.op)||this.error(new Error('Query has invalid `op`: \"'+this.op+'\"'))},U.prototype.mod=function(){let t,e;1===arguments.length?(this._ensurePath(\"mod\"),t=arguments[0],e=this._path):2!==arguments.length||Array.isArray(arguments[1])?3===arguments.length?(t=[arguments[1],arguments[2]],e=arguments[0]):(t=arguments[1],e=arguments[0]):(this._ensurePath(\"mod\"),t=[arguments[0],arguments[1]],e=this._path);const n=this._conditions[e]||(this._conditions[e]={});return n.$mod=t,this},U.prototype.limit=function(t){if(this._validate(\"limit\"),\"string\"==typeof t)try{t=m(t)}catch(e){throw new o(\"Number\",t,\"limit\")}return this.options.limit=t,this},U.prototype.skip=function(t){if(this._validate(\"skip\"),\"string\"==typeof t)try{t=m(t)}catch(e){throw new o(\"Number\",t,\"skip\")}return this.options.skip=t,this},U.prototype.projection=function(t){return 0===arguments.length||(this._fields={},this._userProvidedFields={},this.select(t)),this._fields},U.prototype.select=function(){let t=arguments[0];if(!t)return this;if(1!==arguments.length)throw new Error(\"Invalid select: select only takes 1 argument\");this._validate(\"select\");const e=this._fields||(this._fields={}),n=this._userProvidedFields||(this._userProvidedFields={});let o=void 0;function r(t){return\"string\"==typeof t&&o?t=1:t}if(o=null!=this.model&&F.hasUserDefinedProperty(this.model.db.options,\"sanitizeProjection\")?this.model.db.options.sanitizeProjection:null!=this.model&&F.hasUserDefinedProperty(this.model.base.options,\"sanitizeProjection\")?this.model.base.options.sanitizeProjection:this._mongooseOptions.sanitizeProjection,t=k(t,!0),F.isObject(t)){if(this.selectedInclusively())Object.entries(t).forEach(([t,o])=>{o?(null!=e[\"-\"+t]&&delete e[\"-\"+t],e[t]=n[t]=r(o)):Object.keys(n).forEach(o=>{j(t,o)&&(delete e[o],delete n[o])})});else if(this.selectedExclusively())Object.entries(t).forEach(([t,o])=>{o?Object.keys(n).forEach(o=>{j(t,o)&&(delete e[o],delete n[o])}):(null!=e[\"+\"+t]&&delete e[\"+\"+t],e[t]=n[t]=r(o))});else{const o=Object.keys(t);for(let i=0;i<o.length;++i){const s=t[o[i]],c=o[i];e[c]=r(s),n[c]=r(s)}}return this}throw new TypeError(\"Invalid select() argument. Must be string or object.\")},U.prototype.read=function(t,e){return\"string\"==typeof t?(t=h(t),this.options.readPreference={mode:t,tags:e}):this.options.readPreference=t,this},U.prototype.toString=function(){return\"count\"===this.op||\"countDocuments\"===this.op||\"find\"===this.op||\"findOne\"===this.op||\"deleteMany\"===this.op||\"deleteOne\"===this.op||\"findOneAndDelete\"===this.op||\"findOneAndRemove\"===this.op||\"remove\"===this.op?`${this.model.modelName}.${this.op}(${R.inspect(this._conditions)})`:\"distinct\"===this.op?`${this.model.modelName}.distinct('${this._distinct}', ${R.inspect(this._conditions)})`:\"findOneAndReplace\"===this.op||\"findOneAndUpdate\"===this.op||\"replaceOne\"===this.op||\"update\"===this.op||\"updateMany\"===this.op||\"updateOne\"===this.op?`${this.model.modelName}.${this.op}(${R.inspect(this._conditions)}, ${R.inspect(this._update)})`:`${this.model.modelName}.${this.op}()`},U.prototype.session=function(t){return null==t&&delete this.options.session,this.options.session=t,this},U.prototype.writeConcern=function(t){return null==t?(delete this.options.writeConcern,this):(this.options.writeConcern=t,this)},U.prototype.w=function(t){return null==t&&delete this.options.w,null!=this.options.writeConcern?this.options.writeConcern.w=t:this.options.w=t,this},U.prototype.j=function(t){return null==t&&delete this.options.j,null!=this.options.writeConcern?this.options.writeConcern.j=t:this.options.j=t,this},U.prototype.wtimeout=function(t){return null==t&&delete this.options.wtimeout,null!=this.options.writeConcern?this.options.writeConcern.wtimeout=t:this.options.wtimeout=t,this},U.prototype.getOptions=function(){return this.options},U.prototype.setOptions=function(t,e){if(e)return this._mongooseOptions=t&&_(t)||{},this.options=t||{},\"populate\"in t&&this.populate(this._mongooseOptions),this;if(null==t)return this;if(\"object\"!=typeof t)throw new Error('Options must be an object, got \"'+t+'\"');if(t=Object.assign({},t),Array.isArray(t.populate)){const e=t.populate;delete t.populate;const n=e.length;for(let t=0;t<n;++t)this.populate(e[t])}if(\"setDefaultsOnInsert\"in t&&(this._mongooseOptions.setDefaultsOnInsert=t.setDefaultsOnInsert,delete t.setDefaultsOnInsert),\"overwriteDiscriminatorKey\"in t&&(this._mongooseOptions.overwriteDiscriminatorKey=t.overwriteDiscriminatorKey,delete t.overwriteDiscriminatorKey),\"sanitizeProjection\"in t&&(t.sanitizeProjection&&!this._mongooseOptions.sanitizeProjection&&D(this._fields),this._mongooseOptions.sanitizeProjection=t.sanitizeProjection,delete t.sanitizeProjection),\"sanitizeFilter\"in t&&(this._mongooseOptions.sanitizeFilter=t.sanitizeFilter,delete t.sanitizeFilter),\"defaults\"in t&&(this._mongooseOptions.defaults=t.defaults),null==t.lean&&this.schema&&\"lean\"in this.schema.options&&(this._mongooseOptions.lean=this.schema.options.lean),\"string\"==typeof t.limit)try{t.limit=m(t.limit)}catch(e){throw new o(\"Number\",t.limit,\"limit\")}if(\"string\"==typeof t.skip)try{t.skip=m(t.skip)}catch(e){throw new o(\"Number\",t.skip,\"skip\")}for(const e of Object.keys(t))if(V.has(e)){const n=Array.isArray(t[e])?t[e]:[t[e]];this[e].apply(this,n)}else this.options[e]=t[e];return this},U.prototype.explain=function(t){return 0===arguments.length?this.options.explain=!0:!1===t?delete this.options.explain:this.options.explain=t,this},U.prototype.allowDiskUse=function(t){return 0===arguments.length?this.options.allowDiskUse=!0:!1===t?delete this.options.allowDiskUse:this.options.allowDiskUse=t,this},U.prototype.maxTimeMS=function(t){return this.options.maxTimeMS=t,this},U.prototype.getFilter=function(){return this._conditions},U.prototype.getQuery=function(){return this._conditions},U.prototype.setQuery=function(t){this._conditions=t},U.prototype.getUpdate=function(){return this._update},U.prototype.setUpdate=function(t){this._update=t},U.prototype._fieldsForExec=function(){return null==this._fields||0===Object.keys(this._fields).length?null:_(this._fields)},U.prototype._updateForExec=function(){const t=_(this._update,{transform:!1,depopulate:!0}),e=Object.keys(t);let n=e.length;const o={};for(;n--;){const r=e[n];this.options.overwrite?o[r]=t[r]:\"$\"!==r[0]?(o.$set||(t.$set?o.$set=t.$set:o.$set={}),o.$set[r]=t[r],e.splice(n,1),~e.indexOf(\"$set\")||e.push(\"$set\")):\"$set\"===r&&o.$set||(o[r]=t[r])}return o},U.prototype._optionsForExec=function(t){const e=_(this.options);if(delete e.populate,!(t=t||this.model))return e;f(t.schema,e);const n=t&&t.schema&&t.schema.options&&t.schema.options.read;!(\"readPreference\"in e)&&n&&(e.readPreference=n),void 0!==e.upsert&&(e.upsert=!!e.upsert),e.writeConcern&&(e.j&&(e.writeConcern.j=e.j,delete e.j),e.w&&(e.writeConcern.w=e.w,delete e.w),e.wtimeout&&(e.writeConcern.wtimeout=e.wtimeout,delete e.wtimeout));const o=this._fieldsForExec();return null!=o&&(e.projection=o),e},U.prototype.lean=function(t){return this._mongooseOptions.lean=!arguments.length||t,this},U.prototype.set=function(t,e){if(\"object\"==typeof t){const e=Object.keys(t);for(const n of e)this.set(n,t[n]);return this}return this._update=this._update||{},t in this._update&&delete this._update[t],this._update.$set=this._update.$set||{},this._update.$set[t]=e,this},U.prototype.get=function(t){const e=this._update;if(null==e)return;const n=e.$set;return null==n||F.hasUserDefinedProperty(e,t)?e[t]:F.hasUserDefinedProperty(n,t)?n[t]:void 0},U.prototype.error=function(t){return 0===arguments.length?this._error:(this._error=t,this)},U.prototype._unsetCastError=function(){if(null==this._error||this._error instanceof o)return this.error(null)},U.prototype.mongooseOptions=function(t){return arguments.length>0&&(this._mongooseOptions=t),this._mongooseOptions},U.prototype._castConditions=function(){let t=void 0;t=null!=this.model&&F.hasUserDefinedProperty(this.model.db.options,\"sanitizeFilter\")?this.model.db.options.sanitizeFilter:null!=this.model&&F.hasUserDefinedProperty(this.model.base.options,\"sanitizeFilter\")?this.model.base.options.sanitizeFilter:this._mongooseOptions.sanitizeFilter,t&&C(this._conditions);try{this.cast(this.model),this._unsetCastError()}catch(t){this.error(t)}},U.prototype._find=async function(){if(this._castConditions(),null!=this.error())throw this.error();this._applyPaths(),this._fields=this._castFields(this._fields);const t=this._fieldsForExec(),e=this._mongooseOptions,n=this,o=n._userProvidedFields||{};u(this.options,this.model),p(this.options,this.model);const r=Object.assign({},{session:this&&this.options&&this.options.session||null,lean:e.lean||null}),i=this._optionsForExec();i.projection=this._fieldsForExec();const s=this._conditions,c=await this._collection.collection.find(s,i);if(i.explain)return c.explain();let a=await c.toArray();if(0===a.length)return a;if(!e.populate){const i=n.schema.options.versionKey;return e.lean&&!1===e.lean.versionKey&&i&&a.forEach(t=>{i in t&&delete t[i]}),e.lean?function t(e,n,o,r){if(r.lean&&\"function\"==typeof r.lean.transform){for(const t of n)r.lean.transform(t);for(let i=0;i<e.childSchemas.length;i++){const s=o?o+\".\"+e.childSchemas[i].model.path:e.childSchemas[i].model.path,c=e.childSchemas[i].schema;let a=x.get(s,n);if(null!=a){a=a.flat();for(let t=0;t<a.length;t++)r.lean.transform(a[t]);t(c,a,s,r)}}}return n}(n.model.schema,a,null,r):b(n.model,a,t,o,r)}const l=w.preparePopulationOptionsMQ(n,e);return e.lean?n.model.populate(a,l):(a=await b(n.model,a,t,o,r),await this.model.populate(a,l),a)},U.prototype.find=function(t){if(\"function\"==typeof t||\"function\"==typeof arguments[1])throw new s(\"Query.prototype.find() no longer accepts a callback\");return this.op=\"find\",t=F.toObject(t),P.canMerge(t)?(this.merge(t),K(this)):null!=t&&this.error(new c(t,\"filter\",\"find\")),U.base.find.call(this),this},U.prototype.merge=function(t){if(!t)return this;const e={overwrite:!0};return t instanceof U?(t._conditions&&(e.omit={},this._conditions&&this._conditions.$and&&t._conditions.$and&&(e.omit.$and=!0,this._conditions.$and=this._conditions.$and.concat(t._conditions.$and)),this._conditions&&this._conditions.$or&&t._conditions.$or&&(e.omit.$or=!0,this._conditions.$or=this._conditions.$or.concat(t._conditions.$or)),F.merge(this._conditions,t._conditions,e)),t._fields&&(this._fields||(this._fields={}),F.merge(this._fields,t._fields,e)),t.options&&(this.options||(this.options={}),F.merge(this.options,t.options,e)),t._update&&(this._update||(this._update={}),F.mergeClone(this._update,t._update)),t._distinct&&(this._distinct=t._distinct),F.merge(this._mongooseOptions,t._mongooseOptions),this):null!=this.model&&t instanceof this.model.base.Types.ObjectId?(F.merge(this._conditions,{_id:t},e),this):(e.omit={},this._conditions&&this._conditions.$and&&t.$and&&(e.omit.$and=!0,this._conditions.$and=this._conditions.$and.concat(t.$and)),this._conditions&&this._conditions.$or&&t.$or&&(e.omit.$or=!0,this._conditions.$or=this._conditions.$or.concat(t.$or)),F.merge(this._conditions,t,e),this)},U.prototype.collation=function(t){return null==this.options&&(this.options={}),this.options.collation=t,this},U.prototype._completeOne=function(t,e,n){if(!t&&!this.options.rawResult)return n(null,null);const o=this.model,r=_(this._fields),i=this._userProvidedFields||{},s=this._mongooseOptions,c=this.options;if(!c.lean&&s.lean&&(c.lean=s.lean),c.explain)return n(null,t);if(!s.populate){const a=this.schema.options.versionKey;return s.lean&&!1===s.lean.versionKey&&a&&a in t&&delete t[a],s.lean?H(o.schema,t,null,e,c,n):z(o,t,e,c,r,i,null,n)}const a=w.preparePopulationOptionsMQ(this,this._mongooseOptions);if(s.lean)return o.populate(t,a).then(t=>{H(o.schema,t,null,e,c,n)},t=>{n(t)});z(o,t,e,c,r,i,[],(t,e)=>{if(null!=t)return n(t);o.populate(e,a).then(t=>{n(null,t)},t=>{n(t)})})},U.prototype._findOne=async function(){if(this._castConditions(),this.error()){throw this.error()}this._applyPaths(),this._fields=this._castFields(this._fields),u(this.options,this.model),p(this.options,this.model);const t=this._optionsForExec(),e=await this._collection.collection.findOne(this._conditions,t);return new Promise((t,n)=>{this._completeOne(e,null,nt(this,(e,o)=>{if(e)return n(e);t(o)}))})},U.prototype.findOne=function(t,e,n){if(\"function\"==typeof t||\"function\"==typeof e||\"function\"==typeof n||\"function\"==typeof arguments[3])throw new s(\"Query.prototype.findOne() no longer accepts a callback\");return this.op=\"findOne\",this._validateOp(),t=F.toObject(t),n&&this.setOptions(n),e&&this.select(e),P.canMerge(t)?(this.merge(t),K(this)):null!=t&&this.error(new c(t,\"filter\",\"findOne\")),U.base.findOne.call(this),this},U.prototype._count=async function(){try{this.cast(this.model)}catch(t){this.error(t)}if(this.error())throw this.error();u(this.options,this.model),p(this.options,this.model);const t=this._conditions,e=this._optionsForExec();return this._collection.collection.count(t,e)},U.prototype._countDocuments=async function(){try{this.cast(this.model)}catch(t){this.error(t)}if(this.error())throw this.error();u(this.options,this.model),p(this.options,this.model);const t=this._conditions,e=this._optionsForExec();return this._collection.collection.countDocuments(t,e)},U.prototype._estimatedDocumentCount=async function(){if(this.error())throw this.error();const t=this._optionsForExec();return this._collection.collection.estimatedDocumentCount(t)},U.prototype.count=function(t){if(\"function\"==typeof t||\"function\"==typeof arguments[1])throw new s(\"Query.prototype.count() no longer accepts a callback\");return this.op=\"count\",this._validateOp(),t=F.toObject(t),P.canMerge(t)&&this.merge(t),this},U.prototype.estimatedDocumentCount=function(t){if(\"function\"==typeof t||\"function\"==typeof arguments[1])throw new s(\"Query.prototype.estimatedDocumentCount() no longer accepts a callback\");return this.op=\"estimatedDocumentCount\",this._validateOp(),\"object\"==typeof t&&null!=t&&this.setOptions(t),this},U.prototype.countDocuments=function(t,e){if(\"function\"==typeof t||\"function\"==typeof e||\"function\"==typeof arguments[2])throw new s(\"Query.prototype.countDocuments() no longer accepts a callback\");return this.op=\"countDocuments\",this._validateOp(),t=F.toObject(t),P.canMerge(t)&&this.merge(t),\"object\"==typeof e&&null!=e&&this.setOptions(e),this},U.prototype.__distinct=async function(){if(this._castConditions(),this.error())throw this.error();u(this.options,this.model),p(this.options,this.model);const t=this._optionsForExec();return this._collection.collection.distinct(this._distinct,this._conditions,t)},U.prototype.distinct=function(t,e){if(\"function\"==typeof t||\"function\"==typeof e||\"function\"==typeof arguments[2])throw new s(\"Query.prototype.distinct() no longer accepts a callback\");return this.op=\"distinct\",this._validateOp(),e=F.toObject(e),P.canMerge(e)?(this.merge(e),K(this)):null!=e&&this.error(new c(e,\"filter\",\"distinct\")),null!=t&&(this._distinct=t),this},U.prototype.sort=function(t){if(arguments.length>1)throw new Error(\"sort() only takes 1 Argument\");return U.base.sort.call(this,t)},U.prototype.deleteOne=function(t,e){if(\"function\"==typeof t||\"function\"==typeof e||\"function\"==typeof arguments[2])throw new s(\"Query.prototype.deleteOne() no longer accepts a callback\");return this.op=\"deleteOne\",this.setOptions(e),t=F.toObject(t),P.canMerge(t)?(this.merge(t),K(this)):null!=t&&this.error(new c(t,\"filter\",\"deleteOne\")),U.base.deleteOne.call(this),this},U.prototype._deleteOne=async function(){if(this._castConditions(),null!=this.error())throw this.error();const t=this._optionsForExec();return this._collection.collection.deleteOne(this._conditions,t)},U.prototype.deleteMany=function(t,e){if(\"function\"==typeof t||\"function\"==typeof e||\"function\"==typeof arguments[2])throw new s(\"Query.prototype.deleteMany() no longer accepts a callback\");return this.setOptions(e),this.op=\"deleteMany\",t=F.toObject(t),P.canMerge(t)?(this.merge(t),K(this)):null!=t&&this.error(new c(t,\"filter\",\"deleteMany\")),U.base.deleteMany.call(this),this},U.prototype._deleteMany=async function(){if(this._castConditions(),null!=this.error())throw this.error();const t=this._optionsForExec();return this._collection.collection.deleteMany(this._conditions,t)},U.prototype.findOneAndUpdate=function(t,e,n){if(\"function\"==typeof conditions||\"function\"==typeof e||\"function\"==typeof n||\"function\"==typeof arguments[3])throw new s(\"Query.prototype.findOneAndUpdate() no longer accepts a callback\");switch(this.op=\"findOneAndUpdate\",this._validateOp(),this._validate(),arguments.length){case 2:n=void 0;break;case 1:e=t,t=n=void 0}P.canMerge(t)&&this.merge(t),e&&this._mergeUpdate(e),(n=n?_(n):{}).projection&&(this.select(n.projection),delete n.projection),n.fields&&(this.select(n.fields),delete n.fields);const o=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;return null==n.new&&null==n.returnDocument&&null==n.returnOriginal&&null!=o&&(n.returnOriginal=o),this.setOptions(n),this},U.prototype._findOneAndUpdate=async function(){if(this._castConditions(),q(this),this.error())throw this.error();this._applyPaths(),this._fields=this._castFields(this._fields),u(this.options,this.model),p(this.options,this.model);const t=this._optionsForExec(this.model);\"strict\"in t&&(this._mongooseOptions.strict=t.strict);const e={projection:this._fields,...t};W(e),this._update=this._castUpdate(this._update,!1);const n=Object.assign({},e,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});if(this._update=T(this._conditions,this.model.schema,this._update,n),this._update&&0!==Object.keys(this._update).length){if(this._update instanceof Error)throw this._update;this._update.$set&&0===Object.keys(this._update.$set).length&&delete this._update.$set}else{if(!t.upsert){this._executionStack=null;return await this._findOne()}{const t=_(this._update);delete t._id,this._update={$set:t}}}Q(this,\"runValidators\",!1)&&await this.validate(this._update,e,!1),this._update.toBSON&&(this._update=this._update.toBSON());let o=await this._collection.collection.findOneAndUpdate(this._conditions,this._update,e);for(const t of this._transforms)o=t(o);const r=o.value;return new Promise((t,e)=>{this._completeOne(r,o,nt(this,(n,o)=>{if(n)return e(n);t(o)}))})},U.prototype.findOneAndRemove=function(t,e){if(\"function\"==typeof t||\"function\"==typeof e||\"function\"==typeof arguments[2])throw new s(\"Query.prototype.findOneAndRemove() no longer accepts a callback\");return this.op=\"findOneAndRemove\",this._validateOp(),this._validate(),P.canMerge(t)&&this.merge(t),e&&this.setOptions(e),this},U.prototype.findOneAndDelete=function(t,e){if(\"function\"==typeof t||\"function\"==typeof e||\"function\"==typeof arguments[2])throw new s(\"Query.prototype.findOneAndDelete() no longer accepts a callback\");return this.op=\"findOneAndDelete\",this._validateOp(),this._validate(),P.canMerge(t)&&this.merge(t),e&&this.setOptions(e),this},U.prototype._findOneAndDelete=async function(){if(this._castConditions(),null!=this.error())throw this.error();const t=this._conditions,e=this._optionsForExec();let n=null;if(this._applyPaths(),null!=this._fields&&(e.projection=this._castFields(_(this._fields)),n=e.projection,n instanceof Error))throw n;let o=await this._collection.collection.findOneAndDelete(t,e);for(const t of this._transforms)o=t(o);const r=o.value;return new Promise((t,e)=>{this._completeOne(r,o,nt(this,(n,o)=>{if(n)return e(n);t(o)}))})},U.prototype.findOneAndReplace=function(t,e,n){if(\"function\"==typeof t||\"function\"==typeof e||\"function\"==typeof n||\"function\"==typeof arguments[4])throw new s(\"Query.prototype.findOneAndReplace() no longer accepts a callback\");if(this.op=\"findOneAndReplace\",this._validateOp(),this._validate(),P.canMerge(t)&&this.merge(t),null!=e){if($(e))throw new Error(\"The replacement document must not contain atomic operators.\");this._mergeUpdate(e)}n=n||{};const o=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;return null==n.new&&null==n.returnDocument&&null==n.returnOriginal&&null!=o&&(n.returnOriginal=o),this.setOptions(n),this.setOptions({overwrite:!0}),this},U.prototype._findOneAndReplace=async function(){if(this._castConditions(),null!=this.error())throw this.error();const t=this._conditions,e=this._optionsForExec();W(e);let n=null;if(this._applyPaths(),null!=this._fields&&(e.projection=this._castFields(_(this._fields)),n=e.projection,n instanceof Error))throw n;if(!1===Q(this,\"runValidators\",!1)){try{this._update=this._castUpdate(this._update,!0)}catch(t){const e=new l;throw e.errors[t.path]=t,e}let n=await this._collection.collection.findOneAndReplace(t,this._update||{},e);for(const t of this._transforms)n=t(n);const o=n.value;return new Promise((t,e)=>{this._completeOne(o,n,nt(this,(n,o)=>{if(n)return e(n);t(o)}))})}let o=new this.model(this._update,null,!0);this._update=o,await o.validate(),o.toBSON&&(o=o.toBSON());let r=await this._collection.collection.findOneAndReplace(t,o,e);for(const t of this._transforms)r=t(r);const i=r.value;return new Promise((t,e)=>{this._completeOne(i,r,nt(this,(n,o)=>{if(n)return e(n);t(o)}))})},U.prototype._findOneAndRemove=async function(){return this._findOneAndDelete()},U.prototype._mergeUpdate=function(t){if(null!=t&&(\"object\"!=typeof t||0!==Object.keys(t).length))if(this._update||(this._update=Array.isArray(t)?[]:{}),t instanceof U){if(Array.isArray(this._update))throw new Error(\"Cannot mix array and object updates\");t._update&&F.mergeClone(this._update,t._update)}else if(Array.isArray(t)){if(!Array.isArray(this._update))throw new Error(\"Cannot mix array and object updates\");this._update=this._update.concat(t)}else{if(Array.isArray(this._update))throw new Error(\"Cannot mix array and object updates\");F.mergeClone(this._update,t)}},U.prototype.validate=async function(t,e,n){if(\"function\"==typeof arguments[3])throw new s(\"Query.prototype.validate() no longer accepts a callback\");await et(this,\"validate\"),n?await t.$validate():await new Promise((n,o)=>{I(this,this.model.schema,t,e,t=>{if(null!=t)return o(t);n()})}),await Z(this,null,null,\"validate\")},U.prototype._updateMany=async function(){return G.call(this,\"updateMany\")},U.prototype._updateOne=async function(){return G.call(this,\"updateOne\")},U.prototype._replaceOne=async function(){return G.call(this,\"replaceOne\")},U.prototype.updateMany=function(t,e,n,o){return\"function\"==typeof n?(o=n,n=null):\"function\"==typeof e?(o=e,e=t,t={},n=null):\"function\"==typeof t?(o=t,t=void 0,e=void 0,n=void 0):\"object\"!=typeof t||e||n||o||(e=t,t=void 0,n=void 0,o=void 0),Y(this,\"updateMany\",t,e,n,o)},U.prototype.updateOne=function(t,e,n,o){return\"function\"==typeof n?(o=n,n=null):\"function\"==typeof e?(o=e,e=t,t={},n=null):\"function\"==typeof t?(o=t,t=void 0,e=void 0,n=void 0):\"object\"!=typeof t||e||n||o||(e=t,t=void 0,n=void 0,o=void 0),Y(this,\"updateOne\",t,e,n,o)},U.prototype.replaceOne=function(t,e,n,o){return\"function\"==typeof n?(o=n,n=null):\"function\"==typeof e?(o=e,e=t,t={},n=null):\"function\"==typeof t?(o=t,t=void 0,e=void 0,n=void 0):\"object\"!=typeof t||e||n||o||(e=t,t=void 0,n=void 0,o=void 0),this.setOptions({overwrite:!0}),Y(this,\"replaceOne\",t,e,n,o)},U.prototype.transform=function(t){return this._transforms.push(t),this},U.prototype.orFail=function(t){return this.transform(e=>{switch(this.op){case\"find\":if(0===e.length)throw J(t,this);break;case\"findOne\":if(null==e)throw J(t,this);break;case\"replaceOne\":case\"updateMany\":case\"updateOne\":if(e&&0===e.matchedCount)throw J(t,this);break;case\"findOneAndDelete\":case\"findOneAndRemove\":if(0===(e&&e.lastErrorObject&&e.lastErrorObject.n))throw J(t,this);break;case\"findOneAndUpdate\":case\"findOneAndReplace\":if(!1===(e&&e.lastErrorObject&&e.lastErrorObject.updatedExisting))throw J(t,this);break;case\"deleteMany\":case\"deleteOne\":if(0===e.deletedCount)throw J(t,this)}return e}),this},U.prototype.isPathSelectedInclusive=function(t){return S(this._fields,t)},U.prototype.exec=async function(t){if(\"function\"==typeof t||arguments.length>=2&&\"function\"==typeof arguments[1])throw new s(\"Query.prototype.exec() no longer accepts a callback\");if(\"string\"==typeof t&&(this.op=t),null==this.op)throw new Error(\"Query must have `op` before executing\");if(this._validateOp(),!this.op)return;if(this.options&&this.options.sort){if(Object.keys(this.options.sort).includes(\"\"))throw new Error('Invalid field \"\" passed to sort()')}let e,n=\"_\"+this.op;if(\"distinct\"===this.op&&(n=\"__distinct\"),null!=this._executionStack){let t=this.toString();t.length>60&&(t=t.slice(0,60)+\"...\");const e=new s(\"Query was already executed: \"+t);throw e.originalStack=this._executionStack.stack,e}this._executionStack=new Error,await tt(this);let o=null;try{await et(this),e=await this[n]();for(const t of this._transforms)e=t(e)}catch(t){t instanceof i.skipWrappedFunction?e=t.args[0]:o=t}return e=await Z(this,e,o),await X(this),e},U.prototype.then=function(t,e){return this.exec().then(t,e)},U.prototype.catch=function(t){return this.exec().then(null,t)},U.prototype.finally=function(t){return this.exec().finally(t)},U.prototype[Symbol.toStringTag]=function(){return`Query { ${this.op} }`},U.prototype.pre=function(t){return this._hooks.pre(\"exec\",t),this},U.prototype.post=function(t){return this._hooks.post(\"exec\",t),this},U.prototype._castUpdate=function(t,e){let n=this.schema;const o=n.options.discriminatorKey,r=n._baseSchema?n._baseSchema:n;if(this._mongooseOptions.overwriteDiscriminatorKey&&null!=t[o]&&r.discriminators){const e=Object.values(r.discriminators).find(e=>e.discriminatorMapping.value===t[o]);null!=e&&(n=e)}let i;\"upsert\"in this.options&&(i=this.options.upsert);const s=this._conditions;if(null!=n&&F.hasUserDefinedProperty(s,n.options.discriminatorKey)&&\"object\"!=typeof s[n.options.discriminatorKey]&&null!=n.discriminators){const t=s[n.options.discriminatorKey],e=O(this.model.discriminators,t);n=n.discriminators[t]||e&&e.schema||n}return g(n,t,{overwrite:e,strict:this._mongooseOptions.strict,upsert:i,arrayFilters:this.options.arrayFilters,overwriteDiscriminatorKey:this._mongooseOptions.overwriteDiscriminatorKey},this,this._conditions)},U.prototype.populate=function(){if(!Array.from(arguments).some(Boolean))return this;const t=F.populate.apply(null,arguments);if(null!=this.options){const e=this.options.readConcern,n=this.options.readPreference;for(const o of t)null!=e&&null==(o&&o.options&&o.options.readConcern)&&(o.options=o.options||{},o.options.readConcern=e),null!=n&&null==(o&&o.options&&o.options.readPreference)&&(o.options=o.options||{},o.options.readPreference=n)}const e=this._mongooseOptions;if(null!=e.lean){const n=e.lean;for(const e of t)null==(e&&e.options&&e.options.lean)&&(e.options=e.options||{},e.options.lean=n)}F.isObject(e.populate)||(e.populate={});const n=e.populate;for(const e of t){const t=e.path;n[t]&&n[t].populate&&e.populate&&(e.populate=n[t].populate.concat(e.populate)),n[e.path]=e}return this},U.prototype.getPopulatedPaths=function(){const t=this._mongooseOptions.populate||{},e=Object.keys(t);for(const n of Object.keys(t)){const o=t[n];Array.isArray(o.populate)&&ot(e,o.populate,n+\".\")}return e},U.prototype.cast=function(t,e){e||(e=this._conditions);const n=(t=t||this.model).schema.options.discriminatorKey;null!=e&&e.hasOwnProperty(n)&&(t=O(t.discriminators,e[n])||t);const o={upsert:this.options&&this.options.upsert};this.options&&(\"strict\"in this.options&&(o.strict=this.options.strict),\"strictQuery\"in this.options&&(o.strictQuery=this.options.strictQuery));try{return d(t.schema,e,o,this)}catch(e){throw\"function\"==typeof e.setModel&&e.setModel(t),e}},U.prototype._castFields=function(t){let e,n,o,r,i,s;if(t)for(o=Object.keys(t),n=[],s=o.length;s--;)r=o[s],t[r].$elemMatch&&(e||(e={}),e[r]=t[r],n.push(r));if(e){try{i=this.cast(this.model,e)}catch(t){return t}for(s=n.length;s--;)r=n[s],t[r]=i[r]}return t},U.prototype._applyPaths=function(){this._fields=this._fields||{},w.applyPaths(this._fields,this.model.schema);let t=!0;\"selectPopulatedPaths\"in this.model.base.options&&(t=this.model.base.options.selectPopulatedPaths),\"selectPopulatedPaths\"in this.model.schema.options&&(t=this.model.schema.options.selectPopulatedPaths),t&&N(this._fields,this._userProvidedFields,this._mongooseOptions.populate)},U.prototype.cursor=function(t){this._applyPaths(),this._fields=this._castFields(this._fields),t&&this.setOptions(t);const e=this._optionsForExec();try{this.cast(this.model)}catch(t){return new a(this,e)._markError(t)}return new a(this,e)},U.prototype.tailable=function(t,e){if(null!=t&&\"function\"==typeof t.constructor&&\"Object\"===t.constructor.name&&(e=t,t=!0),void 0===t&&(t=!0),e&&\"object\"==typeof e)for(const t of Object.keys(e))\"awaitData\"===t||\"awaitdata\"===t?this.options.awaitData=!!e[t]:this.options[t]=e[t];return U.base.tailable.call(this,t)},U.prototype.near=function(){const t=[],e=this._mongooseOptions.nearSphere;if(1===arguments.length)if(Array.isArray(arguments[0]))t.push({center:arguments[0],spherical:e});else if(\"string\"==typeof arguments[0])t.push(arguments[0]);else{if(!F.isObject(arguments[0]))throw new TypeError(\"invalid argument\");\"boolean\"!=typeof arguments[0].spherical&&(arguments[0].spherical=e),t.push(arguments[0])}else if(2===arguments.length)if(\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1])t.push({center:[arguments[0],arguments[1]],spherical:e});else if(\"string\"==typeof arguments[0]&&Array.isArray(arguments[1]))t.push(arguments[0]),t.push({center:arguments[1],spherical:e});else{if(\"string\"!=typeof arguments[0]||!F.isObject(arguments[1]))throw new TypeError(\"invalid argument\");t.push(arguments[0]),\"boolean\"!=typeof arguments[1].spherical&&(arguments[1].spherical=e),t.push(arguments[1])}else{if(3!==arguments.length)throw new TypeError(\"invalid argument\");if(\"string\"!=typeof arguments[0]||\"number\"!=typeof arguments[1]||\"number\"!=typeof arguments[2])throw new TypeError(\"invalid argument\");t.push(arguments[0]),t.push({center:[arguments[1],arguments[2]],spherical:e})}return U.base.near.apply(this,t)},U.prototype.nearSphere=function(){return this._mongooseOptions.nearSphere=!0,this.near.apply(this,arguments),this},null!=Symbol.asyncIterator&&(U.prototype[Symbol.asyncIterator]=function(){return this.cursor().transformNull()._transformForAsyncIterator()}),U.prototype.box=function(t,e){return!Array.isArray(t)&&F.isObject(t)&&(e=t.ur,t=t.ll),U.base.box.call(this,t,e)},U.prototype.center=U.base.circle,U.prototype.centerSphere=function(){null!=arguments[0]&&\"function\"==typeof arguments[0].constructor&&\"Object\"===arguments[0].constructor.name&&(arguments[0].spherical=!0),null!=arguments[1]&&\"function\"==typeof arguments[1].constructor&&\"Object\"===arguments[1].constructor.name&&(arguments[1].spherical=!0),U.base.circle.apply(this,arguments)},U.prototype.selectedInclusively=function(){return A(this._fields)},U.prototype.selectedExclusively=function(){return E(this._fields)},U.prototype.model,\n/*!\n * Export\n */\nt.exports=U},function(t,e,n){\"use strict\";\n/*!\n * ignore\n */t.exports=function(t){if(\"object\"!=typeof t||null===t)return!1;const e=Object.keys(t),n=e.length;for(let t=0;t<n;++t)if(\"$\"===e[t][0])return!0;return!1}},function(t,e,n){\"use strict\";const o=n(57);\n/*!\n * ignore\n */t.exports=function t(e){if(null==e)return!1;const n=Object.keys(e),r=n.length;if(0===r)return!1;for(let i=0;i<r;++i){const r=n[i];if(!r.startsWith(\"+\")&&(o(e[r])&&e[r]))return null!=e[r]&&\"object\"==typeof e[r]?t(e[r]):!!e[r]}return!1}},function(t,e,n){\"use strict\";t.exports=function t(e){return this instanceof t?(this.val=e,this):new t(e)}},function(t,e,n){\"use strict\";t.exports=function(t,e,n){if(null==t)return t;if(null!=t._doc&&(t=t._doc),arguments.length>=3){if(\"object\"!=typeof t)return;if(void 0===n)return;return t instanceof Map?t.set(e,n):t[e]=n,n}return\"$*\"===e?t instanceof Map?Array.from(t.values()):Object.keys(t).map(e=>t[e]):t instanceof Map?t.get(e):t[e]}},,,,,,function(t,e){t.exports=require(\"zlib\")},,,function(t,e,n){\"use strict\";const o=n(249);t.exports=o,t.exports.default=o,t.exports.mongoose=o,t.exports.cast=o.cast,t.exports.STATES=o.STATES,t.exports.setDriver=o.setDriver,t.exports.set=o.set,t.exports.get=o.get,t.exports.createConnection=o.createConnection,t.exports.connect=o.connect,t.exports.disconnect=o.disconnect,t.exports.startSession=o.startSession,t.exports.pluralize=o.pluralize,t.exports.model=o.model,t.exports.deleteModel=o.deleteModel,t.exports.modelNames=o.modelNames,t.exports.plugin=o.plugin,t.exports.connections=o.connections,t.exports.version=o.version,t.exports.Mongoose=o.Mongoose,t.exports.Schema=o.Schema,t.exports.SchemaType=o.SchemaType,t.exports.SchemaTypes=o.SchemaTypes,t.exports.VirtualType=o.VirtualType,t.exports.Types=o.Types,t.exports.Query=o.Query,t.exports.Model=o.Model,t.exports.Document=o.Document,t.exports.ObjectId=o.ObjectId,t.exports.isValidObjectId=o.isValidObjectId,t.exports.isObjectIdOrHexString=o.isObjectIdOrHexString,t.exports.syncIndexes=o.syncIndexes,t.exports.Decimal128=o.Decimal128,t.exports.Mixed=o.Mixed,t.exports.Date=o.Date,t.exports.Number=o.Number,t.exports.Error=o.Error,t.exports.now=o.now,t.exports.CastError=o.CastError,t.exports.SchemaTypeOptions=o.SchemaTypeOptions,t.exports.mongo=o.mongo,t.exports.mquery=o.mquery,t.exports.sanitizeFilter=o.sanitizeFilter,t.exports.trusted=o.trusted,t.exports.skipMiddlewareFunction=o.skipMiddlewareFunction,t.exports.overwriteMiddlewareResult=o.overwriteMiddlewareResult},,,,,,,,,,,,function(t,e,n){\"use strict\";\n/*!\n * ignore\n */let o=null;t.exports.get=function(){return o},t.exports.set=function(t){o=t}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Admin=e.AbstractCursor=e.MongoWriteConcernError=e.MongoUnexpectedServerResponseError=e.MongoTransactionError=e.MongoTopologyClosedError=e.MongoTailableCursorError=e.MongoSystemError=e.MongoServerSelectionError=e.MongoServerError=e.MongoServerClosedError=e.MongoRuntimeError=e.MongoParseError=e.MongoNotConnectedError=e.MongoNetworkTimeoutError=e.MongoNetworkError=e.MongoMissingDependencyError=e.MongoMissingCredentialsError=e.MongoKerberosError=e.MongoInvalidArgumentError=e.MongoGridFSStreamError=e.MongoGridFSChunkError=e.MongoExpiredSessionError=e.MongoError=e.MongoDriverError=e.MongoDecompressionError=e.MongoCursorInUseError=e.MongoCursorExhaustedError=e.MongoCompatibilityError=e.MongoChangeStreamError=e.MongoBatchReExecutionError=e.MongoAWSError=e.MongoAPIError=e.ChangeStreamCursor=e.MongoBulkWriteError=e.Timestamp=e.ObjectId=e.MinKey=e.MaxKey=e.Long=e.Int32=e.Double=e.Decimal128=e.DBRef=e.Code=e.BSONType=e.BSONSymbol=e.BSONRegExp=e.Binary=e.BSON=void 0,e.ServerDescriptionChangedEvent=e.ServerClosedEvent=e.ConnectionReadyEvent=e.ConnectionPoolReadyEvent=e.ConnectionPoolMonitoringEvent=e.ConnectionPoolCreatedEvent=e.ConnectionPoolClosedEvent=e.ConnectionPoolClearedEvent=e.ConnectionCreatedEvent=e.ConnectionClosedEvent=e.ConnectionCheckOutStartedEvent=e.ConnectionCheckOutFailedEvent=e.ConnectionCheckedOutEvent=e.ConnectionCheckedInEvent=e.CommandSucceededEvent=e.CommandStartedEvent=e.CommandFailedEvent=e.WriteConcern=e.ReadPreference=e.ReadConcern=e.TopologyType=e.ServerType=e.ReadPreferenceMode=e.ReadConcernLevel=e.ProfilingLevel=e.ReturnDocument=e.ServerApiVersion=e.ExplainVerbosity=e.MongoErrorLabel=e.AutoEncryptionLoggerLevel=e.CURSOR_FLAGS=e.Compressor=e.AuthMechanism=e.GSSAPICanonicalizationValue=e.BatchType=e.UnorderedBulkOperation=e.OrderedBulkOperation=e.MongoClient=e.ListIndexesCursor=e.ListCollectionsCursor=e.GridFSBucketWriteStream=e.GridFSBucketReadStream=e.GridFSBucket=e.FindCursor=e.Db=e.Collection=e.ClientSession=e.ChangeStream=e.CancellationToken=e.AggregationCursor=void 0,e.SrvPollingEvent=e.TopologyOpeningEvent=e.TopologyDescriptionChangedEvent=e.TopologyClosedEvent=e.ServerOpeningEvent=e.ServerHeartbeatSucceededEvent=e.ServerHeartbeatStartedEvent=e.ServerHeartbeatFailedEvent=void 0;const o=n(253);Object.defineProperty(e,\"Admin\",{enumerable:!0,get:function(){return o.Admin}});const r=n(259);Object.defineProperty(e,\"OrderedBulkOperation\",{enumerable:!0,get:function(){return r.OrderedBulkOperation}});const i=n(260);Object.defineProperty(e,\"UnorderedBulkOperation\",{enumerable:!0,get:function(){return i.UnorderedBulkOperation}});const s=n(138);Object.defineProperty(e,\"ChangeStream\",{enumerable:!0,get:function(){return s.ChangeStream}});const c=n(261);Object.defineProperty(e,\"Collection\",{enumerable:!0,get:function(){return c.Collection}});const a=n(49);Object.defineProperty(e,\"AbstractCursor\",{enumerable:!0,get:function(){return a.AbstractCursor}});const l=n(262);Object.defineProperty(e,\"AggregationCursor\",{enumerable:!0,get:function(){return l.AggregationCursor}});const u=n(263);Object.defineProperty(e,\"FindCursor\",{enumerable:!0,get:function(){return u.FindCursor}});const p=n(264);Object.defineProperty(e,\"ListCollectionsCursor\",{enumerable:!0,get:function(){return p.ListCollectionsCursor}});const h=n(266);Object.defineProperty(e,\"ListIndexesCursor\",{enumerable:!0,get:function(){return h.ListIndexesCursor}});const f=n(268);Object.defineProperty(e,\"Db\",{enumerable:!0,get:function(){return f.Db}});const d=n(269);Object.defineProperty(e,\"GridFSBucket\",{enumerable:!0,get:function(){return d.GridFSBucket}});const y=n(141);Object.defineProperty(e,\"GridFSBucketReadStream\",{enumerable:!0,get:function(){return y.GridFSBucketReadStream}});const m=n(142);Object.defineProperty(e,\"GridFSBucketWriteStream\",{enumerable:!0,get:function(){return m.GridFSBucketWriteStream}});const g=n(143);Object.defineProperty(e,\"MongoClient\",{enumerable:!0,get:function(){return g.MongoClient}});const _=n(139);Object.defineProperty(e,\"CancellationToken\",{enumerable:!0,get:function(){return _.CancellationToken}});const b=n(270);Object.defineProperty(e,\"ClientSession\",{enumerable:!0,get:function(){return b.ClientSession}});var O=n(66);Object.defineProperty(e,\"BSON\",{enumerable:!0,get:function(){return O.BSON}});var $=n(66);Object.defineProperty(e,\"Binary\",{enumerable:!0,get:function(){return $.Binary}}),Object.defineProperty(e,\"BSONRegExp\",{enumerable:!0,get:function(){return $.BSONRegExp}}),Object.defineProperty(e,\"BSONSymbol\",{enumerable:!0,get:function(){return $.BSONSymbol}}),Object.defineProperty(e,\"BSONType\",{enumerable:!0,get:function(){return $.BSONType}}),Object.defineProperty(e,\"Code\",{enumerable:!0,get:function(){return $.Code}}),Object.defineProperty(e,\"DBRef\",{enumerable:!0,get:function(){return $.DBRef}}),Object.defineProperty(e,\"Decimal128\",{enumerable:!0,get:function(){return $.Decimal128}}),Object.defineProperty(e,\"Double\",{enumerable:!0,get:function(){return $.Double}}),Object.defineProperty(e,\"Int32\",{enumerable:!0,get:function(){return $.Int32}}),Object.defineProperty(e,\"Long\",{enumerable:!0,get:function(){return $.Long}}),Object.defineProperty(e,\"MaxKey\",{enumerable:!0,get:function(){return $.MaxKey}}),Object.defineProperty(e,\"MinKey\",{enumerable:!0,get:function(){return $.MinKey}}),Object.defineProperty(e,\"ObjectId\",{enumerable:!0,get:function(){return $.ObjectId}}),Object.defineProperty(e,\"Timestamp\",{enumerable:!0,get:function(){return $.Timestamp}});var w=n(67);Object.defineProperty(e,\"MongoBulkWriteError\",{enumerable:!0,get:function(){return w.MongoBulkWriteError}});var v=n(271);Object.defineProperty(e,\"ChangeStreamCursor\",{enumerable:!0,get:function(){return v.ChangeStreamCursor}});var E=n(26);Object.defineProperty(e,\"MongoAPIError\",{enumerable:!0,get:function(){return E.MongoAPIError}}),Object.defineProperty(e,\"MongoAWSError\",{enumerable:!0,get:function(){return E.MongoAWSError}}),Object.defineProperty(e,\"MongoBatchReExecutionError\",{enumerable:!0,get:function(){return E.MongoBatchReExecutionError}}),Object.defineProperty(e,\"MongoChangeStreamError\",{enumerable:!0,get:function(){return E.MongoChangeStreamError}}),Object.defineProperty(e,\"MongoCompatibilityError\",{enumerable:!0,get:function(){return E.MongoCompatibilityError}}),Object.defineProperty(e,\"MongoCursorExhaustedError\",{enumerable:!0,get:function(){return E.MongoCursorExhaustedError}}),Object.defineProperty(e,\"MongoCursorInUseError\",{enumerable:!0,get:function(){return E.MongoCursorInUseError}}),Object.defineProperty(e,\"MongoDecompressionError\",{enumerable:!0,get:function(){return E.MongoDecompressionError}}),Object.defineProperty(e,\"MongoDriverError\",{enumerable:!0,get:function(){return E.MongoDriverError}}),Object.defineProperty(e,\"MongoError\",{enumerable:!0,get:function(){return E.MongoError}}),Object.defineProperty(e,\"MongoExpiredSessionError\",{enumerable:!0,get:function(){return E.MongoExpiredSessionError}}),Object.defineProperty(e,\"MongoGridFSChunkError\",{enumerable:!0,get:function(){return E.MongoGridFSChunkError}}),Object.defineProperty(e,\"MongoGridFSStreamError\",{enumerable:!0,get:function(){return E.MongoGridFSStreamError}}),Object.defineProperty(e,\"MongoInvalidArgumentError\",{enumerable:!0,get:function(){return E.MongoInvalidArgumentError}}),Object.defineProperty(e,\"MongoKerberosError\",{enumerable:!0,get:function(){return E.MongoKerberosError}}),Object.defineProperty(e,\"MongoMissingCredentialsError\",{enumerable:!0,get:function(){return E.MongoMissingCredentialsError}}),Object.defineProperty(e,\"MongoMissingDependencyError\",{enumerable:!0,get:function(){return E.MongoMissingDependencyError}}),Object.defineProperty(e,\"MongoNetworkError\",{enumerable:!0,get:function(){return E.MongoNetworkError}}),Object.defineProperty(e,\"MongoNetworkTimeoutError\",{enumerable:!0,get:function(){return E.MongoNetworkTimeoutError}}),Object.defineProperty(e,\"MongoNotConnectedError\",{enumerable:!0,get:function(){return E.MongoNotConnectedError}}),Object.defineProperty(e,\"MongoParseError\",{enumerable:!0,get:function(){return E.MongoParseError}}),Object.defineProperty(e,\"MongoRuntimeError\",{enumerable:!0,get:function(){return E.MongoRuntimeError}}),Object.defineProperty(e,\"MongoServerClosedError\",{enumerable:!0,get:function(){return E.MongoServerClosedError}}),Object.defineProperty(e,\"MongoServerError\",{enumerable:!0,get:function(){return E.MongoServerError}}),Object.defineProperty(e,\"MongoServerSelectionError\",{enumerable:!0,get:function(){return E.MongoServerSelectionError}}),Object.defineProperty(e,\"MongoSystemError\",{enumerable:!0,get:function(){return E.MongoSystemError}}),Object.defineProperty(e,\"MongoTailableCursorError\",{enumerable:!0,get:function(){return E.MongoTailableCursorError}}),Object.defineProperty(e,\"MongoTopologyClosedError\",{enumerable:!0,get:function(){return E.MongoTopologyClosedError}}),Object.defineProperty(e,\"MongoTransactionError\",{enumerable:!0,get:function(){return E.MongoTransactionError}}),Object.defineProperty(e,\"MongoUnexpectedServerResponseError\",{enumerable:!0,get:function(){return E.MongoUnexpectedServerResponseError}}),Object.defineProperty(e,\"MongoWriteConcernError\",{enumerable:!0,get:function(){return E.MongoWriteConcernError}});var A=n(67);Object.defineProperty(e,\"BatchType\",{enumerable:!0,get:function(){return A.BatchType}});var S=n(273);Object.defineProperty(e,\"GSSAPICanonicalizationValue\",{enumerable:!0,get:function(){return S.GSSAPICanonicalizationValue}});var j=n(274);Object.defineProperty(e,\"AuthMechanism\",{enumerable:!0,get:function(){return j.AuthMechanism}});var x=n(275);Object.defineProperty(e,\"Compressor\",{enumerable:!0,get:function(){return x.Compressor}});var P=n(49);Object.defineProperty(e,\"CURSOR_FLAGS\",{enumerable:!0,get:function(){return P.CURSOR_FLAGS}});var k=n(145);Object.defineProperty(e,\"AutoEncryptionLoggerLevel\",{enumerable:!0,get:function(){return k.AutoEncryptionLoggerLevel}});var M=n(26);Object.defineProperty(e,\"MongoErrorLabel\",{enumerable:!0,get:function(){return M.MongoErrorLabel}});var C=n(280);Object.defineProperty(e,\"ExplainVerbosity\",{enumerable:!0,get:function(){return C.ExplainVerbosity}});var D=n(143);Object.defineProperty(e,\"ServerApiVersion\",{enumerable:!0,get:function(){return D.ServerApiVersion}});var N=n(281);Object.defineProperty(e,\"ReturnDocument\",{enumerable:!0,get:function(){return N.ReturnDocument}});var T=n(282);Object.defineProperty(e,\"ProfilingLevel\",{enumerable:!0,get:function(){return T.ProfilingLevel}});var I=n(146);Object.defineProperty(e,\"ReadConcernLevel\",{enumerable:!0,get:function(){return I.ReadConcernLevel}});var R=n(147);Object.defineProperty(e,\"ReadPreferenceMode\",{enumerable:!0,get:function(){return R.ReadPreferenceMode}});var F=n(283);Object.defineProperty(e,\"ServerType\",{enumerable:!0,get:function(){return F.ServerType}}),Object.defineProperty(e,\"TopologyType\",{enumerable:!0,get:function(){return F.TopologyType}});var B=n(146);Object.defineProperty(e,\"ReadConcern\",{enumerable:!0,get:function(){return B.ReadConcern}});var V=n(147);Object.defineProperty(e,\"ReadPreference\",{enumerable:!0,get:function(){return V.ReadPreference}});var U=n(140);Object.defineProperty(e,\"WriteConcern\",{enumerable:!0,get:function(){return U.WriteConcern}});var L=n(285);Object.defineProperty(e,\"CommandFailedEvent\",{enumerable:!0,get:function(){return L.CommandFailedEvent}}),Object.defineProperty(e,\"CommandStartedEvent\",{enumerable:!0,get:function(){return L.CommandStartedEvent}}),Object.defineProperty(e,\"CommandSucceededEvent\",{enumerable:!0,get:function(){return L.CommandSucceededEvent}});var q=n(286);Object.defineProperty(e,\"ConnectionCheckedInEvent\",{enumerable:!0,get:function(){return q.ConnectionCheckedInEvent}}),Object.defineProperty(e,\"ConnectionCheckedOutEvent\",{enumerable:!0,get:function(){return q.ConnectionCheckedOutEvent}}),Object.defineProperty(e,\"ConnectionCheckOutFailedEvent\",{enumerable:!0,get:function(){return q.ConnectionCheckOutFailedEvent}}),Object.defineProperty(e,\"ConnectionCheckOutStartedEvent\",{enumerable:!0,get:function(){return q.ConnectionCheckOutStartedEvent}}),Object.defineProperty(e,\"ConnectionClosedEvent\",{enumerable:!0,get:function(){return q.ConnectionClosedEvent}}),Object.defineProperty(e,\"ConnectionCreatedEvent\",{enumerable:!0,get:function(){return q.ConnectionCreatedEvent}}),Object.defineProperty(e,\"ConnectionPoolClearedEvent\",{enumerable:!0,get:function(){return q.ConnectionPoolClearedEvent}}),Object.defineProperty(e,\"ConnectionPoolClosedEvent\",{enumerable:!0,get:function(){return q.ConnectionPoolClosedEvent}}),Object.defineProperty(e,\"ConnectionPoolCreatedEvent\",{enumerable:!0,get:function(){return q.ConnectionPoolCreatedEvent}}),Object.defineProperty(e,\"ConnectionPoolMonitoringEvent\",{enumerable:!0,get:function(){return q.ConnectionPoolMonitoringEvent}}),Object.defineProperty(e,\"ConnectionPoolReadyEvent\",{enumerable:!0,get:function(){return q.ConnectionPoolReadyEvent}}),Object.defineProperty(e,\"ConnectionReadyEvent\",{enumerable:!0,get:function(){return q.ConnectionReadyEvent}});var z=n(287);Object.defineProperty(e,\"ServerClosedEvent\",{enumerable:!0,get:function(){return z.ServerClosedEvent}}),Object.defineProperty(e,\"ServerDescriptionChangedEvent\",{enumerable:!0,get:function(){return z.ServerDescriptionChangedEvent}}),Object.defineProperty(e,\"ServerHeartbeatFailedEvent\",{enumerable:!0,get:function(){return z.ServerHeartbeatFailedEvent}}),Object.defineProperty(e,\"ServerHeartbeatStartedEvent\",{enumerable:!0,get:function(){return z.ServerHeartbeatStartedEvent}}),Object.defineProperty(e,\"ServerHeartbeatSucceededEvent\",{enumerable:!0,get:function(){return z.ServerHeartbeatSucceededEvent}}),Object.defineProperty(e,\"ServerOpeningEvent\",{enumerable:!0,get:function(){return z.ServerOpeningEvent}}),Object.defineProperty(e,\"TopologyClosedEvent\",{enumerable:!0,get:function(){return z.TopologyClosedEvent}}),Object.defineProperty(e,\"TopologyDescriptionChangedEvent\",{enumerable:!0,get:function(){return z.TopologyDescriptionChangedEvent}}),Object.defineProperty(e,\"TopologyOpeningEvent\",{enumerable:!0,get:function(){return z.TopologyOpeningEvent}});var K=n(288);Object.defineProperty(e,\"SrvPollingEvent\",{enumerable:!0,get:function(){return K.SrvPollingEvent}})},function(t,e){throw new Error(\"Module parse failed: Unexpected token (32:69)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|         this.readPreference = this.hasAspect(exports.Aspect.WRITE_OPERATION)\\n|             ? read_preference_1.ReadPreference.primary\\n>             : read_preference_1.ReadPreference.fromOptions(options) ?? read_preference_1.ReadPreference.primary;\\n|         // Pull the BSON serialize options from the already-resolved options\\n|         this.bsonOptions = (0, bson_1.resolveBSONOptions)(options);\")},function(t,e){throw new Error(\"Module parse failed: Unexpected token (79:36)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|         this.on('removeListener', eventName => {\\n|             if (eventName === 'change' && this.listenerCount('change') === 0 && this.cursor) {\\n>                 this[kCursorStream]?.removeAllListeners('data');\\n|             }\\n|         });\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.CancellationToken=e.TypedEventEmitter=void 0;const o=n(8);class r extends o.EventEmitter{}e.TypedEventEmitter=r;e.CancellationToken=class extends r{}},function(t,e){throw new Error(\"Module parse failed: Unexpected token (43:27)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|         if (options == null)\\n|             return undefined;\\n>         inherit = inherit ?? {};\\n|         let opts;\\n|         if (typeof options === 'string' || typeof options === 'number') {\")},function(t,e){throw new Error(\"Module parse failed: Unexpected token (147:28)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|         if (!doc) {\\n|             stream.push(null);\\n>             stream.s.cursor?.close().then(() => {\\n|                 stream.emit(GridFSBucketReadStream.CLOSE);\\n|             }, error => {\")},function(t,e){throw new Error(\"Module parse failed: Unexpected token (23:27)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|     constructor(bucket, filename, options) {\\n|         super();\\n>         options = options ?? {};\\n|         this.bucket = bucket;\\n|         this.chunks = bucket.s._chunksCollection;\")},function(t,e){throw new Error(\"Module parse failed: Unexpected token (162:91)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|         };\\n|         if (this.autoEncrypter) {\\n>             const initAutoEncrypter = (0, util_1.promisify)(callback => this.autoEncrypter?.init(callback));\\n|             await initAutoEncrypter();\\n|             await topologyConnect();\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.TOPOLOGY_EVENTS=e.CMAP_EVENTS=e.HEARTBEAT_EVENTS=e.RESUME_TOKEN_CHANGED=e.END=e.CHANGE=e.INIT=e.MORE=e.RESPONSE=e.SERVER_HEARTBEAT_FAILED=e.SERVER_HEARTBEAT_SUCCEEDED=e.SERVER_HEARTBEAT_STARTED=e.COMMAND_FAILED=e.COMMAND_SUCCEEDED=e.COMMAND_STARTED=e.CLUSTER_TIME_RECEIVED=e.CONNECTION_CHECKED_IN=e.CONNECTION_CHECKED_OUT=e.CONNECTION_CHECK_OUT_FAILED=e.CONNECTION_CHECK_OUT_STARTED=e.CONNECTION_CLOSED=e.CONNECTION_READY=e.CONNECTION_CREATED=e.CONNECTION_POOL_READY=e.CONNECTION_POOL_CLEARED=e.CONNECTION_POOL_CLOSED=e.CONNECTION_POOL_CREATED=e.TOPOLOGY_DESCRIPTION_CHANGED=e.TOPOLOGY_CLOSED=e.TOPOLOGY_OPENING=e.SERVER_DESCRIPTION_CHANGED=e.SERVER_CLOSED=e.SERVER_OPENING=e.DESCRIPTION_RECEIVED=e.UNPINNED=e.PINNED=e.MESSAGE=e.ENDED=e.CLOSED=e.CONNECT=e.OPEN=e.CLOSE=e.TIMEOUT=e.ERROR=e.SYSTEM_JS_COLLECTION=e.SYSTEM_COMMAND_COLLECTION=e.SYSTEM_USER_COLLECTION=e.SYSTEM_PROFILE_COLLECTION=e.SYSTEM_INDEX_COLLECTION=e.SYSTEM_NAMESPACE_COLLECTION=void 0,e.LEGACY_HELLO_COMMAND_CAMEL_CASE=e.LEGACY_HELLO_COMMAND=e.MONGO_CLIENT_EVENTS=e.LOCAL_SERVER_EVENTS=e.SERVER_RELAY_EVENTS=e.APM_EVENTS=void 0,e.SYSTEM_NAMESPACE_COLLECTION=\"system.namespaces\",e.SYSTEM_INDEX_COLLECTION=\"system.indexes\",e.SYSTEM_PROFILE_COLLECTION=\"system.profile\",e.SYSTEM_USER_COLLECTION=\"system.users\",e.SYSTEM_COMMAND_COLLECTION=\"$cmd\",e.SYSTEM_JS_COLLECTION=\"system.js\",e.ERROR=\"error\",e.TIMEOUT=\"timeout\",e.CLOSE=\"close\",e.OPEN=\"open\",e.CONNECT=\"connect\",e.CLOSED=\"closed\",e.ENDED=\"ended\",e.MESSAGE=\"message\",e.PINNED=\"pinned\",e.UNPINNED=\"unpinned\",e.DESCRIPTION_RECEIVED=\"descriptionReceived\",e.SERVER_OPENING=\"serverOpening\",e.SERVER_CLOSED=\"serverClosed\",e.SERVER_DESCRIPTION_CHANGED=\"serverDescriptionChanged\",e.TOPOLOGY_OPENING=\"topologyOpening\",e.TOPOLOGY_CLOSED=\"topologyClosed\",e.TOPOLOGY_DESCRIPTION_CHANGED=\"topologyDescriptionChanged\",e.CONNECTION_POOL_CREATED=\"connectionPoolCreated\",e.CONNECTION_POOL_CLOSED=\"connectionPoolClosed\",e.CONNECTION_POOL_CLEARED=\"connectionPoolCleared\",e.CONNECTION_POOL_READY=\"connectionPoolReady\",e.CONNECTION_CREATED=\"connectionCreated\",e.CONNECTION_READY=\"connectionReady\",e.CONNECTION_CLOSED=\"connectionClosed\",e.CONNECTION_CHECK_OUT_STARTED=\"connectionCheckOutStarted\",e.CONNECTION_CHECK_OUT_FAILED=\"connectionCheckOutFailed\",e.CONNECTION_CHECKED_OUT=\"connectionCheckedOut\",e.CONNECTION_CHECKED_IN=\"connectionCheckedIn\",e.CLUSTER_TIME_RECEIVED=\"clusterTimeReceived\",e.COMMAND_STARTED=\"commandStarted\",e.COMMAND_SUCCEEDED=\"commandSucceeded\",e.COMMAND_FAILED=\"commandFailed\",e.SERVER_HEARTBEAT_STARTED=\"serverHeartbeatStarted\",e.SERVER_HEARTBEAT_SUCCEEDED=\"serverHeartbeatSucceeded\",e.SERVER_HEARTBEAT_FAILED=\"serverHeartbeatFailed\",e.RESPONSE=\"response\",e.MORE=\"more\",e.INIT=\"init\",e.CHANGE=\"change\",e.END=\"end\",e.RESUME_TOKEN_CHANGED=\"resumeTokenChanged\",e.HEARTBEAT_EVENTS=Object.freeze([e.SERVER_HEARTBEAT_STARTED,e.SERVER_HEARTBEAT_SUCCEEDED,e.SERVER_HEARTBEAT_FAILED]),e.CMAP_EVENTS=Object.freeze([e.CONNECTION_POOL_CREATED,e.CONNECTION_POOL_READY,e.CONNECTION_POOL_CLEARED,e.CONNECTION_POOL_CLOSED,e.CONNECTION_CREATED,e.CONNECTION_READY,e.CONNECTION_CLOSED,e.CONNECTION_CHECK_OUT_STARTED,e.CONNECTION_CHECK_OUT_FAILED,e.CONNECTION_CHECKED_OUT,e.CONNECTION_CHECKED_IN]),e.TOPOLOGY_EVENTS=Object.freeze([e.SERVER_OPENING,e.SERVER_CLOSED,e.SERVER_DESCRIPTION_CHANGED,e.TOPOLOGY_OPENING,e.TOPOLOGY_CLOSED,e.TOPOLOGY_DESCRIPTION_CHANGED,e.ERROR,e.TIMEOUT,e.CLOSE]),e.APM_EVENTS=Object.freeze([e.COMMAND_STARTED,e.COMMAND_SUCCEEDED,e.COMMAND_FAILED]),e.SERVER_RELAY_EVENTS=Object.freeze([e.SERVER_HEARTBEAT_STARTED,e.SERVER_HEARTBEAT_SUCCEEDED,e.SERVER_HEARTBEAT_FAILED,e.COMMAND_STARTED,e.COMMAND_SUCCEEDED,e.COMMAND_FAILED,...e.CMAP_EVENTS]),e.LOCAL_SERVER_EVENTS=Object.freeze([e.CONNECT,e.DESCRIPTION_RECEIVED,e.CLOSED,e.ENDED]),e.MONGO_CLIENT_EVENTS=Object.freeze([...e.CMAP_EVENTS,...e.APM_EVENTS,...e.TOPOLOGY_EVENTS,...e.HEARTBEAT_EVENTS]),e.LEGACY_HELLO_COMMAND=\"ismaster\",e.LEGACY_HELLO_COMMAND_CAMEL_CASE=\"isMaster\"},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.AutoEncryptionLoggerLevel=e.aws4=e.saslprep=e.Snappy=e.getAwsCredentialProvider=e.ZStandard=e.Kerberos=void 0;const o=n(26);function r(t){return new Proxy(t?{kModuleError:t}:{},{get:(e,n)=>{if(\"kModuleError\"===n)return t;throw t},set:()=>{throw t}})}e.Kerberos=r(new o.MongoMissingDependencyError(\"Optional module `kerberos` not found. Please install it to enable kerberos authentication\"));try{e.Kerberos=n(!function(){var t=new Error(\"Cannot find module 'kerberos'\");throw t.code=\"MODULE_NOT_FOUND\",t}())}catch{}e.ZStandard=r(new o.MongoMissingDependencyError(\"Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression\"));try{e.ZStandard=n(!function(){var t=new Error(\"Cannot find module '@mongodb-js/zstd'\");throw t.code=\"MODULE_NOT_FOUND\",t}())}catch{}e.getAwsCredentialProvider=function(){try{return n(!function(){var t=new Error(\"Cannot find module '@aws-sdk/credential-providers'\");throw t.code=\"MODULE_NOT_FOUND\",t}())}catch{return r(new o.MongoMissingDependencyError(\"Optional module `@aws-sdk/credential-providers` not found. Please install it to enable getting aws credentials via the official sdk.\"))}},e.Snappy=r(new o.MongoMissingDependencyError(\"Optional module `snappy` not found. Please install it to enable snappy compression\"));try{e.Snappy=n(!function(){var t=new Error(\"Cannot find module 'snappy'\");throw t.code=\"MODULE_NOT_FOUND\",t}())}catch{}e.saslprep=r(new o.MongoMissingDependencyError(\"Optional module `saslprep` not found. Please install it to enable Stringprep Profile for User Names and Passwords\"));try{e.saslprep=n(276)}catch{}e.aws4=r(new o.MongoMissingDependencyError(\"Optional module `aws4` not found. Please install it to enable AWS authentication\"));try{e.aws4=n(!function(){var t=new Error(\"Cannot find module 'aws4'\");throw t.code=\"MODULE_NOT_FOUND\",t}())}catch{}e.AutoEncryptionLoggerLevel=Object.freeze({FatalError:0,Error:1,Warning:2,Info:3,Trace:4})},function(t,e){throw new Error(\"Module parse failed: Unexpected token (28:54)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|          * @see https://github.com/mongodb/specifications/blob/master/source/read-write-concern/read-write-concern.rst#unknown-levels-and-additional-options-for-string-based-readconcerns\\n|          */\\n>         this.level = exports.ReadConcernLevel[level] ?? level;\\n|     }\\n|     /**\")},function(t,e){throw new Error(\"Module parse failed: Unexpected token (39:29)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|         this.mode = mode;\\n|         this.tags = tags;\\n>         this.hedge = options?.hedge;\\n|         this.maxStalenessSeconds = undefined;\\n|         this.minWireVersion = undefined;\")},function(t,e,n){\"use strict\";const o=/^function\\s*([^\\s(]+)/;t.exports=function(t){return t.name||(t.toString().trim().match(o)||[])[1]}},function(t,e,n){\"use strict\";t.exports=function(t){if(null==t||\"object\"!=typeof t)return!1;const e=Object.getPrototypeOf(t);return!e||\"Object\"===e.constructor.name}},function(t,e,n){\"use strict\";\n/*!\n * ignore\n */t.exports=function(t){const e=Object.keys(t.errors||{}),n=e.length,o=[];let r;for(let i=0;i<n;++i)r=e[i],t!==t.errors[r]&&o.push(r+\": \"+t.errors[r].message);return o.join(\", \")}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(9);class r extends o{constructor(t,e){let n=t.message;n||(n=o.messages.general.default);const r=i(n,t,e);super(r),t=Object.assign({},t,{message:r}),this.properties=t,this.kind=t.type,this.path=t.path,this.value=t.value,this.reason=t.reason}toString(){return this.message}toJSON(){return Object.assign({name:this.name,message:this.message},this)}}function i(t,e,n){if(\"function\"==typeof t)return t(e,n);const o=Object.keys(e);for(const n of o)\"message\"!==n&&(t=t.replace(\"{\"+n.toUpperCase()+\"}\",e[n]));return t}\n/*!\n * exports\n */Object.defineProperty(r.prototype,\"name\",{value:\"ValidatorError\"}),Object.defineProperty(r.prototype,\"properties\",{enumerable:!1,writable:!0,value:null}),r.prototype.formatMessage=i,t.exports=r},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(9);class r extends o{constructor(t,e,n){const o=n.join(\", \");super('No matching document found for id \"'+t._id+'\" version '+e+' modifiedPaths \"'+o+'\"'),this.version=e,this.modifiedPaths=n}}Object.defineProperty(r.prototype,\"name\",{value:\"VersionError\"}),\n/*!\n * exports\n */\nt.exports=r},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(9);class r extends o{constructor(t){super(\"Can't save() the same doc multiple times in parallel. Document: \"+t._id)}}Object.defineProperty(r.prototype,\"name\",{value:\"ParallelSaveError\"}),\n/*!\n * exports\n */\nt.exports=r},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(9);class r extends o{constructor(t){super(\"Cannot overwrite `\"+t+\"` model once compiled.\")}}Object.defineProperty(r.prototype,\"name\",{value:\"OverwriteModelError\"}),\n/*!\n * exports\n */\nt.exports=r},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(9);class r extends o{constructor(t){super(\"For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\\n  \"+t.join(\"\\n  \")+\"\\nUse Model.updateOne() to update these arrays instead.\")}}Object.defineProperty(r.prototype,\"name\",{value:\"DivergentArrayError\"}),\n/*!\n * exports\n */\nt.exports=r},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(9);class r extends o{constructor(t,e){super(e=e||\"Cannot populate path `\"+t+\"` because it is not in your schema. Set the `strictPopulate` option to false to override.\"),this.path=t}}Object.defineProperty(r.prototype,\"name\",{value:\"StrictPopulateError\"}),t.exports=r},function(t,e,n){\"use strict\";\n/*!\n * ignore\n */t.exports=function(t){if(Array.isArray(t)){if(!t.every(t=>\"number\"==typeof t||\"string\"==typeof t))throw new Error(\"$type array values must be strings or numbers\");return t}if(\"number\"!=typeof t&&\"string\"!=typeof t)throw new Error(\"$type parameter must be number, string, or array of numbers and strings\");return t}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(9);class r extends o{constructor(t,e){super(\"Tried to set nested object field `\"+t+`\\` to ${Array.isArray(e)?\"array\":\"primitive value\"} \\``+e+\"`\"),this.path=t}}Object.defineProperty(r.prototype,\"name\",{value:\"ObjectExpectedError\"}),t.exports=r},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(9);class r extends o{constructor(t,e,n){super('Parameter \"'+e+'\" to '+n+\"() must be an object, got \"+t.toString())}}Object.defineProperty(r.prototype,\"name\",{value:\"ObjectParameterError\"}),t.exports=r},function(t,e,n){\"use strict\";const o=n(3);function r(t,e){this.path=e,this.getters=[],this.setters=[],this.options=Object.assign({},t)}r.prototype._applyDefaultGetters=function(){if(this.getters.length>0||this.setters.length>0)return;const t=\"$\"+this.path;this.getters.push((function(){return this.$locals[t]})),this.setters.push((function(e){this.$locals[t]=e}))},\n/*!\n * ignore\n */\nr.prototype.clone=function(){const t=new r(this.options,this.path);return t.getters=[].concat(this.getters),t.setters=[].concat(this.setters),t},r.prototype.get=function(t){return this.getters.push(t),this},r.prototype.set=function(t){return this.setters.push(t),this},r.prototype.applyGetters=function(t,e){o.hasUserDefinedProperty(this.options,[\"ref\",\"refPath\"])&&e.$$populatedVirtuals&&e.$$populatedVirtuals.hasOwnProperty(this.path)&&(t=e.$$populatedVirtuals[this.path]);let n=t;for(const t of this.getters)n=t.call(e,n,this,e);return n},r.prototype.applySetters=function(t,e){let n=t;for(const t of this.setters)n=t.call(e,n,this,e);return n},\n/*!\n * exports\n */\nt.exports=r},function(t,e,n){\"use strict\";t.exports=function(t){const e={_id:{auto:!0}};e._id[t.options.typeKey]=\"ObjectId\",t.add(e)}},function(t,e,n){\"use strict\";t.exports=function(t,e){const n=t.discriminatorMapping&&t.discriminatorMapping.value;if(n&&!(\"sparse\"in e)){const o=t.options.discriminatorKey;e.partialFilterExpression=e.partialFilterExpression||{},e.partialFilterExpression[o]=n}return e}},function(t,e,n){\"use strict\";t.exports=function(t){switch(t){case\"p\":t=\"primary\";break;case\"pp\":t=\"primaryPreferred\";break;case\"s\":t=\"secondary\";break;case\"sp\":t=\"secondaryPreferred\";break;case\"n\":t=\"nearest\"}return t}},function(t,e,n){\"use strict\";const o=n(69),r=n(165);\n/*!\n * ignore\n */\nfunction i(t,e,n){if(null==e)return;if(Object.keys(e).some(t=>\"$\"===t[0])){if(e.$push&&c(e.$push),e.$addToSet&&c(e.$addToSet),null!=e.$set){const o=Object.keys(e.$set);for(const r of o)s(n,r,e.$set,t)}if(null!=e.$setOnInsert){const o=Object.keys(e.$setOnInsert);for(const r of o)s(n,r,e.$setOnInsert,t)}}const o=Object.keys(e).filter(t=>\"$\"!==t[0]);for(const r of o)s(n,r,e,t);function c(e){for(const o of Object.keys(e)){const s=n.path(o.replace(/\\.\\$\\./i,\".\").replace(/.\\$$/,\"\"));if(e[o]&&s&&s.$isMongooseDocumentArray&&s.schema.options.timestamps){const n=s.schema.options.timestamps,c=r(n,\"createdAt\"),a=r(n,\"updatedAt\");e[o].$each?e[o].$each.forEach((function(e){null!=a&&(e[a]=t),null!=c&&(e[c]=t),i(t,e,s.schema)})):(null!=a&&(e[o][a]=t),null!=c&&(e[o][c]=t),i(t,e[o],s.schema))}}}}function s(t,e,n,s){const c=o(e),a=t.path(c);if(!a)return;const l=[],u=c.split(\".\");for(let n=u.length-1;n>0;--n){const o=t.path(u.slice(0,n).join(\".\"));null!=o&&(o.$isMongooseDocumentArray||o.$isSingleNested)&&l.push({parentPath:e.split(\".\").slice(0,n).join(\".\"),parentSchemaType:o})}if(Array.isArray(n[e])&&a.$isMongooseDocumentArray)!function(t,e,n){const o=e.schema.options.timestamps,s=t.length;if(!o){for(let o=0;o<s;++o)i(n,t[o],e.schema);return}const c=r(o,\"createdAt\"),a=r(o,\"updatedAt\");for(let o=0;o<s;++o)null!=a&&(t[o][a]=n),null!=c&&(t[o][c]=n),i(n,t[o],e.schema)}(n[e],a,s);else if(n[e]&&a.$isSingleNested)!function(t,e,n){const o=e.schema.options.timestamps;if(!o)return void i(n,t,e.schema);const s=r(o,\"createdAt\"),c=r(o,\"updatedAt\");null!=c&&(t[c]=n),null!=s&&(t[s]=n),i(n,t,e.schema)}(n[e],a,s);else if(l.length>0)for(const t of l){const o=t.parentPath,i=t.parentSchemaType,c=i.schema.options.timestamps,a=r(c,\"updatedAt\");if(c&&null!=a)if(i.$isSingleNested)n[o+\".\"+a]=s;else if(i.$isMongooseDocumentArray){let t=e.substring(o.length+1);if(/^\\d+$/.test(t)){n[o+\".\"+t][a]=s;continue}const r=t.indexOf(\".\");t=-1!==r?t.substring(0,r):t,n[o+\".\"+t+\".\"+a]=s}}else if(null!=a.schema&&a.schema!=t&&n[e]){const t=a.schema.options.timestamps,o=r(t,\"createdAt\"),i=r(t,\"updatedAt\");if(!t)return;null!=i&&(n[e][i]=s),null!=o&&(n[e][o]=s)}}t.exports=i},function(t,e,n){\"use strict\";t.exports=\n/*!\n * ignore\n */\nfunction(t,e){if(null==t)return null;if(\"boolean\"==typeof t)return e;if(\"boolean\"==typeof t[e])return t[e]?e:null;if(!(e in t))return e;return t[e]}},function(t,e,n){\"use strict\";\n/*!\n * ignore\n */const o=n(10);t.exports=\n/*!\n * ignore\n */\nfunction(t,e,n,r,i){const s=r;let c=s;const a=o(i,\"overwrite\",!1),l=o(i,\"timestamps\",!0);if(!l||null==s)return r;const u=null!=l&&!1===l.createdAt,p=null!=l&&!1===l.updatedAt;if(a)return r&&r.$set&&(r=r.$set,s.$set={},c=s.$set),p||!n||r[n]||(c[n]=t),u||!e||r[e]||(c[e]=t),s;if(r=r||{},Array.isArray(s))return s.push({$set:{[n]:t}}),s;if(s.$set=s.$set||{},!p&&n&&(!r.$currentDate||!r.$currentDate[n])){let e=!1;if(-1!==n.indexOf(\".\")){const o=n.split(\".\");for(let n=1;n<o.length;++n){const i=o.slice(-n).join(\".\"),s=o.slice(0,-n).join(\".\");if(null!=r[s]){r[s][i]=t,e=!0;break}if(r.$set&&r.$set[s]){r.$set[s][i]=t,e=!0;break}}}e||(s.$set[n]=t),s.hasOwnProperty(n)&&delete s[n]}if(!u&&e){r[e]&&delete r[e],r.$set&&r.$set[e]&&delete r.$set[e];let n=!1;if(-1!==e.indexOf(\".\")){const o=e.split(\".\");for(let e=1;e<o.length;++e){const i=o.slice(-e).join(\".\"),s=o.slice(0,-e).join(\".\");if(null!=r[s]){r[s][i]=t,n=!0;break}if(r.$set&&r.$set[s]){r.$set[s][i]=t,n=!0;break}}}n||(s.$setOnInsert=s.$setOnInsert||{},s.$setOnInsert[e]=t)}0===Object.keys(s.$set).length&&delete s.$set;return s}},function(t,e,n){\"use strict\";t.exports=Object.freeze([\"count\",\"countDocuments\",\"distinct\",\"estimatedDocumentCount\",\"find\",\"findOne\",\"findOneAndReplace\",\"findOneAndUpdate\",\"replaceOne\",\"updateMany\",\"updateOne\",\"deleteMany\",\"deleteOne\",\"findOneAndDelete\",\"findOneAndRemove\"])},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(17),r=n(95),i=n(1).arrayAtomicsSymbol,s=n(1).arrayAtomicsBackupSymbol,c=n(1).arrayParentSymbol,a=n(1).arrayPathSymbol,l=n(1).arraySchemaSymbol,u=Array.prototype.push,p=/^\\d+$/;\n/*!\n * Module exports.\n */\nt.exports=function(t,e,n,h){let f;if(Array.isArray(t)){const e=t.length;if(0===e)f=new Array;else if(1===e)f=new Array(1),f[0]=t[0];else if(e<1e4)f=new Array,u.apply(f,t);else{f=new Array;for(let n=0;n<e;++n)u.call(f,t[n])}}else f=[];const d={[i]:{},[s]:void 0,[a]:e,[l]:h,[c]:void 0,isMongooseArray:!0,isMongooseArrayProxy:!0,__array:f};t&&null!=t[i]&&(d[i]=t[i]),null!=n&&n instanceof o&&(d[c]=n,d[l]=h||n.schema.path(e));const y=new Proxy(f,{get:function(t,e){return d.hasOwnProperty(e)?d[e]:r.hasOwnProperty(e)?r[e]:f[e]},set:function(t,e,n){return\"string\"==typeof e&&p.test(e)?r.set.call(y,e,n,!1):d.hasOwnProperty(e)?d[e]=n:f[e]=n,!0}});return y}},function(t,e,n){\"use strict\";\n/*!\n * ignore\n */t.exports=function(t,e,n){const o=(n=n||{}).skipDocArrays;let r=0;if(!t)return r;for(const n of Object.keys(t.$__.activePaths.getStatePaths(\"modify\"))){if(o){const e=t.$__schema.path(n);if(e&&e.$isMongooseDocumentArray)continue}if(n.startsWith(e+\".\")&&(t.$__.activePaths.clearPath(n),++r,t.$isSubdocument)){const e=t.ownerDocument(),o=t.$__fullPath(n);e.$__.activePaths.clearPath(o)}}return r}},function(t,e,n){\"use strict\";const o=n(16),r=n(27);t.exports=function(t){if(null==t)return t;if(o(t,\"ObjectId\"))return t;if(t._id){if(o(t._id,\"ObjectId\"))return t._id;if(t._id.toString instanceof Function)return new r(t._id.toString())}return t.toString instanceof Function?new r(t.toString()):new r(t)}},function(t,e,n){\"use strict\";const o=n(16);t.exports=function(t,e){return\"string\"==typeof t&&\"string\"==typeof e||\"number\"==typeof t&&\"number\"==typeof e?t===e:!(!o(t,\"ObjectId\")||!o(e,\"ObjectId\"))&&t.toString()===e.toString()}},function(t,e,n){\"use strict\";const o=n(15);t.exports=function(t,e){if(null==t)return t;if(t._id&&\"string\"==typeof t._id)return t._id;if(t.toString&&t.toString!==Object.prototype.toString&&!Array.isArray(t))return t.toString();throw new o(\"string\",t,e)}},function(t,e,n){\"use strict\";\n/*!\n * Module requirements.\n */const o=n(9),r=n(321),i=n(13),s=n(72),c=n(102),a=n(3),l=i.CastError;function u(t,e){i.call(this,t,e,\"Number\")}\n/*!\n * ignore\n */\nfunction p(t){return this.cast(t)}u.get=i.get,u.set=i.set,\n/*!\n * ignore\n */\nu._cast=s,u.cast=function(t){return 0===arguments.length||(!1===t&&(t=this._defaultCaster),this._cast=t),this._cast},\n/*!\n * ignore\n */\nu._defaultCaster=t=>{if(\"number\"!=typeof t)throw new Error;return t},u.schemaName=\"Number\",u.defaultOptions={},\n/*!\n * Inherits from SchemaType.\n */\nu.prototype=Object.create(i.prototype),u.prototype.constructor=u,u.prototype.OptionsConstructor=r,\n/*!\n * ignore\n */\nu._checkRequired=t=>\"number\"==typeof t||t instanceof Number,u.checkRequired=i.checkRequired,u.prototype.checkRequired=function(t,e){if(\"object\"==typeof t&&i._isRef(this,t,e,!0))return null!=t;return(\"function\"==typeof this.constructor.checkRequired?this.constructor.checkRequired():u.checkRequired())(t)},u.prototype.min=function(t,e){if(this.minValidator&&(this.validators=this.validators.filter((function(t){return t.validator!==this.minValidator}),this)),null!=t){let n=e||o.messages.Number.min;n=n.replace(/{MIN}/,t),this.validators.push({validator:this.minValidator=function(e){return null==e||e>=t},message:n,type:\"min\",min:t})}return this},u.prototype.max=function(t,e){if(this.maxValidator&&(this.validators=this.validators.filter((function(t){return t.validator!==this.maxValidator}),this)),null!=t){let n=e||o.messages.Number.max;n=n.replace(/{MAX}/,t),this.validators.push({validator:this.maxValidator=function(e){return null==e||e<=t},message:n,type:\"max\",max:t})}return this},u.prototype.enum=function(t,e){if(this.enumValidator&&(this.validators=this.validators.filter((function(t){return t.validator!==this.enumValidator}),this)),!Array.isArray(t)){a.isPOJO(t)&&null!=t.values?(e=t.message,t=t.values):\"number\"==typeof t&&(t=Array.prototype.slice.call(arguments),e=null),a.isPOJO(t)&&(t=Object.values(t)),e=e||o.messages.Number.enum}return e=null==e?o.messages.Number.enum:e,this.enumValidator=e=>null==e||-1!==t.indexOf(e),this.validators.push({validator:this.enumValidator,message:e,type:\"enum\",enumValues:t}),this},u.prototype.cast=function(t,e,n){if(\"number\"!=typeof t&&i._isRef(this,t,e,n)&&(null==t||a.isNonBuiltinObject(t)))return this._castRef(t,e,n);const o=t&&void 0!==t._id?t._id:t;let r;r=\"function\"==typeof this._castFunction?this._castFunction:\"function\"==typeof this.constructor.cast?this.constructor.cast():u.cast();try{return r(o)}catch(t){throw new l(\"Number\",o,this.path,t,this)}},u.prototype.$conditionalHandlers=a.options(i.prototype.$conditionalHandlers,{$bitsAllClear:c,$bitsAnyClear:c,$bitsAllSet:c,$bitsAnySet:c,$gt:p,$gte:p,$lt:p,$lte:p,$mod:function(t){const e=this;return Array.isArray(t)?t.map((function(t){return e.cast(t)})):[this.cast(t)]}}),u.prototype.castForQuery=function(t,e,n){let o;if(null!=t){if(o=this.$conditionalHandlers[t],!o)throw new l(\"number\",e,this.path,null,this);return o.call(this,e,n)}return e=this.applySetters(e,n)},\n/*!\n * Module exports.\n */\nt.exports=u},function(t,e,n){\"use strict\";\n/*!\n * Module requirements.\n */const o=n(73).castArraysOfNumbers,r=n(73).castToNumber;function i(t,e){switch(t.$geometry.type){case\"Polygon\":case\"LineString\":case\"Point\":o(t.$geometry.coordinates,e)}return s(e,t),t}function s(t,e){e.$maxDistance&&(e.$maxDistance=r.call(t,e.$maxDistance)),e.$minDistance&&(e.$minDistance=r.call(t,e.$minDistance))}\n/*!\n * ignore\n */\ne.cast$geoIntersects=function(t){if(!t.$geometry)return;return i(t,this),t},e.cast$near=function(t){const e=n(99);if(Array.isArray(t))return o(t,this),t;if(s(this,t),t&&t.$geometry)return i(t,this);if(!Array.isArray(t))throw new TypeError(\"$near must be either an array or an object with a $geometry property\");return e.prototype.castForQuery.call(this,null,t)},e.cast$within=function(t){if(s(this,t),t.$box||t.$polygon){const e=t.$box?\"$box\":\"$polygon\";t[e].forEach(t=>{if(!Array.isArray(t)){throw new TypeError(\"Invalid $within $box argument. Expected an array, received \"+t)}t.forEach((e,n)=>{t[n]=r.call(this,e)})})}else if(t.$center||t.$centerSphere){const e=t.$center?\"$center\":\"$centerSphere\";t[e].forEach((n,o)=>{Array.isArray(n)?n.forEach((t,e)=>{n[e]=r.call(this,t)}):t[e][o]=r.call(this,n)})}else t.$geometry&&i(t,this);return t}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(15),r=n(8).EventEmitter,i=n(158),s=n(334),c=n(13),a=n(103),l=n(90),u=n(73).castToNumber,p=n(104),h=n(174),f=n(177),d=n(178),y=n(35).internalToObjectOptions,m=n(3);let g;function _(t,e,n){const o=_.defaultOptions&&_.defaultOptions._id;null!=o&&((n=n||{})._id=o),t=d(t,n),this.caster=b(t),this.caster.path=e,this.caster.prototype.$basePath=e,this.schema=t,this.$isSingleNested=!0,this.base=t.base,c.call(this,e,n,\"Embedded\")}\n/*!\n * ignore\n */\n/*!\n * ignore\n */\nfunction b(t,e){g||(g=n(96));const o=function(t,e,n){this.$__parent=n,g.apply(this,arguments),null!=n&&this.$session(n.$session())};t._preCompile();const i=null!=e?e.prototype:g.prototype;(o.prototype=Object.create(i)).$__setSchema(t),o.prototype.constructor=o,o.schema=t,o.$isSingleNested=!0,o.events=new r,o.prototype.toBSON=function(){return this.toObject(y)};for(const e in t.methods)o.prototype[e]=t.methods[e];for(const e in t.statics)o[e]=t.statics[e];for(const t in r.prototype)o[t]=r.prototype[t];return o}t.exports=_,_.prototype=Object.create(c.prototype),_.prototype.constructor=_,_.prototype.OptionsConstructor=s,_.prototype.$conditionalHandlers.$geoWithin=function(t,e){return{$geometry:this.castForQuery(null,t.$geometry,e)}},\n/*!\n * ignore\n */\n_.prototype.$conditionalHandlers.$near=_.prototype.$conditionalHandlers.$nearSphere=h.cast$near,_.prototype.$conditionalHandlers.$within=_.prototype.$conditionalHandlers.$geoWithin=h.cast$within,_.prototype.$conditionalHandlers.$geoIntersects=h.cast$geoIntersects,_.prototype.$conditionalHandlers.$minDistance=u,_.prototype.$conditionalHandlers.$maxDistance=u,_.prototype.$conditionalHandlers.$exists=l,_.prototype.cast=function(t,e,n,o,r){if(t&&t.$isSingleNested&&t.parent===e)return t;if(null!=t&&(\"object\"!=typeof t||Array.isArray(t)))throw new i(this.path,t);const s=f(this.caster,t);let c;const l=e&&e.$__&&e.$__.selected||{},u=this.path,p=Object.keys(l).reduce((t,e)=>(e.startsWith(u+\".\")&&((t=t||{})[e.substring(u.length+1)]=l[e]),t),null);return r=Object.assign({},r,{priorDoc:o}),n?(c=new s(void 0,p,e,!1,{defaults:!1}),delete c.$__.defaults,c.$init(t),a(c,p),c):0===Object.keys(t).length?new s({},p,e,void 0,r):new s(t,p,e,void 0,r)},_.prototype.castForQuery=function(t,e,n,r){let i;if(null!=t){if(i=this.$conditionalHandlers[t],!i)throw new Error(\"Can't use \"+t);return i.call(this,e)}if(null==e)return e;this.options.runSetters&&(e=this._applySetters(e,n));const s=f(this.caster,e),c=null!=r&&null!=r.strict?r.strict:void 0;try{e=new s(e,c)}catch(t){if(!(t instanceof o))throw new o(\"Embedded\",e,this.path,t,this);throw t}return e},_.prototype.doValidate=function(t,e,n,o){const r=f(this.caster,t);if(!t||t instanceof r||(t=new r(t,null,null!=n&&null!=n.$__?n:null)),o&&o.skipSchemaValidators)return t?t.validate().then(()=>e(null),t=>e(t)):e(null);c.prototype.doValidate.call(this,t,(function(n){return n?e(n):t?void t.validate().then(()=>e(null),t=>e(t)):e(null)}),n,o)},_.prototype.doValidateSync=function(t,e,n){if(!n||!n.skipSchemaValidators){const n=c.prototype.doValidateSync.call(this,t,e);if(n)return n}if(t)return t.validateSync()},_.prototype.discriminator=function(t,e,n){n=n||{};const o=m.isPOJO(n)?n.value:n,r=\"boolean\"!=typeof n.clone||n.clone;return e.instanceOfSchema&&r&&(e=e.clone()),e=p(this.caster,t,e,o),this.caster.discriminators[t]=b(e,this.caster),this.caster.discriminators[t]},\n/*!\n * ignore\n */\n_.defaultOptions={},_.set=c.set,\n/*!\n * ignore\n */\n_.prototype.toJSON=function(){return{path:this.path,options:this.options}},\n/*!\n * ignore\n */\n_.prototype.clone=function(){const t=Object.assign({},this.options),e=new this.constructor(this.schema,this.path,t);return e.validators=this.validators.slice(),void 0!==this.requiredValidator&&(e.requiredValidator=this.requiredValidator),e.caster.discriminators=Object.assign({},this.caster.discriminators),e}},function(t,e,n){\"use strict\";e.removeSubdocs=n(336),e.saveSubdocs=n(337),e.sharding=n(338),e.trackTransaction=n(339),e.validateBeforeSave=n(340)},function(t,e,n){\"use strict\";const o=n(24);t.exports=function(t,e){const n=t.schema.options.discriminatorKey;if(null!=e&&t.discriminators&&null!=e[n])if(t.discriminators[e[n]])t=t.discriminators[e[n]];else{const r=o(t.discriminators,e[n]);r&&(t=r)}return t}},function(t,e,n){\"use strict\";const o=n(161);t.exports=function(t,e){return null==e||null==e._id||(t=t.clone(),e._id?t.paths._id||(o(t),t.options._id=!0):(t.remove(\"_id\"),t.options._id=!1)),t}},function(t,e,n){\"use strict\";t.exports=function(t){const e={},n=Object.keys(t);for(const t of n){if(-1===t.indexOf(\".\")){e[t]=1;continue}const n=t.split(\".\");let o=n[0];for(let t=0;t<n.length;++t)e[o]=1,t+1<n.length&&(o=o+\".\"+n[t+1])}return e}},function(t,e,n){\"use strict\";const o=n(3);t.exports=function(t,e){if(null==t._id||null==e||0===e.length)return;const n=String(t._id);for(const r of e){if(r.isVirtual)continue;const e=r.path.split(\".\");for(let i=0;i<e.length-1;++i){const s=e.slice(0,i+1).join(\".\"),c=e.slice(i+1).join(\".\"),a=t.get(s);if(null!=a&&o.isMongooseDocumentArray(a)){for(let t=0;t<a.length;++t)a[t].populated(c,null==r._docs[n]?void 0:r._docs[n][t],r);break}}}}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(356),r=n(20);function i(t){return 0===t.length?null:new o(t)}t.exports=async function(t,e,n){const o=n.parallel||1,s=n.batchSize,c=n.signal,a=n.continueOnError,l=[],u=function(){const t=[];let e=null,n=0;return function(r){if(null===e&&0===t.length)return e=n++,r(o);t.push(r)};function o(){if(0!==t.length){e=n++;t.shift()(o)}else e=null}}();let p=!1;return new Promise((e,n)=>{if(null!=c){if(c.aborted)return e(null);c.addEventListener(\"abort\",()=>(p=!0,e(null)),{once:!0})}if(null!=s){if(\"number\"!=typeof s)throw new TypeError(\"batchSize must be a number\");if(!Number.isInteger(s))throw new TypeError(\"batchSize must be an integer\");if(s<1)throw new TypeError(\"batchSize must be at least 1\")}!function(e){let n=0,c=0,f=null;for(let t=0;t<o;++t)u(d());function d(){let o=[],d=!1;return function y(m){if(d||p)return m();if(f)return m();t((function(t,g){if(null!=f)return m();if(null!=t)if(\"MongoCursorExhaustedError\"===t.name)g=null;else{if(!a)return f=t,e(t),m();l.push(t)}if(null==g){if(d=!0,n<=0){const t=a?i(l):f;e(t)}else s&&o.length&&h(o,c++,_);return m()}if(++n,r(()=>m()),s&&o.push(g),s&&o.length!==s)return void r(()=>u(y));function _(t){if(s?(n-=o.length,o=[]):--n,null!=t){if(!a)return f=t,e(t);l.push(t)}if((d||p)&&n<=0){const t=a?i(l):f;return e(t)}r(()=>u(y))}h(s?o:g,c++,_)}))}}}((t,o)=>{if(null!=t)return n(t);e(o)})});function h(t,n,o){let r;try{r=e(t,n)}catch(t){return o(t)}r&&\"function\"==typeof r.then?r.then((function(){o(null)}),(function(t){o(t||new Error(\"`eachAsync()` promise rejected without error\"))})):o(null)}}},function(t,e,n){\"use strict\";const o=n(3);function r(t,e,n){o.hasUserDefinedProperty(t,n)||(o.hasUserDefinedProperty(e.db.options,n)?t[n]=e.db.options[n]:o.hasUserDefinedProperty(e.base.options,n)&&(t[n]=e.base.options[n]))}t.exports={applyGlobalMaxTimeMS:function(t,e){r(t,e,\"maxTimeMS\")},applyGlobalDiskUse:function(t,e){r(t,e,\"allowDiskUse\")}}},function(t,e,n){\"use strict\";const o=n(10);t.exports=function(t,e){const n=o(t,\"options.writeConcern\",{});0!=Object.keys(n).length?(e.writeConcern={},\"w\"in e||null==n.w||(e.writeConcern.w=n.w),\"j\"in e||null==n.j||(e.writeConcern.j=n.j),\"wtimeout\"in e||null==n.wtimeout||(e.writeConcern.wtimeout=n.wtimeout)):(\"w\"in e||null==n.w||(e.w=n.w),\"j\"in e||null==n.j||(e.j=n.j),\"wtimeout\"in e||null==n.wtimeout||(e.wtimeout=n.wtimeout))}},function(t,e,n){\"use strict\";const o=n(185);t.exports=function(t){if(null==t)return{};const e=o(t);return Object.keys(e).reduce((t,e)=>{const n=e.match(/\\$\\[[^\\]]+\\]/g);if(null==n)return t;for(const o of n){const n=e.indexOf(o);if(n!==e.lastIndexOf(o))throw new Error(`Path '${e}' contains the same array filter multiple times`);t[o.substring(2,o.length-1)]=e.substring(0,n-1).replace(/\\$\\[[^\\]]+\\]/g,\"0\")}return t},{})}},function(t,e,n){\"use strict\";const o=n(56).modifiedPaths;t.exports=function(t){const e=Object.keys(t),n={},r={};for(const i of e)i.startsWith(\"$\")?o(t[i],\"\",n):r[i]=t[i];return o(r,\"\",n),n}},function(t,e,n){\"use strict\";const o=n(15),r=n(11),i=n(34),s=n(41),c=n(72),a=n(55),l=n(14),u=n(360),p=n(361),h=n(362),f=n(43).schemaMixedSymbol,d=n(107),y=n(3);\n/*!\n * ignore\n */\nfunction m(t,e){if(\"$unset\"===t){if(\"string\"!=typeof e&&(!Array.isArray(e)||e.find(t=>\"string\"!=typeof t)))throw new r(\"Invalid $unset in pipeline, must be  a string or an array of strings\");return e}if(\"$project\"===t){if(null==e||\"object\"!=typeof e)throw new r(\"Invalid $project in pipeline, must be an object\");return e}if(\"$addFields\"===t||\"$set\"===t){if(null==e||\"object\"!=typeof e)throw new r(\"Invalid \"+t+\" in pipeline, must be an object\");return e}if(\"$replaceRoot\"===t||\"$replaceWith\"===t){if(null==e||\"object\"!=typeof e)throw new r(\"Invalid \"+t+\" in pipeline, must be an object\");return e}throw new r('Invalid update pipeline operator: \"'+t+'\"')}function g(t,e,n,o,r,s,h){const m=o.strict,b=h?h+\".\":\"\",O=Object.keys(e);let w,E,A,S=O.length,j=!1,x=null;const P=null!=m?m:t.options.strict;for(;S--;){if(E=O[S],A=e[E],\"$pull\"===n&&(w=t._getSchema(b+E),null!=w&&null!=w.schema)){e[E]=a(w.schema,e[E],o,r),j=!0;continue}const k=b?b+E:E;if(null!=t.discriminatorMapping&&k===t.options.discriminatorKey&&t.discriminatorMapping.value!==e[E]&&!o.overwriteDiscriminatorKey){if(\"throw\"===P){x=_(new Error(\"Can't modify discriminator key \\\"\"+k+'\" on discriminator model'),r,k,x);continue}if(P){delete e[E];continue}}if(\"Object\"===l(A)){if(w=t._getSchema(b+E),null==w){const n=u(t,e,s,b+E,o);null!=n.schematype&&(w=n.schematype)}if(\"$setOnInsert\"!==n&&!o.overwrite&&p(w,m,e,E,b+E,r))continue;if(w&&w.caster&&n in $)if(\"$each\"in A){j=!0;try{e[E]={$each:v(w,A.$each,n,E,r,b+E)}}catch(t){x=_(t,r,E,x)}null!=A.$slice&&(e[E].$slice=0|A.$slice),A.$sort&&(e[E].$sort=A.$sort),null!=A.$position&&(e[E].$position=c(A.$position))}else{if(null!=w&&w.$isSingleNested){const t=null==m?w.schema.options.strict:m;try{e[E]=w.castForQuery(null,A,r,{strict:t})}catch(t){x=_(t,r,E,x)}}else try{e[E]=v(w,A,n,E,r,b+E)}catch(t){x=_(t,r,E,x)}if(void 0===e[E]){delete e[E];continue}j=!0}else if(\"$currentDate\"===n||n in $&&w){try{e[E]=v(w,A,n,E,r,b+E)}catch(t){x=_(t,r,E,x)}if(void 0===e[E]){delete e[E];continue}j=!0}else{const c=b+E,a=t._getPathType(c);let l=m;if(a&&a.schema&&null==l&&(l=a.schema.options.strict),\"undefined\"===a.pathType){if(\"throw\"===l)throw new i(c);if(l){delete e[E];continue}}j|=g(t,A,n,o,r,s,b+E)||y.isObject(A)&&0===Object.keys(A).length}}else{const c=\"$each\"===E||\"$or\"===E||\"$and\"===E||\"$in\"===E?h:b+E;if(w=t._getSchema(c),\"$setOnInsert\"!==n&&!o.overwrite&&p(w,m,e,E,b+E,r))continue;let a=t._getPathType(c);if(null==w){const n=u(t,e,s,c,o);null!=n.schematype&&(w=n.schematype,a=n.type)}let l=m;a&&a.schema&&null==m&&(l=a.schema.options.strict);if(l&&!w&&!/real|nested/.test(a.pathType)){if(\"throw\"===l&&null==t.virtuals[c])throw new i(b+E);delete e[E]}else{if(\"$rename\"===n){j=!0;continue}try{0===b.length||-1===E.indexOf(\".\")?e[E]=v(w,A,n,E,r,b+E):(d(e,E,v(w,A,n,E,r,b+E)),delete e[E])}catch(t){x=_(t,r,E,x)}if(!Array.isArray(e[E])||\"$addToSet\"!==n&&\"$push\"!==n||\"$each\"===E||w&&w.caster&&!w.caster.$isMongooseArray&&!w.caster[f]&&(e[E]={$each:e[E]}),void 0===e[E]){delete e[E];continue}j=!0}}}if(null!=x)throw x;return j}\n/*!\n * ignore\n */function _(t,e,n,o){if(\"object\"!=typeof e||!e.options.multipleCastError)throw t;return(o=o||new s).addError(n,t),o}t.exports=function(t,e,n,o,r){if(null==e)return;if(n=n||{},Array.isArray(e)){const t=e.length;for(let n=0;n<t;++n){const t=Object.keys(e[n]);for(const o of t)e[n][o]=m(o,e[n][o])}return e}n.upsert&&!n.overwrite&&h(t,e,o);const i=Object.keys(e);let s=i.length;const c={};let a,l=!1;const u=n.overwrite;for(r=r||{};s--;){const t=i[s];\"$\"===t[0]||u?\"$set\"===t&&c.$set||(c[t]=e[t]):(c.$set||(e.$set?c.$set=e.$set:c.$set={}),c.$set[t]=e[t],i.splice(s,1),~i.indexOf(\"$set\")||i.push(\"$set\"))}for(s=i.length;s--;){const e=i[s];if(a=c[e],l=l||e.startsWith(\"$\"),!a||\"object\"!=typeof a||Buffer.isBuffer(a)||u&&!l){if(!u||!c||\"object\"!=typeof c){throw new Error(\"Invalid atomic update value for \"+e+\". Expected an object, received \"+typeof a)}g(t,c,\"$set\",n,o,r)}else g(t,a,e,n,o,r);e.startsWith(\"$\")&&y.isEmptyObject(a)&&delete c[e]}return 0===Object.keys(c).length&&n.upsert&&Object.keys(r).length>0?{$setOnInsert:r}:c};const b={$pop:1,$inc:1},O={$unset:1},$={$push:1,$addToSet:1,$set:1,$setOnInsert:1},w={$set:1,$setOnInsert:1};function v(t,e,n,r,i,s){if(!t){if(n in b)try{return c(e)}catch(t){throw new o(\"number\",e,s)}return e}if(t.caster&&n in $&&(y.isObject(e)||Array.isArray(e))&&!w[n]){let n=0,o=t;for(;o.$isMongooseArray;)++n,o=o.caster;let r=0,s=e;for(;Array.isArray(s);)++r,s=s[0];const c=n-r;for(;r<n;)e=[e],++r;let a=t.applySetters(Array.isArray(e)?e:[e],i);for(let t=0;t<c;++t)a=a[0];return a}if(n in O)return e;if(n in b){if(null==e)throw new o(\"number\",e,t.path);if(\"$inc\"===n)return t.castForQuery(null,e,i);try{return c(e)}catch(n){throw new o(\"number\",e,t.path)}}if(\"$currentDate\"===n)return\"object\"==typeof e?{$type:e.$type}:Boolean(e);if(/^\\$/.test(r))return t.castForQuery(r,e,i);if(w[n]){const n=null!=e&&t.$isMongooseArray&&null!=t.$fullPath&&!t.$fullPath.match(/\\d+$/),o=null!=t[f];return n||o?t.applySetters(e,i):t.castForQuery(null,e,i)}return t.castForQuery(null,e,i)}},function(t,e,n){\"use strict\";const o=n(46),r=n(2),i=n(365),s=n(366)(\"mquery\");function c(t,e){if(!(this instanceof c))return new c(t,e);const n=this.constructor.prototype;this.op=n.op||void 0,this.options=Object.assign({},n.options),this._conditions=n._conditions?i.clone(n._conditions):{},this._fields=n._fields?i.clone(n._fields):void 0,this._updateDoc=n._updateDoc?i.clone(n._updateDoc):void 0,this._path=n._path||void 0,this._distinctDoc=n._distinctDoc||void 0,this._collection=n._collection||void 0,this._traceFunction=n._traceFunction||void 0,e&&this.setOptions(e),t&&this.find(t)}let a=\"$geoWithin\";Object.defineProperty(c,\"use$geoWithin\",{get:function(){return\"$geoWithin\"==a},set:function(t){a=!0===t?\"$geoWithin\":\"$within\"}}),c.prototype.toConstructor=function(){function t(e,n){if(!(this instanceof t))return new t(e,n);c.call(this,e,n)}i.inherits(t,c);const e=t.prototype;return e.options={},e.setOptions(this.options),e.op=this.op,e._conditions=i.clone(this._conditions),e._fields=i.clone(this._fields),e._updateDoc=i.clone(this._updateDoc),e._path=this._path,e._distinctDoc=this._distinctDoc,e._collection=this._collection,e._traceFunction=this._traceFunction,t},c.prototype.setOptions=function(t){if(!t||!i.isObject(t))return this;const e=i.keys(t);let n;for(let o=0;o<e.length;++o)if(n=e[o],\"function\"==typeof this[n]){const e=Array.isArray(t[n])?t[n]:[t[n]];this[n].apply(this,e)}else this.options[n]=t[n];return this},c.prototype.collection=function(t){return this._collection=new c.Collection(t),this},c.prototype.collation=function(t){return this.options.collation=t,this},c.prototype.$where=function(t){return this._conditions.$where=t,this},c.prototype.where=function(){if(!arguments.length)return this;this.op||(this.op=\"find\");const t=typeof arguments[0];if(\"string\"==t)return this._path=arguments[0],2===arguments.length&&(this._conditions[this._path]=arguments[1]),this;if(\"object\"==t&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw new TypeError(\"path must be a string or object\")},c.prototype.equals=function(t){this._ensurePath(\"equals\");const e=this._path;return this._conditions[e]=t,this},c.prototype.eq=function(t){this._ensurePath(\"eq\");const e=this._path;return this._conditions[e]=t,this},c.prototype.or=function(t){const e=this._conditions.$or||(this._conditions.$or=[]);return Array.isArray(t)||(t=[t]),e.push.apply(e,t),this},c.prototype.nor=function(t){const e=this._conditions.$nor||(this._conditions.$nor=[]);return Array.isArray(t)||(t=[t]),e.push.apply(e,t),this},c.prototype.and=function(t){const e=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(t)||(t=[t]),e.push.apply(e,t),this},\n/*!\n * gt, gte, lt, lte, ne, in, nin, all, regex, size, maxDistance\n *\n *     Thing.where('type').nin(array)\n */\n\"gt gte lt lte ne in nin all regex size maxDistance minDistance\".split(\" \").forEach((function(t){c.prototype[t]=function(){let e,n;1===arguments.length?(this._ensurePath(t),n=arguments[0],e=this._path):(n=arguments[1],e=arguments[0]);const o=null===this._conditions[e]||\"object\"==typeof this._conditions[e]?this._conditions[e]:this._conditions[e]={};return o[\"$\"+t]=n,this}})),c.prototype.mod=function(){let t,e;1===arguments.length?(this._ensurePath(\"mod\"),t=arguments[0],e=this._path):2!==arguments.length||Array.isArray(arguments[1])?3===arguments.length?(t=[arguments[1],arguments[2]],e=arguments[0]):(t=arguments[1],e=arguments[0]):(this._ensurePath(\"mod\"),t=[arguments[0],arguments[1]],e=this._path);const n=this._conditions[e]||(this._conditions[e]={});return n.$mod=t,this},c.prototype.exists=function(){let t,e;0===arguments.length?(this._ensurePath(\"exists\"),t=this._path,e=!0):1===arguments.length?\"boolean\"==typeof arguments[0]?(this._ensurePath(\"exists\"),t=this._path,e=arguments[0]):(t=arguments[0],e=!0):2===arguments.length&&(t=arguments[0],e=arguments[1]);const n=this._conditions[t]||(this._conditions[t]={});return n.$exists=e,this},c.prototype.elemMatch=function(){if(null==arguments[0])throw new TypeError(\"Invalid argument\");let t,e,n;if(\"function\"==typeof arguments[0])this._ensurePath(\"elemMatch\"),e=this._path,t=arguments[0];else if(i.isObject(arguments[0]))this._ensurePath(\"elemMatch\"),e=this._path,n=arguments[0];else if(\"function\"==typeof arguments[1])e=arguments[0],t=arguments[1];else{if(!arguments[1]||!i.isObject(arguments[1]))throw new TypeError(\"Invalid argument\");e=arguments[0],n=arguments[1]}t&&(n=new c,t(n),n=n._conditions);const o=this._conditions[e]||(this._conditions[e]={});return o.$elemMatch=n,this},c.prototype.within=function(){if(this._ensurePath(\"within\"),this._geoComparison=a,0===arguments.length)return this;if(2===arguments.length)return this.box.apply(this,arguments);if(2<arguments.length)return this.polygon.apply(this,arguments);const t=arguments[0];if(!t)throw new TypeError(\"Invalid argument\");if(t.center)return this.circle(t);if(t.box)return this.box.apply(this,t.box);if(t.polygon)return this.polygon.apply(this,t.polygon);if(t.type&&t.coordinates)return this.geometry(t);throw new TypeError(\"Invalid argument\")},c.prototype.box=function(){let t,e;if(3===arguments.length)t=arguments[0],e=[arguments[1],arguments[2]];else{if(2!==arguments.length)throw new TypeError(\"Invalid argument\");this._ensurePath(\"box\"),t=this._path,e=[arguments[0],arguments[1]]}const n=this._conditions[t]||(this._conditions[t]={});return n[this._geoComparison||a]={$box:e},this},c.prototype.polygon=function(){let t,e;\"string\"==typeof arguments[0]?(t=Array.from(arguments),e=t.shift()):(this._ensurePath(\"polygon\"),e=this._path,t=Array.from(arguments));const n=this._conditions[e]||(this._conditions[e]={});return n[this._geoComparison||a]={$polygon:t},this},c.prototype.circle=function(){let t,e;if(1===arguments.length)this._ensurePath(\"circle\"),t=this._path,e=arguments[0];else{if(2!==arguments.length)throw new TypeError(\"Invalid argument\");t=arguments[0],e=arguments[1]}if(!(\"radius\"in e)||!e.center)throw new Error(\"center and radius are required\");const n=this._conditions[t]||(this._conditions[t]={}),o=e.spherical?\"$centerSphere\":\"$center\",r=this._geoComparison||a;return n[r]={},n[r][o]=[e.center,e.radius],\"unique\"in e&&(n[r].$uniqueDocs=!!e.unique),this},c.prototype.near=function(){let t,e;if(this._geoComparison=\"$near\",0===arguments.length)return this;if(1===arguments.length)this._ensurePath(\"near\"),t=this._path,e=arguments[0];else{if(2!==arguments.length)throw new TypeError(\"Invalid argument\");t=arguments[0],e=arguments[1]}if(!e.center)throw new Error(\"center is required\");const n=this._conditions[t]||(this._conditions[t]={}),o=e.spherical?\"$nearSphere\":\"$near\";if(Array.isArray(e.center)){n[o]=e.center;const t=\"maxDistance\"in e?e.maxDistance:null;null!=t&&(n.$maxDistance=t),null!=e.minDistance&&(n.$minDistance=e.minDistance)}else{if(\"Point\"!=e.center.type||!Array.isArray(e.center.coordinates))throw new Error(r.format(\"Invalid GeoJSON specified for %s\",o));n[o]={$geometry:e.center},\"maxDistance\"in e&&(n[o].$maxDistance=e.maxDistance),\"minDistance\"in e&&(n[o].$minDistance=e.minDistance)}return this},c.prototype.intersects=function(){if(this._ensurePath(\"intersects\"),this._geoComparison=\"$geoIntersects\",0===arguments.length)return this;const t=arguments[0];if(null!=t&&t.type&&t.coordinates)return this.geometry(t);throw new TypeError(\"Invalid argument\")},c.prototype.geometry=function(){if(\"$within\"!=this._geoComparison&&\"$geoWithin\"!=this._geoComparison&&\"$near\"!=this._geoComparison&&\"$geoIntersects\"!=this._geoComparison)throw new Error(\"geometry() must come after `within()`, `intersects()`, or `near()\");let t,e;if(1!==arguments.length)throw new TypeError(\"Invalid argument\");if(this._ensurePath(\"geometry\"),e=this._path,t=arguments[0],!t.type||!Array.isArray(t.coordinates))throw new TypeError(\"Invalid argument\");const n=this._conditions[e]||(this._conditions[e]={});return n[this._geoComparison]={$geometry:t},this},c.prototype.select=function(){let t=arguments[0];if(!t)return this;if(1!==arguments.length)throw new Error(\"Invalid select: select only takes 1 argument\");this._validate(\"select\");const e=this._fields||(this._fields={}),n=typeof t;let o,r;if((\"string\"==n||i.isArgumentsObject(t))&&\"number\"==typeof t.length||Array.isArray(t)){for(\"string\"==n&&(t=t.split(/\\s+/)),o=0,r=t.length;o<r;++o){let n=t[o];if(!n)continue;const r=\"-\"==n[0]?0:1;0===r&&(n=n.substring(1)),e[n]=r}return this}if(i.isObject(t)){const n=i.keys(t);for(o=0;o<n.length;++o)e[n[o]]=t[n[o]];return this}throw new TypeError(\"Invalid select() argument. Must be string or object.\")},c.prototype.slice=function(){if(0===arguments.length)return this;let t,e;if(this._validate(\"slice\"),1===arguments.length){const n=arguments[0];if(\"object\"==typeof n&&!Array.isArray(n)){const t=Object.keys(n),e=t.length;for(let o=0;o<e;++o)this.slice(t[o],n[t[o]]);return this}this._ensurePath(\"slice\"),t=this._path,e=arguments[0]}else 2===arguments.length?\"number\"==typeof arguments[0]?(this._ensurePath(\"slice\"),t=this._path,e=[arguments[0],arguments[1]]):(t=arguments[0],e=arguments[1]):3===arguments.length&&(t=arguments[0],e=[arguments[1],arguments[2]]);const n=this._fields||(this._fields={});return n[t]={$slice:e},this},c.prototype.sort=function(t){if(!t)return this;let e,n,o;this._validate(\"sort\");const r=typeof t;if(Array.isArray(t)){for(n=t.length,e=0;e<t.length;++e){if(!Array.isArray(t[e]))throw new Error(\"Invalid sort() argument, must be array of arrays\");p(this.options,t[e][0],t[e][1])}return this}if(1===arguments.length&&\"string\"==r){for(n=(t=t.split(/\\s+/)).length,e=0;e<n;++e){if(o=t[e],!o)continue;const n=\"-\"==o[0]?-1:1;-1===n&&(o=o.substring(1)),u(this.options,o,n)}return this}if(i.isObject(t)){const n=i.keys(t);for(e=0;e<n.length;++e)o=n[e],u(this.options,o,t[o]);return this}if(\"undefined\"!=typeof Map&&t instanceof Map)return h(this.options,t),this;throw new TypeError(\"Invalid sort() argument. Must be a string, object, or array.\")};\n/*!\n * @ignore\n */\nconst l={1:1,\"-1\":-1,asc:1,ascending:1,desc:-1,descending:-1};function u(t,e,n){if(Array.isArray(t.sort))throw new TypeError(\"Can't mix sort syntaxes. Use either array or object:\\n- `.sort([['field', 1], ['test', -1]])`\\n- `.sort({ field: 1, test: -1 })`\");let o;if(n&&n.$meta)return o=t.sort||(t.sort={}),void(o[e]={$meta:n.$meta});o=t.sort||(t.sort={});let r=String(n||1).toLowerCase();if(r=l[r],!r)throw new TypeError(\"Invalid sort value: { \"+e+\": \"+n+\" }\");o[e]=r}function p(t,e,n){if(t.sort=t.sort||[],!Array.isArray(t.sort))throw new TypeError(\"Can't mix sort syntaxes. Use either array or object:\\n- `.sort([['field', 1], ['test', -1]])`\\n- `.sort({ field: 1, test: -1 })`\");let o=String(n||1).toLowerCase();if(o=l[o],!o)throw new TypeError(\"Invalid sort value: [ \"+e+\", \"+n+\" ]\");t.sort.push([e,o])}function h(t,e){if(t.sort=t.sort||new Map,!(t.sort instanceof Map))throw new TypeError(\"Can't mix sort syntaxes. Use either array or object or map consistently\");e.forEach((function(e,n){let o=String(e||1).toLowerCase();if(o=l[o],!o)throw new TypeError(\"Invalid sort value: < \"+n+\": \"+e+\" >\");t.sort.set(n,o)}))}\n/*!\n * limit, skip, batchSize, comment\n *\n * Sets these associated options.\n *\n *     query.comment('feed query');\n */\n/*!\n * Internal helper for updateMany, updateOne\n */\nfunction f(t,e,n,o,r){return t.op=e,c.canMerge(n)&&t.merge(n),o&&t._mergeUpdate(o),i.isObject(r)&&t.setOptions(r),t}async function d(t,e){const n=t._optionsForExec(),o=t._conditions,r=t._updateForExec();return s(\"update\",t._collection.collectionName,o,r,n),t._collection[e](o,r,n)}[\"limit\",\"skip\",\"batchSize\",\"comment\"].forEach((function(t){c.prototype[t]=function(e){return this._validate(t),this.options[t]=e,this}})),c.prototype.maxTime=c.prototype.maxTimeMS=function(t){return this._validate(\"maxTime\"),this.options.maxTimeMS=t,this},c.prototype.hint=function(){if(0===arguments.length)return this;this._validate(\"hint\");const t=arguments[0];if(i.isObject(t)){const e=this.options.hint||(this.options.hint={});for(const n in t)e[n]=t[n];return this}if(\"string\"==typeof t)return this.options.hint=t,this;throw new TypeError(\"Invalid hint. \"+t)},c.prototype.j=function(t){return this.options.j=t,this},c.prototype.slaveOk=function(t){return this.options.slaveOk=!arguments.length||!!t,this},c.prototype.read=c.prototype.setReadPreference=function(t){return arguments.length>1&&!c.prototype.read.deprecationWarningIssued&&(console.error(\"Deprecation warning: 'tags' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead.\"),c.prototype.read.deprecationWarningIssued=!0),this.options.readPreference=i.readPref(t),this},c.prototype.readConcern=c.prototype.r=function(t){return this.options.readConcern=i.readConcern(t),this},c.prototype.tailable=function(){return this._validate(\"tailable\"),this.options.tailable=!arguments.length||!!arguments[0],this},c.prototype.writeConcern=c.prototype.w=function(t){return\"object\"==typeof t?(void 0!==t.j&&(this.options.j=t.j),void 0!==t.w&&(this.options.w=t.w),void 0!==t.wtimeout&&(this.options.wtimeout=t.wtimeout)):this.options.w=\"m\"===t?\"majority\":t,this},c.prototype.wtimeout=c.prototype.wTimeout=function(t){return this.options.wtimeout=t,this},c.prototype.merge=function(t){if(!t)return this;if(!c.canMerge(t))throw new TypeError(\"Invalid argument. Expected instanceof mquery or plain object\");return t instanceof c?(t._conditions&&i.merge(this._conditions,t._conditions),t._fields&&(this._fields||(this._fields={}),i.merge(this._fields,t._fields)),t.options&&(this.options||(this.options={}),i.merge(this.options,t.options)),t._updateDoc&&(this._updateDoc||(this._updateDoc={}),i.mergeClone(this._updateDoc,t._updateDoc)),t._distinctDoc&&(this._distinctDoc=t._distinctDoc),this):(i.merge(this._conditions,t),this)},c.prototype.find=function(t){return this.op=\"find\",c.canMerge(t)&&this.merge(t),this},c.prototype._find=async function(){const t=this._conditions,e=this._optionsForExec();return this.$useProjection?e.projection=this._fieldsForExec():e.fields=this._fieldsForExec(),s(\"_find\",this._collection.collectionName,t,e),this._collection.find(t,e)},c.prototype.cursor=function(t){if(this.op){if(\"find\"!==this.op)throw new TypeError(\".cursor only support .find method\")}else this.find(t);const e=this._conditions,n=this._optionsForExec();return this.$useProjection?n.projection=this._fieldsForExec():n.fields=this._fieldsForExec(),s(\"findCursor\",this._collection.collectionName,e,n),this._collection.findCursor(e,n)},c.prototype.findOne=function(t){return this.op=\"findOne\",c.canMerge(t)&&this.merge(t),this},c.prototype._findOne=async function(){const t=this._conditions,e=this._optionsForExec();return this.$useProjection?e.projection=this._fieldsForExec():e.fields=this._fieldsForExec(),s(\"findOne\",this._collection.collectionName,t,e),this._collection.findOne(t,e)},c.prototype.count=function(t){return this.op=\"count\",this._validate(),c.canMerge(t)&&this.merge(t),this},c.prototype._count=async function(){const t=this._conditions,e=this._optionsForExec();return s(\"count\",this._collection.collectionName,t,e),this._collection.count(t,e)},c.prototype.distinct=function(t,e){return this.op=\"distinct\",this._validate(),e||\"string\"!=typeof t||(e=t,t=void 0),\"string\"==typeof e&&(this._distinctDoc=e),c.canMerge(t)&&this.merge(t),this},c.prototype._distinct=async function(){if(!this._distinctDoc)throw new Error(\"No value for `distinct` has been declared\");const t=this._conditions,e=this._optionsForExec();return s(\"distinct\",this._collection.collectionName,t,e),this._collection.distinct(this._distinctDoc,t,e)},c.prototype.updateMany=function(t,e,n){return 1===arguments.length&&(e=t,t=n=void 0),f(this,\"updateMany\",t,e,n)},c.prototype._updateMany=async function(){return d(this,\"updateMany\")},c.prototype.updateOne=function(t,e,n){return 1===arguments.length&&(e=t,t=n=void 0),f(this,\"updateOne\",t,e,n)},c.prototype._updateOne=async function(){return d(this,\"updateOne\")},c.prototype.replaceOne=function(t,e,n){return 1===arguments.length&&(e=t,t=n=void 0),this.setOptions({overwrite:!0}),f(this,\"replaceOne\",t,e,n)},c.prototype._replaceOne=async function(){return d(this,\"replaceOne\")},c.prototype.deleteOne=function(t){return this.op=\"deleteOne\",c.canMerge(t)&&this.merge(t),this},c.prototype._deleteOne=async function(){const t=this._optionsForExec();delete t.justOne;const e=this._conditions;return s(\"deleteOne\",this._collection.collectionName,e,t),this._collection.deleteOne(e,t)},c.prototype.deleteMany=function(t){return this.op=\"deleteMany\",c.canMerge(t)&&this.merge(t),this},c.prototype._deleteMany=async function(){const t=this._optionsForExec();delete t.justOne;const e=this._conditions;return s(\"deleteOne\",this._collection.collectionName,e,t),this._collection.deleteMany(e,t)},c.prototype.findOneAndUpdate=function(t,e,n){return this.op=\"findOneAndUpdate\",this._validate(),1===arguments.length&&(e=t,t=n=void 0),c.canMerge(t)&&this.merge(t),e&&this._mergeUpdate(e),n&&this.setOptions(n),this},c.prototype._findOneAndUpdate=async function(){const t=this._conditions,e=this._updateForExec(),n=this._optionsForExec();return this._collection.findOneAndUpdate(t,e,n)},c.prototype.findOneAndRemove=c.prototype.findOneAndDelete=function(t,e){return this.op=\"findOneAndRemove\",this._validate(),c.canMerge(t)&&this.merge(t),e&&this.setOptions(e),this},c.prototype._findOneAndRemove=async function(){const t=this._optionsForExec(),e=this._conditions;return this._collection.findOneAndDelete(e,t)},c.prototype.setTraceFunction=function(t){return this._traceFunction=t,this},c.prototype.exec=async function(t){\"string\"==typeof t&&(this.op=t),o.ok(this.op,\"Missing query type: (find, etc)\");const e=\"_\"+this.op;if(\"function\"!=typeof this[e])throw new TypeError(`this[${e}] is not a function`);return this[e]()},c.prototype.then=async function(t,e){return this.exec().then(t,e)},c.prototype.cursor=function(){if(\"find\"!=this.op)throw new Error(\"cursor() is only available for find\");const t=this._conditions,e=this._optionsForExec();return this.$useProjection?e.projection=this._fieldsForExec():e.fields=this._fieldsForExec(),s(\"cursor\",this._collection.collectionName,t,e),this._collection.findCursor(t,e)},c.prototype.selected=function(){return!!(this._fields&&Object.keys(this._fields).length>0)},c.prototype.selectedInclusively=function(){if(!this._fields)return!1;const t=Object.keys(this._fields);if(0===t.length)return!1;for(let e=0;e<t.length;++e){const n=t[e];if(0===this._fields[n])return!1;if(this._fields[n]&&\"object\"==typeof this._fields[n]&&this._fields[n].$meta)return!1}return!0},c.prototype.selectedExclusively=function(){if(!this._fields)return!1;const t=Object.keys(this._fields);if(0===t.length)return!1;for(let e=0;e<t.length;++e){const n=t[e];if(0===this._fields[n])return!0}return!1},c.prototype._mergeUpdate=function(t){this._updateDoc||(this._updateDoc={}),t instanceof c?t._updateDoc&&i.mergeClone(this._updateDoc,t._updateDoc):i.mergeClone(this._updateDoc,t)},c.prototype._optionsForExec=function(){return i.clone(this.options)},c.prototype._fieldsForExec=function(){return i.clone(this._fields)},c.prototype._updateForExec=function(){const t=i.clone(this._updateDoc),e=i.keys(t),n={};for(const o of e)this.options.overwrite?n[o]=t[o]:\"$\"!==o[0]?(n.$set||(t.$set?n.$set=t.$set:n.$set={}),n.$set[o]=t[o],~e.indexOf(\"$set\")||e.push(\"$set\")):\"$set\"===o&&n.$set||(n[o]=t[o]);return this._compiledUpdate=n,n},c.prototype._ensurePath=function(t){if(!this._path){throw new Error(t+\"() must be used after where() when called with these arguments\")}},\n/*!\n * Permissions\n */\nc.permissions=n(371),c._isPermitted=function(t,e){const n=c.permissions[e];return!n||!0!==n[t]},c.prototype._validate=function(t){let e,n;if(void 0===t){if(n=c.permissions[this.op],\"function\"!=typeof n)return!0;e=n(this)}else c._isPermitted(t,this.op)||(e=t);if(e)throw new Error(e+\" cannot be used with \"+this.op)},c.canMerge=function(t){return t instanceof c||i.isObject(t)},c.setGlobalTraceFunction=function(t){c.traceFunction=t},\n/*!\n * Exports.\n */\nc.utils=i,c.env=n(189),c.Collection=n(372),c.BaseCollection=n(75),t.exports=c},function(t,e,n){t.exports=function(t){function e(t){let n,r,i,s=null;function c(...t){if(!c.enabled)return;const o=c,r=Number(new Date),i=r-(n||r);o.diff=i,o.prev=n,o.curr=r,n=r,t[0]=e.coerce(t[0]),\"string\"!=typeof t[0]&&t.unshift(\"%O\");let s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(n,r)=>{if(\"%%\"===n)return\"%\";s++;const i=e.formatters[r];if(\"function\"==typeof i){const e=t[s];n=i.call(o,e),t.splice(s,1),s--}return n}),e.formatArgs.call(o,t);(o.log||e.log).apply(o,t)}return c.namespace=t,c.useColors=e.useColors(),c.color=e.selectColor(t),c.extend=o,c.destroy=e.destroy,Object.defineProperty(c,\"enabled\",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(r!==e.namespaces&&(r=e.namespaces,i=e.enabled(t)),i),set:t=>{s=t}}),\"function\"==typeof e.init&&e.init(c),c}function o(t,n){const o=e(this.namespace+(void 0===n?\":\":n)+t);return o.log=this.log,o}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\\.\\*\\?$/,\"*\")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(r),...e.skips.map(r).map(t=>\"-\"+t)].join(\",\");return e.enable(\"\"),t},e.enable=function(t){let n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const o=(\"string\"==typeof t?t:\"\").split(/[\\s,]+/),r=o.length;for(n=0;n<r;n++)o[n]&&(\"-\"===(t=o[n].replace(/\\*/g,\".*?\"))[0]?e.skips.push(new RegExp(\"^\"+t.slice(1)+\"$\")):e.names.push(new RegExp(\"^\"+t+\"$\")))},e.enabled=function(t){if(\"*\"===t[t.length-1])return!0;let n,o;for(n=0,o=e.skips.length;n<o;n++)if(e.skips[n].test(t))return!1;for(n=0,o=e.names.length;n<o;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(368),e.destroy=function(){console.warn(\"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.\")},Object.keys(t).forEach(n=>{e[n]=t[n]}),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},function(t,e,n){\"use strict\";e.isNode=\"undefined\"!=typeof process&&\"object\"==typeof t&&\"object\"==typeof global&&\"function\"==typeof Buffer&&process.argv,e.isMongo=!e.isNode&&\"function\"==typeof printjson&&\"function\"==typeof ObjectId&&\"function\"==typeof rs&&\"function\"==typeof sh,e.isBrowser=!e.isNode&&!e.isMongo&&\"undefined\"!=typeof window,e.type=e.isNode?\"node\":e.isMongo?\"mongo\":e.isBrowser?\"browser\":\"unknown\"},function(t,e,n){\"use strict\";t.exports=function(t,e){if(\"string\"===typeof t&&(t=t.split(/\\s+/)),!Array.isArray(t)&&\"[object Arguments]\"!==Object.prototype.toString.call(t))return t;const n=t.length,o={};for(let r=0;r<n;++r){let n=t[r];if(!n)continue;const i=\"-\"==n[0]?0:1;e||0!==i||(n=n.substring(1)),o[n]=i}return o}},function(t,e,n){\"use strict\";const o=n(111),{trustedSymbol:r}=n(52);t.exports=function t(e){if(null==e||\"object\"!=typeof e)return e;if(Array.isArray(e)){for(const n of e)t(n);return e}const n=Object.keys(e);for(const i of n){const n=e[i];if(null==n||!n[r])if(\"$and\"!==i&&\"$or\"!==i){if(o(n)){const t=Object.keys(n);if(1===t.length&&\"$eq\"===t[0])continue;e[i]={$eq:e[i]}}}else t(n)}return e}},function(t,e,n){\"use strict\";const o=n(56).modifiedPaths,r=n(10);t.exports=function(t,e,n,i){const s=null!=(i=i||{}).setDefaultsOnInsert?i.setDefaultsOnInsert:e.base.options.setDefaultsOnInsert;if(!i.upsert||!1===s)return n;const c=Object.keys(n||{}),a={},l={},u=c.length,p={};let h=!1;for(let t=0;t<u;++t)c[t].startsWith(\"$\")&&(o(n[c[t]],\"\",p),h=!0);h||o(n,\"\",p);const f=Object.keys(t),d=f.length;for(let e=0;e<d;++e){const n=f[e],o=t[n];if(o&&\"object\"==typeof o){const t=Object.keys(o),e=t.length;let n=!1;for(let o=0;o<e;++o)if(t[o].startsWith(\"$\")){n=!0;break}if(n)continue}a[n]=!0,p[n]=!0}return i&&i.overwrite&&!h||e.eachPath((function(t,e){if(\"_id\"===e.path&&e.options.auto)return;const o=e.getDefault(null,!0);(function(t,e){if(t[e])return!0;const n=e.split(\".\");let o=n[0];for(let e=1;e<n.length;++e){if(t[o])return!0;o+=\".\"+n[e]}const r=Object.keys(t);if(r.length){const t=e+\".\";for(const n of r)if(n.slice(0,e.length+1)===t)return!0}return!1})(p,t)||void 0!==o&&(e.splitPath().includes(\"$*\")||((n=n||{}).$setOnInsert=n.$setOnInsert||{},null==r(n,t)&&(n.$setOnInsert[t]=o),l[t]=o))})),n}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(194),r=n(380),i=n(17),s=n(89),c=n(155),a=n(8).EventEmitter,l=n(70),u=n(9),p=n(154),h=n(110),f=n(381),d=n(68),y=n(41),m=n(152),g=n(153),_=n(103),b=n(382),O=n(93),$=n(94),w=n(383),v=n(384),E=n(385),A=n(387),S=n(388),j=n(183),x=n(389),P=n(392),k=n(12),M=n(393),C=n(394),D=n(100),N=n(104),T=n(395),I=n(105),R=n(10),F=n(14),B=n(24),V=n(396),U=n(20),L=n(35).internalToObjectOptions,q=n(399),z=n(400),{getRelatedDBIndexes:K,getRelatedSchemaIndexes:W}=n(401),Q=n(197),H=n(162),G=n(108),Y=n(76),J=n(185),X=n(402),Z=n(109),tt=n(195),et=n(403),nt=n(404),ot=n(107),rt=n(63),it=n(2),st=n(3),ct=n(1).arrayAtomicsSymbol,at=Symbol(\"mongoose#Model#collection\"),lt=Symbol(\"mongoose#Model#db\"),ut=n(1).modelSymbol,pt=Symbol(\"mongoose#Model#subclassed\"),ht=Object.assign({},L,{bson:!0});function ft(t,e,n){if(e instanceof d)throw new TypeError(\"2nd argument to `Model` must be a POJO or string, **not** a schema. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.\");i.call(this,t,e,n)}\n/*!\n * ignore\n */\nfunction dt(t,e){if(null!=t.$where)for(const n of Object.keys(t.$where))e[n]=t.$where[n]}\n/*!\n * ignore\n */\n/*!\n * ignore\n */\nfunction yt(t,e){const n=t.$__schema.options.versionKey;if(!n)return null;const o=t.$__getValue(n)||0;return new m(t,o,e)}function mt(t,e,n,o,r,i){if(i||(i=\"$set\"),n[i]||(n[i]={}),n[i][o.path]=r,!1!==t.$__schema.options.versionKey&&!function(t,e){const n=t.$__schema.options.skipVersioning;return!!n&&n[e=e.replace(/\\.\\d+\\./,\".\")]}(t,o.path)&&3!=(3&t.$__.version)&&!t.$__schema.options.optimisticConcurrency){switch(i){case\"$set\":case\"$unset\":case\"$pop\":case\"$pull\":case\"$pullAll\":case\"$push\":case\"$addToSet\":case\"$inc\":break;default:return}\"$push\"===i||\"$addToSet\"===i||\"$pullAll\"===i||\"$pull\"===i?/\\.\\d+\\.|\\.\\d+$/.test(o.path)?bt.call(t):t.$__.version=2:/^\\$p/.test(i)||Array.isArray(r)?bt.call(t):/\\.\\d+\\.|\\.\\d+$/.test(o.path)&&(t.$__.version=1)}}function gt(t,e,n,o,r){if(n.$set&&n.$set[o.path])return;if(\"function\"==typeof r.$__getAtomics)return void r.$__getAtomics().forEach((function(e){const r=e[0],i=e[1];mt(t,0,n,o,i,r)}));const i=r[ct],s=Object.keys(i);let c,a,l=s.length;if(0===l)return st.isMongooseObject(r)?r=r.toObject({depopulate:1,_isNested:!0}):r.valueOf&&(r=r.valueOf()),mt(t,0,n,o,r);function u(t){return st.isMongooseObject(t)?t.toObject({depopulate:1,_isNested:!0}):t}for(;l--;)a=s[l],c=i[a],st.isMongooseObject(c)?c=c.toObject({depopulate:!0,transform:!1,_isNested:!0}):Array.isArray(c)?c=c.map(u):c.valueOf&&(c=c.valueOf()),\"$addToSet\"===a&&(c={$each:c}),mt(t,0,n,o,c,a)}function _t(t,e,n){const o=t.$populated(e,!0);if(!o&&t.$__.selected){const n=e.split(\".\")[0];if(t.$__.selected[n+\".$\"])return n}if(!o||!st.isMongooseArray(n))return;if(o.options.match||o.options.options&&st.object.hasOwnProperty(o.options.options,\"limit\")||o.options.options&&o.options.options.skip||o.options.select&&(0===o.options.select._id||/\\s?-_id\\s?/.test(o.options.select))){const t=n[ct];if(0===Object.keys(t).length||t.$set||t.$pop)return e}}\n/*!\n * ignore\n */\nfunction bt(){return this.$__.version=3,this}function Ot(t,e){if(null==t||t===global)throw new u(\"`Model.\"+e+\"()` cannot run without a model as `this`. Make sure you are calling `MyModel.\"+e+\"()` where `MyModel` is a Mongoose model.\");if(null==t[ut])throw new u(\"`Model.\"+e+\"()` cannot run without a model as `this`. Make sure you are not calling `new Model.\"+e+\"()`\")}\n/*!\n * Give the constructor the ability to emit events.\n */Object.setPrototypeOf(ft.prototype,i.prototype),ft.prototype.$isMongooseModelPrototype=!0,ft.prototype.db,ft.prototype.collection,ft.prototype.$__collection,ft.prototype.modelName,ft.prototype.$where,ft.prototype.baseModelName,ft.events,ft._middleware,ft.prototype.$__handleSave=function(t,e){const n={};j(this.$__schema,t),void 0!==t.writeConcern?(n.writeConcern={},\"w\"in t.writeConcern&&(n.writeConcern.w=t.writeConcern.w),\"j\"in t.writeConcern&&(n.writeConcern.j=t.writeConcern.j),\"wtimeout\"in t.writeConcern&&(n.writeConcern.wtimeout=t.writeConcern.wtimeout)):(\"w\"in t&&(n.w=t.w),\"j\"in t&&(n.j=t.j),\"wtimeout\"in t&&(n.wtimeout=t.wtimeout)),\"checkKeys\"in t&&(n.checkKeys=t.checkKeys);const o=this.$session();if(n.hasOwnProperty(\"session\")||null==o||(n.session=o),this.$isNew){const t=this.toObject(ht);return void 0===(t||{})._id?void U((function(){e(new u(\"document must have an _id before saving\"))})):(this.$__version(!0,t),this[at].insertOne(t,n).then(t=>e(null,t),t=>{St(this,!0),e(t,null)}),this.$__reset(),St(this,!1),void(this.$__.inserting=!0))}this.$__.inserting=!1;const r=this.$__delta();if(r){{if(r instanceof u)return void e(r);const t=this.$__where(r[0]);if(t instanceof u)return void e(t);dt(this,t),this[at].updateOne(t,r[1],n).then(n=>{n.$where=t,e(null,n)},t=>{this.$__undoReset(),e(t)})}this.$__.modifiedPaths=this.modifiedPaths(),this.$__reset(),St(this,!1)}else{const o=Object.assign({},t,n),r=this.$__where();if(this.$__schema.options.optimisticConcurrency){const t=this.$__schema.options.versionKey,e=this.$__getValue(t);null!=e&&(r[t]=e)}this.constructor.collection.findOne(r,o).then(t=>{e(null,{$where:r,matchedCount:t?1:0})}).catch(e)}},\n/*!\n * ignore\n */\nft.prototype.$__save=function(t,e){this.$__handleSave(t,(n,o)=>{if(n){return this.$__schema.s.hooks.execPost(\"save:error\",this,[this],{error:n},t=>{e(t,this)})}let r=0;if(0!==(null!=t?null!=t.writeConcern?t.writeConcern.w:t.w:0)){null!=o&&(r=Array.isArray(o)?o.length:null!=o.matchedCount?o.matchedCount:o);if(this.$__.version&&!this.$__.inserting){const t=2==(2&this.$__.version);this.$__.version=void 0;const n=this.$__schema.options.versionKey,o=this.$__getValue(n)||0;if(r<=0){this.$__undoReset();const t=this.$__.$versionError||new m(this,o,this.$__.modifiedPaths);return e(t)}t&&this.$__setValue(n,o+1)}if(null!=o&&r<=0){this.$__undoReset(),n=new s(o.$where,this.constructor.modelName,r,o);return this.$__schema.s.hooks.execPost(\"save:error\",this,[this],{error:n},t=>{e(t,this)})}}this.$__.saving=void 0,this.$__.savedState={},this.$emit(\"save\",this,r),this.constructor.emit(\"save\",this,r),e(null,this)})},ft.prototype.save=async function(t){if(\"function\"==typeof t||\"function\"==typeof arguments[1])throw new u(\"Model.prototype.save() no longer accepts a callback\");let e;if(this.$op=\"save\",this.$__.saving?e=new g(this):this.$__.saving=new g(this),(t=new f(t)).hasOwnProperty(\"session\")&&this.$session(t.session),null!=this.$__.timestamps&&(t.timestamps=this.$__.timestamps),this.$__.$versionError=yt(this,this.modifiedPaths()),e)throw this.$__handleReject(e),e;return this.$__.saveOptions=t,await new Promise((e,n)=>{this.$__save(t,t=>{if(this.$__.saving=null,this.$__.saveOptions=null,this.$__.$versionError=null,this.$op=null,null!=t)return this.$__handleReject(t),n(t);e()})}),this},ft.prototype.$save=ft.prototype.save,ft.prototype.$__delta=function(){const t=this.$__dirty();if(this.$__schema.options.optimisticConcurrency&&(this.$__.version=t.length?3:1),!t.length&&3!==this.$__.version)return;const e={},n={},o=t.length,r=[];let i=0;for(e._id=this._doc._id,null!=(e&&e._id&&e._id.$__||null)&&(e._id=e._id.toObject({transform:!1,depopulate:!0}));i<o;++i){const o=t[i];let s=o.value;const c=_t(this,o.path,s);if(c){r.push(c);continue}if(!this.$populated(o.path,!0)&&this.$__.selected){const t=o.path.split(\".\"),n=t[0];if(this.$__.selected[n]&&this.$__.selected[n].$elemMatch){if(!(t.length>1&&0==t[1]&&void 0===e[n])){r.push(o.path);continue}e[n]=this.$__.selected[n],t[1]=\"$\",o.path=t.join(\".\")}}if(this.$isDefault(o.path)&&this.$__.selected){if(-1===o.path.indexOf(\".\")&&Q(this.$__.selected,o.path))continue;if(Z(o.path).find(t=>Q(this.$__.isSelected,t)))continue}if(!r.length)if(void 0===s)mt(this,0,n,o,1,\"$unset\");else if(null===s)mt(this,0,n,o,null);else if(st.isMongooseArray(s)&&s.$path()&&s[ct])gt(this,0,n,o,s);else if(s[l.pathSymbol]&&Buffer.isBuffer(s))s=s.toObject(),mt(this,0,n,o,s);else if(this.$__.primitiveAtomics&&null!=this.$__.primitiveAtomics[o.path]){const t=this.$__.primitiveAtomics[o.path],e=T(t);mt(this,0,n,o,t[e],e)}else s=k(s,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,omitUndefined:!0,_isNested:!0}),mt(this,0,n,o,s)}return r.length?new c(r):(this.$__.version&&this.$__version(e,n),0===Object.keys(n).length?[e,null]:[e,n])},ft.prototype.$__version=function(t,e){const n=this.$__schema.options.versionKey;if(!0!==t){if(!1!==n&&this.$__isSelected(n)){if(1==(1&this.$__.version)){const e=this.$__getValue(n);null!=e&&(t[n]=e)}2==(2&this.$__.version)&&(null!=R(e.$set,n,null)?++e.$set[n]:(e.$inc=e.$inc||{},e.$inc[n]=1))}}else n&&(ot(e,n,0),this.$__setValue(n,0))},ft.prototype.increment=bt,ft.prototype.$__where=function(t){return t||(t={}),t._id||(t._id=this._doc._id),void 0===this._doc._id?new u(\"No _id found on document!\"):t},ft.prototype.deleteOne=async function(t){if(\"function\"==typeof t||\"function\"==typeof arguments[1])throw new u(\"Model.prototype.deleteOne() no longer accepts a callback\");t||(t={}),t.hasOwnProperty(\"session\")&&this.$session(t.session);const e=await new Promise((e,n)=>{this.$__deleteOne(t,(t,o)=>{if(null!=t)return n(t);e(o)})});return e},\n/*!\n * ignore\n */\nft.prototype.$__deleteOne=function(t,e){if(this.$__.isDeleted)return U(()=>e(null,this));const n=this.$__where();if(n instanceof u)return e(n);dt(this,n);const o=this.$session();t.hasOwnProperty(\"session\")||(t.session=o),this[at].deleteOne(n,t,t=>{if(!t)return this.$__.isDeleted=!0,this.$emit(\"deleteOne\",this),this.constructor.emit(\"deleteOne\",this),e(null,this);this.$__.isDeleted=!1,e(t)})},ft.prototype.model=function(t){return this[lt].model(t)},ft.prototype.$model=function(t){return this[lt].model(t)},ft.exists=function(t,e){if(Ot(this,\"exists\"),\"function\"==typeof arguments[2])throw new u(\"Model.exists() no longer accepts a callback\");const n=this.findOne(t).select({_id:1}).lean().setOptions(e);return n},ft.discriminator=function(t,e,n){let o;if(\"function\"==typeof t&&(o=t,t=st.getFunctionName(o),!(o.prototype instanceof ft)))throw new u(\"The provided class \"+t+\" must extend Model\");n=n||{};const r=st.isPOJO(n)?n.value:n,i=\"boolean\"!=typeof n.clone||n.clone,s=\"boolean\"!=typeof n.mergePlugins||n.mergePlugins;if(Ot(this,\"discriminator\"),st.isObject(e)&&!e.instanceOfSchema&&(e=new d(e)),e instanceof d&&i&&(e=e.clone()),e=N(this,t,e,r,s,n.mergeHooks),this.db.models[t]&&!e.options.overwriteModels)throw new p(t);e.$isRootDiscriminator=!0,e.$globalPluginsApplied=!0,o=this.db.model(o||t,e,this.$__collection.name),this.discriminators[t]=o;const c=this.discriminators[t];if(Object.setPrototypeOf(c.prototype,this.prototype),Object.defineProperty(c,\"baseModelName\",{value:this.modelName,configurable:!0,writable:!1}),w(c,e),S(c,e),null!=this[pt])for(const n of this[pt])n.discriminators=n.discriminators||{},n.discriminators[t]=o.__subclass(o.db,e,n.collection.name);return c};for(const t in a.prototype)ft[t]=a.prototype[t];function $t(t,e,n,o){const r=[];for(const[i,s]of e){let e=!1;const c=H(t,k(s));for(const t of n)if(!q(t)&&z(i,c,t)&&!o.includes(t.name)){e=!0;break}e||r.push(i)}return r}function wt(t,e,n){const o=[];for(const r of n){let n=!1;if(!q(r)){for(const[o,i]of e){const e=H(t,k(i));if(E(o,e,t.options),z(o,e,r)){n=!0;break}}n||o.push(r.name)}}return o}async function vt(t,e){return 0===t.length?[]:(await Promise.all(t.map(t=>e.dropIndex(t))),t)}\n/*!\n * ignore\n */\nfunction Et(t,e,n){const o=t.schema.indexes();let r;e=e||{};const i=function(e){e&&!t.$caught&&t.emit(\"error\",e),t.emit(\"index\",e||r),n&&n(e||r)};for(const e of o)q(e)&&st.warn('mongoose: Cannot specify a custom index on `_id` for model name \"'+t.modelName+'\", MongoDB does not allow overwriting the default `_id` index. See https://bit.ly/mongodb-id-index');if(!o.length)return void U((function(){i()}));const s=function(e,n,o,r){t.emit(\"index-single-done\",e,n,o,r)},c=t.schema._baseSchema,a=c?c.indexes():[];function l(){if(e._automatic&&(!1===t.schema.options.autoIndex||null==t.schema.options.autoIndex&&!1===t.db.config.autoIndex))return i();const n=o.shift();if(!n)return i();if(e._automatic&&!1===n[1]._autoIndex)return l();if(a.find(t=>st.deepEqual(t,n)))return l();const c=k(n[0]),u=k(n[1]);if(delete u._autoIndex,H(t.schema,u),j(t.schema,u),E(c,u,t.schema.options),function(e,n){t.emit(\"index-single-start\",e,n)}(c,e),\"background\"in e&&(u.background=e.background),\"toCreate\"in e&&0===e.toCreate.length)return i();t.collection.createIndex(c,u).then(t=>{s(null,c,u,t),l()},e=>{r||(r=e),t.$caught||t.emit(\"error\",e),s(e,c,u),l()})}U((function(){e._automatic&&!t.collection.collection?t.collection.addQueue(l,[]):l()}))}function At(t,e,n){if(!n||!e||!e.upsert)return;J(t)[n]||(e.overwrite?t[n]=0:(t.$setOnInsert||(t.$setOnInsert={}),t.$setOnInsert[n]=0))}\n/*!\n * ignore\n */\nfunction St(t,e){t.$isNew=e,t.$emit(\"isNew\",e),t.constructor.emit(\"isNew\",e);const n=t.$getAllSubdocs();for(const t of n)t.$isNew=e,t.$emit(\"isNew\",e)}function jt(t){return new Promise((e,n)=>{t.schema.s.hooks.execPre(\"save\",t,t=>{t?n(t):e()})})}function xt(t,e,n,o,r){const s=new t.Query({},{},t,t.collection);n=n instanceof i?n.toObject():k(n);return At(o,r=\"function\"==typeof r?r:k(r),t&&t.schema&&t.schema.options&&t.schema.options.versionKey||null),s[e](n,o,r)}function Pt(t,e,n,o,r){let i=n.length;if(0===n.length)return r(null,e);for(const o of n)Ct(t,e,o,s);function s(t){if(t)return r(t,null);--i||r(null,e)}}\n/*!\n * Populates `docs`\n */ft.init=function(){if(Ot(this,\"init\"),\"function\"==typeof arguments[0])throw new u(\"Model.init() no longer accepts a callback\");if(this.schema.emit(\"init\",this),null!=this.$init)return this.$init;const t=this.db,e=async()=>{if(st.getOption(\"autoIndex\",this.schema.options,t.config,t.base.options))return await this.ensureIndexes({_automatic:!0})},n=async()=>{t.readyState!==rt.connecting&&t.readyState!==rt.disconnected||!t._shouldBufferCommands()||await new Promise(e=>{t._queue.push({fn:e})});if(st.getOption(\"autoCreate\",this.schema.options,t.config,t.base.options))return await this.createCollection()};this.$init=n().then(()=>e());const o=this.$init.catch,r=this;return this.$init.catch=function(){return r.$caught=!0,o.apply(r.$init,arguments)},this.$init},ft.createCollection=async function(t){if(Ot(this,\"createCollection\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1])throw new u(\"Model.createCollection() no longer accepts a callback\");const e=this&&this.schema&&this.schema.options&&this.schema.options.collation;null!=e&&(t=Object.assign({collation:e},t));const n=this&&this.schema&&this.schema.options&&this.schema.options.capped;null!=n&&(\"number\"==typeof n?t=Object.assign({capped:!0,size:n},t):\"object\"==typeof n&&(t=Object.assign({capped:!0},n,t)));const o=this&&this.schema&&this.schema.options&&this.schema.options.timeseries;null!=o&&(null!=(t=Object.assign({timeseries:o},t)).expireAfterSeconds||(null!=t.expires?st.expires(t):null!=this.schema.options.expireAfterSeconds?t.expireAfterSeconds=this.schema.options.expireAfterSeconds:null!=this.schema.options.expires&&(t.expires=this.schema.options.expires,st.expires(t))));const r=this&&this.schema&&this.schema.options&&this.schema.options.clusteredIndex;null!=r&&(t=Object.assign({clusteredIndex:{...r,unique:!0}},t));try{await this.db.createCollection(this.$__collection.collectionName,t)}catch(t){if(null!=t&&(\"MongoServerError\"!==t.name||48!==t.code))throw t}return this.$__collection},ft.syncIndexes=async function(t){if(Ot(this,\"syncIndexes\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1])throw new u(\"Model.syncIndexes() no longer accepts a callback\");const e=this;try{await e.createCollection()}catch(t){if(null!=t&&(\"MongoServerError\"!==t.name||48!==t.code))throw t}const n=await e.diffIndexes(),o=await e.cleanIndexes({...t,toDrop:n.toDrop});return await e.createIndexes({...t,toCreate:n.toCreate}),o},ft.diffIndexes=async function(){if(\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1])throw new u(\"Model.syncIndexes() no longer accepts a callback\");const t=this;let e=await t.listIndexes();void 0===e&&(e=[]),e=K(t,e);const n=t.schema,o=W(t,n.indexes()),r=wt(n,o,e),i=$t(n,o,e,r);return{toDrop:r,toCreate:i}},ft.cleanIndexes=async function(t){if(Ot(this,\"cleanIndexes\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1])throw new u(\"Model.cleanIndexes() no longer accepts a callback\");const e=this,n=e.$__collection;if(Array.isArray(t&&t.toDrop)){return await vt(t.toDrop,n)}const o=await e.diffIndexes();return await vt(o.toDrop,n)},ft.listIndexes=async function(){if(Ot(this,\"listIndexes\"),\"function\"==typeof arguments[0])throw new u(\"Model.listIndexes() no longer accepts a callback\");return this.$__collection.buffer&&await new Promise(t=>{this.$__collection.addQueue(t)}),this.$__collection.listIndexes().toArray()},ft.ensureIndexes=async function(t){if(Ot(this,\"ensureIndexes\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1])throw new u(\"Model.ensureIndexes() no longer accepts a callback\");await new Promise((e,n)=>{Et(this,t,t=>{if(null!=t)return n(t);e()})})},ft.createIndexes=async function(t){if(Ot(this,\"createIndexes\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1])throw new u(\"Model.createIndexes() no longer accepts a callback\");return this.ensureIndexes(t)},ft.schema,ft.db,ft.collection,ft.$__collection,ft.base,ft.discriminators,ft.translateAliases=function(t){Ot(this,\"translateAliases\");const e=(e,n)=>{let o;const r=[],i=e.split(\".\");let s=this.schema;for(const t in i){const e=i[t];s&&s.aliases[e]?(o=s.aliases[e],r.push(o)):(o=e,r.push(e)),s=s&&s.paths[o]?s.paths[o].schema:null}const c=r.join(\".\");return t instanceof Map?t.set(c,n):t[c]=n,c!==e&&(t instanceof Map?t.delete(e):delete t[e]),t};if(\"object\"==typeof t){if(t instanceof Map)for(const n of new Map(t))t=e(n[0],n[1]);else for(const n of Object.keys(t))if(t=e(n,t[n]),\"$\"===n[0]&&Array.isArray(t[n]))for(const e in t[n])t[n][e]=this.translateAliases(t[n][e]);return t}return t},ft.deleteOne=function(t,e){if(Ot(this,\"deleteOne\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1]||\"function\"==typeof arguments[2])throw new u(\"Model.prototype.deleteOne() no longer accepts a callback\");const n=new this.Query({},{},this,this.$__collection);return n.setOptions(e),n.deleteOne(t)},ft.deleteMany=function(t,e){if(Ot(this,\"deleteMany\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1]||\"function\"==typeof arguments[2])throw new u(\"Model.deleteMany() no longer accepts a callback\");const n=new this.Query({},{},this,this.$__collection);return n.setOptions(e),n.deleteMany(t)},ft.find=function(t,e,n){if(Ot(this,\"find\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1]||\"function\"==typeof arguments[2]||\"function\"==typeof arguments[3])throw new u(\"Model.find() no longer accepts a callback\");const o=new this.Query({},{},this,this.$__collection);return o.select(e),o.setOptions(n),o.find(t)},ft.findById=function(t,e,n){if(Ot(this,\"findById\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1]||\"function\"==typeof arguments[2])throw new u(\"Model.findById() no longer accepts a callback\");return void 0===t&&(t=null),this.findOne({_id:t},e,n)},ft.findOne=function(t,e,n){if(Ot(this,\"findOne\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1]||\"function\"==typeof arguments[2])throw new u(\"Model.findOne() no longer accepts a callback\");const o=new this.Query({},{},this,this.$__collection);return o.select(e),o.setOptions(n),o.findOne(t)},ft.estimatedDocumentCount=function(t){Ot(this,\"estimatedDocumentCount\");return new this.Query({},{},this,this.$__collection).estimatedDocumentCount(t)},ft.countDocuments=function(t,e){if(Ot(this,\"countDocuments\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1]||\"function\"==typeof arguments[2])throw new u(\"Model.countDocuments() no longer accepts a callback\");const n=new this.Query({},{},this,this.$__collection);return null!=e&&n.setOptions(e),n.countDocuments(t)},ft.count=function(t){if(Ot(this,\"count\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1])throw new u(\"Model.count() no longer accepts a callback\");const e=new this.Query({},{},this,this.$__collection);return e.count(t)},ft.distinct=function(t,e){if(Ot(this,\"distinct\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1])throw new u(\"Model.distinct() no longer accepts a callback\");const n=new this.Query({},{},this,this.$__collection);return n.distinct(t,e)},ft.where=function(t,e){Ot(this,\"where\");const n=new this.Query({},{},this,this.$__collection).find({});return n.where.apply(n,arguments)},ft.$where=function(){Ot(this,\"$where\");const t=new this.Query({},{},this,this.$__collection).find({});return t.$where.apply(t,arguments)},ft.findOneAndUpdate=function(t,e,n){if(Ot(this,\"findOneAndUpdate\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1]||\"function\"==typeof arguments[2]||\"function\"==typeof arguments[3])throw new u(\"Model.findOneAndUpdate() no longer accepts a callback\");let o;1===arguments.length&&(e=t,t=null,n=null),n&&(o=n.fields||n.projection),At(e=k(e,{depopulate:!0,_isNested:!0}),n,this.schema.options.versionKey);const r=new this.Query({},{},this,this.$__collection);return r.select(o),r.findOneAndUpdate(t,e,n)},ft.findByIdAndUpdate=function(t,e,n){if(Ot(this,\"findByIdAndUpdate\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1]||\"function\"==typeof arguments[2]||\"function\"==typeof arguments[3])throw new u(\"Model.findByIdAndUpdate() no longer accepts a callback\");return t instanceof i&&(t=t._id),this.findOneAndUpdate.call(this,{_id:t},e,n)},ft.findOneAndDelete=function(t,e){if(Ot(this,\"findOneAndDelete\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1]||\"function\"==typeof arguments[2])throw new u(\"Model.findOneAndDelete() no longer accepts a callback\");let n;e&&(n=e.select,e.select=void 0);const o=new this.Query({},{},this,this.$__collection);return o.select(n),o.findOneAndDelete(t,e)},ft.findByIdAndDelete=function(t,e){if(Ot(this,\"findByIdAndDelete\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1]||\"function\"==typeof arguments[2])throw new u(\"Model.findByIdAndDelete() no longer accepts a callback\");return this.findOneAndDelete({_id:t},e)},ft.findOneAndReplace=function(t,e,n){if(Ot(this,\"findOneAndReplace\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1]||\"function\"==typeof arguments[2]||\"function\"==typeof arguments[3])throw new u(\"Model.findOneAndReplace() no longer accepts a callback\");let o;n&&(o=n.select,n.select=void 0);const r=new this.Query({},{},this,this.$__collection);return r.select(o),r.findOneAndReplace(t,e,n)},ft.findOneAndRemove=function(t,e){if(Ot(this,\"findOneAndRemove\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1]||\"function\"==typeof arguments[2]||\"function\"==typeof arguments[3])throw new u(\"Model.findOneAndRemove() no longer accepts a callback\");let n;e&&(n=e.select,e.select=void 0);const o=new this.Query({},{},this,this.$__collection);return o.select(n),o.findOneAndRemove(t,e)},ft.findByIdAndRemove=function(t,e){if(Ot(this,\"findByIdAndRemove\"),\"function\"==typeof arguments[0]||\"function\"==typeof arguments[1]||\"function\"==typeof arguments[2]||\"function\"==typeof arguments[3])throw new u(\"Model.findByIdAndRemove() no longer accepts a callback\");return this.findOneAndRemove({_id:t},e)},ft.create=async function(t,e){if(\"function\"==typeof e||\"function\"==typeof arguments[2])throw new u(\"Model.create() no longer accepts a callback\");let n;Ot(this,\"create\");const o=this.schema.options.discriminatorKey;if(Array.isArray(t))n=t,e=null!=e&&\"object\"==typeof e?e:{};else{const t=arguments[arguments.length-1];if(e={},\"function\"==typeof t||arguments.length>1&&!t){if(\"function\"==typeof e||\"function\"==typeof arguments[2])throw new u(\"Model.create() no longer accepts a callback\")}else n=[...arguments];2!==n.length||null==n[0]||null==n[1]||null!=n[0].session||\"ClientSession\"!==F(t.session)||this.schema.path(\"session\")||st.warn(\"WARNING: to pass a `session` to `Model.create()` in Mongoose, you **must** pass an array as the first argument. See: https://mongoosejs.com/docs/api/model.html#Model.create()\")}if(0===n.length)return Array.isArray(t)?[]:null;const r=await Promise.all(n.map(async t=>{const n=this.discriminators&&null!=t[o]?this.discriminators[t[o]]||B(this.discriminators,t[o]):this;if(null==n)throw new u(`Discriminator \"${t[o]}\" not found for model \"${this.modelName}\"`);let r=t;return r instanceof n||(r=new n(r)),await r.$save(e),r}));return Array.isArray(t)||1!==n.length?r:r[0]},ft.watch=function(t,e){Ot(this,\"watch\");return(e=e||{}).model=this,new r(n=>{if(tt(t=t||[],this.schema,\"fullDocument\"),this.$__collection.buffer)this.$__collection.addQueue(()=>{if(this.closed)return;const o=this.$__collection.watch(t,e);n(null,o)});else{const o=this.$__collection.watch(t,e);n(null,o)}},t,e)},ft.startSession=function(){return Ot(this,\"startSession\"),this.db.startSession.apply(this.db,arguments)},ft.insertMany=async function(t,e){if(Ot(this,\"insertMany\"),\"function\"==typeof e||\"function\"==typeof arguments[2])throw new u(\"Model.insertMany() no longer accepts a callback\");return new Promise((n,o)=>{this.$__insertMany(t,e,(t,e)=>{if(null!=t)return o(t);n(e)})})},ft.$__insertMany=function(t,e,n){const o=this;\"function\"==typeof e&&(n=e,e=null),n=n||st.noop;const r=(e=e||{}).limit||1e3,i=!!e.rawResult,s=\"boolean\"!=typeof e.ordered||e.ordered,c=!!e.lean;Array.isArray(t)||(t=[t]);const a=[],l=new Map,u=s?null:new Array(t.length),p=t.map((t,n)=>r=>{if(!(t instanceof o))try{t=new o(t)}catch(t){return r(t)}if(null!=e.session&&t.$session(e.session),c)return U(()=>r(null,t));t.$validate().then(()=>{r(null,t)},t=>{if(!1===s)return a.push(t),l.set(t,n),u[n]=t,r(null,null);r(t)})});X(p,r,(function(t,r){if(t)return void n(t,null);const c=new Map,p=new Map;for(let t=0;t<r.length;++t)c.set(r[t],t);const h=r.filter((function(t){return null!=t}));for(let t=0;t<h.length;++t)p.set(t,c.get(h[t]));if(a.length>0&&a.sort((t,e)=>l.get(t)-l.get(e)),0===h.length){if(i){return n(null,{acknowledged:!0,insertedCount:0,insertedIds:{},mongoose:{validationErrors:a}})}return void n(null,[])}const f=h.map((function(t){t.$__schema.options.versionKey&&(t[t.$__schema.options.versionKey]=0);return(!e||!1!==e.timestamps)&&t.initializeTimestamps&&(!t.$__||!1!==t.$__.timestamps)?t.initializeTimestamps().toObject(L):t.toObject(L)}));o.$__collection.insertMany(f,e).then(t=>{for(const t of h)t.$__reset(),St(t,!1);if(i){if(!1===s){for(let t=0;t<u.length;++t)void 0===u[t]&&(u[t]=r[t]);t.mongoose={validationErrors:a,results:u}}return n(null,t)}if(null!=e.populate)return o.populate(h,e.populate).then(t=>{n(null,t)},t=>{throw null!=t&&(t.insertedDocs=h),t});n(null,h)},t=>{null==t.writeErrors&&null!=(t.result&&t.result.result&&t.result.result.writeErrors)&&(t.writeErrors=t.result.result.writeErrors);const e=new Set((t&&t.writeErrors||[]).map(t=>t.index));for(let e=0;e<t.writeErrors.length;++e){const n=p.get(t.writeErrors[e].index);t.writeErrors[e]={...t.writeErrors[e],index:n},s||(u[n]=t.writeErrors[e])}if(!s){for(let t=0;t<u.length;++t)void 0===u[t]&&(u[t]=r[t]);t.results=u}let o=-1;t.insertedDocs=h.filter((t,n)=>{const r=e.has(n);if(s){if(o>-1)return n<o;r&&(o=n)}return!r}).map((function(t){return t.$__reset(),St(t,!1),t})),i&&!1===s&&(t.mongoose={validationErrors:a,results:u}),n(t,null)})}))},ft.bulkWrite=async function(t,e){if(Ot(this,\"bulkWrite\"),\"function\"==typeof e||\"function\"==typeof arguments[2])throw new u(\"Model.bulkWrite() no longer accepts a callback\");const n=null==(e=e||{}).ordered||e.ordered,o=t.map(t=>P(this,t,e));return new Promise((r,i)=>{if(n)return void I(o,(t,e)=>t(e),n=>{if(n)return i(n);if(0===t.length)return r(C());try{this.$__collection.bulkWrite(t,e,(t,e)=>{if(t)return i(t);r(e)})}catch(t){return i(t)}});let s=o.length,c=[],a=[];for(let t=0;t<o.length;++t)o[t](e=>{null==e?c.push(t):a.push({index:t,error:e}),--s<=0&&l.call(this)});function l(){c=c.sort().map(e=>t[e]),this.$__collection.bulkWrite(c,e,(t,e)=>{if(t)return a.length>0&&(t.mongoose=t.mongoose||{},t.mongoose.validationErrors=a),i(t);a.length>0&&(e.mongoose=e.mongoose||{},e.mongoose.validationErrors=a),r(e)})}a=a.sort((t,e)=>t.index-e.index).map(t=>t.error)})},ft.bulkSave=async function(t,e){e=e||{};const n=this.buildBulkWriteOperations(t,{skipValidation:!0,timestamps:e.timestamps});if(null!=e.timestamps)for(const n of t)n.$__.saveOptions=n.$__.saveOptions||{},n.$__.saveOptions.timestamps=e.timestamps;else for(const e of t)null!=e.$__.timestamps&&(e.$__.saveOptions=e.$__.saveOptions||{},e.$__.saveOptions.timestamps=e.$__.timestamps);await Promise.all(t.map(jt));const{bulkWriteResult:o,bulkWriteError:r}=await this.bulkWrite(n,e).then(t=>({bulkWriteResult:t,bulkWriteError:null}),t=>({bulkWriteResult:null,bulkWriteError:t}));if(await Promise.all(t.map(async t=>{null==(r&&r.writeErrors.find(e=>(e.err.op._id||e.err.op.q._id).toString()===t._id.toString()))&&await function(t){return new Promise((e,n)=>{t.$isNew&&St(t,!1),t.$__reset(),t.schema.s.hooks.execPost(\"save\",t,[t],{},t=>{t?n(t):e()})})}(t)})),r&&r.writeErrors&&r.writeErrors.length)throw r;return o},ft.applyDefaults=function t(e){if(null!=e.$__){_(e,e.$__.fields,e.$__.exclude);for(const n of e.$getAllSubdocs())t(n,n.$__.fields,n.$__.exclude);return e}return b(e,this.schema),e},ft.castObject=function(t,e){e=e||{};const n={},o=this.schema,r=Object.keys(o.paths);for(const e of r){const n=o.path(e);if(!n||!n.$isMongooseArray)continue;const i=R(t,e);et(r,i,e)}let i=null;for(const s of r){const r=o.path(s);if(null==r)continue;let c=R(t,s,void 0);if(null==c)continue;const a=-1===s.indexOf(\".\")?[s]:s.split(\".\");let l=n;for(let t=0;t<a.length-1;++t)null==l[a[t]]&&(l[a[t]]=isNaN(a[t+1])?{}:[]),l=l[a[t]];if(!r.$isMongooseDocumentArray)if(r.$isSingleNested||r.$isMongooseDocumentArrayElement){try{c=ft.castObject.call(r.caster,c)}catch(t){e.ignoreCastErrors||(i=i||new y,i.addError(s,t));continue}l[a[a.length-1]]=c}else try{c=r.cast(c),l[a[a.length-1]]=c}catch(t){e.ignoreCastErrors||(i=i||new y,i.addError(s,t));continue}}if(null!=i)throw i;return n},ft.buildBulkWriteOperations=function(t,e){if(!Array.isArray(t))throw new Error(`bulkSave expects an array of documents to be passed, received \\`${t}\\` instead`);null==(e=e||{}).skipValidation&&(e.skipValidation=!1);return t.reduce((t,n,o)=>{if(!e.skipValidation){if(!(n instanceof i))throw new Error(`documents.${o} was not a mongoose document, documents must be an array of mongoose documents (instanceof mongoose.Document).`);const t=n.validateSync();if(t)throw t}if(n.isNew){const o={insertOne:{document:n}};return st.injectTimestampsOption(o.insertOne,e.timestamps),t.push(o),t}const r=n.$__delta();if(null!=r&&!st.isEmptyObject(r[0])){const o=n.$__where(r[0]),i=r[1];dt(n,o),n.$__version(o,r);const s={updateOne:{filter:o,update:i}};return st.injectTimestampsOption(s.updateOne,e.timestamps),t.push(s),t}return t},[])},ft.hydrate=function(t,e,o){Ot(this,\"hydrate\"),null!=e&&(null!=t&&null!=t.$__&&(t=t.toObject(L)),t=v(t,e));const r=n(58).createModel(this,t,e);return r.$init(t,o),r},ft.updateMany=function(t,e,n){return Ot(this,\"updateMany\"),xt(this,\"updateMany\",t,e,n)},ft.updateOne=function(t,e,n){return Ot(this,\"updateOne\"),xt(this,\"updateOne\",t,e,n)},ft.replaceOne=function(t,e,n){Ot(this,\"replaceOne\");const o=this&&this.schema&&this.schema.options&&this.schema.options.versionKey||null;return o&&!e[o]&&(e[o]=0),xt(this,\"replaceOne\",t,e,n)},ft.aggregate=function(t,e){if(Ot(this,\"aggregate\"),\"function\"==typeof e||\"function\"==typeof arguments[2])throw new u(\"Model.aggregate() no longer accepts a callback\");const n=new o(t||[]);return n.model(this),null!=e&&n.option(e),n},ft.validate=async function(t,e,n){if((arguments.length<3||3===arguments.length&&\"function\"==typeof arguments[2])&&(n=t),\"function\"==typeof n||\"function\"==typeof arguments[3])throw new u(\"Model.validate() no longer accepts a callback\");let o=this.schema;const r=o.options.discriminatorKey;null!=o.discriminators&&null!=t&&null!=t[r]&&(o=D(o,t[r])||o);let i=Object.keys(o.paths);if(null!=e){const t=\"string\"==typeof e?new Set(e.split(\" \")):new Set(e);i=i.filter(e=>{const n=e.split(\".\");let o=n[0];for(const e of n){if(t.has(o))return!0;o+=\".\"+e}return t.has(e)})}for(const e of i){const n=o.path(e);if(!n||!n.$isMongooseArray||n.$isMongooseDocumentArray)continue;const r=R(t,e);et(i,r,e)}let s=i.length,c=null;return new Promise((e,r)=>{for(const e of i){const r=o.path(e);if(null==r){a();continue}const i=-1===e.indexOf(\".\")?[e]:e.split(\".\");let s=t;for(let t=0;t<i.length-1;++t)s=s[i[t]];let l=R(t,e,void 0);if(null!=l)try{l=r.cast(l),s[i[i.length-1]]=l}catch(t){c=c||new y,c.addError(e,t),a();continue}r.doValidate(l,t=>{t&&(c=c||new y,c.addError(e,t)),a()},n,{path:e})}function a(){--s<=0&&(c?r(c):e())}})},ft.populate=async function(t,e){if(Ot(this,\"populate\"),\"function\"==typeof e||\"function\"==typeof arguments[2])throw new u(\"Model.populate() no longer accepts a callback\");const n=this;e=st.populate(e);const o={};return new Promise((r,i)=>{Pt(n,t,e,o,(t,e)=>{if(t)return i(t);r(e)})})};const kt=/\\s?-_id\\s?/,Mt=/\\s?-_id\\s?/g;function Ct(t,e,n,o){const r={...n};if(null==n.strictPopulate&&(null!=n._localModel&&null!=n._localModel.schema._userProvidedOptions.strictPopulate?r.strictPopulate=n._localModel.schema._userProvidedOptions.strictPopulate:(null!=n._localModel&&null!=t.base.options.strictPopulate||null!=t.base.options.strictPopulate)&&(r.strictPopulate=t.base.options.strictPopulate)),Array.isArray(e)||(e=[e]),0===e.length||e.every(st.isNullOrUndefined))return o();const i=V(t,e,r);if(i instanceof u)return U((function(){o(i)}));const s=i.length;let c=[];function a(t){return void 0!==t}let l=s,p=!1;const h=[];for(let e=0;e<s;++e){const n=i[e];let o=n.options.select,s=st.array.flatten(n.ids,a);s=st.array.unique(s);const c={};if(c.sort=n&&n.options&&n.options.options&&n.options.options.sort||void 0,c.excludeId=kt.test(o)||o&&0===o._id,n.options&&n.options.options&&n.options.options.lean&&n.options.options.lean.transform&&(n.options.options._leanTransform=n.options.options.lean.transform,n.options.options.lean=!0),0===s.length||s.every(st.isNullOrUndefined)){--l,Nt(t,[],n,c);continue}p=!0,\"string\"==typeof r.foreignField&&(n.foreignField.clear(),n.foreignField.add(r.foreignField));const u=M(s,n.match,n.foreignField,n.model,n.options.skipInvalidIds);c.excludeId&&(\"string\"==typeof o?o=o.replace(Mt,\" \"):(o=st.object.shallowCopy(o),delete o._id)),n.options.options&&null!=n.options.options.limit?c.originalLimit=n.options.options.limit:null!=n.options.limit&&(c.originalLimit=n.options.limit),h.push([n,u,o,c,f])}if(!p){if(0!==i.length)return o();if(null!=r.populate){const n=st.populate(r.populate).map(t=>Object.assign({},t,{path:r.path+\".\"+t.path}));return void t.populate(e,n).then(t=>{o(null,t)},t=>{o(t)})}return o()}for(const t of h)Dt.apply(null,t);function f(e,n){if(null!=e)return o(e,null);c=c.concat(n),0==--l&&function(){for(const e of h){const n=e[0],r=e[3];for(const t of c)n.options._childDocs.push(t);try{Nt(t,c,n,r)}catch(t){return o(t)}}for(const t of h)nt(t[0].foreignField,t[0].options,c);for(const t of h){const e=t[0];if(e.options&&e.options.options&&e.options.options._leanTransform)for(const t of c)e.options.options._leanTransform(t)}o()}()}}\n/*!\n * ignore\n */function Dt(t,e,n,o,r){let i=k(t.options.populate);const s=Object.assign({skip:t.options.skip,limit:t.options.limit,perDocumentLimit:t.options.perDocumentLimit},t.options.options);t.count&&delete s.skip,null!=s.perDocumentLimit?(s.limit=s.perDocumentLimit,delete s.perDocumentLimit):null!=s.limit&&(s.limit=s.limit*t.ids.length);const c=t.model.find(e,n,s);for(const e of t.foreignField)\"_id\"!==e&&c.selectedInclusively()&&!G(c._fields,e)&&c.select(e);if(t.count)for(const e of t.foreignField)c.select(e);if(i){null!=t.model.baseModelName&&(Array.isArray(i)?i.forEach(t=>{t.strictPopulate=!1}):\"string\"==typeof i?i={path:i,strictPopulate:!1}:i.strictPopulate=!1);const e=t.options._fullPath||t.options.path;if(Array.isArray(i))for(const t of i)t._fullPath=e+\".\"+t.path;else\"object\"==typeof i&&(i._fullPath=e+\".\"+i.path);c.populate(i)}c.exec().then(e=>{for(const n of e)Y.set(n,t.model);r(null,e)},t=>{r(t)})}\n/*!\n * ignore\n */function Nt(t,e,n,o){const r=n.options,s=n.isVirtual,c=n.justOne;let a;const l=r&&r.options&&r.options.lean||!1,u=e.length,p={},h={};let f,d;const y=k(n.allIds);for(let t=0;t<u;t++)if(d=e[t],null!=d)for(const e of n.foreignField){if(a=st.getValue(e,d),Array.isArray(a)){a=st.array.unique(st.array.flatten(a));for(let e of a)e instanceof i&&(e=e._id),f=String(e),h[f]?Array.isArray(h[f])?(h[f].push(d),p[f].push(t)):(h[f]=[h[f],d],p[f]=[p[f],t]):s&&!c?(h[f]=[d],p[f]=[t]):(h[f]=d,p[f]=t)}else a instanceof i&&(a=a._id),f=String(a),h[f]?Array.isArray(h[f])?(h[f].push(d),p[f].push(t)):(s||h[f].constructor!==d.constructor||String(h[f]._id)!==String(d._id))&&(h[f]=[h[f],d],p[f]=[p[f],t]):(h[f]=d,p[f]=t);l||(d.$__.wasPopulated=d.$__.wasPopulated||!0)}x({originalModel:t,rawIds:n.isVirtual?y:n.allIds,allIds:y,unpopulatedValues:n.unpopulatedValues,foreignField:n.foreignField,rawDocs:h,rawOrder:p,docs:n.docs,path:r.path,options:o,justOne:n.justOne,isVirtual:n.isVirtual,allOptions:n,populatedModel:n.model,lean:l,virtual:n.virtual,count:n.count,match:n.match})}ft.compile=function(t,e,n,o,r){if(!1!==e.options.versionKey&&!e.paths[e.options.versionKey]){const t={};t[e.options.versionKey]=Number,e.add(t)}let i;\"function\"==typeof t&&t.prototype instanceof ft?(i=t,t=i.name,e.loadClass(i,!1),i.prototype.$isMongooseModelPrototype=!0):i=function t(e,n,o){if(t.hooks.execPreSync(\"createModel\",e),!(this instanceof t))return new t(e,n,o);const r=t.schema.options.discriminatorKey;if(null==t.discriminators||null==e||null==e[r])return void ft.call(this,e,n,o);const i=t.discriminators[e[r]]||B(t.discriminators,e[r]);if(null!=i)return new i(e,n,o);ft.call(this,e,n,o)},i.hooks=e.s.hooks.clone(),i.base=r,i.modelName=t,i.prototype instanceof ft||(Object.setPrototypeOf(i,ft),Object.setPrototypeOf(i.prototype,ft.prototype)),i.model=function(t){return this.db.model(t)},i.db=o,i.prototype.db=o,i.prototype[lt]=o,i.discriminators=i.prototype.discriminators=void 0,i[ut]=!0,i.events=new a,e._preCompile(),i.prototype.$__setSchema(e);const s={schemaUserProvidedOptions:e._userProvidedOptions||{},capped:e.options.capped,Promise:i.base.Promise,modelName:t};return void 0!==e.options.autoCreate&&(s.autoCreate=e.options.autoCreate),i.prototype.collection=o.collection(n,s),i.prototype.$collection=i.prototype.collection,i.prototype[at]=i.prototype.collection,w(i,e),S(i,e),$(i,e),A(i,e.s.hooks,e.statics),i.schema=i.prototype.$__schema,i.collection=i.prototype.collection,i.$__collection=i.collection,i.Query=function(){h.apply(this,arguments)},Object.setPrototypeOf(i.Query.prototype,h.prototype),i.Query.base=h.base,i.Query.prototype.constructor=h,O(i.Query,i),function(t,e){for(const n in e)t.Query.prototype[n]=e[n]}(i,e.query),i},ft.__subclass=function(t,e,n){const o=this,r=function t(e,n,r){if(!(this instanceof t))return new t(e,n,r);o.call(this,e,n,r)};if(Object.setPrototypeOf(r,o),Object.setPrototypeOf(r.prototype,o.prototype),r.db=t,r.prototype.db=t,r.prototype[lt]=t,o[pt]=o[pt]||[],o[pt].push(r),null!=o.discriminators){r.discriminators={};for(const t of Object.keys(o.discriminators))r.discriminators[t]=o.discriminators[t].__subclass(o.db,o.discriminators[t].schema,n)}const i=e&&\"string\"!=typeof e?e:o.prototype.$__schema,s=i.options||{},c=i._userProvidedOptions||{};n||(n=o.prototype.$__schema.get(\"collection\")||st.toCollectionName(o.modelName,this.base.pluralize()));const a={schemaUserProvidedOptions:c,capped:i&&s.capped};return r.prototype.collection=t.collection(n,a),r.prototype.$collection=r.prototype.collection,r.prototype[at]=r.prototype.collection,r.collection=r.prototype.collection,r.$__collection=r.collection,r.init().catch(()=>{}),r},ft.inspect=function(){return`Model { ${this.modelName} }`},it.inspect.custom&&(ft[it.inspect.custom]=ft.inspect)\n/*!\n * Module exports.\n */,t.exports=ft},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies\n */const o=n(378),r=n(11),i=n(110),{applyGlobalMaxTimeMS:s,applyGlobalDiskUse:c}=n(182),a=n(12),l=n(14),u=n(195),p=n(379),h=n(3),f=i.prototype.read,d=i.prototype.readConcern,y=new Set([\"$$DESCEND\",\"$$PRUNE\",\"$$KEEP\"]);function m(t,e){this._pipeline=[],this._model=e,this.options={},1===arguments.length&&Array.isArray(t)&&this.append.apply(this,t)}\n/*!\n * Helpers\n */\nfunction g(t){if(\"object\"!=typeof t||null===t)return!1;const e=Object.keys(t);return 1===e.length&&\"$\"===e[0][0]}m.prototype.options,m.prototype.model=function(t){return 0===arguments.length?this._model:(this._model=t,null!=t.schema&&(null==this.options.readPreference&&null!=t.schema.options.read&&(this.options.readPreference=t.schema.options.read),null==this.options.collation&&null!=t.schema.options.collation&&(this.options.collation=t.schema.options.collation)),t)},m.prototype.append=function(){const t=1===arguments.length&&Array.isArray(arguments[0])?arguments[0]:[...arguments];if(!t.every(g))throw new Error(\"Arguments must be aggregate pipeline operators\");return this._pipeline=this._pipeline.concat(t),this},m.prototype.addFields=function(t){if(\"object\"!=typeof t||null===t||Array.isArray(t))throw new Error(\"Invalid addFields() argument. Must be an object\");return this.append({$addFields:Object.assign({},t)})},m.prototype.project=function(t){const e={};if(\"object\"!=typeof t||Array.isArray(t)){if(1!==arguments.length||\"string\"!=typeof t)throw new Error(\"Invalid project() argument. Must be string or object\");t.split(/\\s+/).forEach((function(t){if(!t)return;const n=\"-\"===t[0]?0:1;0===n&&(t=t.substring(1)),e[t]=n}))}else Object.keys(t).forEach((function(n){e[n]=t[n]}));return this.append({$project:e})},m.prototype.near=function(t){const e={};return e.$geoNear=t,this.append(e)},\n/*!\n * define methods\n */\n\"group match skip limit out densify fill\".split(\" \").forEach((function(t){m.prototype[t]=function(e){const n={};return n[\"$\"+t]=e,this.append(n)}})),m.prototype.unwind=function(){const t=[...arguments],e=[];for(const n of t)if(n&&\"object\"==typeof n)e.push({$unwind:n});else{if(\"string\"!=typeof n)throw new Error('Invalid arg \"'+n+'\" to unwind(), must be string or object');e.push({$unwind:\"$\"===n[0]?n:\"$\"+n})}return this.append.apply(this,e)},m.prototype.replaceRoot=function(t){let e;return e=\"string\"==typeof t?t.startsWith(\"$\")?t:\"$\"+t:t,this.append({$replaceRoot:{newRoot:e}})},m.prototype.count=function(t){return this.append({$count:t})},m.prototype.sortByCount=function(t){if(t&&\"object\"==typeof t)return this.append({$sortByCount:t});if(\"string\"==typeof t)return this.append({$sortByCount:\"$\"===t[0]?t:\"$\"+t});throw new TypeError('Invalid arg \"'+t+'\" to sortByCount(), must be string or object')},m.prototype.lookup=function(t){return this.append({$lookup:t})},m.prototype.graphLookup=function(t){const e={};if(t){if(!h.isObject(t))throw new TypeError(\"Invalid graphLookup() argument. Must be an object.\");h.mergeClone(e,t);const n=e.startWith;n&&\"string\"==typeof n&&(e.startWith=e.startWith.startsWith(\"$\")?e.startWith:\"$\"+e.startWith)}return this.append({$graphLookup:e})},m.prototype.sample=function(t){return this.append({$sample:{size:t}})},m.prototype.sort=function(t){const e={};if(\"Object\"===l(t)){const n=[\"desc\",\"descending\",-1];Object.keys(t).forEach((function(o){t[o]instanceof Object&&t[o].$meta?e[o]=t[o]:e[o]=-1===n.indexOf(t[o])?1:-1}))}else{if(1!==arguments.length||\"string\"!=typeof t)throw new TypeError(\"Invalid sort() argument. Must be a string or object.\");t.split(/\\s+/).forEach((function(t){if(!t)return;const n=\"-\"===t[0]?-1:1;-1===n&&(t=t.substring(1)),e[t]=n}))}return this.append({$sort:e})},m.prototype.unionWith=function(t){return this.append({$unionWith:t})},m.prototype.read=function(t,e){return f.call(this,t,e),this},m.prototype.readConcern=function(t){return d.call(this,t),this},m.prototype.redact=function(t,e,n){if(3===arguments.length){if(\"string\"==typeof e&&!y.has(e)||\"string\"==typeof n&&!y.has(n))throw new Error(\"If thenExpr or elseExpr is string, it must be either $$DESCEND, $$PRUNE or $$KEEP\");t={$cond:{if:t,then:e,else:n}}}else if(1!==arguments.length)throw new TypeError(\"Invalid arguments\");return this.append({$redact:t})},m.prototype.explain=async function(t){if(\"function\"==typeof t||\"function\"==typeof arguments[1])throw new r(\"Aggregate.prototype.explain() no longer accepts a callback\");const e=this._model;if(!this._pipeline.length)throw new Error(\"Aggregate has empty pipeline\");u(this._pipeline,this._model.schema),await new Promise((t,n)=>{e.hooks.execPre(\"aggregate\",this,o=>{if(o){const t={error:o};return e.hooks.execPost(\"aggregate\",this,[null],t,t=>{n(t)})}t()})});const n=e.collection.aggregate(this._pipeline,this.options);null==t&&(t=!0);let o=null;try{o=await n.explain(t)}catch(t){await new Promise((n,o)=>{const r={error:t};e.hooks.execPost(\"aggregate\",this,[null],r,t=>t?o(t):n())})}const i={error:null};return await new Promise((t,n)=>{e.hooks.execPost(\"aggregate\",this,[o],i,e=>e?n(e):t())}),o},m.prototype.allowDiskUse=function(t){return this.options.allowDiskUse=t,this},m.prototype.hint=function(t){return this.options.hint=t,this},m.prototype.session=function(t){return null==t?delete this.options.session:this.options.session=t,this},m.prototype.option=function(t){for(const e in t)this.options[e]=t[e];return this},m.prototype.cursor=function(t){return this.options.cursor=t||{},new o(this)},m.prototype.collation=function(t){return this.options.collation=t,this},m.prototype.facet=function(t){return this.append({$facet:t})},m.prototype.search=function(t){return this.append({$search:t})},m.prototype.pipeline=function(){return this._pipeline},m.prototype.exec=async function(){if(!this._model)throw new Error(\"Aggregate not bound to any Model\");if(\"function\"==typeof arguments[0])throw new r(\"Aggregate.prototype.exec() no longer accepts a callback\");const t=this._model,e=this._model.collection;if(s(this.options,t),c(this.options,t),this.options&&this.options.cursor)return new o(this);if(u(this._pipeline,this._model.schema),p(this._pipeline),await new Promise((e,n)=>{t.hooks.execPre(\"aggregate\",this,o=>{if(o){const e={error:o};return t.hooks.execPost(\"aggregate\",this,[null],e,t=>{n(t)})}e()})}),!this._pipeline.length)throw new r(\"Aggregate has empty pipeline\");const n=a(this.options||{});let i;try{const t=await e.aggregate(this._pipeline,n);i=await t.toArray()}catch(e){await new Promise((n,o)=>{const r={error:e};t.hooks.execPost(\"aggregate\",this,[null],r,t=>{if(t)return o(t);n()})})}const l={error:null};return await new Promise((e,n)=>{t.hooks.execPost(\"aggregate\",this,[i],l,t=>t?n(t):e())}),i},m.prototype.then=function(t,e){return this.exec().then(t,e)},m.prototype.catch=function(t){return this.exec().then(null,t)},null!=Symbol.asyncIterator&&(m.prototype[Symbol.asyncIterator]=function(){return this.cursor({useMongooseAggCursor:!0}).transformNull()._transformForAsyncIterator()}),m._prepareDiscriminatorPipeline=u,\n/*!\n * Exports\n */\nt.exports=m},function(t,e,n){\"use strict\";t.exports=function(t,e,n){const o=e&&e.discriminatorMapping;if(n=n||\"\",o&&!o.isRoot){const e=t,r=(n.length>0?n+\".\":n)+o.key,i=o.value;if(null==e[0]||!e[0].$match||void 0!==e[0].$match[r]&&e[0].$match[r]!==i)if(null!=e[0]&&e[0].$geoNear)e[0].$geoNear.query=e[0].$geoNear.query||{},e[0].$geoNear.query[r]=i;else if(null!=e[0]&&e[0].$search)if(e[1]&&null!=e[1].$match)e[1].$match[r]=e[1].$match[r]||i;else{const t={};t[r]=i,e.splice(1,0,{$match:t})}else{const t={};t[r]=i,e.unshift({$match:t})}else e[0].$match[r]=i}}},function(t,e,n){\"use strict\";t.exports=\n/*!\n * ignore\n */\nfunction t(e,n){if(e.virtuals[n])return{virtual:e.virtuals[n],path:void 0};const o=n.split(\".\");let r=\"\",i=\"\";for(let s=0;s<o.length;++s)if(r+=(r.length>0?\".\":\"\")+o[s],e.virtuals[r]){if(s===o.length-1)return{virtual:e.virtuals[r],path:i}}else if(!e.nested[r]){if(!e.paths[r]||!e.paths[r].schema){if(e.discriminators)for(const o of Object.keys(e.discriminators)){const r=t(e.discriminators[o],n);if(r)return r}return null}{e=e.paths[r].schema;const n=o.slice(s+1).join(\".\");if(e.virtuals[n]){if(s===o.length-2)return{virtual:e.virtuals[n],nestedSchemaPath:[i,r].filter(t=>!!t).join(\".\")};continue}if(s+1<o.length&&e.discriminators)for(const o of Object.keys(e.discriminators)){const s=t(e.discriminators[o],n);if(null!=s){const t=[i,r,s.nestedSchemaPath].filter(t=>!!t).join(\".\");return{virtual:s.virtual,nestedSchemaPath:t}}}i+=(i.length>0?\".\":\"\")+r,r=\"\"}}}},function(t,e,n){\"use strict\";const o=n(57);t.exports=function(t,e){if(null==t)return!1;if(\"_id\"===e)return 0===t._id;const n=Object.keys(t);let r=null;for(const i of n)if(o(t[i])){r=1===t[e]?\"inclusive\":\"exclusive\";break}return\"inclusive\"===r?1!==t[e]:\"exclusive\"===r&&0===t[e]}},,,,,,,,,,,,,,,,,,,,,function(t,e,n){\"use strict\";const o=n(219),r=n(81),i=n(370),{env:s}=process;let c;function a(t){return 0!==t&&{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function l(t,e){if(0===c)return 0;if(i(\"color=16m\")||i(\"color=full\")||i(\"color=truecolor\"))return 3;if(i(\"color=256\"))return 2;if(t&&!e&&void 0===c)return 0;const n=c||0;if(\"dumb\"===s.TERM)return n;if(\"win32\"===process.platform){const t=o.release().split(\".\");return Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if(\"CI\"in s)return[\"TRAVIS\",\"CIRCLECI\",\"APPVEYOR\",\"GITLAB_CI\",\"GITHUB_ACTIONS\",\"BUILDKITE\"].some(t=>t in s)||\"codeship\"===s.CI_NAME?1:n;if(\"TEAMCITY_VERSION\"in s)return/^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(s.TEAMCITY_VERSION)?1:0;if(\"truecolor\"===s.COLORTERM)return 3;if(\"TERM_PROGRAM\"in s){const t=parseInt((s.TERM_PROGRAM_VERSION||\"\").split(\".\")[0],10);switch(s.TERM_PROGRAM){case\"iTerm.app\":return t>=3?3:2;case\"Apple_Terminal\":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||\"COLORTERM\"in s?1:n}i(\"no-color\")||i(\"no-colors\")||i(\"color=false\")||i(\"color=never\")?c=0:(i(\"color\")||i(\"colors\")||i(\"color=true\")||i(\"color=always\"))&&(c=1),\"FORCE_COLOR\"in s&&(c=\"true\"===s.FORCE_COLOR?1:\"false\"===s.FORCE_COLOR?0:0===s.FORCE_COLOR.length?1:Math.min(parseInt(s.FORCE_COLOR,10),3)),t.exports={supportsColor:function(t){return a(l(t,t&&t.isTTY))},stdout:a(l(!0,r.isatty(1))),stderr:a(l(!0,r.isatty(2)))}},function(t,e){t.exports=require(\"os\")},,,,,,,,,,,,,,,,,,,,,function(t,e,n){const o=n(123),r=new o.Schema({title:{type:String,required:!0},description:{type:String,required:!0},location:{type:String,enum:[\"chennai\",\"bangalore\"],required:!0},deadline:{type:Date,required:!0},phone:{type:Number,required:!0},email:{type:String,required:!0},active:{type:Boolean,index:!0,default:!0},interestedApplicants:{type:Array,required:!1}}),i=o.model(\"job\",r);t.exports=i},,,,,,,,,function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */n(135).set(n(250));const o=n(17),r=n(8).EventEmitter,i=n(92),s=n(68),c=n(13),a=n(71),l=n(160),u=n(63),p=n(354),h=n(53),f=n(110),d=n(193),y=n(405),m=n(176),g=n(135),_=n(406),b=n(3),O=n(407),$=n(55),w=n(194),v=n(52).trusted,E=n(191),A=n(16),S=n(11),j=n(408),x=Symbol.for(\"mongoose:default\");n(409);const P=/^[0-9A-Fa-f]{24}$/;function k(t){this.connections=[],this.nextConnectionId=0,this.models={},this.events=new r,this.__driver=g.get(),this.options=Object.assign({pluralization:!0,autoIndex:!0,autoCreate:!0},t);const e=b.getOption(\"createInitialConnection\",this.options);if(null==e||e){this.createConnection().models=this.models}if(this.options.pluralization&&(this._pluralize=_),t&&t[x])for(const t of[\"Schema\",\"model\"])this[t]=k.prototype[t];else{const t=this;this.Schema=function(){return this.base=t,s.apply(this,arguments)},this.Schema.prototype=Object.create(s.prototype),Object.assign(this.Schema,s),this.Schema.base=this,this.Schema.Types=Object.assign({},s.Types)}this.Schema.prototype.base=this,Object.defineProperty(this,\"plugins\",{configurable:!1,enumerable:!0,writable:!1,value:Object.values(m).map(t=>[t,{deduplicate:!0}])})}k.prototype.cast=$,k.prototype.STATES=u,k.prototype.ConnectionStates=u,k.prototype.driver=g,k.prototype.setDriver=function(t){const e=this instanceof k?this:M;if(e.__driver===t)return e;if(e.connections&&e.connections.find(t=>t.readyState!==u.disconnected)){throw new S(\"Cannot modify Mongoose driver if a connection is already open. Call `mongoose.disconnect()` before modifying the driver\")}e.__driver=t;const n=t.Connection;return e.connections=[new n(e)],e.connections[0].models=e.models,e},k.prototype.set=function(t,e){const n=this instanceof k?this:M;if(1===arguments.length&&\"object\"!=typeof t){if(-1===p.indexOf(t)){const e=new j;throw e.addError(t,new j.SetOptionInnerError(t)),e}return n.options[t]}let o={};2===arguments.length&&(o={[t]:e}),1===arguments.length&&\"object\"==typeof t&&(o=t);let r=void 0;for(const[t,e]of Object.entries(o))-1!==p.indexOf(t)?(n.options[t]=e,\"objectIdGetter\"===t&&(e?Object.defineProperty(M.Types.ObjectId.prototype,\"_id\",{enumerable:!1,configurable:!0,get:function(){return this}}):delete M.Types.ObjectId.prototype._id)):(r||(r=new j),r.addError(t,new j.SetOptionInnerError(t)));if(r)throw r;return n},k.prototype.get=k.prototype.set,k.prototype.createConnection=function(t,e){const n=this instanceof k?this:M,o=n.__driver.Connection,r=new o(n);return n.connections.push(r),n.nextConnectionId++,n.events.emit(\"createConnection\",r),arguments.length>0&&r.openUri(t,{...e,_fireAndForget:!0}),r},k.prototype.connect=async function(t,e){if(\"function\"==typeof e||arguments.length>=3&&\"function\"==typeof arguments[2])throw new S(\"Mongoose.prototype.connect() no longer accepts a callback\");const n=this instanceof k?this:M,o=n.connection;return o.openUri(t,e).then(()=>n)},k.prototype.disconnect=async function(){if(arguments.length>=1&&\"function\"==typeof arguments[0])throw new S(\"Mongoose.prototype.disconnect() no longer accepts a callback\");const t=this instanceof k?this:M,e=t.connections.length;e<=0||await Promise.all(t.connections.map(t=>t.close()))},k.prototype.startSession=function(){const t=this instanceof k?this:M;return t.connection.startSession.apply(t.connection,arguments)},k.prototype.pluralize=function(t){const e=this instanceof k?this:M;return arguments.length>0&&(e._pluralize=t),e._pluralize},k.prototype.model=function(t,e,n,o){const r=this instanceof k?this:M;if(\"string\"==typeof e&&(n=e,e=!1),1===arguments.length){const e=r.models[t];if(!e)throw new S.MissingSchemaError(t);return e}if(!b.isObject(e)||e instanceof s||(e=new s(e)),e&&!(e instanceof s))throw new Error(\"The 2nd parameter to `mongoose.model()` should be a schema or a POJO\");o=o||{};const i=e;e&&(r.get(\"cloneSchemas\")&&(e=e.clone()),r._applyPlugins(e));const c=r.options.hasOwnProperty(\"overwriteModels\")?r.options.overwriteModels:o.overwriteModels;if(r.models.hasOwnProperty(t)&&!1!==o.cache&&!0!==c){if(i&&i.instanceOfSchema&&i!==r.models[t].schema)throw new r.Error.OverwriteModelError(t);if(n&&n!==r.models[t].collection.name){const o=r.models[t];e=o.prototype.schema;return o.__subclass(r.connection,e,n)}return r.models[t]}if(null==e)throw new r.Error.MissingSchemaError(t);const a=r._model(t,e,n,o);return r.connection.models[t]=a,r.models[t]=a,a},\n/*!\n * ignore\n */\nk.prototype._model=function(t,e,n,o){const r=this instanceof k?this:M;let i;if(\"function\"==typeof t&&(i=t,t=i.name,!(i.prototype instanceof d)))throw new r.Error(\"The provided class \"+t+\" must extend Model\");e&&(r.get(\"cloneSchemas\")&&(e=e.clone()),r._applyPlugins(e)),null!=e&&\"pluralization\"in e.options||(e.options.pluralization=r.options.pluralization),n||(n=e.get(\"collection\")||b.toCollectionName(t,r.pluralize()));const s=o.connection||r.connection;if(i=r.Model.compile(i||t,e,n,s,r),i.init().catch((function(){})),s.emit(\"model\",i),null!=e._applyDiscriminators)for(const t of Object.keys(e._applyDiscriminators))i.discriminator(t,e._applyDiscriminators[t]);return i},k.prototype.deleteModel=function(t){const e=this instanceof k?this:M;return e.connection.deleteModel(t),delete e.models[t],e},k.prototype.modelNames=function(){const t=this instanceof k?this:M;return Object.keys(t.models)},k.prototype._applyPlugins=function(t,e){const n=this instanceof k?this:M;(e=e||{}).applyPluginsToDiscriminators=n.options&&n.options.applyPluginsToDiscriminators||!1,e.applyPluginsToChildSchemas=\"boolean\"!=typeof(n.options&&n.options.applyPluginsToDiscriminators)||n.options.applyPluginsToDiscriminators,y(t,n.plugins,e,\"$globalPluginsApplied\")},k.prototype.plugin=function(t,e){const n=this instanceof k?this:M;return n.plugins.push([t,e]),n},k.prototype.__defineGetter__(\"connection\",(function(){return this.connections[0]})),k.prototype.__defineSetter__(\"connection\",(function(t){t instanceof this.__driver.Connection&&(this.connections[0]=t,this.models=t.models)})),k.prototype.connections,k.prototype.nextConnectionId,k.prototype.Aggregate=w,Object.defineProperty(k.prototype,\"Collection\",{get:function(){return this.__driver.Collection},set:function(t){this.__driver.Collection=t}}),Object.defineProperty(k.prototype,\"Connection\",{get:function(){return this.__driver.Connection},set:function(t){t!==this.__driver.Connection&&(this.__driver.Connection=t)}}),k.prototype.version=O.version,k.prototype.Mongoose=k,k.prototype.Schema=s,k.prototype.SchemaType=c,k.prototype.SchemaTypes=s.Types,k.prototype.VirtualType=l,k.prototype.Types=h,k.prototype.Query=f,k.prototype.Model=d,k.prototype.Document=o,k.prototype.DocumentProvider=n(410),k.prototype.ObjectId=a.ObjectId,k.prototype.isValidObjectId=function(t){return(this instanceof k?this:M).Types.ObjectId.isValid(t)},k.prototype.isObjectIdOrHexString=function(t){return A(t,\"ObjectId\")||\"string\"==typeof t&&P.test(t)},k.prototype.syncIndexes=function(t){return(this instanceof k?this:M).connection.syncIndexes(t)},k.prototype.Decimal128=a.Decimal128,k.prototype.Mixed=a.Mixed,k.prototype.Date=a.Date,k.prototype.Number=a.Number,k.prototype.Error=n(9),k.prototype.now=function(){return new Date},k.prototype.CastError=n(15),k.prototype.SchemaTypeOptions=n(19),k.prototype.mongo=n(136),k.prototype.mquery=n(187),k.prototype.sanitizeFilter=E,k.prototype.trusted=v,k.prototype.skipMiddlewareFunction=i.skipWrappedFunction,k.prototype.overwriteMiddlewareResult=i.overwriteResult;const M=t.exports=new k({[x]:!0})},function(t,e,n){\"use strict\";\n/*!\n * Module exports.\n */e.Collection=n(251),e.Connection=n(289)},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(252),r=n(11),i=n(136).Collection,s=n(27),c=n(14),a=n(22),l=n(2);function u(t,e,n){this.collection=null,this.Promise=n.Promise||Promise,this.modelName=n.modelName,delete n.modelName,this._closed=!1,o.apply(this,arguments)}\n/*!\n * Inherit from abstract Collection.\n */Object.setPrototypeOf(u.prototype,o.prototype),u.prototype.onOpen=function(){return this.collection=this.conn.db.collection(this.name),o.prototype.onOpen.call(this),this.collection},u.prototype.onClose=function(t){o.prototype.onClose.call(this,t)},u.prototype._getCollection=function(){return this.collection?this.collection:null!=this.conn.db?(this.collection=this.conn.db.collection(this.name),this.collection):null};\n/*!\n * ignore\n */\nconst p={watch:!0,find:!0,aggregate:!0};function h(t){u.prototype[t]=function(){const e=this._getCollection(),n=Array.from(arguments),o=this,i=o&&o.conn&&o.conn.base&&o.conn.base.options&&o.conn.base.options.debug,c=o&&o.conn&&o.conn.options&&o.conn.options.debug,l=null==c?i:c,u=arguments[arguments.length-1],h=new s;if(this.conn.$wasForceClosed){const t=new r(\"Connection was force closed\");if(n.length>0&&\"function\"==typeof n[n.length-1])return void n[n.length-1](t);throw t}let f=n,d=null;if(this._shouldBufferCommands()&&this.buffer){let e;this.conn.emit(\"buffer\",{_id:h,modelName:o.modelName,collectionName:o.name,method:t,args:n});let i=n,s=null,c=null;p[t]&&\"function\"==typeof u?this.addQueue(()=>{u.call(this,null,this[t].apply(this,i.slice(0,i.length-1)))},[]):p[t]?s=new Promise((o,r)=>{e=function(t,e){if(null!=c&&clearTimeout(c),null!=t)return r(t);o(e)},i=n.concat([e]),this.addQueue(t,i)}):\"function\"==typeof u?(e=function(){return null!=c&&clearTimeout(c),u.apply(this,arguments)},i=n.slice(0,n.length-1).concat([e])):s=new Promise((o,r)=>{e=function(t,e){if(null!=c&&clearTimeout(c),null!=t)return r(t);o(e)},i=n.concat([e]),this.addQueue(t,i)});const a=this._getBufferTimeoutMS();return c=setTimeout(()=>{if(this.removeQueue(t,i)){const n=\"Operation `\"+this.name+\".\"+t+\"()` buffering timed out after \"+a+\"ms\",i=new r(n);this.conn.emit(\"buffer-end\",{_id:h,modelName:o.modelName,collectionName:o.name,method:t,error:i}),e(i)}},a),p[t]||\"function\"!=typeof u?s:void this.addQueue(t,i)}if(p[t]||\"function\"!=typeof u||(d=function(e,n){return null!=e?o.conn.emit(\"operation-end\",{_id:h,modelName:o.modelName,collectionName:o.name,method:t,error:e}):o.conn.emit(\"operation-end\",{_id:h,modelName:o.modelName,collectionName:o.name,method:t,result:n}),u.apply(this,arguments)},f=n.slice(0,n.length-1).concat([d])),l)if(\"function\"==typeof l)l.apply(o,[o.name,t].concat(n.slice(0,n.length-1)));else if(l instanceof a.Writable)this.$printToStream(o.name,t,n,l);else{const e=null==l.color||l.color,r=null!=l.shell&&l.shell;this.$print(o.name,t,n,e,r)}this.conn.emit(\"operation-start\",{_id:h,modelName:o.modelName,collectionName:this.name,method:t,params:f});try{if(null==e){const e=\"Cannot call `\"+this.name+\".\"+t+\"()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.\";throw new r(e)}if(p[t]&&\"function\"==typeof u){const n=e[t].apply(e,f.slice(0,f.length-1));return u.call(this,null,n)}const n=e[t].apply(e,f);return null!=n&&\"function\"==typeof n.then?n.then(t=>(\"function\"==typeof u&&u(null,t),t),t=>{if(\"function\"!=typeof u)throw t;u(t)}):n}catch(e){if(\"function\"==typeof u)return u(e);throw this.conn.emit(\"operation-end\",{_id:h,modelName:o.modelName,collectionName:this.name,method:t,error:e}),e}}}for(const t of Object.getOwnPropertyNames(i.prototype)){void 0===Object.getOwnPropertyDescriptor(i.prototype,t).get&&(\"function\"==typeof i.prototype[t]&&h(t))}function f(t){const e={inspect:function(){return t}};return l.inspect.custom&&(e[l.inspect.custom]=e.inspect),e}function d(t){return g(t,!0)}function y(t,e){t[e]=f('ObjectId(\"'+t[e].toHexString()+'\")')}function m(t,e,n){t[e]=f(n?'ISODate(\"'+t[e].toUTCString()+'\")':'new Date(\"'+t[e].toUTCString()+'\")')}function g(t,e,o,r){if(t&&\"function\"==typeof t.toBSON&&(t=t.toBSON()),null==t)return t;let i=n(12)(t,{transform:!1});const s=c(i);if(\"Binary\"===s)i=\"BinData(\"+i.sub_type+', \"'+i.toString(\"base64\")+'\")';else if(\"ObjectId\"===s)i=f('ObjectId(\"'+i.toHexString()+'\")');else if(\"Date\"===s)i=f('new Date(\"'+i.toUTCString()+'\")');else if(\"Object\"===s){const t=Object.keys(i),e=t.length;let n;for(let o=0;o<e;++o)if(n=t[o],i[n]){let t;if(\"function\"==typeof i[n].toBSON)try{i[n]=i[n].toBSON()}catch(e){t=e}const e=c(i[n]);if(\"Binary\"===e)i[n]=\"BinData(\"+i[n].sub_type+', \"'+i[n].buffer.toString(\"base64\")+'\")';else if(\"Object\"===e)i[n]=g(i[n],!0);else if(\"ObjectId\"===e)y(i,n);else if(\"Date\"===e)m(i,n,r);else if(\"ClientSession\"===e)i[n]=f('ClientSession(\"'+(i[n]&&i[n].id&&i[n].id.id&&i[n].id.id.buffer||\"\").toString(\"hex\")+'\")');else if(Array.isArray(i[n]))i[n]=i[n].map(d);else if(null!=t)throw t}}return e?i:l.inspect(i,!1,10,o).replace(/\\n/g,\"\").replace(/\\s{2,}/g,\" \")}u.prototype.$print=function(t,e,n,o,r){const i=o?\"\u001b[0;36mMongoose:\u001b[0m \":\"Mongoose: \",s=[t,e].join(\".\"),c=[];for(let t=n.length-1;t>=0;--t)(this.$format(n[t])||c.length)&&c.unshift(this.$format(n[t],o,r));const a=\"(\"+c.join(\", \")+\")\";console.info(i+s+a)},u.prototype.$printToStream=function(t,e,n,o){const r=[t,e].join(\".\"),i=[];for(let t=n.length-1;t>=0;--t)(this.$format(n[t])||i.length)&&i.unshift(this.$format(n[t]));const s=\"(\"+i.join(\", \")+\")\";o.write(r+s,\"utf8\")},u.prototype.$format=function(t,e,n){const o=typeof t;return\"function\"===o||\"undefined\"===o?\"\":g(t,!1,e,n)},u.prototype.getIndexes=u.prototype.indexInformation,\n/*!\n * Module exports.\n */\nt.exports=u},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(8).EventEmitter,r=n(63),i=n(20);function s(t,e,n){void 0===n&&(n={}),this.opts=n,this.name=t,this.collectionName=t,this.conn=e,this.queue=[],this.buffer=!0,this.emitter=new o,r.connected===this.conn.readyState&&this.onOpen()}s.prototype.name,s.prototype.collectionName,s.prototype.conn,s.prototype.onOpen=function(){this.buffer=!1,i(()=>this.doQueue())},s.prototype.onClose=function(){},s.prototype.addQueue=function(t,e){return this.queue.push([t,e]),this},s.prototype.removeQueue=function(t,e){const n=this.queue.findIndex(n=>n[0]===t&&n[1]===e);return-1!==n&&(this.queue.splice(n,1),!0)},s.prototype.doQueue=function(){for(const t of this.queue)\"function\"==typeof t[0]?t[0].apply(this,t[1]):this[t[0]].apply(this,t[1]);this.queue=[];const t=this;return i((function(){t.emitter.emit(\"queue\")})),this},s.prototype.ensureIndex=function(){throw new Error(\"Collection#ensureIndex unimplemented by driver\")},s.prototype.createIndex=function(){throw new Error(\"Collection#createIndex unimplemented by driver\")},s.prototype.findAndModify=function(){throw new Error(\"Collection#findAndModify unimplemented by driver\")},s.prototype.findOneAndUpdate=function(){throw new Error(\"Collection#findOneAndUpdate unimplemented by driver\")},s.prototype.findOneAndDelete=function(){throw new Error(\"Collection#findOneAndDelete unimplemented by driver\")},s.prototype.findOneAndReplace=function(){throw new Error(\"Collection#findOneAndReplace unimplemented by driver\")},s.prototype.findOne=function(){throw new Error(\"Collection#findOne unimplemented by driver\")},s.prototype.find=function(){throw new Error(\"Collection#find unimplemented by driver\")},s.prototype.insert=function(){throw new Error(\"Collection#insert unimplemented by driver\")},s.prototype.insertOne=function(){throw new Error(\"Collection#insertOne unimplemented by driver\")},s.prototype.insertMany=function(){throw new Error(\"Collection#insertMany unimplemented by driver\")},s.prototype.save=function(){throw new Error(\"Collection#save unimplemented by driver\")},s.prototype.updateOne=function(){throw new Error(\"Collection#updateOne unimplemented by driver\")},s.prototype.updateMany=function(){throw new Error(\"Collection#updateMany unimplemented by driver\")},s.prototype.deleteOne=function(){throw new Error(\"Collection#deleteOne unimplemented by driver\")},s.prototype.deleteMany=function(){throw new Error(\"Collection#deleteMany unimplemented by driver\")},s.prototype.getIndexes=function(){throw new Error(\"Collection#getIndexes unimplemented by driver\")},s.prototype.watch=function(){throw new Error(\"Collection#watch unimplemented by driver\")},\n/*!\n * ignore\n */\ns.prototype._shouldBufferCommands=function(){const t=this.opts;return null!=t.bufferCommands?t.bufferCommands:t&&null!=t.schemaUserProvidedOptions&&null!=t.schemaUserProvidedOptions.bufferCommands?t.schemaUserProvidedOptions.bufferCommands:this.conn._shouldBufferCommands()},\n/*!\n * ignore\n */\ns.prototype._getBufferTimeoutMS=function(){const t=this.conn,e=this.opts;return null!=e.bufferTimeoutMS?e.bufferTimeoutMS:e&&null!=e.schemaUserProvidedOptions&&null!=e.schemaUserProvidedOptions.bufferTimeoutMS?e.schemaUserProvidedOptions.bufferTimeoutMS:null!=t.config.bufferTimeoutMS?t.config.bufferTimeoutMS:null!=t.base&&null!=t.base.get(\"bufferTimeoutMS\")?t.base.get(\"bufferTimeoutMS\"):1e4},\n/*!\n * Module exports.\n */\nt.exports=s},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.Admin=void 0;const o=n(254),r=n(64),i=n(255),s=n(256),c=n(257),a=n(258);e.Admin=class{constructor(t){this.s={db:t}}async command(t,e){return(0,r.executeOperation)(this.s.db.s.client,new c.RunCommandOperation(this.s.db,t,{dbName:\"admin\",...e}))}async buildInfo(t){return this.command({buildinfo:1},t)}async serverInfo(t){return this.command({buildinfo:1},t)}async serverStatus(t){return this.command({serverStatus:1},t)}async ping(t){return this.command({ping:1},t)}async addUser(t,e,n){n=null!=n&&\"object\"==typeof n?n:null!=e&&\"object\"==typeof e?e:void 0;const i=\"string\"==typeof e?e:void 0;return(0,r.executeOperation)(this.s.db.s.client,new o.AddUserOperation(this.s.db,t,i,{dbName:\"admin\",...n}))}async removeUser(t,e){return(0,r.executeOperation)(this.s.db.s.client,new s.RemoveUserOperation(this.s.db,t,{dbName:\"admin\",...e}))}async validateCollection(t,e={}){return(0,r.executeOperation)(this.s.db.s.client,new a.ValidateCollectionOperation(this,t,e))}async listDatabases(t){return(0,r.executeOperation)(this.s.db.s.client,new i.ListDatabasesOperation(this.s.db,t))}async replSetGetStatus(t){return this.command({replSetGetStatus:1},t)}}},function(t,e){throw new Error(\"Module parse failed: Unexpected token (16:32)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|         this.username = username;\\n|         this.password = password;\\n>         this.options = options ?? {};\\n|     }\\n|     execute(server, session, callback) {\")},function(t,e){throw new Error(\"Module parse failed: Unexpected token (11:32)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|     constructor(db, options) {\\n|         super(db, options);\\n>         this.options = options ?? {};\\n|         this.ns = new utils_1.MongoDBNamespace('admin', '$cmd');\\n|     }\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.RemoveUserOperation=void 0;const o=n(65),r=n(137);class i extends o.CommandOperation{constructor(t,e,n){super(t,n),this.options=n,this.username=e}execute(t,e,n){super.executeCommand(t,e,{dropUser:this.username},t=>{n(t,!t)})}}e.RemoveUserOperation=i,(0,r.defineAspects)(i,[r.Aspect.WRITE_OPERATION])},function(t,e){throw new Error(\"Module parse failed: Unexpected token (10:32)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|     constructor(parent, command, options) {\\n|         super(parent, options);\\n>         this.options = options ?? {};\\n|         this.command = command;\\n|     }\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.ValidateCollectionOperation=void 0;const o=n(26),r=n(65);class i extends r.CommandOperation{constructor(t,e,n){const o={validate:e},r=Object.keys(n);for(let t=0;t<r.length;t++)Object.prototype.hasOwnProperty.call(n,r[t])&&\"session\"!==r[t]&&(o[r[t]]=n[r[t]]);super(t.s.db,n),this.options=n,this.command=o,this.collectionName=e}execute(t,e,n){const r=this.collectionName;super.executeCommand(t,e,this.command,(t,e)=>null!=t?n(t):0===e.ok?n(new o.MongoRuntimeError(\"Error with validate command\")):null!=e.result&&\"string\"!=typeof e.result?n(new o.MongoRuntimeError(\"Error with validation data\")):null!=e.result&&null!=e.result.match(/exception|corrupt/)?n(new o.MongoRuntimeError(\"Invalid collection \"+r)):null==e.valid||e.valid?n(void 0,e):n(new o.MongoRuntimeError(\"Invalid collection \"+r)))}}e.ValidateCollectionOperation=i},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.OrderedBulkOperation=void 0;const o=n(66),r=n(26),i=n(67);class s extends i.BulkOperationBase{constructor(t,e){super(t,e,!0)}addToOperationsList(t,e){const n=o.calculateObjectSize(e,{checkKeys:!1,ignoreUndefined:!1});if(n>=this.s.maxBsonObjectSize)throw new r.MongoInvalidArgumentError(\"Document is larger than the maximum size \"+this.s.maxBsonObjectSize);null==this.s.currentBatch&&(this.s.currentBatch=new i.Batch(t,this.s.currentIndex));const s=this.s.maxKeySize;if((this.s.currentBatchSize+1>=this.s.maxWriteBatchSize||this.s.currentBatchSize>0&&this.s.currentBatchSizeBytes+s+n>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==t)&&(this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new i.Batch(t,this.s.currentIndex),this.s.currentBatchSize=0,this.s.currentBatchSizeBytes=0),t===i.BatchType.INSERT&&this.s.bulkResult.insertedIds.push({index:this.s.currentIndex,_id:e._id}),Array.isArray(e))throw new r.MongoInvalidArgumentError(\"Operation passed in cannot be an Array\");return this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentBatch.operations.push(e),this.s.currentBatchSize+=1,this.s.currentBatchSizeBytes+=s+n,this.s.currentIndex+=1,this}}e.OrderedBulkOperation=s},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.UnorderedBulkOperation=void 0;const o=n(66),r=n(26),i=n(67);class s extends i.BulkOperationBase{constructor(t,e){super(t,e,!1)}handleWriteError(t,e){return!this.s.batches.length&&super.handleWriteError(t,e)}addToOperationsList(t,e){const n=o.calculateObjectSize(e,{checkKeys:!1,ignoreUndefined:!1});if(n>=this.s.maxBsonObjectSize)throw new r.MongoInvalidArgumentError(\"Document is larger than the maximum size \"+this.s.maxBsonObjectSize);this.s.currentBatch=void 0,t===i.BatchType.INSERT?this.s.currentBatch=this.s.currentInsertBatch:t===i.BatchType.UPDATE?this.s.currentBatch=this.s.currentUpdateBatch:t===i.BatchType.DELETE&&(this.s.currentBatch=this.s.currentRemoveBatch);const s=this.s.maxKeySize;if(null==this.s.currentBatch&&(this.s.currentBatch=new i.Batch(t,this.s.currentIndex)),(this.s.currentBatch.size+1>=this.s.maxWriteBatchSize||this.s.currentBatch.size>0&&this.s.currentBatch.sizeBytes+s+n>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==t)&&(this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new i.Batch(t,this.s.currentIndex)),Array.isArray(e))throw new r.MongoInvalidArgumentError(\"Operation passed in cannot be an Array\");return this.s.currentBatch.operations.push(e),this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentIndex=this.s.currentIndex+1,t===i.BatchType.INSERT?(this.s.currentInsertBatch=this.s.currentBatch,this.s.bulkResult.insertedIds.push({index:this.s.bulkResult.insertedIds.length,_id:e._id})):t===i.BatchType.UPDATE?this.s.currentUpdateBatch=this.s.currentBatch:t===i.BatchType.DELETE&&(this.s.currentRemoveBatch=this.s.currentBatch),this.s.currentBatch.size+=1,this.s.currentBatch.sizeBytes+=s+n,this}}e.UnorderedBulkOperation=s},function(t,e){throw new Error(\"Module parse failed: Unexpected token (70:34)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|             options,\\n|             namespace: new utils_1.MongoDBNamespace(db.databaseName, name),\\n>             pkFactory: db.options?.pkFactory ?? utils_1.DEFAULT_PK_FACTORY,\\n|             readPreference: read_preference_1.ReadPreference.fromOptions(options),\\n|             bsonOptions: (0, bson_1.resolveBSONOptions)(options, db),\")},function(t,e){throw new Error(\"Module parse failed: Unexpected token (58:32)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|             ...this[kOptions],\\n|             ...this.cursorOptions,\\n>             explain: verbosity ?? true\\n|         }));\\n|     }\")},function(t,e){throw new Error(\"Module parse failed: Unexpected token (112:32)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|             ...this[kBuiltOptions],\\n|             ...this.cursorOptions,\\n>             explain: verbosity ?? true\\n|         }));\\n|     }\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.ListCollectionsCursor=void 0;const o=n(64),r=n(265),i=n(49);class s extends i.AbstractCursor{constructor(t,e,n){super(t.s.client,t.s.namespace,n),this.parent=t,this.filter=e,this.options=n}clone(){return new s(this.parent,this.filter,{...this.options,...this.cursorOptions})}_initialize(t,e){const n=new r.ListCollectionsOperation(this.parent,this.filter,{...this.cursorOptions,...this.options,session:t});(0,o.executeOperation)(this.parent.s.client,n,(o,r)=>{if(o||null==r)return e(o);e(void 0,{server:n.server,session:t,response:r})})}}e.ListCollectionsCursor=s},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.ListCollectionsOperation=void 0;const o=n(84),r=n(65),i=n(137);class s extends r.CommandOperation{constructor(t,e,n){super(t,n),this.options={...n},delete this.options.writeConcern,this.db=t,this.filter=e,this.nameOnly=!!this.options.nameOnly,this.authorizedCollections=!!this.options.authorizedCollections,\"number\"==typeof this.options.batchSize&&(this.batchSize=this.options.batchSize)}execute(t,e,n){return super.executeCommand(t,e,this.generateCommand((0,o.maxWireVersion)(t)),n)}generateCommand(t){const e={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly,authorizedCollections:this.authorizedCollections};return t>=9&&void 0!==this.options.comment&&(e.comment=this.options.comment),e}}e.ListCollectionsOperation=s,(0,i.defineAspects)(s,[i.Aspect.READ_OPERATION,i.Aspect.RETRYABLE,i.Aspect.CURSOR_CREATING])},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.ListIndexesCursor=void 0;const o=n(64),r=n(267),i=n(49);class s extends i.AbstractCursor{constructor(t,e){super(t.s.db.s.client,t.s.namespace,e),this.parent=t,this.options=e}clone(){return new s(this.parent,{...this.options,...this.cursorOptions})}_initialize(t,e){const n=new r.ListIndexesOperation(this.parent,{...this.cursorOptions,...this.options,session:t});(0,o.executeOperation)(this.parent.s.db.s.client,n,(o,r)=>{if(o||null==r)return e(o);e(void 0,{server:n.server,session:t,response:r})})}}e.ListIndexesCursor=s},function(t,e){throw new Error(\"Module parse failed: Unexpected token (52:38)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|         }\\n|         else if (Array.isArray(spec)) {\\n>             key.set(spec[0], spec[1] ?? 1);\\n|         }\\n|         else if (spec instanceof Map) {\")},function(t,e){throw new Error(\"Module parse failed: Unexpected token (83:27)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|      */\\n|     constructor(client, databaseName, options) {\\n>         options = options ?? {};\\n|         // Filter the options\\n|         options = (0, utils_1.filterOptions)(options, DB_OPTIONS_ALLOW_LIST);\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.GridFSBucket=void 0;const o=n(26),r=n(139),i=n(140),s=n(141),c=n(142),a={bucketName:\"fs\",chunkSizeBytes:261120};class l extends r.TypedEventEmitter{constructor(t,e){super(),this.setMaxListeners(0);const n={...a,...e,writeConcern:i.WriteConcern.fromOptions(e)};this.s={db:t,options:n,_chunksCollection:t.collection(n.bucketName+\".chunks\"),_filesCollection:t.collection(n.bucketName+\".files\"),checkedIndexes:!1,calledOpenUploadStream:!1}}openUploadStream(t,e){return new c.GridFSBucketWriteStream(this,t,e)}openUploadStreamWithId(t,e,n){return new c.GridFSBucketWriteStream(this,e,{...n,id:t})}openDownloadStream(t,e){return new s.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{_id:t},e)}async delete(t){const{deletedCount:e}=await this.s._filesCollection.deleteOne({_id:t});if(await this.s._chunksCollection.deleteMany({files_id:t}),0===e)throw new o.MongoRuntimeError(\"File not found for id \"+t)}find(t={},e={}){return this.s._filesCollection.find(t,e)}openDownloadStreamByName(t,e){let n={uploadDate:-1},o=void 0;return e&&null!=e.revision&&(e.revision>=0?(n={uploadDate:1},o=e.revision):o=-e.revision-1),new s.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{filename:t},{...e,sort:n,skip:o})}async rename(t,e){const n={_id:t},r={$set:{filename:e}},{matchedCount:i}=await this.s._filesCollection.updateOne(n,r);if(0===i)throw new o.MongoRuntimeError(`File with id ${t} not found`)}async drop(){await this.s._filesCollection.drop(),await this.s._chunksCollection.drop()}}e.GridFSBucket=l,l.INDEX=\"index\"},function(t,e){throw new Error(\"Module parse failed: Unexpected token (57:27)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|             throw new error_1.MongoRuntimeError('ClientSession requires a ServerSessionPool');\\n|         }\\n>         options = options ?? {};\\n|         if (options.snapshot === true) {\\n|             this[kSnapshotEnabled] = true;\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.ChangeStreamCursor=void 0;const o=n(138),r=n(144),i=n(272),s=n(64),c=n(84),a=n(49);class l extends a.AbstractCursor{constructor(t,e,n=[],o={}){super(t,e,o),this.pipeline=n,this.options=o,this._resumeToken=null,this.startAtOperationTime=o.startAtOperationTime,o.startAfter?this.resumeToken=o.startAfter:o.resumeAfter&&(this.resumeToken=o.resumeAfter)}set resumeToken(t){this._resumeToken=t,this.emit(o.ChangeStream.RESUME_TOKEN_CHANGED,t)}get resumeToken(){return this._resumeToken}get resumeOptions(){const t={...this.options};for(const e of[\"resumeAfter\",\"startAfter\",\"startAtOperationTime\"])delete t[e];return null!=this.resumeToken?this.options.startAfter&&!this.hasReceived?t.startAfter=this.resumeToken:t.resumeAfter=this.resumeToken:null!=this.startAtOperationTime&&(0,c.maxWireVersion)(this.server)>=7&&(t.startAtOperationTime=this.startAtOperationTime),t}cacheResumeToken(t){0===this.bufferedCount()&&this.postBatchResumeToken?this.resumeToken=this.postBatchResumeToken:this.resumeToken=t,this.hasReceived=!0}_processBatch(t){const e=t.cursor;if(e.postBatchResumeToken){this.postBatchResumeToken=t.cursor.postBatchResumeToken;0===(\"firstBatch\"in t.cursor?t.cursor.firstBatch:t.cursor.nextBatch).length&&(this.resumeToken=e.postBatchResumeToken)}}clone(){return new l(this.client,this.namespace,this.pipeline,{...this.cursorOptions})}_initialize(t,e){const n=new i.AggregateOperation(this.namespace,this.pipeline,{...this.cursorOptions,...this.options,session:t});(0,s.executeOperation)(t.client,n,(o,i)=>{if(o||null==i)return e(o);const s=n.server;this.maxWireVersion=(0,c.maxWireVersion)(s),null==this.startAtOperationTime&&null==this.resumeAfter&&null==this.startAfter&&this.maxWireVersion>=7&&(this.startAtOperationTime=i.operationTime),this._processBatch(i),this.emit(r.INIT,i),this.emit(r.RESPONSE),e(void 0,{server:s,session:t,response:i})})}_getMore(t,e){super._getMore(t,(t,n)=>{if(t)return e(t);this.maxWireVersion=(0,c.maxWireVersion)(this.server),this._processBatch(n),this.emit(o.ChangeStream.MORE,n),this.emit(o.ChangeStream.RESPONSE),e(t,n)})}}e.ChangeStreamCursor=l},function(t,e){throw new Error(\"Module parse failed: Unexpected token (21:27)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|         // determine if we have a write stage, override read preference if so\\n|         this.hasWriteStage = false;\\n>         if (typeof options?.out === 'string') {\\n|             this.pipeline = this.pipeline.concat({ $out: options.out });\\n|             this.hasWriteStage = true;\")},function(t,e){throw new Error(\"Module parse failed: Unexpected token (53:58)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|     const { username, password } = credentials;\\n|     const mechanismProperties = credentials.mechanismProperties;\\n>     const serviceName = mechanismProperties.SERVICE_NAME ?? 'mongodb';\\n|     const host = await performGSSAPICanonicalizeHostName(hostAddress.host, mechanismProperties);\\n|     const initOptions = {};\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.AUTH_MECHS_AUTH_SRC_EXTERNAL=e.AuthMechanism=void 0,e.AuthMechanism=Object.freeze({MONGODB_AWS:\"MONGODB-AWS\",MONGODB_CR:\"MONGODB-CR\",MONGODB_DEFAULT:\"DEFAULT\",MONGODB_GSSAPI:\"GSSAPI\",MONGODB_PLAIN:\"PLAIN\",MONGODB_SCRAM_SHA1:\"SCRAM-SHA-1\",MONGODB_SCRAM_SHA256:\"SCRAM-SHA-256\",MONGODB_X509:\"MONGODB-X509\",MONGODB_OIDC:\"MONGODB-OIDC\"}),e.AUTH_MECHS_AUTH_SRC_EXTERNAL=new Set([e.AuthMechanism.MONGODB_GSSAPI,e.AuthMechanism.MONGODB_AWS,e.AuthMechanism.MONGODB_OIDC,e.AuthMechanism.MONGODB_X509])},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.decompress=e.compress=e.uncompressibleCommands=e.Compressor=void 0;const o=n(2),r=n(120),i=n(144),s=n(145),c=n(26);e.Compressor=Object.freeze({none:0,snappy:1,zlib:2,zstd:3}),e.uncompressibleCommands=new Set([i.LEGACY_HELLO_COMMAND,\"saslStart\",\"saslContinue\",\"getnonce\",\"authenticate\",\"createUser\",\"updateUser\",\"copydbSaslStart\",\"copydbgetnonce\",\"copydb\"]);const a=(0,o.promisify)(r.inflate.bind(r)),l=(0,o.promisify)(r.deflate.bind(r));e.compress=async function(t,e){const n={};switch(t.agreedCompressor){case\"snappy\":if(\"kModuleError\"in s.Snappy)throw s.Snappy.kModuleError;return s.Snappy.compress(e);case\"zstd\":if(\"kModuleError\"in s.ZStandard)throw s.ZStandard.kModuleError;return s.ZStandard.compress(e,3);case\"zlib\":return t.zlibCompressionLevel&&(n.level=t.zlibCompressionLevel),l(e,n);default:throw new c.MongoInvalidArgumentError(`Unknown compressor ${t.agreedCompressor} failed to compress`)}},e.decompress=async function(t,n){if(t!==e.Compressor.snappy&&t!==e.Compressor.zstd&&t!==e.Compressor.zlib&&t!==e.Compressor.none)throw new c.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${t})`);switch(t){case e.Compressor.snappy:if(\"kModuleError\"in s.Snappy)throw s.Snappy.kModuleError;return s.Snappy.uncompress(n,{asBuffer:!0});case e.Compressor.zstd:if(\"kModuleError\"in s.ZStandard)throw s.ZStandard.kModuleError;return s.ZStandard.decompress(n);case e.Compressor.zlib:return a(n);default:return n}}},function(t,e,n){\"use strict\";const{unassigned_code_points:o,commonly_mapped_to_nothing:r,non_ASCII_space_characters:i,prohibited_characters:s,bidirectional_r_al:c,bidirectional_l:a}=n(277);t.exports=function(t,e={}){if(\"string\"!=typeof t)throw new TypeError(\"Expected string.\");if(0===t.length)return\"\";const n=h(t).map(t=>l.get(t)?32:t).filter(t=>!u.get(t)),r=String.fromCodePoint.apply(null,n).normalize(\"NFKC\"),i=h(r);if(i.some(t=>s.get(t)))throw new Error(\"Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3\");if(!0!==e.allowUnassigned){if(i.some(t=>o.get(t)))throw new Error(\"Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5\")}const f=i.some(t=>c.get(t)),d=i.some(t=>a.get(t));if(f&&d)throw new Error(\"String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6\");const y=c.get(p((g=r,g[0]))),m=c.get(p((t=>t[t.length-1])(r)));var g;if(f&&(!y||!m))throw new Error(\"Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6\");return r};const l=i,u=r,p=t=>t.codePointAt(0);function h(t){const e=[],n=t.length;for(let o=0;o<n;o+=1){const r=t.charCodeAt(o);if(r>=55296&&r<=56319&&n>o+1){const n=t.charCodeAt(o+1);if(n>=56320&&n<=57343){e.push(1024*(r-55296)+n-56320+65536),o+=1;continue}}e.push(r)}return e}},function(t,e,n){\"use strict\";(function(e){const o=n(39),r=n(31),i=n(278),s=o.readFileSync(r.resolve(e,\"../code-points.mem\"));let c=0;function a(){const t=s.readUInt32BE(c);c+=4;const e=s.slice(c,c+t);return c+=t,i({buffer:e})}const l=a(),u=a(),p=a(),h=a(),f=a(),d=a();t.exports={unassigned_code_points:l,commonly_mapped_to_nothing:u,non_ASCII_space_characters:p,prohibited_characters:h,bidirectional_r_al:f,bidirectional_l:d}}).call(this,\"/\")},function(t,e,n){var o=n(279);function r(t){if(!(this instanceof r))return new r(t);if(t||(t={}),Buffer.isBuffer(t)&&(t={buffer:t}),this.pageOffset=t.pageOffset||0,this.pageSize=t.pageSize||1024,this.pages=t.pages||o(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,(e=this.pageSize)&e-1)throw new Error(\"The page size should be a power of two\");var e;if(this._trackUpdates=!!t.trackUpdates,this._pageMask=this.pageSize-1,t.buffer){for(var n=0;n<t.buffer.length;n+=this.pageSize)this.pages.set(n/this.pageSize,t.buffer.slice(n,n+this.pageSize));this.byteLength=t.buffer.length,this.length=8*this.byteLength}}t.exports=r,r.prototype.get=function(t){var e=7&t,n=(t-e)/8;return!!(this.getByte(n)&128>>e)},r.prototype.getByte=function(t){var e=t&this._pageMask,n=(t-e)/this.pageSize,o=this.pages.get(n,!0);return o?o.buffer[e+this.pageOffset]:0},r.prototype.set=function(t,e){var n=7&t,o=(t-n)/8,r=this.getByte(o);return this.setByte(o,e?r|128>>n:r&(255^128>>n))},r.prototype.toBuffer=function(){for(var t=function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e}(this.pages.length*this.pageSize),e=0;e<this.pages.length;e++){var n=this.pages.get(e,!0),o=e*this.pageSize;n&&n.buffer.copy(t,o,this.pageOffset,this.pageOffset+this.pageSize)}return t},r.prototype.setByte=function(t,e){var n=t&this._pageMask,o=(t-n)/this.pageSize,r=this.pages.get(o,!1);return n+=this.pageOffset,r.buffer[n]!==e&&(r.buffer[n]=e,t>=this.byteLength&&(this.byteLength=t+1,this.length=8*this.byteLength),this._trackUpdates&&this.pages.updated(r),!0)}},function(t,e){function n(t,e){if(!(this instanceof n))return new n(t,e);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=t||1024,this.deduplicate=e?e.deduplicate:null,this.zeros=this.deduplicate?o(this.deduplicate.length):null}function o(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e}function r(t,e){this.offset=t*e.length,this.buffer=e,this.updated=!1,this.deduplicate=0}t.exports=n,n.prototype.updated=function(t){for(;this.deduplicate&&t.buffer[t.deduplicate]===this.deduplicate[t.deduplicate];)if(t.deduplicate++,t.deduplicate===this.deduplicate.length){t.deduplicate=0,t.buffer.equals&&t.buffer.equals(this.deduplicate)&&(t.buffer=this.deduplicate);break}!t.updated&&this.updates&&(t.updated=!0,this.updates.push(t))},n.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var t=this.updates.pop();return t.updated=!1,t},n.prototype._array=function(t,e){if(t>=this.maxPages){if(e)return;!function(t,e){for(;t.maxPages<e;){var n=t.pages;t.pages=new Array(32768),t.pages[0]=n,t.level++,t.maxPages*=32768}}(this,t)}var n,o;n=t,o=this.path,n=((n=(n-(o[0]=32767&n))/32768)-(o[1]=32767&n))/32768,o[3]=(n-(o[2]=32767&n))/32768&32767;for(var r=this.pages,i=this.level;i>0;i--){var s=this.path[i],c=r[s];if(!c){if(e)return;c=r[s]=new Array(32768)}r=c}return r},n.prototype.get=function(t,e){var n,i,s=this._array(t,e),c=this.path[0],a=s&&s[c];return a||e||(a=s[c]=new r(t,o(this.pageSize)),t>=this.length&&(this.length=t+1)),a&&a.buffer===this.deduplicate&&this.deduplicate&&!e&&(a.buffer=(n=a.buffer,i=Buffer.allocUnsafe?Buffer.allocUnsafe(n.length):new Buffer(n.length),n.copy(i),i),a.deduplicate=0),a},n.prototype.set=function(t,e){var n=this._array(t,!1),i=this.path[0];if(t>=this.length&&(this.length=t+1),!e||this.zeros&&e.equals&&e.equals(this.zeros))n[i]=void 0;else{this.deduplicate&&e.equals&&e.equals(this.deduplicate)&&(e=this.deduplicate);var s=n[i],c=function(t,e){if(t.length===e)return t;if(t.length>e)return t.slice(0,e);var n=o(e);return t.copy(n),n}(e,this.pageSize);s?s.buffer=c:n[i]=new r(t,c)}},n.prototype.toBuffer=function(){for(var t=new Array(this.length),e=o(this.pageSize),n=0;n<t.length;)for(var r=this._array(n,!0),i=0;i<32768&&n<t.length;i++)t[n++]=r&&r[i]?r[i].buffer:e;return Buffer.concat(t)}},function(t,e){throw new Error(\"Module parse failed: Unexpected token (25:20)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|     }\\n|     static fromOptions(options) {\\n>         if (options?.explain == null)\\n|             return;\\n|         const explain = options.explain;\")},function(t,e){throw new Error(\"Module parse failed: Unexpected token (27:32)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|     constructor(collection, query, options) {\\n|         super(collection, options);\\n>         this.options = options ?? {};\\n|         this.cmdBase = {\\n|             remove: false,\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.SetProfilingLevelOperation=e.ProfilingLevel=void 0;const o=n(26),r=n(84),i=n(65),s=new Set([\"off\",\"slow_only\",\"all\"]);e.ProfilingLevel=Object.freeze({off:\"off\",slowOnly:\"slow_only\",all:\"all\"});class c extends i.CommandOperation{constructor(t,n,o){switch(super(t,o),this.options=o,n){case e.ProfilingLevel.off:this.profile=0;break;case e.ProfilingLevel.slowOnly:this.profile=1;break;case e.ProfilingLevel.all:this.profile=2;break;default:this.profile=0}this.level=n}execute(t,n,i){const c=this.level;if(!s.has(c))return i(new o.MongoInvalidArgumentError(`Profiling level must be one of \"${(0,r.enumToString)(e.ProfilingLevel)}\"`));super.executeCommand(t,n,{profile:this.profile},(t,e)=>null==t&&1===e.ok?i(void 0,c):i(null!=t?t:new o.MongoRuntimeError(\"Error with profile command\")))}}e.SetProfilingLevelOperation=c},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e._advanceClusterTime=e.drainTimerQueue=e.ServerType=e.TopologyType=e.STATE_CONNECTED=e.STATE_CONNECTING=e.STATE_CLOSED=e.STATE_CLOSING=void 0;const o=n(284);e.STATE_CLOSING=\"closing\",e.STATE_CLOSED=\"closed\",e.STATE_CONNECTING=\"connecting\",e.STATE_CONNECTED=\"connected\",e.TopologyType=Object.freeze({Single:\"Single\",ReplicaSetNoPrimary:\"ReplicaSetNoPrimary\",ReplicaSetWithPrimary:\"ReplicaSetWithPrimary\",Sharded:\"Sharded\",Unknown:\"Unknown\",LoadBalanced:\"LoadBalanced\"}),e.ServerType=Object.freeze({Standalone:\"Standalone\",Mongos:\"Mongos\",PossiblePrimary:\"PossiblePrimary\",RSPrimary:\"RSPrimary\",RSSecondary:\"RSSecondary\",RSArbiter:\"RSArbiter\",RSOther:\"RSOther\",RSGhost:\"RSGhost\",Unknown:\"Unknown\",LoadBalancer:\"LoadBalancer\"}),e.drainTimerQueue=function(t){t.forEach(o.clearTimeout),t.clear()},e._advanceClusterTime=function(t,e){(null==t.clusterTime||e.clusterTime.greaterThan(t.clusterTime.clusterTime))&&(t.clusterTime=e)}},function(t,e){t.exports=require(\"timers\")},function(t,e){throw new Error(\"Module parse failed: Unexpected token (171:22)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|         return (0, utils_1.deepCopy)(command.command);\\n|     }\\n>     if (command.query?.$query) {\\n|         let result;\\n|         if (command.ns === 'admin.$cmd') {\")},function(t,e){throw new Error(\"Module parse failed: Unexpected token (105:28)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|         this.reason = reason;\\n|         this.serviceId = connection.serviceId;\\n>         this.error = error ?? null;\\n|     }\\n| }\")},function(t,e){throw new Error(\"Module parse failed: Unexpected token (107:28)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|         this.connectionId = connectionId;\\n|         this.duration = duration;\\n>         this.reply = reply ?? {};\\n|     }\\n| }\")},function(t,e){throw new Error(\"Module parse failed: Unexpected token (30:48)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|         }\\n|         this.srvHost = options.srvHost;\\n>         this.srvMaxHosts = options.srvMaxHosts ?? 0;\\n|         this.srvServiceName = options.srvServiceName ?? 'mongodb';\\n|         this.rescanSrvIntervalMS = 60000;\")},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(290),r=n(63),i=n(291).setTimeout;function s(){o.apply(this,arguments),this._listening=!1}s.STATES=r,\n/*!\n * Inherits from Connection.\n */\nObject.setPrototypeOf(s.prototype,o.prototype),s.prototype.useDb=function(t,e){if((e=e||{}).useCache&&this.relatedDbs[t])return this.relatedDbs[t];const n=new this.constructor;n.name=t,n.base=this.base,n.collections={},n.models={},n.replica=this.replica,n.config=Object.assign({},this.config,n.config),n.name=this.name,n.options=this.options,n._readyState=this._readyState,n._closeCalled=this._closeCalled,n._hasOpened=this._hasOpened,n._listening=!1,n._parent=this,n.host=this.host,n.port=this.port,n.user=this.user,n.pass=this.pass;const o=this;function i(){n.client=o.client;const r={};e.hasOwnProperty(\"noListener\")&&(r.noListener=e.noListener),n.db=o.client.db(t,r),n.onOpen()}return n.client=o.client,this.db&&this._readyState===r.connected?i():this.once(\"connected\",i),n.name=t,!0!==e.noListener&&this.otherDbs.push(n),n.otherDbs.push(this),e&&e.useCache&&(this.relatedDbs[n.name]=n,n.relatedDbs=this.relatedDbs),n},s.prototype.doClose=async function(t){if(null==this.client)return this;let e=!1;return null!=t&&\"object\"==typeof t&&(e=t.skipCloseClient,t=t.force),e||(await this.client.close(t),await new Promise(t=>i(t,1))),this},\n/*!\n * Module exports.\n */\nt.exports=s},function(t,e){throw new Error(\"Module parse failed: Unexpected token (790:10)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n| \\n| function _handleConnectionErrors(err) {\\n>   if (err?.name === 'MongoServerSelectionError') {\\n|     const originalError = err;\\n|     err = new ServerSelectionError();\")},function(t,e,n){\"use strict\";e.setTimeout=setTimeout},function(t,e,n){\"use strict\";\n/*!\n * Dependencies\n */const o=n(293).ctor(\"require\",\"modify\",\"init\",\"default\",\"ignore\");function r(){this.activePaths=new o}t.exports=r,r.prototype.strictMode=!0,r.prototype.fullPath=void 0,r.prototype.selected=void 0,r.prototype.shardval=void 0,r.prototype.saveError=void 0,r.prototype.validationError=void 0,r.prototype.adhocPaths=void 0,r.prototype.removing=void 0,r.prototype.inserting=void 0,r.prototype.saving=void 0,r.prototype.version=void 0,r.prototype._id=void 0,r.prototype.ownerDocument=void 0,r.prototype.populate=void 0,r.prototype.populated=void 0,r.prototype.primitiveAtomics=void 0,r.prototype.wasPopulated=!1,r.prototype.scope=void 0,r.prototype.session=null,r.prototype.pathsToScopes=null,r.prototype.cachedRequired=null},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */n(3);const o=t.exports=function(){};o.ctor=function(){const t=[...arguments],e=function(){o.apply(this,arguments),this.paths={},this.states={}};return e.prototype=new o,e.prototype.stateNames=t,t.forEach((function(t){e.prototype[t]=function(e){this._changeState(e,t)}})),e},o.prototype._changeState=function(t,e){const n=this.states[this.paths[t]];n&&delete n[t],this.paths[t]=e,this.states[e]=this.states[e]||{},this.states[e][t]=!0},\n/*!\n * ignore\n */\no.prototype.clear=function(t){if(null==this.states[t])return;const e=Object.keys(this.states[t]);let n,o=e.length;for(;o--;)n=e[o],delete this.states[t][n],delete this.paths[n]},\n/*!\n * ignore\n */\no.prototype.clearPath=function(t){const e=this.paths[t];e&&(delete this.paths[t],delete this.states[e][t])},o.prototype.getStatePaths=function(t){return null!=this.states[t]?this.states[t]:{}},o.prototype.some=function(){const t=this,e=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(e,(function(e){return null!=t.states[e]&&Object.keys(t.states[e]).length}))},o.prototype._iter=function(t){return function(){let e=[...arguments];const n=e.pop();e.length||(e=this.stateNames);const o=this,r=e.reduce((function(t,e){return null==o.states[e]?t:t.concat(Object.keys(o.states[e]))}),[]);return r[t]((function(t,e,o){return n(t,e,o)}))}},o.prototype.forEach=function(){return this.forEach=this._iter(\"forEach\"),this.forEach.apply(this,arguments)},o.prototype.map=function(){return this.map=this._iter(\"map\"),this.map.apply(this,arguments)}},function(t,e){var n=1e3,o=6e4,r=60*o,i=24*r;function s(t,e,n,o){var r=e>=1.5*n;return Math.round(t/n)+\" \"+o+(r?\"s\":\"\")}t.exports=function(t,e){e=e||{};var c=typeof t;if(\"string\"===c&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var s=parseFloat(e[1]);switch((e[2]||\"ms\").toLowerCase()){case\"years\":case\"year\":case\"yrs\":case\"yr\":case\"y\":return 315576e5*s;case\"weeks\":case\"week\":case\"w\":return 6048e5*s;case\"days\":case\"day\":case\"d\":return s*i;case\"hours\":case\"hour\":case\"hrs\":case\"hr\":case\"h\":return s*r;case\"minutes\":case\"minute\":case\"mins\":case\"min\":case\"m\":return s*o;case\"seconds\":case\"second\":case\"secs\":case\"sec\":case\"s\":return s*n;case\"milliseconds\":case\"millisecond\":case\"msecs\":case\"msec\":case\"ms\":return s;default:return}}(t);if(\"number\"===c&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=i)return s(t,e,i,\"day\");if(e>=r)return s(t,e,r,\"hour\");if(e>=o)return s(t,e,o,\"minute\");if(e>=n)return s(t,e,n,\"second\");return t+\" ms\"}(t):function(t){var e=Math.abs(t);if(e>=i)return Math.round(t/i)+\"d\";if(e>=r)return Math.round(t/r)+\"h\";if(e>=o)return Math.round(t/o)+\"m\";if(e>=n)return Math.round(t/n)+\"s\";return t+\"ms\"}(t);throw new Error(\"val is not a non-empty string or a valid number. val=\"+JSON.stringify(t))}},function(t,e,n){var o=n(296),r=[\"__proto__\",\"constructor\",\"prototype\"];\n/*!\n * Returns the value passed to it.\n */\nfunction i(t){return t}e.get=function(t,n,r,s){var c;\"function\"==typeof r&&(r.length<2?(s=r,r=void 0):(c=r,r=void 0)),s||(s=i);var a=\"string\"==typeof t?o(t):t;if(!Array.isArray(a))throw new TypeError(\"Invalid `path`. Must be either string or array\");for(var l,u=n,p=0;p<a.length;++p){if(l=a[p],\"string\"!=typeof a[p]&&\"number\"!=typeof a[p])throw new TypeError(\"Each segment of path to `get()` must be a string or number, got \"+typeof a[p]);if(Array.isArray(u)&&!/^\\d+$/.test(l)){var h=a.slice(p);return[].concat(u).map((function(t){return t?e.get(h,t,r||c,s):s(void 0)}))}if(c)u=c(u,l);else{var f=r&&u[r]?u[r]:u;u=f instanceof Map?f.get(l):f[l]}if(!u)return s(u)}return s(u)},e.has=function(t,e){var n=\"string\"==typeof t?o(t):t;if(!Array.isArray(n))throw new TypeError(\"Invalid `path`. Must be either string or array\");for(var r=n.length,i=e,s=0;s<r;++s){if(\"string\"!=typeof n[s]&&\"number\"!=typeof n[s])throw new TypeError(\"Each segment of path to `has()` must be a string or number, got \"+typeof n[s]);if(null==i||\"object\"!=typeof i||!(n[s]in i))return!1;i=i[n[s]]}return!0},e.unset=function(t,e){var n=\"string\"==typeof t?o(t):t;if(!Array.isArray(n))throw new TypeError(\"Invalid `path`. Must be either string or array\");for(var i=n.length,s=e,c=0;c<i;++c){if(null==s||\"object\"!=typeof s||!(n[c]in s))return!1;if(\"string\"!=typeof n[c]&&\"number\"!=typeof n[c])throw new TypeError(\"Each segment of path to `unset()` must be a string or number, got \"+typeof n[c]);if(-1!==r.indexOf(n[c]))return!1;if(c===i-1)return delete s[n[c]],!0;s=s instanceof Map?s.get(n[c]):s[n[c]]}return!0},e.set=function(t,n,s,c,a,l){var u;\"function\"==typeof c&&(c.length<2?(a=c,c=void 0):(u=c,c=void 0)),a||(a=i);var p=\"string\"==typeof t?o(t):t;if(!Array.isArray(p))throw new TypeError(\"Invalid `path`. Must be either string or array\");if(null!=s){for(var h=0;h<p.length;++h){if(\"string\"!=typeof p[h]&&\"number\"!=typeof p[h])throw new TypeError(\"Each segment of path to `set()` must be a string or number, got \"+typeof p[h]);if(-1!==r.indexOf(p[h]))return}for(var f,d=l||/\\$/.test(t)&&!1!==l,y=s,m=(h=0,p.length-1);h<m;++h)if(\"$\"!=(f=p[h])){if(Array.isArray(y)&&!/^\\d+$/.test(f)){var g=p.slice(h);if(!d&&Array.isArray(n))for(var _=0;_<y.length&&_<n.length;++_)e.set(g,n[_],y[_],c||u,a,d);else for(_=0;_<y.length;++_)e.set(g,n,y[_],c||u,a,d);return}if(u)y=u(y,f);else{var b=c&&y[c]?y[c]:y;y=b instanceof Map?b.get(f):b[f]}if(!y)return}else if(h==m-1)break;if(f=p[m],c&&y[c]&&(y=y[c]),Array.isArray(y)&&!/^\\d+$/.test(f))if(!d&&Array.isArray(n))!\n/*!\n * Recursively set nested arrays\n */\nfunction t(e,n,o,r,i,s){for(var c,a=0;a<e.length&&a<n.length;++a)c=e[a],Array.isArray(c)&&Array.isArray(n[a])?t(c,n[a],o,r,i,s):c&&(r?r(c,o,s(n[a])):(c[i]&&(c=c[i]),c[o]=s(n[a])))}(y,n,f,u,c,a);else for(_=0;_<y.length;++_){var O=y[_];O&&(u?u(O,f,a(n)):(O[c]&&(O=O[c]),O[f]=a(n)))}else u?u(y,f,a(n)):y instanceof Map?y.set(f,a(n)):y[f]=a(n)}},\n/*!\n * Split a string path into components delimited by '.' or\n * '[\\d+]'\n *\n * #### Example:\n *     stringToParts('foo[0].bar.1'); // ['foo', '0', 'bar', '1']\n */\ne.stringToParts=o},function(t,e,n){\"use strict\";t.exports=function(t){const e=[];let n=\"\",o=\"DEFAULT\";for(let r=0;r<t.length;++r)\"IN_SQUARE_BRACKETS\"!==o||/\\d/.test(t[r])||\"]\"===t[r]||(o=\"DEFAULT\",n=e[e.length-1]+\"[\"+n,e.splice(e.length-1,1)),\"[\"===t[r]?(\"IMMEDIATELY_AFTER_SQUARE_BRACKETS\"!==o&&(e.push(n),n=\"\"),o=\"IN_SQUARE_BRACKETS\"):\"]\"===t[r]?\"IN_SQUARE_BRACKETS\"===o?(o=\"IMMEDIATELY_AFTER_SQUARE_BRACKETS\",e.push(n),n=\"\"):(o=\"DEFAULT\",n+=t[r]):\".\"===t[r]?(\"IMMEDIATELY_AFTER_SQUARE_BRACKETS\"!==o&&(e.push(n),n=\"\"),o=\"DEFAULT\"):n+=t[r];return\"IMMEDIATELY_AFTER_SQUARE_BRACKETS\"!==o&&e.push(n),e}},function(t,e,n){\"use strict\";const o=n(12);t.exports=class{constructor(t){if(this._docs={},this._childDocs=[],null!=t&&(t=o(t),Object.assign(this,t),\"object\"==typeof t.subPopulate&&(this.populate=t.subPopulate),null!=t.perDocumentLimit&&null!=t.limit))throw new Error(\"Can not use `limit` and `perDocumentLimit` at the same time. Path: `\"+t.path+\"`.\")}}},function(t,e,n){\"use strict\";e.isMongooseDocumentArray=function(t){return Array.isArray(t)&&t.isMongooseDocumentArray}},function(t,e,n){\"use strict\";const o=t.exports={};o.DocumentNotFoundError=null,o.general={},o.general.default=\"Validator failed for path `{PATH}` with value `{VALUE}`\",o.general.required=\"Path `{PATH}` is required.\",o.Number={},o.Number.min=\"Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).\",o.Number.max=\"Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).\",o.Number.enum=\"`{VALUE}` is not a valid enum value for path `{PATH}`.\",o.Date={},o.Date.min=\"Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).\",o.Date.max=\"Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).\",o.String={},o.String.enum=\"`{VALUE}` is not a valid enum value for path `{PATH}`.\",o.String.match=\"Path `{PATH}` is invalid ({VALUE}).\",o.String.minlength=\"Path `{PATH}` (`{VALUE}`) is shorter than the minimum allowed length ({MINLENGTH}).\",o.String.maxlength=\"Path `{PATH}` (`{VALUE}`) is longer than the maximum allowed length ({MAXLENGTH}).\"},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(9);class r extends o{constructor(t){super(\"Schema hasn't been registered for model \\\"\"+t+'\".\\nUse mongoose.model(name, schema)')}}Object.defineProperty(r.prototype,\"name\",{value:\"MissingSchemaError\"}),\n/*!\n * exports\n */\nt.exports=r},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(11),r=n(302),i=n(303),s=n(304);class c extends o{assimilateError(t){const e=t.reason;i(e)&&r(e)&&-1===t.message.indexOf(\"bad auth\")&&-1===t.message.indexOf(\"Authentication failed\")?this.message=\"Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/\":s(e)?this.message=\"Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html\":this.message=t.message;for(const e in t)\"name\"!==e&&(this[e]=t[e]);return this}}Object.defineProperty(c.prototype,\"name\",{value:\"MongooseServerSelectionError\"}),t.exports=c},function(t,e,n){\"use strict\";const o=n(14);t.exports=function(t){if(\"TopologyDescription\"!==o(t))return!1;const e=Array.from(t.servers.values());return e.length>0&&e.every(t=>\"Unknown\"===t.type)}},function(t,e,n){\"use strict\";const o=n(14);t.exports=function(t){if(\"TopologyDescription\"!==o(t))return!1;if(0===t.servers.size)return!1;for(const e of t.servers.values())if(!1===e.host.endsWith(\".mongodb.net\")||27017!==e.port)return!1;return!0}},function(t,e,n){\"use strict\";const o=n(14);t.exports=function(t){if(\"TopologyDescription\"!==o(t))return!1;const e=Array.from(t.servers.values());return e.length>0&&e.every(t=>t.error&&-1!==t.error.message.indexOf(\"Client network socket disconnected before secure TLS connection was established\"))}},function(t,e,n){\"use strict\";const o=n(34);\n/*!\n * ignore\n */t.exports=function(t){var e,n;t.$immutable?(t.$immutableSetter=(e=t.path,n=t.options.immutable,function(t,r,i,s){if(null==this||null==this.$__)return t;if(this.isNew)return t;if(s&&s.overwriteImmutable)return t;if(!(\"function\"==typeof n?n.call(this,this):n))return t;const c=null!=this.$__.priorDoc?this.$__.priorDoc.$__getValue(e):this.$__getValue(e);if(\"throw\"===this.$__.strictMode&&t!==c)throw new o(e,\"Path `\"+e+\"` is immutable and strict mode is set to throw.\",!0);return c}),t.set(t.$immutableSetter)):t.$immutableSetter&&(t.setters=t.setters.filter(e=>e!==t.$immutableSetter),delete t.$immutableSetter)}},function(t,e,n){\"use strict\";t.exports=function(t){return\"function\"==typeof t&&t.constructor&&\"AsyncFunction\"===t.constructor.name}},function(t,e,n){\"use strict\";t.exports=function(t){const e=Object.keys(t);let n=!0;for(let o=0,r=e.length;o<r;++o)if(\"object\"==typeof t[e[o]]&&null!==t[e[o]]){n=!1;break}return n}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(11);class r extends o{constructor(t){super(\"Can't validate() the same doc multiple times in parallel. Document: \"+t._id)}}Object.defineProperty(r.prototype,\"name\",{value:\"ParallelValidateError\"}),\n/*!\n * exports\n */\nt.exports=r},function(t,e,n){\"use strict\";const o=n(21);class r{constructor(t){Object.assign(this,t),null!=t&&null!=t.options&&(this.options=Object.assign({},t.options))}}Object.defineProperty(r.prototype,\"ref\",o),Object.defineProperty(r.prototype,\"refPath\",o),Object.defineProperty(r.prototype,\"localField\",o),Object.defineProperty(r.prototype,\"foreignField\",o),Object.defineProperty(r.prototype,\"justOne\",o),Object.defineProperty(r.prototype,\"count\",o),Object.defineProperty(r.prototype,\"match\",o),Object.defineProperty(r.prototype,\"options\",o),Object.defineProperty(r.prototype,\"skip\",o),Object.defineProperty(r.prototype,\"limit\",o),Object.defineProperty(r.prototype,\"perDocumentLimit\",o),t.exports=r},function(t,e,n){\"use strict\";const o=n(10),r=n(33),i=n(162);t.exports=function(t){let e=[];const n=new WeakMap,s=t.constructor.indexTypes,c=new Map;return function t(a,l,u){if(n.has(a))return;n.set(a,!0),l=l||\"\";const p=Object.keys(a.paths);for(const n of p){const i=a.paths[n];if(null!=u&&u.paths[n])continue;if(i.$isMongooseDocumentArray||i.$isSingleNested){if(!0!==o(i,\"options.excludeIndexes\")&&!0!==o(i,\"schemaOptions.excludeIndexes\")&&!0!==o(i,\"schema.options.excludeIndexes\")&&t(i.schema,l+n+\".\"),null!=i.schema.discriminators){const e=i.schema.discriminators,o=Object.keys(e);for(const r of o)t(e[r],l+n+\".\",i.schema)}if(i.$isMongooseDocumentArray)continue}const p=i._index||i.caster&&i.caster._index;if(!1!==p&&null!=p){const t={},o=r(p),i=o?p:{},u=\"string\"==typeof p?p:!!o&&p.type;if(u&&-1!==s.indexOf(u))t[l+n]=u;else if(i.text)t[l+n]=\"text\",delete i.text;else{const e=-1===Number(p);t[l+n]=e?-1:1}delete i.type,\"background\"in i||(i.background=!0),null!=a.options.autoIndex&&(i._autoIndex=a.options.autoIndex);const h=i&&i.name;\"string\"==typeof h&&c.has(h)?Object.assign(c.get(h),t):(e.push([t,i]),c.set(h,t))}}n.delete(a),l?function(t,n){const o=t._indexes,r=o.length;for(let t=0;t<r;++t){const r=o[t][0],i=o[t][1],s=Object.keys(r),c=s.length,a={};for(let t=0;t<c;++t){const e=s[t];a[n+e]=r[e]}const l=Object.assign({},i);if(null!=i&&null!=i.partialFilterExpression){l.partialFilterExpression={};const t=i.partialFilterExpression;for(const e of Object.keys(t))l.partialFilterExpression[n+e]=t[e]}e.push([a,l])}}(a,l):(a._indexes.forEach((function(t){const e=t[1];\"background\"in e||(e.background=!0),i(a,e)})),e=e.concat(a._indexes))}(t),e}},function(t,e,n){\"use strict\";\n/*!\n * ignore\n */function o(){return null!=this._id?String(this._id):null}t.exports=function(t){return!t.paths.id&&t.paths._id&&t.options.id?(t.virtual(\"id\").get(o),t):t}},function(t,e,n){\"use strict\";const o=n(164),r=n(166),i=n(10),s=n(165),c=n(313),a=n(43),l=new Set([\"replaceOne\",\"findOneAndReplace\"]);t.exports=function(t,e){const n=t.childSchemas.find((function(t){return!!t.schema.options.timestamps}));if(!e&&!n)return;const u=s(e,\"createdAt\"),p=s(e,\"updatedAt\"),h=null!=e&&e.hasOwnProperty(\"currentTime\")?e.currentTime:null,f={};if(t.$timestamps={createdAt:u,updatedAt:p},u&&!t.paths[u]){const e=null!=t.base?t.base.get(\"timestamps.createdAt.immutable\"):null,n=null==e||e;f[u]={[t.options.typeKey||\"type\"]:Date,immutable:n}}p&&!t.paths[p]&&(f[p]=Date),t.add(f),t.pre(\"save\",(function(t){const e=i(this,\"$__.saveOptions.timestamps\");if(!1===e)return t();c(this,e,h,u,p),t()})),t.methods.initializeTimestamps=function(){const t=null!=h?h():this.constructor.base.now();if(u&&!this.get(u)&&this.$set(u,t),p&&!this.get(p)&&this.$set(p,t),this.$isSubdocument)return this;const e=this.$getAllSubdocs();for(const t of e)t.initializeTimestamps&&t.initializeTimestamps();return this},y[a.builtInMiddleware]=!0;const d={query:!0,model:!1};function y(t){const e=null!=h?h():this.model.base.now();l.has(this.op)&&null==this.getUpdate()&&this.setUpdate({}),r(e,u,p,this.getUpdate(),this.options,this.schema),o(e,this.getUpdate(),this.model.schema),t()}t.pre(\"findOneAndReplace\",d,y),t.pre(\"findOneAndUpdate\",d,y),t.pre(\"replaceOne\",d,y),t.pre(\"update\",d,y),t.pre(\"updateOne\",d,y),t.pre(\"updateMany\",d,y)}},function(t,e,n){\"use strict\";t.exports=function(t,e,n,o,r){const i=null!=e&&!1===e.updatedAt,s=null!=e&&!1===e.createdAt,c=null!=n?n():t.ownerDocument().constructor.base.now();if(!s&&(t.isNew||t.$isSubdocument)&&o&&!t.$__getValue(o)&&t.$__isSelected(o)&&t.$set(o,c,void 0,{overwriteImmutable:!0}),!i&&r&&(t.isNew||t.$isModified())){let e=c;t.isNew&&null!=o&&(e=t.$__getValue(o)),t.$set(r,e)}}},function(t,e,n){\"use strict\";const o=n(11),r=n(2);t.exports=function(t,e){if(\"string\"==typeof t)return;if(\"function\"==typeof t)return;throw new o('Invalid ref at path \"'+e+'\". Got '+r.inspect(t,{depth:0}))}},function(t,e,n){\"use strict\";const o=n(95),r=n(17),i=n(170),s=n(24),c=n(35).internalToObjectOptions,a=n(3),l=n(16),u=n(1).arrayParentSymbol,p=n(1).arrayPathSymbol,h=n(1).arraySchemaSymbol,f=n(1).documentArrayParent,d={\n/*!\n   * ignore\n   */\ntoBSON(){return this.toObject(c)},\n/*!\n   * ignore\n   */\ngetArrayParent(){return this[u]},_cast(t,e){if(null==this[h])return t;let n=this[h].casterConstructor;if((n.$isMongooseDocumentArray?a.isMongooseDocumentArray(t):t instanceof n)||t&&t.constructor&&t.constructor.baseCasterConstructor===n)return t[f]&&t.__parentArray||(t[f]=this[u],t.__parentArray=this),t.$setIndex(e),t;if(null==t)return null;if((Buffer.isBuffer(t)||l(t,\"ObjectId\")||!a.isObject(t))&&(t={_id:t}),t&&n.discriminators&&n.schema&&n.schema.options&&n.schema.options.discriminatorKey)if(\"string\"==typeof t[n.schema.options.discriminatorKey]&&n.discriminators[t[n.schema.options.discriminatorKey]])n=n.discriminators[t[n.schema.options.discriminatorKey]];else{const e=s(n.discriminators,t[n.schema.options.discriminatorKey]);e&&(n=e)}if(n.$isMongooseDocumentArray)return n.cast(t,this,void 0,void 0,e);const o=new n(t,this,void 0,void 0,e);return o.isNew=!0,o},id(t){let e,n,o;try{e=i(t).toString()}catch(t){e=null}for(const i of this)if(i&&(o=i.get(\"_id\"),null!=o))if(o instanceof r){if(n||(n=String(t)),n==o._id)return i}else if(l(t,\"ObjectId\")||l(o,\"ObjectId\")){if(e==o)return i}else if(t==o||a.deepEqual(t,o))return i;return null},toObject(t){return[].concat(this.map((function(e){return null==e?null:\"function\"!=typeof e.toObject?e:e.toObject(t)})))},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},push(){const t=o.push.apply(this,arguments);return y(this),t},pull(){const t=o.pull.apply(this,arguments);return y(this),t},shift(){const t=o.shift.apply(this,arguments);return y(this),t},splice(){const t=o.splice.apply(this,arguments);return y(this),t},inspect(){return this.toObject()},create(t){let e=this[h].casterConstructor;if(t&&e.discriminators&&e.schema&&e.schema.options&&e.schema.options.discriminatorKey)if(\"string\"==typeof t[e.schema.options.discriminatorKey]&&e.discriminators[t[e.schema.options.discriminatorKey]])e=e.discriminators[t[e.schema.options.discriminatorKey]];else{const n=s(e.discriminators,t[e.schema.options.discriminatorKey]);n&&(e=n)}return new e(t,this)},\n/*!\n   * ignore\n   */\nnotify(t){const e=this;return function n(o,r){let i=(r=r||e).length;for(;i--;)if(null!=r[i]){switch(t){case\"save\":o=e[i]}a.isMongooseArray(r[i])?n(o,r[i]):r[i]&&r[i].emit(t,o)}}},set(t,e,n){const o=this.__array;if(n)return o[t]=e,this;const r=d._cast.call(this,e,t);return d._markModified.call(this,t),o[t]=r,this},_markModified(t,e){const n=this[u];let o;if(n){if(o=this[p],arguments.length)if(null!=e){o=o+\".\"+t.__index+\".\"+e}else o=o+\".\"+t;if(null!=o&&o.endsWith(\".$\"))return this;n.markModified(o,0!==arguments.length?t:n)}return this}};function y(t){const e=t[u];if(!e||null==e.$__.populated)return;const n=Object.keys(e.$__.populated).filter(e=>e.startsWith(t[p]+\".\"));for(const o of n){const n=o.slice((t[p]+\".\").length);Array.isArray(e.$__.populated[o].value)&&(e.$__.populated[o].value=t.map(t=>t.$populated(n)))}}t.exports=d},function(t,e,n){\"use strict\";t.exports=n(40).UUID},function(t,e,n){\"use strict\";const o=n(19);class r extends o{}const i=n(21);Object.defineProperty(r.prototype,\"enum\",i),Object.defineProperty(r.prototype,\"of\",i),Object.defineProperty(r.prototype,\"castNonArrays\",i),\n/*!\n * ignore\n */\nt.exports=r},function(t,e,n){\"use strict\";t.exports=function t(e){if(!Array.isArray(e))return{min:0,max:0,containsNonArrayItem:!0};if(0===e.length)return{min:1,max:1,containsNonArrayItem:!1};if(1===e.length&&!Array.isArray(e[0]))return{min:1,max:1,containsNonArrayItem:!1};const n=t(e[0]);for(let o=1;o<e.length;++o){const r=t(e[o]);r.min<n.min&&(n.min=r.min),r.max>n.max&&(n.max=r.max),n.containsNonArrayItem=n.containsNonArrayItem||r.containsNonArrayItem}return n.min=n.min+1,n.max=n.max+1,n}},function(t,e,n){\"use strict\";const o=n(15),r=n(34),i=n(72),s=new Set([\"$and\",\"$or\"]),c=new Set([\"$cmp\",\"$eq\",\"$lt\",\"$lte\",\"$gt\",\"$gte\"]),a=new Set([\"$multiply\",\"$divide\",\"$log\",\"$mod\",\"$trunc\",\"$avg\",\"$max\",\"$min\",\"$stdDevPop\",\"$stdDevSamp\",\"$sum\"]),l=new Set([\"$abs\",\"$exp\",\"$ceil\",\"$floor\",\"$ln\",\"$log10\",\"$round\",\"$sqrt\",\"$sin\",\"$cos\",\"$tan\",\"$asin\",\"$acos\",\"$atan\",\"$atan2\",\"$asinh\",\"$acosh\",\"$atanh\",\"$sinh\",\"$cosh\",\"$tanh\",\"$degreesToRadians\",\"$radiansToDegrees\"]),u=new Set([\"$arrayElemAt\",\"$first\",\"$last\"]),p=new Set([\"$year\",\"$month\",\"$week\",\"$dayOfMonth\",\"$dayOfYear\",\"$hour\",\"$minute\",\"$second\",\"$isoDayOfWeek\",\"$isoWeekYear\",\"$isoWeek\",\"$millisecond\"]),h=new Set([\"$not\"]);function f(t,e,n){if(g(t)||null===t)return t;null!=t.$cond?Array.isArray(t.$cond)?t.$cond=t.$cond.map(t=>f(t,e,n)):(t.$cond.if=f(t.$cond.if,e,n),t.$cond.then=f(t.$cond.then,e,n),t.$cond.else=f(t.$cond.else,e,n)):null!=t.$ifNull?t.$ifNull.map(t=>f(t,e,n)):null!=t.$switch&&(t.branches.map(t=>f(t,e,n)),t.default=f(t.default,e,n));const o=Object.keys(t);for(const r of o)s.has(r)?t[r]=t[r].map(t=>f(t,e,n)):c.has(r)?t[r]=m(t[r],e,n):a.has(r)?t[r]=y(t[r]):l.has(r)?t[r]=d(t[r]):h.has(r)&&(t[r]=f(t[r],e,n));return t.$in&&(t.$in=function(t,e,n){const o=t[1];if(!g(o))return t;const i=t[0],s=e.path(o.slice(1));if(null===s){if(!1===n)return t;if(\"throw\"===n)throw new r(\"$in\");return}if(!s.$isMongooseArray)throw new Error(\"Path must be an array for $in\");return[s.$isMongooseDocumentArray?s.$embeddedSchemaType.cast(i):s.caster.cast(i),o]}(t.$in,e,n)),t.$size&&(t.$size=d(t.$size)),function(t){const e=Object.keys(t);for(let n=0,o=e.length;n<o;++n)void 0===t[e[n]]&&delete t[e[n]]}(t),t}function d(t){if(!_(t))return t;try{return i(t)}catch(e){throw new o(\"Number\",t)}}function y(t){if(!Array.isArray(t)){if(!_(t))return t;try{return i(t)}catch(e){throw new o(\"Number\",t)}}return t.map(t=>{if(!_(t))return t;try{return i(t)}catch(e){throw new o(\"Number\",t)}})}function m(t,e,n){if(!Array.isArray(t)||2!==t.length)throw new Error(\"Comparison operator must be an array of length 2\");t[0]=f(t[0],e,n);const s=t[0];if(_(t[1])){let c=null,a=null,l=null;if(g(s))c=s.slice(1),a=e.path(c);else if(\"object\"==typeof s&&null!=s)for(const t of Object.keys(s))p.has(t)&&g(s[t])?(c=s[t].slice(1)+\".\"+t,l=i):u.has(t)&&g(s[t])&&(c=s[t].slice(1)+\".\"+t,a=e.path(s[t].slice(1)),null!=a&&(a.$isMongooseDocumentArray?a=a.$embeddedSchemaType:a.$isMongooseArray&&(a=a.caster)));const h=\"object\"==typeof t[1]&&null!=t[1]&&null!=t[1].$literal;if(null!=a)t[1]=h?{$literal:a.cast(t[1].$literal)}:a.cast(t[1]);else if(null!=l)if(h)try{t[1]={$literal:l(t[1].$literal)}}catch(e){throw new o(l.name.replace(/^cast/,\"\"),t[1],c+\".$literal\")}else try{t[1]=l(t[1])}catch(e){throw new o(l.name.replace(/^cast/,\"\"),t[1],c)}else{if(null!=c&&!0===n)return;if(null!=c&&\"throw\"===n)throw new r(c)}}else t[1]=f(t[1]);return t}function g(t){return\"string\"==typeof t&&\"$\"===t[0]}function _(t){return(\"string\"!=typeof t||\"$\"!==t[0])&&(\"object\"!=typeof t||null===t||!Object.keys(t).find(t=>\"$\"===t[0])||null!=t.$literal)}t.exports=function(t,e,n){if(\"object\"!=typeof t||null===t)throw new Error(\"`$expr` must be an object\");return f(t,e,n)}},function(t,e,n){\"use strict\";const o=n(15),r=n(91),i=n(172);t.exports=function(t,e){if(null==t||\"object\"!=typeof t)throw new o(\"$text\",t,e);return null!=t.$search&&(t.$search=i(t.$search,e+\".$search\")),null!=t.$language&&(t.$language=i(t.$language,e+\".$language\")),null!=t.$caseSensitive&&(t.$caseSensitive=r(t.$caseSensitive,e+\".$castSensitive\")),null!=t.$diacriticSensitive&&(t.$diacriticSensitive=r(t.$diacriticSensitive,e+\".$diacriticSensitive\")),t}},function(t,e,n){\"use strict\";const o=n(19);class r extends o{}const i=n(21);Object.defineProperty(r.prototype,\"min\",i),Object.defineProperty(r.prototype,\"max\",i),Object.defineProperty(r.prototype,\"enum\",i),Object.defineProperty(r.prototype,\"populate\",i),\n/*!\n * ignore\n */\nt.exports=r},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(15),r=n(13),i=n(91),s=n(3);function c(t,e){r.call(this,t,e,\"Boolean\")}c.schemaName=\"Boolean\",c.defaultOptions={},\n/*!\n * Inherits from SchemaType.\n */\nc.prototype=Object.create(r.prototype),c.prototype.constructor=c,\n/*!\n * ignore\n */\nc._cast=i,c.set=r.set,c.cast=function(t){return 0===arguments.length||(!1===t&&(t=this._defaultCaster),this._cast=t),this._cast},\n/*!\n * ignore\n */\nc._defaultCaster=t=>{if(null!=t&&\"boolean\"!=typeof t)throw new Error;return t},\n/*!\n * ignore\n */\nc._checkRequired=t=>!0===t||!1===t,c.checkRequired=r.checkRequired,c.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)},Object.defineProperty(c,\"convertToTrue\",{get:()=>i.convertToTrue,set:t=>{i.convertToTrue=t}}),Object.defineProperty(c,\"convertToFalse\",{get:()=>i.convertToFalse,set:t=>{i.convertToFalse=t}}),c.prototype.cast=function(t){let e;e=\"function\"==typeof this._castFunction?this._castFunction:\"function\"==typeof this.constructor.cast?this.constructor.cast():c.cast();try{return e(t)}catch(e){throw new o(\"Boolean\",t,this.path,e,this)}},c.$conditionalHandlers=s.options(r.prototype.$conditionalHandlers,{}),c.prototype.castForQuery=function(t,e,n){let o;return null!=t?(o=c.$conditionalHandlers[t],o?o.call(this,e):this.applySetters(null,e,n)):this.applySetters(e,n)},c.prototype._castNullish=function(t){if(void 0===t)return t;const e=\"function\"==typeof this.constructor.cast?this.constructor.cast():c.cast();return null==e?t:!(e.convertToFalse instanceof Set&&e.convertToFalse.has(t))&&(!!(e.convertToTrue instanceof Set&&e.convertToTrue.has(t))||t)},\n/*!\n * Module exports.\n */\nt.exports=c},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(15),r=n(13),i=n(324),s=n(3);function c(t,e){r.call(this,t,e,\"BigInt\")}\n/*!\n * ignore\n */\nfunction a(t,e){return this.castForQuery(null,t,e)}c.schemaName=\"BigInt\",c.defaultOptions={},\n/*!\n * Inherits from SchemaType.\n */\nc.prototype=Object.create(r.prototype),c.prototype.constructor=c,\n/*!\n * ignore\n */\nc._cast=i,c.set=r.set,c.cast=function(t){return 0===arguments.length||(!1===t&&(t=this._defaultCaster),this._cast=t),this._cast},\n/*!\n * ignore\n */\nc._checkRequired=t=>null!=t,c.checkRequired=r.checkRequired,c.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)},c.prototype.cast=function(t){let e;e=\"function\"==typeof this._castFunction?this._castFunction:\"function\"==typeof this.constructor.cast?this.constructor.cast():c.cast();try{return e(t)}catch(e){throw new o(\"BigInt\",t,this.path,e,this)}},\n/*!\n * ignore\n */\nc.$conditionalHandlers=s.options(r.prototype.$conditionalHandlers,{$gt:a,$gte:a,$lt:a,$lte:a}),c.prototype.castForQuery=function(t,e,n){let o;return null!=t?(o=c.$conditionalHandlers[t],o?o.call(this,e):this.applySetters(null,e,n)):this.applySetters(e,n)},c.prototype._castNullish=function(t){if(void 0===t)return t;\"function\"==typeof this.constructor.cast?this.constructor.cast():c.cast();return t},\n/*!\n * Module exports.\n */\nt.exports=c},function(t,e,n){\"use strict\";const o=n(46);t.exports=function(t){return null==t?t:\"\"===t?null:\"bigint\"==typeof t?t:\"string\"==typeof t||\"number\"==typeof t?BigInt(t):void o.ok(!1)}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(70),r=n(326),i=n(13),s=n(102),c=n(3),a=o.Binary,l=i.CastError;function u(t,e){i.call(this,t,e,\"Buffer\")}\n/*!\n * ignore\n */\nfunction p(t,e){return this.castForQuery(null,t,e)}u.schemaName=\"Buffer\",u.defaultOptions={},\n/*!\n * Inherits from SchemaType.\n */\nu.prototype=Object.create(i.prototype),u.prototype.constructor=u,u.prototype.OptionsConstructor=r,\n/*!\n * ignore\n */\nu._checkRequired=t=>!(!t||!t.length),u.set=i.set,u.checkRequired=i.checkRequired,u.prototype.checkRequired=function(t,e){return i._isRef(this,t,e,!0)?!!t:this.constructor._checkRequired(t)},u.prototype.cast=function(t,e,n){let r;if(i._isRef(this,t,e,n)){if(t&&t.isMongooseBuffer)return t;if(Buffer.isBuffer(t))return t&&t.isMongooseBuffer||(t=new o(t,[this.path,e]),null!=this.options.subtype&&(t._subtype=this.options.subtype)),t;if(t instanceof a){if(r=new o(t.value(!0),[this.path,e]),\"number\"!=typeof t.sub_type)throw new l(\"Buffer\",t,this.path,null,this);return r._subtype=t.sub_type,r}if(null==t||c.isNonBuiltinObject(t))return this._castRef(t,e,n)}if(t&&t._id&&(t=t._id),t&&t.isMongooseBuffer)return t;if(Buffer.isBuffer(t))return t&&t.isMongooseBuffer||(t=new o(t,[this.path,e]),null!=this.options.subtype&&(t._subtype=this.options.subtype)),t;if(t instanceof a){if(r=new o(t.value(!0),[this.path,e]),\"number\"!=typeof t.sub_type)throw new l(\"Buffer\",t,this.path,null,this);return r._subtype=t.sub_type,r}if(null===t)return t;const s=typeof t;if(\"string\"===s||\"number\"===s||Array.isArray(t)||\"object\"===s&&\"Buffer\"===t.type&&Array.isArray(t.data))return\"number\"===s&&(t=[t]),r=new o(t,[this.path,e]),null!=this.options.subtype&&(r._subtype=this.options.subtype),r;throw new l(\"Buffer\",t,this.path,null,this)},u.prototype.subtype=function(t){return this.options.subtype=t,this},u.prototype.$conditionalHandlers=c.options(i.prototype.$conditionalHandlers,{$bitsAllClear:s,$bitsAnyClear:s,$bitsAllSet:s,$bitsAnySet:s,$gt:p,$gte:p,$lt:p,$lte:p}),u.prototype.castForQuery=function(t,e,n){let o;if(null!=t){if(o=this.$conditionalHandlers[t],!o)throw new Error(\"Can't use \"+t+\" with Buffer.\");return o.call(this,e)}const r=this.applySetters(e,n);return r?r.toObject({transform:!1,virtuals:!1}):r},\n/*!\n * Module exports.\n */\nt.exports=u},function(t,e,n){\"use strict\";const o=n(19);class r extends o{}const i=n(21);Object.defineProperty(r.prototype,\"subtype\",i),\n/*!\n * ignore\n */\nt.exports=r},function(t,e,n){\"use strict\";\n/*!\n * Module requirements.\n */const o=n(9),r=n(328),i=n(13),s=n(329),c=n(14),a=n(3),l=i.CastError;function u(t,e){i.call(this,t,e,\"Date\")}function p(t){return this.cast(t)}u.schemaName=\"Date\",u.defaultOptions={},\n/*!\n * Inherits from SchemaType.\n */\nu.prototype=Object.create(i.prototype),u.prototype.constructor=u,u.prototype.OptionsConstructor=r,\n/*!\n * ignore\n */\nu._cast=s,u.set=i.set,u.cast=function(t){return 0===arguments.length||(!1===t&&(t=this._defaultCaster),this._cast=t),this._cast},\n/*!\n * ignore\n */\nu._defaultCaster=t=>{if(null!=t&&!(t instanceof Date))throw new Error;return t},u.prototype.expires=function(t){return\"Object\"!==c(this._index)&&(this._index={}),this._index.expires=t,a.expires(this._index),this},\n/*!\n * ignore\n */\nu._checkRequired=t=>t instanceof Date,u.checkRequired=i.checkRequired,u.prototype.checkRequired=function(t,e){if(\"object\"==typeof t&&i._isRef(this,t,e,!0))return null!=t;return(\"function\"==typeof this.constructor.checkRequired?this.constructor.checkRequired():u.checkRequired())(t)},u.prototype.min=function(t,e){if(this.minValidator&&(this.validators=this.validators.filter((function(t){return t.validator!==this.minValidator}),this)),t){let n=e||o.messages.Date.min;\"string\"==typeof n&&(n=n.replace(/{MIN}/,t===Date.now?\"Date.now()\":t.toString()));const r=this;this.validators.push({validator:this.minValidator=function(e){let n=t;\"function\"==typeof t&&t!==Date.now&&(n=n.call(this));const o=n===Date.now?n():r.cast(n);return null===e||e.valueOf()>=o.valueOf()},message:n,type:\"min\",min:t})}return this},u.prototype.max=function(t,e){if(this.maxValidator&&(this.validators=this.validators.filter((function(t){return t.validator!==this.maxValidator}),this)),t){let n=e||o.messages.Date.max;\"string\"==typeof n&&(n=n.replace(/{MAX}/,t===Date.now?\"Date.now()\":t.toString()));const r=this;this.validators.push({validator:this.maxValidator=function(e){let n=t;\"function\"==typeof n&&n!==Date.now&&(n=n.call(this));const o=n===Date.now?n():r.cast(n);return null===e||e.valueOf()<=o.valueOf()},message:n,type:\"max\",max:t})}return this},u.prototype.cast=function(t){let e;e=\"function\"==typeof this._castFunction?this._castFunction:\"function\"==typeof this.constructor.cast?this.constructor.cast():u.cast();try{return e(t)}catch(e){throw new l(\"date\",t,this.path,e,this)}},u.prototype.$conditionalHandlers=a.options(i.prototype.$conditionalHandlers,{$gt:p,$gte:p,$lt:p,$lte:p}),u.prototype.castForQuery=function(t,e,n){if(null==t)return this.applySetters(e,n);const o=this.$conditionalHandlers[t];if(!o)throw new Error(\"Can't use \"+t+\" with Date.\");return o.call(this,e)},\n/*!\n * Module exports.\n */\nt.exports=u},function(t,e,n){\"use strict\";const o=n(19);class r extends o{}const i=n(21);Object.defineProperty(r.prototype,\"min\",i),Object.defineProperty(r.prototype,\"max\",i),Object.defineProperty(r.prototype,\"expires\",i),\n/*!\n * ignore\n */\nt.exports=r},function(t,e,n){\"use strict\";const o=n(46);t.exports=function(t){if(null==t||\"\"===t)return null;if(t instanceof Date)return o.ok(!isNaN(t.valueOf())),t;let e;if(o.ok(\"boolean\"!=typeof t),e=t instanceof Number||\"number\"==typeof t?new Date(t):\"string\"==typeof t&&!isNaN(Number(t))&&(Number(t)>=275761||Number(t)<-271820)?new Date(Number(t)):\"function\"==typeof t.valueOf?new Date(t.valueOf()):new Date(t),!isNaN(e.valueOf()))return e;o.ok(!1)}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(13),r=o.CastError,i=n(331),s=n(3),c=n(16);function a(t,e){o.call(this,t,e,\"Decimal128\")}\n/*!\n * ignore\n */\nfunction l(t){return this.cast(t)}a.schemaName=\"Decimal128\",a.defaultOptions={},\n/*!\n * Inherits from SchemaType.\n */\na.prototype=Object.create(o.prototype),a.prototype.constructor=a,\n/*!\n * ignore\n */\na._cast=i,a.set=o.set,a.cast=function(t){return 0===arguments.length||(!1===t&&(t=this._defaultCaster),this._cast=t),this._cast},\n/*!\n * ignore\n */\na._defaultCaster=t=>{if(null!=t&&!c(t,\"Decimal128\"))throw new Error;return t},\n/*!\n * ignore\n */\na._checkRequired=t=>c(t,\"Decimal128\"),a.checkRequired=o.checkRequired,a.prototype.checkRequired=function(t,e){if(o._isRef(this,t,e,!0))return!!t;return(\"function\"==typeof this.constructor.checkRequired?this.constructor.checkRequired():a.checkRequired())(t)},a.prototype.cast=function(t,e,n){if(o._isRef(this,t,e,n))return c(t,\"Decimal128\")?t:this._castRef(t,e,n);let i;i=\"function\"==typeof this._castFunction?this._castFunction:\"function\"==typeof this.constructor.cast?this.constructor.cast():a.cast();try{return i(t)}catch(e){throw new r(\"Decimal128\",t,this.path,e,this)}},a.prototype.$conditionalHandlers=s.options(o.prototype.$conditionalHandlers,{$gt:l,$gte:l,$lt:l,$lte:l}),\n/*!\n * Module exports.\n */\nt.exports=a},function(t,e,n){\"use strict\";const o=n(85),r=n(46);t.exports=function(t){return null==t?t:\"object\"==typeof t&&\"string\"==typeof t.$numberDecimal?o.fromString(t.$numberDecimal):t instanceof o?t:\"string\"==typeof t?o.fromString(t):\"function\"==typeof Buffer&&Buffer.isBuffer(t)||\"function\"==typeof Uint8Array&&t instanceof Uint8Array?new o(t):\"number\"==typeof t?o.fromString(String(t)):\"function\"==typeof t.valueOf&&\"string\"==typeof t.valueOf()?o.fromString(t.valueOf()):void r.ok(!1)}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(99),r=n(15),i=n(8).EventEmitter,s=n(333),c=n(13),a=n(175),l=n(104),u=n(178),p=n(98),h=n(3),f=n(177),d=n(1).arrayAtomicsSymbol,y=n(1).arrayPathSymbol,m=n(1).documentArrayParent;let g,_;function b(t,e,n,r){const i=b.defaultOptions&&b.defaultOptions._id;null!=i&&((r=r||{})._id=i),null!=r&&null!=r._id?e=u(e,r):null!=n&&null!=n._id&&(e=u(e,n));const s=O(e,n);s.prototype.$basePath=t,o.call(this,t,s,n),this.schema=e,this.schemaOptions=r||{},this.$isMongooseDocumentArray=!0,this.Constructor=s,s.base=e.base;const l=this.defaultValue;\"defaultValue\"in this&&void 0===l||this.default((function(){let t=l.call(this);return null==t||Array.isArray(t)||(t=[t]),t}));const p=this;this.$embeddedSchemaType=new c(t+\".$\",{required:this&&this.schemaOptions&&this.schemaOptions.required||!1}),this.$embeddedSchemaType.cast=function(t,e,n){return p.cast(t,e,n)[0]},this.$embeddedSchemaType.doValidate=function(t,e,n,o){const r=f(this.caster,t);return!t||t instanceof r||(t=new r(t,n,null,null,o&&null!=o.index?o.index:null)),a.prototype.doValidate.call(this,t,e,n,o)},this.$embeddedSchemaType.$isMongooseDocumentArrayElement=!0,this.$embeddedSchemaType.caster=this.Constructor,this.$embeddedSchemaType.schema=this.schema}\n/*!\n * ignore\n */\nfunction O(t,e,o){function r(){_.apply(this,arguments),null!=this.__parentArray&&null!=this.__parentArray.getArrayParent()&&this.$session(this.__parentArray.getArrayParent().$session())}_||(_=n(54)),t._preCompile();const s=null!=o?o.prototype:_.prototype;r.prototype=Object.create(s),r.prototype.$__setSchema(t),r.schema=t,r.prototype.constructor=r,r.$isArraySubdocument=!0,r.events=new i,r.base=t.base;for(const e in t.methods)r.prototype[e]=t.methods[e];for(const e in t.statics)r[e]=t.statics[e];for(const t in i.prototype)r[t]=i.prototype[t];return r.options=e,r}b.schemaName=\"DocumentArray\",b.options={castNonArrays:!0},\n/*!\n * Inherits from ArrayType.\n */\nb.prototype=Object.create(o.prototype),b.prototype.constructor=b,b.prototype.OptionsConstructor=s,b.prototype.discriminator=function(t,e,n){\"function\"==typeof t&&(t=h.getFunctionName(t)),n=n||{};const o=h.isPOJO(n)?n.value:n,r=\"boolean\"!=typeof n.clone||n.clone;e.instanceOfSchema&&r&&(e=e.clone());const i=O(e=l(this.casterConstructor,t,e,o),null,this.casterConstructor);i.baseCasterConstructor=this.casterConstructor;try{Object.defineProperty(i,\"name\",{value:t})}catch(t){}return this.casterConstructor.discriminators[t]=i,this.casterConstructor.discriminators[t]},b.prototype.doValidate=function(t,e,o,r){g||(g=n(44));const i=this;try{c.prototype.doValidate.call(this,t,(function(n){if(n)return e(n);let s,c=t&&t.length;if(!c)return e();if(r&&r.updateValidator)return e();h.isMongooseDocumentArray(t)||(t=new g(t,i.path,o));function a(t){null!=t&&(s=t),--c||e(s)}for(let n=0,o=c;n<o;++n){let o=t[n];if(null!=o){if(!(o instanceof _)){const e=f(i.casterConstructor,t[n]);o=t[n]=new e(o,t,void 0,void 0,n)}null==r||!r.validateModifiedOnly||o.$isModified()?o.$__validate(a):--c||e(s)}else--c||e(s)}}),o)}catch(t){return e(t)}},b.prototype.doValidateSync=function(t,e,n){const o=c.prototype.doValidateSync.call(this,t,e);if(null!=o)return o;const r=t&&t.length;let i=null;if(r){for(let e=0,o=r;e<o;++e){let o=t[e];if(!o)continue;if(!(o instanceof _)){const n=f(this.casterConstructor,t[e]);o=t[e]=new n(o,t,void 0,void 0,e)}if(null!=n&&n.validateModifiedOnly&&!o.$isModified())continue;const r=o.validateSync();r&&null==i&&(i=r)}return i}},\n/*!\n * ignore\n */\nb.prototype.getDefault=function(t,e,o){let r=\"function\"==typeof this.defaultValue?this.defaultValue.call(t):this.defaultValue;if(null==r)return r;if(o&&o.skipCast)return r;g||(g=n(44)),Array.isArray(r)||(r=[r]),r=new g(r,this.path,t);for(let t=0;t<r.length;++t){const e=new(f(this.casterConstructor,r[t]))({},r,void 0,void 0,t);e.$init(r[t]),e.isNew=!0,Object.assign(e.$__.activePaths.default,e.$__.activePaths.init),e.$__.activePaths.init={},r[t]=e}return r};const $=Object.freeze({transform:!1,virtuals:!1}),w=Object.freeze({skipId:!1,willInit:!0});function v(t,e,n){if(!n||!e)return;const o=t.path+\".\",r=Object.keys(e);let i=r.length;const s={};let c,a,l;for(;i--;)if(a=r[i],a.startsWith(o)){if(l=a.substring(o.length),\"$\"===l)continue;l.startsWith(\"$.\")&&(l=l.substring(2)),c||(c=!0),s[l]=e[a]}return c&&s||void 0}\n/*!\n * ignore\n */b.prototype.cast=function(t,e,o,i,s){if(g||(g=n(44)),null!=t&&null!=t[y]&&t===i)return t;let c,a;const l=(s=s||{}).path||this.path;if(!Array.isArray(t)){if(!o&&!b.options.castNonArrays)throw new r(\"DocumentArray\",t,this.path,null,this);return e&&o&&e.markModified(l),this.cast([t],e,o,i,s)}s.skipDocumentArrayCast&&!h.isMongooseDocumentArray(t)||(t=new g(t,l,e)),null!=i&&(t[d]=i[d]||{}),null!=s.arrayPathIndex&&(t[y]=l+\".\"+s.arrayPathIndex);const u=h.isMongooseDocumentArray(t)?t.__array:t,O=u.length;for(let n=0;n<O;++n){if(!u[n])continue;const s=f(this.casterConstructor,u[n]);if(null!=u[n].$__&&!(u[n]instanceof s)){const t=p(u[n],!0);u[n]!==t?u[n]=t:u[n]=u[n].toObject({transform:!1,virtuals:u[n].schema===s.schema})}if(u[n]instanceof _){if(u[n][m]!==e)if(o){const e=new s(null,t,w,c,n);u[n]=e.$init(u[n])}else{const e=new s(u[n],t,void 0,void 0,n);u[n]=e}null==u[n].__index&&u[n].$setIndex(n)}else if(null!=u[n])if(o)e?c||(c=v(this,e.$__.selected,o)):c=!0,a=new s(null,t,w,c,n),u[n]=a.$init(u[n]);else if(i&&\"function\"==typeof i.id&&(a=i.id(u[n]._id)),i&&a&&h.deepEqual(a.toObject($),u[n]))a.set(u[n]),u[n]=a;else try{a=new s(u[n],t,void 0,void 0,n),u[n]=a}catch(e){throw new r(\"embedded\",u[n],t[y],e,this)}}return t},\n/*!\n * ignore\n */\nb.prototype.clone=function(){const t=Object.assign({},this.options),e=new this.constructor(this.path,this.schema,t,this.schemaOptions);return e.validators=this.validators.slice(),void 0!==this.requiredValidator&&(e.requiredValidator=this.requiredValidator),e.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),e},\n/*!\n * ignore\n */\nb.prototype.applyGetters=function(t,e){return c.prototype.applyGetters.call(this,t,e)},b.defaultOptions={},b.set=c.set,\n/*!\n * Module exports.\n */\nt.exports=b},function(t,e,n){\"use strict\";const o=n(19);class r extends o{}const i=n(21);Object.defineProperty(r.prototype,\"excludeIndexes\",i),Object.defineProperty(r.prototype,\"_id\",i),\n/*!\n * ignore\n */\nt.exports=r},function(t,e,n){\"use strict\";const o=n(19);class r extends o{}const i=n(21);Object.defineProperty(r.prototype,\"_id\",i),t.exports=r},function(t,e,n){\"use strict\";const o=n(176);t.exports=function(t){for(const e of Object.values(o))e(t,{deduplicate:!0});t.plugins=Object.values(o).map(t=>({fn:t,opts:{deduplicate:!0}})).concat(t.plugins)}},function(t,e,n){\"use strict\";const o=n(105);\n/*!\n * ignore\n */t.exports=function(t){t.s.hooks.pre(\"deleteOne\",{document:!0,query:!1},(function(t){if(this.$isSubdocument)return void t();if(null==this.$__)return void t();const e=this,n=this.$getAllSubdocs();o(n,(function(t,e){t.$__deleteOne(e)}),(function(n){if(n)return e.$__schema.s.hooks.execPost(\"deleteOne:error\",e,[e],{error:n},(function(e){t(e)}));t()}))}),null,!0)}},function(t,e,n){\"use strict\";const o=n(105);\n/*!\n * ignore\n */t.exports=function(t){t.s.hooks.pre(\"save\",!1,(function(t){if(this.$isSubdocument)return void t();const e=this,n=this.$getAllSubdocs();n.length?o(n,(function(t,e){t.$__schema.s.hooks.execPre(\"save\",t,(function(t){e(t)}))}),(function(n){if(n)return e.$__schema.s.hooks.execPost(\"save:error\",e,[e],{error:n},(function(e){t(e)}));t()})):t()}),null,!0),t.s.hooks.post(\"save\",(function(t,e){if(this.$isSubdocument)return void e();const n=this,r=this.$getAllSubdocs();r.length?o(r,(function(t,e){t.$__schema.s.hooks.execPost(\"save\",t,[t],(function(t){e(t)}))}),(function(t){if(t)return n.$__schema.s.hooks.execPost(\"save:error\",n,[n],{error:t},(function(t){e(t)}));e()})):e()}),null,!0)}},function(t,e,n){\"use strict\";const o=n(1).objectIdSymbol,r=n(3);\n/*!\n * ignore\n */\nfunction i(){let t,e;if(this.$__.shardval){t=Object.keys(this.$__.shardval),e=t.length,this.$where=this.$where||{};for(let n=0;n<e;++n)this.$where[t[n]]=this.$__.shardval[t[n]]}}\n/*!\n * ignore\n */\n/*!\n * ignore\n */\nfunction s(){const t=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(!r.isPOJO(t))return;const e=this.$__.shardval={},n=Object.keys(t),i=n.length;let s;for(let t=0;t<i;++t)s=this.$__getValue(n[t]),null==s?e[n[t]]=s:r.isMongooseObject(s)?e[n[t]]=s.toObject({depopulate:!0,_isNested:!0}):s instanceof Date||s[o]?e[n[t]]=s:\"function\"==typeof s.valueOf?e[n[t]]=s.valueOf():e[n[t]]=s}\n/*!\n * ignore\n */\nt.exports=function(t){t.post(\"init\",(function(){return s.call(this),this})),t.pre(\"save\",(function(t){i.call(this),t()})),t.pre(\"remove\",(function(t){i.call(this),t()})),t.post(\"save\",(function(){s.call(this)}))},t.exports.storeShard=s},function(t,e,n){\"use strict\";const o=n(1).arrayAtomicsSymbol,r=n(1).sessionNewDocuments,i=n(3);function s(t,e){const n=new Map;e=e||new Map;const r=Object.keys(t.$__.activePaths.init).concat(Object.keys(t.$__.activePaths.modify));for(const s of r){const r=t.$__getValue(s);if(null!=r&&Array.isArray(r)&&i.isMongooseDocumentArray(r)&&r.length&&null!=r[o]&&0!==Object.keys(r[o]).length){const t=e.get(s)||{};n.set(s,c(t,r[o]))}}const s=t.$__dirty();for(const t of s){const r=t.path,i=t.value;if(null!=i&&null!=i[o]&&0!==Object.keys(i[o]).length){const t=e.get(r)||{};n.set(r,c(t,i[o]))}}return n}function c(t,e){return t=t||{},null!=e.$pullAll&&(t.$pullAll=(t.$pullAll||[]).concat(e.$pullAll)),null!=e.$push&&(t.$push=t.$push||{},t.$push.$each=(t.$push.$each||[]).concat(e.$push.$each)),null!=e.$addToSet&&(t.$addToSet=(t.$addToSet||[]).concat(e.$addToSet)),null!=e.$set&&(t.$set=Object.assign(t.$set||{},e.$set)),t}t.exports=function(t){t.pre(\"save\",(function(){const t=this.$session();if(null!=t&&null!=t.transaction&&null!=t[r])if(t[r].has(this)){const e=t[r].get(this);for(const t of Object.keys(this.$__.activePaths.getStatePaths(\"modify\")))e.modifiedPaths.add(t);e.atomics=s(this,e.atomics)}else{const e={};this.isNew&&(e.isNew=!0),this.$__schema.options.versionKey&&(e.versionKey=this.get(this.$__schema.options.versionKey)),e.modifiedPaths=new Set(Object.keys(this.$__.activePaths.getStatePaths(\"modify\"))),e.atomics=s(this),t[r].set(this,e)}}))}},function(t,e,n){\"use strict\";\n/*!\n * ignore\n */t.exports=function(t){t.pre(\"save\",!1,(function(t,e){const n=this;if(this.$isSubdocument)return t();let o;if(o=e&&\"object\"==typeof e&&\"validateBeforeSave\"in e?!!e.validateBeforeSave:this.$__schema.options.validateBeforeSave,o){const o=e&&\"object\"==typeof e&&\"validateModifiedOnly\"in e?{validateModifiedOnly:e.validateModifiedOnly}:null;this.$validate(o).then(()=>{this.$op=\"save\",t()},e=>{n.$__schema.s.hooks.execPost(\"save:error\",n,[n],{error:e},(function(e){n.$op=\"save\",t(e)}))})}else t()}),null,!0)}},function(t,e,n){\"use strict\";const o=n(88),r=n(50),i=n(16),s=n(27),c=n(33);t.exports=function t(e,n,a,l){const u=Object.keys(n);let p=0;const h=u.length;let f;if(a=a||\"\",!(l=l||new WeakSet).has(n))for(l.add(n);p<h;)if(f=u[p++],(a||\"discriminators\"!==f&&\"base\"!==f&&\"_applyDiscriminators\"!==f&&\"_userProvidedOptions\"!==f&&\"options\"!==f)&&!(\"tree\"===a&&null!=n&&n.instanceOfSchema||r.has(f)))if(null==e[f])e[f]=n[f];else if(c(n[f])){if(c(e[f])||(e[f]={}),null!=n[f]){if(n[f].$isSingleNested&&e[f].$isMongooseDocumentArray||n[f].$isMongooseDocumentArray&&e[f].$isSingleNested)continue;if(n[f].instanceOfSchema){e[f].instanceOfSchema?o(e[f],n[f].clone(),!0):e[f]=n[f].clone();continue}if(i(n[f],\"ObjectId\")){e[f]=new s(n[f]);continue}}t(e[f],n[f],a?a+\".\"+f:f,l)}}},function(t,e,n){\"use strict\";\n/*!\n * ignore\n */const o=n(97),r=n(343),i=n(13);\n/*!\n * ignore\n */\nclass s extends i{constructor(t,e){super(t,e,\"Map\"),this.$isSchemaMap=!0}set(t,e){return i.set(t,e)}cast(t,e,n){if(t instanceof o)return t;const r=this.path;if(n){const n=new o({},r,e,this.$__schemaType);if(t instanceof global.Map)for(const o of t.keys()){let i=t.get(o);i=null==i?n.$__schemaType._castNullish(i):n.$__schemaType.cast(i,e,!0,null,{path:r+\".\"+o}),n.$init(o,i)}else for(const o of Object.keys(t)){let i=t[o];i=null==i?n.$__schemaType._castNullish(i):n.$__schemaType.cast(i,e,!0,null,{path:r+\".\"+o}),n.$init(o,i)}return n}return new o(t,r,e,this.$__schemaType)}clone(){const t=super.clone();return null!=this.$__schemaType&&(t.$__schemaType=this.$__schemaType.clone()),t}}s.schemaName=\"Map\",s.prototype.OptionsConstructor=r,s.defaultOptions={},t.exports=s},function(t,e,n){\"use strict\";const o=n(19);class r extends o{}const i=n(21);Object.defineProperty(r.prototype,\"of\",i),t.exports=r},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(345),r=n(13),i=n(170),s=n(14),c=n(27),a=n(16),l=n(3),u=r.CastError;let p;function h(t,e){const n=\"string\"==typeof t&&24===t.length&&/^[a-f0-9]+$/i.test(t),o=e&&e.suppressWarning;!n&&void 0!==t||o||l.warn(\"mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema.\"),r.call(this,t,e,\"ObjectId\")}\n/*!\n * ignore\n */\nfunction f(t){return this.cast(t)}\n/*!\n * ignore\n */\nfunction d(){return new c}function y(t){if(p||(p=n(17)),this instanceof p&&void 0===t){return new c}return t}\n/*!\n * Module exports.\n */h.schemaName=\"ObjectId\",h.defaultOptions={},\n/*!\n * Inherits from SchemaType.\n */\nh.prototype=Object.create(r.prototype),h.prototype.constructor=h,h.prototype.OptionsConstructor=o,h.get=r.get,h.set=r.set,h.prototype.auto=function(t){return t&&(this.default(d),this.set(y)),this},\n/*!\n * ignore\n */\nh._checkRequired=t=>a(t,\"ObjectId\")\n/*!\n * ignore\n */,h._cast=i,h.cast=function(t){return 0===arguments.length||(!1===t&&(t=this._defaultCaster),this._cast=t),this._cast},\n/*!\n * ignore\n */\nh._defaultCaster=t=>{if(!a(t,\"ObjectId\"))throw new Error(t+\" is not an instance of ObjectId\");return t},h.checkRequired=r.checkRequired,h.prototype.checkRequired=function(t,e){if(r._isRef(this,t,e,!0))return!!t;return(\"function\"==typeof this.constructor.checkRequired?this.constructor.checkRequired():h.checkRequired())(t)},h.prototype.cast=function(t,e,n){if(!a(t,\"ObjectId\")&&r._isRef(this,t,e,n)){if(\"objectid\"===(s(t)||\"\").toLowerCase())return new c(t.toHexString());if(null==t||l.isNonBuiltinObject(t))return this._castRef(t,e,n)}let o;o=\"function\"==typeof this._castFunction?this._castFunction:\"function\"==typeof this.constructor.cast?this.constructor.cast():h.cast();try{return o(t)}catch(e){throw new u(\"ObjectId\",t,this.path,e,this)}},h.prototype.$conditionalHandlers=l.options(r.prototype.$conditionalHandlers,{$gt:f,$gte:f,$lt:f,$lte:f}),d.$runBeforeSetters=!0,t.exports=h},function(t,e,n){\"use strict\";const o=n(19);class r extends o{}const i=n(21);Object.defineProperty(r.prototype,\"auto\",i),Object.defineProperty(r.prototype,\"populate\",i),\n/*!\n * ignore\n */\nt.exports=r},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(13),r=n(9),i=n(347),s=n(172),c=n(3),a=n(16),l=o.CastError;function u(t,e){this.enumValues=[],this.regExp=null,o.call(this,t,e,\"String\")}\n/*!\n * ignore\n */\nfunction p(t,e){return this.castForQuery(null,t,e)}\n/*!\n * ignore\n */\n/*!\n * ignore\n */\nfunction h(t){return null==t?this._castNullish(t):this.cast(t,this)}u.schemaName=\"String\",u.defaultOptions={},\n/*!\n * Inherits from SchemaType.\n */\nu.prototype=Object.create(o.prototype),u.prototype.constructor=u,Object.defineProperty(u.prototype,\"OptionsConstructor\",{configurable:!1,enumerable:!1,writable:!1,value:i}),\n/*!\n * ignore\n */\nu._cast=s,u.cast=function(t){return 0===arguments.length||(!1===t&&(t=this._defaultCaster),this._cast=t),this._cast},\n/*!\n * ignore\n */\nu._defaultCaster=t=>{if(null!=t&&\"string\"!=typeof t)throw new Error;return t},u.get=o.get,u.set=o.set,\n/*!\n * ignore\n */\nu._checkRequired=t=>(t instanceof String||\"string\"==typeof t)&&t.length,u.checkRequired=o.checkRequired,u.prototype.enum=function(){if(this.enumValidator&&(this.validators=this.validators.filter((function(t){return t.validator!==this.enumValidator}),this),this.enumValidator=!1),void 0===arguments[0]||!1===arguments[0])return this;let t,e;c.isObject(arguments[0])?Array.isArray(arguments[0].values)?(t=arguments[0].values,e=arguments[0].message):(t=c.object.vals(arguments[0]),e=r.messages.String.enum):(t=arguments,e=r.messages.String.enum);for(const e of t)void 0!==e&&this.enumValues.push(this.cast(e));const n=this.enumValues;return this.enumValidator=function(t){return void 0===t||~n.indexOf(t)},this.validators.push({validator:this.enumValidator,message:e,type:\"enum\",enumValues:n}),this},u.prototype.lowercase=function(t){return arguments.length>0&&!t?this:this.set(t=>(\"string\"!=typeof t&&(t=this.cast(t)),t?t.toLowerCase():t))},u.prototype.uppercase=function(t){return arguments.length>0&&!t?this:this.set(t=>(\"string\"!=typeof t&&(t=this.cast(t)),t?t.toUpperCase():t))},u.prototype.trim=function(t){return arguments.length>0&&!t?this:this.set(t=>(\"string\"!=typeof t&&(t=this.cast(t)),t?t.trim():t))},u.prototype.minlength=function(t,e){if(this.minlengthValidator&&(this.validators=this.validators.filter((function(t){return t.validator!==this.minlengthValidator}),this)),null!=t){let n=e||r.messages.String.minlength;n=n.replace(/{MINLENGTH}/,t),this.validators.push({validator:this.minlengthValidator=function(e){return null===e||e.length>=t},message:n,type:\"minlength\",minlength:t})}return this},u.prototype.minLength=u.prototype.minlength,u.prototype.maxlength=function(t,e){if(this.maxlengthValidator&&(this.validators=this.validators.filter((function(t){return t.validator!==this.maxlengthValidator}),this)),null!=t){let n=e||r.messages.String.maxlength;n=n.replace(/{MAXLENGTH}/,t),this.validators.push({validator:this.maxlengthValidator=function(e){return null===e||e.length<=t},message:n,type:\"maxlength\",maxlength:t})}return this},u.prototype.maxLength=u.prototype.maxlength,u.prototype.match=function(t,e){const n=e||r.messages.String.match;return this.validators.push({validator:function(e){if(!t)return!1;t.lastIndex=0;return null==e||\"\"===e||t.test(e)},message:n,type:\"regexp\",regexp:t}),this},u.prototype.checkRequired=function(t,e){if(\"object\"==typeof t&&o._isRef(this,t,e,!0))return null!=t;return(\"function\"==typeof this.constructor.checkRequired?this.constructor.checkRequired():u.checkRequired())(t)},u.prototype.cast=function(t,e,n){if(\"string\"!=typeof t&&o._isRef(this,t,e,n))return this._castRef(t,e,n);let r;r=\"function\"==typeof this._castFunction?this._castFunction:\"function\"==typeof this.constructor.cast?this.constructor.cast():u.cast();try{return r(t)}catch(e){throw new l(\"string\",t,this.path,null,this)}};const f=c.options(o.prototype.$conditionalHandlers,{$all:function(t,e){const n=this;return Array.isArray(t)?t.map((function(t){return n.castForQuery(null,t,e)})):[this.castForQuery(null,t,e)]},$gt:p,$gte:p,$lt:p,$lte:p,$options:h,$regex:function(t){return\"[object RegExp]\"===Object.prototype.toString.call(t)?t:h.call(this,t)},$not:p});Object.defineProperty(u.prototype,\"$conditionalHandlers\",{configurable:!1,enumerable:!1,writable:!1,value:Object.freeze(f)}),u.prototype.castForQuery=function(t,e,n){let o;if(null!=t){if(o=this.$conditionalHandlers[t],!o)throw new Error(\"Can't use \"+t+\" with String.\");return o.call(this,e,n)}return\"[object RegExp]\"===Object.prototype.toString.call(e)||a(e,\"BSONRegExp\")?e:this.applySetters(e,n)},\n/*!\n * Module exports.\n */\nt.exports=u},function(t,e,n){\"use strict\";const o=n(19);class r extends o{}const i=n(21);Object.defineProperty(r.prototype,\"enum\",i),Object.defineProperty(r.prototype,\"match\",i),Object.defineProperty(r.prototype,\"lowercase\",i),Object.defineProperty(r.prototype,\"trim\",i),Object.defineProperty(r.prototype,\"uppercase\",i),Object.defineProperty(r.prototype,\"minLength\",i),Object.defineProperty(r.prototype,\"minlength\",i),Object.defineProperty(r.prototype,\"maxLength\",i),Object.defineProperty(r.prototype,\"maxlength\",i),Object.defineProperty(r.prototype,\"populate\",i),\n/*!\n * ignore\n */\nt.exports=r},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(70),r=n(13),i=r.CastError,s=n(3),c=n(102),a=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i,l=o.Binary;function u(t){\"string\"!=typeof t&&(t=\"\");const e=function(t){return null!=t&&Buffer.from(t,\"hex\")}(t.replace(/[{}-]/g,\"\")),n=new o(e);return n._subtype=4,n}function p(t){let e;if(\"string\"!=typeof t&&null!=t){e=null!=(n=t)&&n.toString(\"hex\");return e.substring(0,8)+\"-\"+e.substring(8,12)+\"-\"+e.substring(12,16)+\"-\"+e.substring(16,20)+\"-\"+e.substring(20,32)}var n;return t}function h(t,e){r.call(this,t,e,\"UUID\"),this.getters.push((function(t){return null!=t&&null!=t.$__?t:p(t)}))}\n/*!\n * ignore\n */\nfunction f(t){return this.cast(t)}\n/*!\n * ignore\n */function d(t){return t.map(t=>this.cast(t))}h.schemaName=\"UUID\",h.defaultOptions={},\n/*!\n * Inherits from SchemaType.\n */\nh.prototype=Object.create(r.prototype),h.prototype.constructor=h,\n/*!\n * ignore\n */\nh._cast=function(t){if(null==t)return t;function e(t){const e=new o(t);return e._subtype=4,e}if(\"string\"==typeof t){if(a.test(t))return u(t);throw new i(h.schemaName,t,this.path)}if(Buffer.isBuffer(t))return e(t);if(t instanceof l)return e(t.value(!0));if(t.toString&&t.toString!==Object.prototype.toString&&a.test(t.toString()))return u(t.toString());throw new i(h.schemaName,t,this.path)},h.set=r.set,h.cast=function(t){return 0===arguments.length||(!1===t&&(t=this._defaultCaster),this._cast=t),this._cast},\n/*!\n * ignore\n */\nh._checkRequired=t=>null!=t,h.checkRequired=r.checkRequired,h.prototype.checkRequired=function(t){return Buffer.isBuffer(t)&&(t=p(t)),null!=t&&a.test(t)},h.prototype.cast=function(t,e,n){if(s.isNonBuiltinObject(t)&&r._isRef(this,t,e,n))return this._castRef(t,e,n);let o;o=\"function\"==typeof this._castFunction?this._castFunction:\"function\"==typeof this.constructor.cast?this.constructor.cast():h.cast();try{return o(t)}catch(e){throw new i(h.schemaName,t,this.path,e,this)}},h.prototype.$conditionalHandlers=s.options(r.prototype.$conditionalHandlers,{$bitsAllClear:c,$bitsAnyClear:c,$bitsAllSet:c,$bitsAnySet:c,$all:d,$gt:f,$gte:f,$in:d,$lt:f,$lte:f,$ne:f,$nin:d}),h.prototype.castForQuery=function(t,e,n){let o;if(null!=t){if(o=this.$conditionalHandlers[t],!o)throw new Error(\"Can't use \"+t+\" with UUID.\");return o.call(this,e,n)}return this.cast(e)},\n/*!\n * Module exports.\n */\nt.exports=h},function(t,e,n){\"use strict\";const o=n(11),r=n(51),i=n(107),s=n(2);t.exports=function t(e){if(null==e||\"object\"!=typeof e||Array.isArray(e))return;if(r(e))return;const n=Object.keys(e);for(const r of n){const n=e[r];if(-1===r.indexOf(\".\"))t(e[r]);else try{delete e[r],i(e,r,n)}catch(t){if(!(t instanceof TypeError))throw t;throw new o(`Conflicting dotted paths when setting document path, key: \"${r}\", value: ${s.inspect(n)}`)}}}},function(t,e,n){\"use strict\";const o=n(10),r=n(100);t.exports=function t(e,n,i){const s=(i=i||{}).typeOnly,c=-1===n.indexOf(\".\")?[n]:n.split(\".\");let a=null,l=\"adhocOrUndefined\";const u=r(e.schema,e.get(e.schema.options.discriminatorKey))||e.schema;for(let n=0;n<c.length;++n){const r=c.slice(0,n+1).join(\".\");if(a=u.path(r),null!=a){if(\"Mixed\"===a.instance)return s?\"real\":a;if(l=u.pathType(r),(a.$isSingleNested||a.$isMongooseDocumentArrayElement)&&null!=a.schema.discriminators){const s=a.schema.discriminators,l=e.get(r+\".\"+o(a,\"schema.options.discriminatorKey\"));if(null==l||null==s[l])continue;const u=c.slice(n+1).join(\".\");return t(e.get(r),u,i)}}else l=\"adhocOrUndefined\"}return s?l:a}},function(t,e,n){\"use strict\";const o=n(10);t.exports=function(t,e,n){const r=null!=n?Object.keys(o(t.tree,n,{})):Object.keys(t.tree),i=new Set(Object.keys(e));let s;if(i.size>1){s=new Set;for(const t of r)i.has(t)&&s.add(t);for(const t of i)s.has(t)||s.add(t);s=Array.from(s)}else s=Array.from(i);return s}},function(t,e,n){\"use strict\";t.exports=function(t,e,n,o,r){const i=Object.keys(t).reduce((t,n)=>t||n.startsWith(e+\".\"),!1),s=e+\".\"+n.options.discriminatorKey;i||1!==r.length||r[0]!==s||o.splice(o.indexOf(s),1)}},function(t,e,n){\"use strict\";t.exports=function(t){return!!t&&(\"object\"==typeof t||\"function\"==typeof t)&&\"function\"==typeof t.then}},function(t,e,n){\"use strict\";\n/*!\n * Valid mongoose options\n */const o=Object.freeze([\"allowDiskUse\",\"applyPluginsToChildSchemas\",\"applyPluginsToDiscriminators\",\"autoCreate\",\"autoIndex\",\"bufferCommands\",\"bufferTimeoutMS\",\"cloneSchemas\",\"debug\",\"id\",\"timestamps.createdAt.immutable\",\"maxTimeMS\",\"objectIdGetter\",\"overwriteModels\",\"returnOriginal\",\"runValidators\",\"sanitizeFilter\",\"sanitizeProjection\",\"selectPopulatedPaths\",\"setDefaultsOnInsert\",\"strict\",\"strictPopulate\",\"strictQuery\",\"toJSON\",\"toObject\"]);t.exports=o},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(11),r=n(22).Readable,i=n(181),s=n(58),c=n(20);function a(t,e){r.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.query=t;const n=this,o=t.model;this._mongooseOptions={},this._transforms=[],this.model=o,this.options=e||{},o.hooks.execPre(\"find\",t,r=>{if(null!=r)return n._markError(r),void(n.listeners(\"error\").length>0&&n.emit(\"error\",r));this._transforms=this._transforms.concat(t._transforms.slice()),this.options.transform&&this._transforms.push(e.transform),this.options.batchSize&&(this.options.cursor=e.cursor||{},this.options.cursor.batchSize=e.batchSize,this.options._populateBatchSize=Math.min(this.options.batchSize,5e3)),o.collection.find(t._conditions,this.options,(t,e)=>{if(null!=t)return n._markError(t),void(n.listeners(\"error\").length>0&&n.emit(\"error\",n._error));n._error&&(e.close((function(){})),n.listeners(\"error\").length>0&&n.emit(\"error\",n._error)),n.cursor=e,n.emit(\"cursor\",e)})})}\n/*!\n * ignore\n */\nfunction l(t){return null==t?{done:!0}:{value:t,done:!1}}function u(t,e){let n=e;return t._transforms.length&&(n=function(n,o){if(n||null===o&&!t._mongooseOptions.transformNull)return e(n,o);e(n,t._transforms.reduce((function(e,n){return n.call(t,e)}),o))}),t._error?c((function(){n(t._error)})):t.cursor?(t.query._mongooseOptions.populate&&!t._pop&&(t._pop=s.preparePopulationOptionsMQ(t.query,t.query._mongooseOptions),t._pop.__noPromise=!0),t.query._mongooseOptions.populate&&t.options._populateBatchSize>1?t._batchDocs&&t._batchDocs.length?f(t,t._batchDocs.shift(),t._pop,n):t._batchExhausted?n(null,null):(t._batchDocs=[],void t.cursor.next().then(e=>{p.call({ctx:t,callback:n},null,e)},e=>{p.call({ctx:t,callback:n},e)})):t.cursor.next().then(e=>{if(e)return t.query._mongooseOptions.populate?void t.query.model.populate(e,t._pop).then(e=>{f(t,e,t._pop,n)},t=>{n(t)}):f(t,e,null,n);n(null,null)},t=>{n(t)})):(t.once(\"error\",e),void t.once(\"cursor\",(function(n){t.removeListener(\"error\",e),null!=n&&u(t,e)})))}\n/*!\n * ignore\n */function p(t,e){if(t)return this.callback(t);if(!e)return this.ctx._batchExhausted=!0,h.call(this);if(this.ctx._batchDocs.push(e),this.ctx._batchDocs.length<this.ctx.options._populateBatchSize){if(this.ctx._batchDocs.length>0&&this.ctx._batchDocs.length%1e3==0)return c(()=>this.ctx.cursor.next().then(t=>{p.call(this,null,t)},t=>{p.call(this,t)}));this.ctx.cursor.next().then(t=>{p.call(this,null,t)},t=>{p.call(this,t)})}else h.call(this)}\n/*!\n * ignore\n */function h(){if(!this.ctx._batchDocs.length)return this.callback(null,null);const t=this;this.ctx.query.model.populate(this.ctx._batchDocs,this.ctx._pop).then(()=>{f(t.ctx,t.ctx._batchDocs.shift(),t.ctx._pop,t.callback)},e=>{t.callback(e)})}\n/*!\n * ignore\n */function f(t,e,n,o){if(t.query._mongooseOptions.lean)return t.model.hooks.execPost(\"find\",t.query,[[e]],t=>{if(null!=t)return o(t);o(null,e)});const{model:r,_fields:i,_userProvidedFields:c,options:a}=t.query;s.createModelAndInit(r,e,i,c,a,n,(e,n)=>{if(null!=e)return o(e);t.model.hooks.execPost(\"find\",t.query,[[n]],t=>{if(null!=t)return o(t);o(null,n)})})}\n/*!\n * ignore\n */function d(t,e){if(t.cursor)return e();t.once(\"cursor\",(function(t){null!=t&&e()}))}n(2).inherits(a,r),a.prototype._read=function(){const t=this;u(this,(function(e,n){return e?t.emit(\"error\",e):n?void t.push(n):(t.push(null),void t.cursor.close((function(e){if(e)return t.emit(\"error\",e)})))}))},Object.defineProperty(a.prototype,\"map\",{value:function(t){return this._transforms.push(t),this},enumerable:!0,configurable:!0,writable:!0}),a.prototype._markError=function(t){return this._error=t,this},a.prototype.close=async function(){if(\"function\"==typeof arguments[0])throw new o(\"QueryCursor.prototype.close() no longer accepts a callback\");try{await this.cursor.close(),this.emit(\"close\")}catch(t){throw this.listeners(\"error\").length>0&&this.emit(\"error\",t),t}},a.prototype.rewind=function(){const t=this;return d(this,(function(){t.cursor.rewind()})),this},a.prototype.next=async function(){if(\"function\"===arguments[0])throw new o(\"QueryCursor.prototype.next() no longer accepts a callback\");return new Promise((t,e)=>{u(this,(function(n,o){if(n)return e(n);t(o)}))})},a.prototype.eachAsync=function(t,e,n){const o=this;return\"function\"==typeof e&&(n=e,e={}),i((function(t){return u(o,t)}),t,e=e||{},n)},a.prototype.options,a.prototype.addCursorFlag=function(t,e){const n=this;return d(this,(function(){n.cursor.addCursorFlag(t,e)})),this},\n/*!\n * ignore\n */\na.prototype.transformNull=function(t){return 0===arguments.length&&(t=!0),this._mongooseOptions.transformNull=t,this},\n/*!\n * ignore\n */\na.prototype._transformForAsyncIterator=function(){return-1===this._transforms.indexOf(l)&&this.map(l),this},null!=Symbol.asyncIterator&&(a.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()}),t.exports=a},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(9);class r extends o{constructor(t){let e=t.map(t=>t.message).join(\", \");e.length>50&&(e=e.slice(0,50)+\"...\"),super(`eachAsync() finished with ${t.length} errors: ${e}`),this.errors=t}}Object.defineProperty(r.prototype,\"name\",{value:\"EachAsyncMultiError\"}),\n/*!\n * exports\n */\nt.exports=r},function(t,e,n){\"use strict\";const o=n(358),r=n(69),i=n(359),s=n(184);t.exports=function(t){const e=t.options.arrayFilters,n=t.getUpdate(),c=t.schema,a=s(n);let l=c.options.strict;null!=t._mongooseOptions.strict&&(l=t._mongooseOptions.strict),t.model&&null!=t.model.base.options.strictQuery&&(l=t.model.base.options.strictQuery),null!=c._userProvidedOptions.strictQuery&&(l=c._userProvidedOptions.strictQuery),null!=t._mongooseOptions.strictQuery&&(l=t._mongooseOptions.strictQuery),function t(e,n,s,c,a){if(!Array.isArray(e))return;for(const l of e){if(null==l)throw new Error(\"Got null array filter in \"+e);const u=Object.keys(l).filter(t=>null!=l[t]);if(0===u.length)continue;const p=u[0];if(\"$and\"===p||\"$or\"===p){for(const e of u)t(l[e],n,s,c,a);continue}const h=p.indexOf(\".\"),f=-1===h?p:p.substring(0,h);if(null==c[f])continue;const d=r(c[f]),y=i(n,d);let m=null!=y?y.schema:null;null!=m&&null!=m.discriminators&&l[f+\".\"+m.options.discriminatorKey]&&(m=m.discriminators[l[f+\".\"+m.options.discriminatorKey]]||m);for(const t of u){if(null===c[t])continue;if(0===Object.keys(c).length)continue;const e=t.indexOf(\".\");let n,u=-1===e?null:t.substring(e);if(null==u||null==m?n=y:(u=r(u),n=i(m,u)),null==n){if(!s)return;throw new Error(`Could not find path \"${null==u?d+\".0\":d+\".0\"+u}\" in schema`)}\"object\"==typeof l[t]?l[t]=o(a,n,l[t]):l[t]=n.castForQuery(null,l[t])}}}(e,c,l,a,t)}},function(t,e,n){\"use strict\";const o=n(101);t.exports=function(t,e,n){const r=t;if(!Object.keys(n).some(o))return e.castForQuery(null,n,r);const i=Object.keys(n);let s=i.length;for(;s--;){const t=i[s],c=n[t];if(\"$not\"===t){if(c&&e&&!e.caster){const i=Object.keys(c);if(i.length&&o(i[0]))for(const t of Object.keys(c))c[t]=e.castForQuery(t,c[t],r);else n[t]=e.castForQuery(t,c,r);continue}}else n[t]=e.castForQuery(t,c,r)}return n}},function(t,e,n){\"use strict\";const o=/^\\d+$/;t.exports=function(t,e){let n=t.path(e);if(null!=n)return n;const r=e.split(\".\");let i=\"\",s=!1;for(const e of r)s&&o.test(e)||(i=0===i.length?e:i+\".\"+e,n=t.path(i),null!=n&&n.schema&&(t=n.schema,i=\"\",!s&&n.$isMongooseDocumentArray&&(s=!0)));return n}},function(t,e,n){\"use strict\";const o=n(69),r=n(10),i=n(24),s=n(184);t.exports=function(t,e,n,c,a){const l=c.split(\".\");let u=null,p=\"adhocOrUndefined\";n=n||{},e=e||{};const h=null!=a&&Array.isArray(a.arrayFilters)?a.arrayFilters:[],f=s(e);for(let s=0;s<l.length;++s){const c=o(l.slice(0,s+1).join(\".\"));if(u=t.path(c),null!=u&&(p=t.pathType(c),(u.$isSingleNested||u.$isMongooseDocumentArrayElement)&&null!=u.schema.discriminators)){const t=r(u,\"schema.options.discriminatorKey\"),o=c+\".\"+t,a=o.replace(/\\.\\d+\\./,\".\");let d=null;o in n&&(d=n[o]),a in n&&(d=n[a]);const y=c.replace(/\\.\\d+$/,\"\");u.$isMongooseDocumentArrayElement&&null!=r(n[y],\"$elemMatch.\"+t)&&(d=n[y].$elemMatch[t]),o in e&&(d=e[o]);for(const e of Object.keys(f)){const n=f[e]+\".\"+t,o=e+\".\"+t;if(n===a){const t=h.find(t=>t.hasOwnProperty(o));null!=t&&(d=t[o])}}if(null==d)continue;const m=i(u.caster.discriminators,d).schema,g=l.slice(s+1).join(\".\");if(u=m.path(g),null!=u){p=m._getPathType(g);break}}}return{type:p,schematype:u}}},function(t,e,n){\"use strict\";const o=n(34);t.exports=function(t,e,n,r,i,s){if(null==t||!t.options||!t.options.immutable)return!1;let c=t.options.immutable;if(\"function\"==typeof c&&(c=c.call(s,s)),!c)return!1;if(!1===e)return!1;if(\"throw\"===e)throw new o(null,`Field ${i} is immutable and strict = 'throw'`);return delete n[r],!0}},function(t,e,n){\"use strict\";const o=n(10);function r(t,e,n,r,i){const s=t.path(n);if(null==s)return;let c=o(s,\"options.immutable\",null);null!=c&&(\"function\"==typeof c&&(c=c.call(i,i)),c&&(r.$setOnInsert=r.$setOnInsert||{},r.$setOnInsert[n]=e[n],delete e[n]))}t.exports=function(t,e,n){if(null==e)return;const o=Object.keys(e);for(const i of o){const o=i.startsWith(\"$\");if(\"$set\"===i){const o=Object.keys(e[i]);for(const s of o)r(t,e[i],s,e,n)}else o||r(t,e,i,e,n)}}},function(t,e,n){\"use strict\";const o=n(58);t.exports=async function(t,e,n,r,i){return Promise.all(e.map(e=>new Promise((s,c)=>{const a=e;e=o.createModel(t,e,n,r),null!=i.session&&e.$session(i.session),e.$init(a,i,t=>{if(null!=t)return c(t);s(e)})})))}},function(t,e,n){\"use strict\";t.exports=function(t,e){return t===e||e.startsWith(t+\".\")}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=[\"__proto__\",\"constructor\",\"prototype\"],r=e.clone=function t(n,o){if(null==n)return n;if(Array.isArray(n))return e.cloneArray(n,o);if(n.constructor){if(/ObjectI[dD]$/.test(n.constructor.name))return\"function\"==typeof n.clone?n.clone():new n.constructor(n.id);if(\"ReadPreference\"===n.constructor.name)return new n.constructor(n.mode,t(n.tags,o));if(\"Binary\"==n._bsontype&&n.buffer&&n.value)return\"function\"==typeof n.clone?n.clone():new n.constructor(n.value(!0),n.sub_type);if(\"Date\"===n.constructor.name||\"Function\"===n.constructor.name)return new n.constructor(+n);if(\"RegExp\"===n.constructor.name)return new RegExp(n);if(\"Buffer\"===n.constructor.name)return Buffer.from(n)}return s(n)?e.cloneObject(n,o):n.valueOf?n.valueOf():void 0};\n/*!\n * ignore\n */\ne.cloneObject=function(t,e){const n=e&&e.minimize,i={},s=Object.keys(t),c=s.length;let a,l=!1,u=\"\",p=0;for(p=0;p<c;++p)u=s[p],-1===o.indexOf(u)&&(a=r(t[u],e),n&&void 0===a||(l||(l=!0),i[u]=a));return n?l&&i:i},e.cloneArray=function(t,e){const n=[],o=t.length;let i=0;for(;i<o;i++)n.push(r(t[i],e));return n},e.merge=function t(n,r){const i=Object.keys(r);for(const s of i)-1===o.indexOf(s)&&(void 0===n[s]?n[s]=r[s]:e.isObject(r[s])?t(n[s],r[s]):n[s]=r[s])},e.mergeClone=function t(n,i){const s=Object.keys(i);for(const c of s)-1===o.indexOf(c)&&(void 0===n[c]?n[c]=r(i[c]):e.isObject(i[c])?t(n[c],i[c]):n[c]=r(i[c]))},e.readPref=function(t){switch(t){case\"p\":t=\"primary\";break;case\"pp\":t=\"primaryPreferred\";break;case\"s\":t=\"secondary\";break;case\"sp\":t=\"secondaryPreferred\";break;case\"n\":t=\"nearest\"}return t},e.readConcern=function(t){if(\"string\"==typeof t){switch(t){case\"l\":t=\"local\";break;case\"a\":t=\"available\";break;case\"m\":t=\"majority\";break;case\"lz\":t=\"linearizable\";break;case\"s\":t=\"snapshot\"}t={level:t}}return t};const i=Object.prototype.toString;e.toString=function(t){return i.call(t)};const s=e.isObject=function(t){return\"[object Object]\"==e.toString(t)};e.keys=Object.keys,e.create=\"function\"==typeof Object.create?Object.create:function(t){if(arguments.length>1)throw new Error(\"Adding properties is not supported\");function e(){}return e.prototype=t,new e},e.inherits=function(t,n){t.prototype=e.create(n.prototype),t.prototype.constructor=t},e.isArgumentsObject=function(t){return\"[object Arguments]\"===Object.prototype.toString.call(t)}},function(t,e,n){\"undefined\"==typeof process||\"renderer\"===process.type||!0===process.browser||process.__nwjs?t.exports=n(367):t.exports=n(369)},function(t,e,n){e.formatArgs=function(e){if(e[0]=(this.useColors?\"%c\":\"\")+this.namespace+(this.useColors?\" %c\":\" \")+e[0]+(this.useColors?\"%c \":\" \")+\"+\"+t.exports.humanize(this.diff),!this.useColors)return;const n=\"color: \"+this.color;e.splice(1,0,n,\"color: inherit\");let o=0,r=0;e[0].replace(/%[a-zA-Z%]/g,t=>{\"%%\"!==t&&(o++,\"%c\"===t&&(r=o))}),e.splice(r,0,n)},e.save=function(t){try{t?e.storage.setItem(\"debug\",t):e.storage.removeItem(\"debug\")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem(\"debug\")}catch(t){}!t&&\"undefined\"!=typeof process&&\"env\"in process&&(t=process.env.DEBUG);return t},e.useColors=function(){if(\"undefined\"!=typeof window&&window.process&&(\"renderer\"===window.process.type||window.process.__nwjs))return!0;if(\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/))return!1;return\"undefined\"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||\"undefined\"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)&&parseInt(RegExp.$1,10)>=31||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn(\"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.\"))}})(),e.colors=[\"#0000CC\",\"#0000FF\",\"#0033CC\",\"#0033FF\",\"#0066CC\",\"#0066FF\",\"#0099CC\",\"#0099FF\",\"#00CC00\",\"#00CC33\",\"#00CC66\",\"#00CC99\",\"#00CCCC\",\"#00CCFF\",\"#3300CC\",\"#3300FF\",\"#3333CC\",\"#3333FF\",\"#3366CC\",\"#3366FF\",\"#3399CC\",\"#3399FF\",\"#33CC00\",\"#33CC33\",\"#33CC66\",\"#33CC99\",\"#33CCCC\",\"#33CCFF\",\"#6600CC\",\"#6600FF\",\"#6633CC\",\"#6633FF\",\"#66CC00\",\"#66CC33\",\"#9900CC\",\"#9900FF\",\"#9933CC\",\"#9933FF\",\"#99CC00\",\"#99CC33\",\"#CC0000\",\"#CC0033\",\"#CC0066\",\"#CC0099\",\"#CC00CC\",\"#CC00FF\",\"#CC3300\",\"#CC3333\",\"#CC3366\",\"#CC3399\",\"#CC33CC\",\"#CC33FF\",\"#CC6600\",\"#CC6633\",\"#CC9900\",\"#CC9933\",\"#CCCC00\",\"#CCCC33\",\"#FF0000\",\"#FF0033\",\"#FF0066\",\"#FF0099\",\"#FF00CC\",\"#FF00FF\",\"#FF3300\",\"#FF3333\",\"#FF3366\",\"#FF3399\",\"#FF33CC\",\"#FF33FF\",\"#FF6600\",\"#FF6633\",\"#FF9900\",\"#FF9933\",\"#FFCC00\",\"#FFCC33\"],e.log=console.debug||console.log||(()=>{}),t.exports=n(188)(e);const{formatters:o}=t.exports;o.j=function(t){try{return JSON.stringify(t)}catch(t){return\"[UnexpectedJSONParseError]: \"+t.message}}},function(t,e){var n=1e3,o=6e4,r=60*o,i=24*r;function s(t,e,n,o){var r=e>=1.5*n;return Math.round(t/n)+\" \"+o+(r?\"s\":\"\")}t.exports=function(t,e){e=e||{};var c=typeof t;if(\"string\"===c&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var s=parseFloat(e[1]);switch((e[2]||\"ms\").toLowerCase()){case\"years\":case\"year\":case\"yrs\":case\"yr\":case\"y\":return 315576e5*s;case\"weeks\":case\"week\":case\"w\":return 6048e5*s;case\"days\":case\"day\":case\"d\":return s*i;case\"hours\":case\"hour\":case\"hrs\":case\"hr\":case\"h\":return s*r;case\"minutes\":case\"minute\":case\"mins\":case\"min\":case\"m\":return s*o;case\"seconds\":case\"second\":case\"secs\":case\"sec\":case\"s\":return s*n;case\"milliseconds\":case\"millisecond\":case\"msecs\":case\"msec\":case\"ms\":return s;default:return}}(t);if(\"number\"===c&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=i)return s(t,e,i,\"day\");if(e>=r)return s(t,e,r,\"hour\");if(e>=o)return s(t,e,o,\"minute\");if(e>=n)return s(t,e,n,\"second\");return t+\" ms\"}(t):function(t){var e=Math.abs(t);if(e>=i)return Math.round(t/i)+\"d\";if(e>=r)return Math.round(t/r)+\"h\";if(e>=o)return Math.round(t/o)+\"m\";if(e>=n)return Math.round(t/n)+\"s\";return t+\"ms\"}(t);throw new Error(\"val is not a non-empty string or a valid number. val=\"+JSON.stringify(t))}},function(t,e,n){const o=n(81),r=n(2);e.init=function(t){t.inspectOpts={};const n=Object.keys(e.inspectOpts);for(let o=0;o<n.length;o++)t.inspectOpts[n[o]]=e.inspectOpts[n[o]]},e.log=function(...t){return process.stderr.write(r.format(...t)+\"\\n\")},e.formatArgs=function(n){const{namespace:o,useColors:r}=this;if(r){const e=this.color,r=\"\u001b[3\"+(e<8?e:\"8;5;\"+e),i=`  ${r};1m${o} \u001b[0m`;n[0]=i+n[0].split(\"\\n\").join(\"\\n\"+i),n.push(r+\"m+\"+t.exports.humanize(this.diff)+\"\u001b[0m\")}else n[0]=function(){if(e.inspectOpts.hideDate)return\"\";return(new Date).toISOString()+\" \"}()+o+\" \"+n[0]},e.save=function(t){t?process.env.DEBUG=t:delete process.env.DEBUG},e.load=function(){return process.env.DEBUG},e.useColors=function(){return\"colors\"in e.inspectOpts?Boolean(e.inspectOpts.colors):o.isatty(process.stderr.fd)},e.destroy=r.deprecate(()=>{},\"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.\"),e.colors=[6,2,3,4,5,1];try{const t=n(218);t&&(t.stderr||t).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}e.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{const n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(t,e)=>e.toUpperCase());let o=process.env[e];return o=!!/^(yes|on|true|enabled)$/i.test(o)||!/^(no|off|false|disabled)$/i.test(o)&&(\"null\"===o?null:Number(o)),t[n]=o,t},{}),t.exports=n(188)(e);const{formatters:i}=t.exports;i.o=function(t){return this.inspectOpts.colors=this.useColors,r.inspect(t,this.inspectOpts).split(\"\\n\").map(t=>t.trim()).join(\" \")},i.O=function(t){return this.inspectOpts.colors=this.useColors,r.inspect(t,this.inspectOpts)}},function(t,e,n){\"use strict\";t.exports=(t,e=process.argv)=>{const n=t.startsWith(\"-\")?\"\":1===t.length?\"-\":\"--\",o=e.indexOf(n+t),r=e.indexOf(\"--\");return-1!==o&&(-1===r||o<r)}},function(t,e,n){\"use strict\";const o=e;o.distinct=function(t){if(t._fields&&Object.keys(t._fields).length>0)return\"field selection and slice\";let e;return Object.keys(o.distinct).every((function(n){return!t.options[n]||(e=n,!1)})),e},o.distinct.select=o.distinct.slice=o.distinct.sort=o.distinct.limit=o.distinct.skip=o.distinct.batchSize=o.distinct.hint=o.distinct.tailable=!0,o.findOneAndUpdate=o.findOneAndRemove=function(t){let e;return Object.keys(o.findOneAndUpdate).every((function(n){return!t.options[n]||(e=n,!1)})),e},o.findOneAndUpdate.limit=o.findOneAndUpdate.skip=o.findOneAndUpdate.batchSize=o.findOneAndUpdate.tailable=!0,o.count=function(t){if(t._fields&&Object.keys(t._fields).length>0)return\"field selection and slice\";let e;return Object.keys(o.count).every((function(n){return!t.options[n]||(e=n,!1)})),e},o.count.slice=o.count.batchSize=o.count.tailable=!0},function(t,e,n){\"use strict\";const o=n(189);if(\"unknown\"==o.type)throw new Error(\"Unknown environment\");t.exports=o.isNode?n(373):(o.isMongo,n(75))},function(t,e,n){\"use strict\";const o=n(75);t.exports=class extends o{constructor(t){super(),this.collection=t,this.collectionName=t.collectionName}async find(t,e){return this.collection.find(t,e).toArray()}async findOne(t,e){return this.collection.findOne(t,e)}async count(t,e){return this.collection.count(t,e)}async distinct(t,e,n){return this.collection.distinct(t,e,n)}async updateMany(t,e,n){return this.collection.updateMany(t,e,n)}async updateOne(t,e,n){return this.collection.updateOne(t,e,n)}async replaceOne(t,e,n){return this.collection.replaceOne(t,e,n)}async deleteOne(t,e){return this.collection.deleteOne(t,e)}async deleteMany(t,e){return this.collection.deleteMany(t,e)}async findOneAndDelete(t,e){return this.collection.findOneAndDelete(t,e)}async findOneAndUpdate(t,e,n){return this.collection.findOneAndUpdate(t,e,n)}findCursor(t,e){return this.collection.find(t,e)}}},function(t,e,n){\"use strict\";t.exports=function(t,e){const n=Object.keys(t).map(e=>Object.keys(t[e])).reduce((t,e)=>t.concat(e),[]);return e.filter(t=>function t(e,n){const o=Object.keys(e)[0];if(\"$and\"===o||\"$or\"===o)return!!Array.isArray(e[o])&&null!=e[o].find(e=>t(e,n));const r=o.indexOf(\".\"),i=-1===r?o:o.slice(0,r);return null!=n.find(t=>t.includes(\"$[\"+i+\"]\"))}(t,n))}},function(t,e,n){\"use strict\";t.exports=function(t){if(null==t)return;const e=Object.keys(t);for(let n=0;n<e.length;++n)\"string\"==typeof t[e[n]]&&(t[e[n]]=1)}},function(t,e,n){\"use strict\";const o=n(74),r=n(112);\n/*!\n * ignore\n */\nfunction i(t,e){const n=e.split(\".\"),o=n.length;let r=n[0];for(let e=1;e<o;++e){if(null!=t[r]||null!=t[r+\".$\"])return!0;r+=\".\"+n[e]}return null!=t[r]||null!=t[r+\".$\"]}\n/*!\n * ignore\n */\nt.exports=function(t,e,n){if(null==n)return;const s=Object.keys(n);if(e=e||{},r(t))for(const n of s)i(e,n)?0===e[n]&&delete t[n]:t[n]=1;else if(o(t))for(const n of s)null==e[n]&&delete t[n]}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(41),r=n(69),i=n(56).flatten,s=n(56).modifiedPaths;t.exports=function(t,e,n,c,a){const l=Object.keys(n||{});let u={},p={};const h={},f={},d=l.length;let y=!1;const m={};let g,_,b;for(b=0;b<d;++b)if(l[b].startsWith(\"$\")){if(y=!0,\"$push\"===l[b]||\"$addToSet\"===l[b]){const t=Object.keys(n[l[b]]);for(let e=0;e<t.length;++e)g=n[l[b]][t[e]],g&&g.$each?f[t[e]]=(f[t[e]]||[]).concat(g.$each):f[t[e]]=(f[t[e]]||[]).concat([g]);continue}s(n[l[b]],\"\",m);const t=i(n[l[b]],null,null,e),o=Object.keys(t),c=o.length;for(let e=0;e<c;++e){const n=r(o[e]);_=l[b],n.includes(\"$\")||(\"$set\"===_||\"$setOnInsert\"===_||\"$pull\"===_||\"$pullAll\"===_?(p[n]=t[o[e]],h[n]=\"$pull\"===_||\"$pullAll\"===_):\"$unset\"===_&&(p[n]=void 0),u[n]=!0)}}y||(s(n,\"\",m),p=i(n,null,null,e),u=Object.keys(p));const O=Object.keys(p),$=O.length,w=[],v=[],E=[],A=t;function S(t,n){const r=e._getSchema(O[t]);if(null!=r&&(\"Mixed\"!==r.instance||r.path===O[t]))if(n&&Array.isArray(n.$in))n.$in.forEach((t,e)=>{w.push((function(n){r.doValidate(t,(function(t){t&&(t.path=O[e]+\".$in.\"+e,v.push(t)),n(null)}),A,{updateValidator:!0})}))});else{if(h[O[t]]&&r.$isMongooseArray)return;r.$isMongooseDocumentArrayElement&&null!=n&&null!=n.$__?(E.push(O[t]),w.push((function(e){r.doValidate(n,(function(n){if(n)if(n.errors)for(const e of Object.keys(n.errors)){const o=n.errors[e];o.path=O[t]+\".\"+e,v.push(o)}else n.path=O[t],v.push(n);return e(null)}),A,{updateValidator:!0})}))):w.push((function(e){for(const n of E)if(O[t].startsWith(n+\".\"))return e(null);r.doValidate(n,(function(n){if(null!=r.schema&&!1===r.schema.options.storeSubdocValidationError&&n instanceof o)return e(null);n&&(n.path=O[t],v.push(n)),e(null)}),A,{updateValidator:!0})}))}}for(b=0;b<$;++b)S(b,p[O[b]]);const j=Object.keys(f);for(const n of j){let o=e._getSchema(n);if(o&&o.$isMongooseDocumentArray)w.push((function(e){o.doValidate(f[n],P(n,v,e),c&&\"query\"===c.context?t:null)}));else{o=e._getSchema(n+\".0\");for(const e of f[n])w.push((function(r){o.doValidate(e,P(n,v,r),c&&\"query\"===c.context?t:null,{updateValidator:!0})}))}}if(null==a)return function(t){let e=w.length;if(0===e)return x(t);for(const n of w)n((function(){--e<=0&&x(t)}))};{let t=w.length;if(0===t)return x(a);for(const e of w)e((function(){--t<=0&&x(a)}))}function x(t){if(v.length){const e=new o(null);for(const t of v)e.addError(t.path,t);return t(e)}t(null)}function P(t,e,n){return function(o){o&&(o.path=t,e.push(o)),n(null)}}}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(11),r=n(22).Readable,i=n(181),s=n(20);function c(t){r.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.agg=t,this._transforms=[];const e=t._model;delete t.options.cursor.useMongooseAggCursor,this._mongooseOptions={},\n/*!\n * ignore\n */\nfunction(t,e,n){t.collection.buffer?t.collection.emitter.once(\"queue\",(function(){t.hooks.execPre(\"aggregate\",n,(function(){e.cursor=t.collection.aggregate(n._pipeline,n.options||{}),e.emit(\"cursor\",e.cursor)}))})):t.hooks.execPre(\"aggregate\",n,(function(){e.cursor=t.collection.aggregate(n._pipeline,n.options||{}),e.emit(\"cursor\",e.cursor)}))}(e,this,t)}if(n(2).inherits(c,r),c.prototype._read=function(){const t=this;l(this,(function(e,n){return e?t.emit(\"error\",e):n?void t.push(n):(t.push(null),void t.cursor.close((function(e){if(e)return t.emit(\"error\",e)})))}))},null!=Symbol.asyncIterator){const t=\"Mongoose does not support using async iterators with an existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregation\";c.prototype[Symbol.asyncIterator]=function(){throw new o(t)}}\n/*!\n * ignore\n */\nfunction a(t){return null==t?{done:!0}:{value:t,done:!1}}function l(t,e){let n=e;return t._transforms.length&&(n=function(n,o){if(n||null===o&&!t._mongooseOptions.transformNull)return e(n,o);e(n,t._transforms.reduce((function(t,e){return e(t)}),o))}),t._error?s((function(){n(t._error)})):t.cursor?t.cursor.next().then(t=>{if(!t)return n(null,null);n(null,t)},t=>n(t)):void t.once(\"cursor\",(function(){l(t,e)}))}Object.defineProperty(c.prototype,\"map\",{value:function(t){return this._transforms.push(t),this},enumerable:!0,configurable:!0,writable:!0}),c.prototype._markError=function(t){return this._error=t,this},c.prototype.close=async function(){if(\"function\"==typeof arguments[0])throw new o(\"AggregationCursor.prototype.close() no longer accepts a callback\");try{await this.cursor.close()}catch(t){throw this.listeners(\"error\").length>0&&this.emit(\"error\",t),t}this.emit(\"close\")},c.prototype.next=async function(){if(\"function\"==typeof arguments[0])throw new o(\"AggregationCursor.prototype.next() no longer accepts a callback\");return new Promise((t,e)=>{l(this,(n,o)=>{if(null!=n)return e(n);t(o)})})},c.prototype.eachAsync=function(t,e,n){const o=this;return\"function\"==typeof e&&(n=e,e={}),i((function(t){return l(o,t)}),t,e=e||{},n)},null!=Symbol.asyncIterator&&(c.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()})\n/*!\n * ignore\n */,c.prototype._transformForAsyncIterator=function(){return-1===this._transforms.indexOf(a)&&this.map(a),this},\n/*!\n * ignore\n */\nc.prototype.transformNull=function(t){return 0===arguments.length&&(t=!0),this._mongooseOptions.transformNull=t,this},c.prototype.addCursorFlag=function(t,e){const n=this;\n/*!\n * ignore\n */\nreturn function(t,e){if(t.cursor)return e();t.once(\"cursor\",(function(){e()}))}(this,(function(){n.cursor.addCursorFlag(t,e)})),this},t.exports=c},function(t,e,n){\"use strict\";function o(t){if(null!=t&&null!=t.$accumulator)for(const e of[\"init\",\"accumulate\",\"merge\",\"finalize\"])\"function\"==typeof t.$accumulator[e]&&(t.$accumulator[e]=String(t.$accumulator[e]))}t.exports=function t(e){if(Array.isArray(e))for(const n of e){if(null==n)continue;const e=n.$group||n.$bucket||n.$bucketAuto;if(null!=e)for(const t of Object.keys(e))o(e[t]);const r=Object.keys(n)[0];if(r&&\"object\"==typeof n[r]){const t=n[r];for(const e of Object.keys(t))null!=t[e]&&null!=t[e].$function&&\"function\"==typeof t[e].$function.body&&(t[e].$function.body=t[e].$function.body.toString())}if(null!=n.$facet)for(const e of Object.keys(n.$facet))t(n.$facet[e])}}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(8).EventEmitter;\n/*!\n * ignore\n */\n/*!\n * ignore\n */\nt.exports=class extends o{constructor(t,e,n){if(super(),this.driverChangeStream=null,this.closed=!1,this.bindedEvents=!1,this.pipeline=e,this.options=n,n&&n.hydrate&&!n.model)throw new Error(\"Cannot create change stream with `hydrate: true` unless calling `Model.watch()`\");t((t,e)=>{null==t?(this.driverChangeStream=e,this.emit(\"ready\")):this.emit(\"error\",t)})}_bindEvents(){this.bindedEvents||(this.bindedEvents=!0,null!=this.driverChangeStream?(this.driverChangeStream.on(\"close\",()=>{this.closed=!0}),[\"close\",\"change\",\"end\",\"error\"].forEach(t=>{this.driverChangeStream.on(t,e=>{\"error\"===t&&this.closed||this.emit(t,e)})})):this.once(\"ready\",()=>{this.driverChangeStream.on(\"close\",()=>{this.closed=!0}),[\"close\",\"change\",\"end\",\"error\"].forEach(t=>{this.driverChangeStream.on(t,e=>{\"error\"===t&&this.closed||(null!=e&&null!=e.fullDocument&&this.options&&this.options.hydrate&&(e.fullDocument=this.options.model.hydrate(e.fullDocument)),this.emit(t,e))})})}))}hasNext(t){return this.driverChangeStream.hasNext(t)}next(t){if(this.options&&this.options.hydrate){if(null!=t){const e=t;t=(t,n)=>null!=t?e(t):(null!=n.fullDocument&&(n.fullDocument=this.options.model.hydrate(n.fullDocument)),e(null,n))}let e=this.driverChangeStream.next(t);return e&&\"function\"==typeof e.then&&(e=e.then(t=>(null!=t.fullDocument&&(t.fullDocument=this.options.model.hydrate(t.fullDocument)),t))),e}return this.driverChangeStream.next(t)}on(t,e){return this._bindEvents(),super.on(t,e)}once(t,e){return this._bindEvents(),super.once(t,e)}_queue(t){this.once(\"ready\",()=>t())}close(){this.closed=!0,this.driverChangeStream&&this.driverChangeStream.close()}}},function(t,e,n){\"use strict\";const o=n(12);t.exports=class{constructor(t){null!=t&&Object.assign(this,o(t))}}},function(t,e,n){\"use strict\";t.exports=function t(e,n){const o=Object.keys(n.paths),r=o.length;for(let i=0;i<r;++i){let r=\"\";const s=o[i],c=n.paths[s],a=c.splitPath(),l=a.length;let u=e;for(let n=0;n<l&&null!=u;++n){const o=a[n];if(r+=(r.length?\".\":\"\")+o,n===l-1){if(void 0!==u[o]){c.$isSingleNested?t(u[o],c.caster.schema):c.$isMongooseDocumentArray&&Array.isArray(u[o])&&u[o].forEach(e=>t(e,c.schema));break}const n=c.getDefault(e,!1,{skipCast:!0});void 0!==n&&(u[o]=n,c.$isSingleNested?t(n,c.caster.schema):c.$isMongooseDocumentArray&&Array.isArray(n)&&n.forEach(e=>t(e,c.schema)))}else null==u[o]&&(u[o]={}),u=u[o]}}}},function(t,e,n){\"use strict\";const o=n(10),r=n(3);t.exports=function t(e,i){const s=n(193);function c(t,n){Object.defineProperty(e.prototype,t,{get:function(){const e={};for(const o in n.methods[t])e[o]=n.methods[t][o].bind(this);return e},configurable:!0})}for(const t of Object.keys(i.methods)){const n=i.methods[t];if(i.tree.hasOwnProperty(t))throw new Error('You have a method and a property in your schema both named \"'+t+'\"');\"function\"!=typeof n||s.prototype[t]!==n?(i.reserved[t]&&!o(i,`methodOptions.${t}.suppressWarning`,!1)&&r.warn(`mongoose: the method name \"${t}\" is used by mongoose internally, overwriting it may cause bugs. If you're sure you know what you're doing, you can suppress this error by using \\`schema.method('${t}', fn, { suppressWarning: true })\\`.`),\"function\"==typeof n?e.prototype[t]=n:c(t,i)):delete i.methods[t]}e.$appliedMethods=!0;for(const e of Object.keys(i.paths)){const n=i.paths[e];n.$isSingleNested&&!n.caster.$appliedMethods&&t(n.caster,n.schema),n.$isMongooseDocumentArray&&!n.Constructor.$appliedMethods&&t(n.Constructor,n.schema)}}},function(t,e,n){\"use strict\";const o=n(179),r=n(74),i=n(112),s=n(3).isPOJO;t.exports=function(t,e,n){if(null==e)return t;if(null==t)return t;let c=null;return i(e)?c=!1:r(e)&&(c=!0),null==c?t:c?function t(e,n,o,r,i){if(null==e||\"object\"!=typeof e)return e;const c={...e};r=i?r||{}:n;for(const e of Object.keys(c)){const a=i?i+\".\"+e:e;n.hasOwnProperty(a)||r.hasOwnProperty(e)?s(n[a])||s(r[e])?c[e]=t(c[e],n,o,r[e],a):delete c[e]:o[a]&&(c[e]=t(c[e],n,o,r[e],a))}return c}(t,e,n=n||o(e)):function t(e,n,o,r,i){if(null==e||\"object\"!=typeof e)return e;const c={...e};r=i?r||{}:n;for(const e of Object.keys(c)){const a=i?i+\".\"+e:e;n.hasOwnProperty(a)||r.hasOwnProperty(e)?(s(n[a])||s(r[e]))&&(c[e]=t(c[e],n,o,r[e],a)):o[a]?c[e]=t(c[e],n,o,r[e],a):delete c[e]}return c}(t,e,n=n||o(e))}},function(t,e,n){\"use strict\";const o=n(386);t.exports=function(t,e,n){o(t)||n.hasOwnProperty(\"collation\")&&!e.hasOwnProperty(\"collation\")&&(e.collation=n.collation)}},function(t,e,n){\"use strict\";t.exports=function(t){let e=!1;for(const n of Object.keys(t))\"text\"===t[n]&&(e=!0);return e}},function(t,e,n){\"use strict\";const o=n(93).middlewareFunctions,r=n(87);t.exports=function(t,e,n){e=e.filter(t=>-1!==o.indexOf(t.name)?!!t.model:!1!==t.model),t.$__insertMany=e.createWrapper(\"insertMany\",t.$__insertMany,t,{useErrorHandlers:!0,numCallbackParams:1});for(const o of Object.keys(n))if(e.hasHooks(o)){const n=t[o];t[o]=function(){const i=arguments.length,s=i>0?arguments[i-1]:null,c=\"function\"==typeof s?s:null,a=Array.prototype.slice.call(arguments,0,null==c?i:i-1);return r(c,r=>{e.execPre(o,t,a,(function(i){if(null!=i)return r(i);let s=0;const c=n.apply(t,a.concat(l));function l(n,i){if(!(s++>0))return null!=n?r(n):void e.execPost(o,t,[i],(function(t){if(null!=t)return r(t);r(null,i)}))}null!=c&&\"function\"==typeof c.then&&c.then(t=>l(null,t),t=>l(t))}))},t.events)}}}},function(t,e,n){\"use strict\";t.exports=function(t,e){for(const n in e.statics)t[n]=e.statics[n]}},function(t,e,n){\"use strict\";const o=n(97),r=n(113),i=n(390),s=n(10),c=n(196),a=n(76),l=n(114),u=n(180),p=n(23),h=n(391).default,f=n(3),{populateModelSymbol:d}=n(1);function y(t){return Array.isArray(t)?t.some(t=>Array.isArray(t)||null===t)?t.map(t=>null==t?0:Array.isArray(t)?t.filter(t=>null!=t).length:1):t.filter(t=>null!=t).length:null==t?0:1}function m(t,e,n,o){const r=\"function\"==typeof n.transform,i=r?n.transform:b;if(Array.isArray(t)){const s=[],c=t.length;for(let a=0;a<c;++a){let c=t[a];const l=Array.isArray(o)?o[a]:o;if((_(c)||n.retainNullValues&&null==c||r)&&((n.retainNullValues||null!=c)&&(r&&(c=i(_(c)?c:null,l)),g(c,e),s.push(c),e.originalLimit&&s.length>=e.originalLimit)))break}const a=s.length;for(;t.length>a;)Array.prototype.pop.apply(t,[]);let l=0;if(f.isMongooseArray(t))for(l=0;l<a;++l)t.set(l,s[l],!0);else for(l=0;l<a;++l)t[l]=s[l];return t}return _(t)||f.isPOJO(t)?(g(t,e),i(t,o)):t instanceof Map?t:!1===n.justOne?[]:i(null==t?t:null,o)}function g(t,e){null!=t&&e.excludeId&&(\"function\"==typeof t.$__setValue?delete t._doc._id:delete t._id)}function _(t){return null!=t&&(Array.isArray(t)||t.$isMongooseMap||null!=t.$__||a.has(t))}function b(t){return t}t.exports=function(t){const e=Object.assign({},s(t,\"allOptions.options.options\"),s(t,\"allOptions.options\")),n=Object.assign({},t.options,e,{justOne:t.justOne});n.$nullIfNotFound=t.isVirtual;const g=t.populatedModel,_=[].concat(t.rawIds);t.allIds=[].concat(t.allIds),i(t.rawIds,t.rawDocs,t.rawOrder,n);const b=t.docs,O=t.rawIds,$=t.options,w=t.count&&t.isVirtual;let v;function E(e){if(w)return e;if(e instanceof r)return e.val;if(void 0===e)return e;const o=t.allIds[v];if(t.path.endsWith(\".$*\"))return m(e,$,n,o);if(!0===t.justOne&&Array.isArray(e)){const t=[];for(const n of e){const e=a.get(n);null!=e&&e!==g||t.push(n)}for(;e.length>t.length;)Array.prototype.pop.apply(e,[]);for(let n=0;n<t.length;++n)e[n]=t[n];return m(e[0],$,n,o)}return!1!==t.justOne||Array.isArray(e)?m(e,$,n,o):m([e],$,n,o)}for(v=0;v<b.length;++v){const e=t.path.endsWith(\".$*\")?t.path.slice(0,-3):t.path,n=p.get(e,b[v],l);if(null==n&&!c(t.originalModel.schema,e))continue;let r;r=w?y(O[v]):Array.isArray(t.match)?Array.isArray(O[v])?O[v].filter(h(t.match[v])):[O[v]].filter(h(t.match[v]))[0]:O[v];const i=t.originalModel.schema,a=null!=s(b[v],\"$__\",null);let m=a?n instanceof Map:f.isPOJO(n);if(m=m&&s(i._getSchema(e),\"$isSchemaMap\"),!t.isVirtual&&m){const t=n instanceof Map?Array.from(n.keys()):Object.keys(n);r=r.reduce((e,n,o)=>(e.set(t[o],n),e),new Map)}if(a&&Array.isArray(r))for(const t of r)null!=t&&null!=t.$__&&(t.$__.parent=b[v]);else a&&null!=r&&null!=r.$__&&(r.$__.parent=b[v]);if(t.isVirtual&&a){b[v].$populated(e,t.justOne?_[0]:_,t.allOptions),Array.isArray(r)&&(r=r.map(t=>null==t?void 0:t)),p.set(e,r,b[v],void 0,E,!1);continue}const g=e.split(\".\");let $=b[v];const A=g[0];for(let t=0;t<g.length-1&&(!Array.isArray($)||f.isArrayIndex(g[t]))&&\"$*\"!==g[t];++t){if(null==$[g[t]]){const e=i._getSchema(A);if(null==r&&null!=e&&e.$isMongooseArray)break;$[g[t]]={}}if($=$[g[t]],\"object\"!=typeof $)break}b[v].$__&&(t.allOptions.options[d]=t.allOptions.model,b[v].$populated(e,t.unpopulatedValues[v],t.allOptions.options),null!=r&&null!=r.$__&&(r.$__.wasPopulated={value:t.unpopulatedValues[v]}),r instanceof Map&&!r.$isMongooseMap&&(r=new o(r,e,b[v],b[v].schema.path(e).$__schemaType))),p.set(e,r,b[v],l,E,!1),b[v].$__&&u(b[v],[t.allOptions.options])}}},function(t,e,n){\"use strict\";const o=n(12),r=n(76),i=n(1).modelSymbol,s=n(3);t.exports=function t(e,n,a,l,u){const p=[],h=l.sort&&e.length>1,f=l.$nullIfNotFound;let d,y,m;s.isMongooseArray(e)&&(e=e.__array);let g=0;const _=e.length;if(h&&u&&void 0===l[c]){l[c]=!1;for(const t in a)if(Array.isArray(a[t])){l[c]=!0;break}}for(g=0;g<_;++g)if(m=e[g],Array.isArray(m))t(m,n,a,l,!0),p.push(m);else if(null!==m||!1!==h){if(y=String(m),d=n[y],l.clone&&null!=d)if(l.lean){const t=r.get(d);d=o(d),r.set(d,t)}else d=d.constructor.hydrate(d._doc);if(u)if(d)if(h){const t=a[y];l[c]?p.push(d):p[t]=d}else p.push(d);else null!=m&&null!=m[i]?p.push(m):p.push(l.retainNullValues||f?null:m);else p[g]=d||null}else p.push(m);e.length=0,p.length&&p.forEach((function(t,n){e[n]=t}))};const c=Symbol(\"assignRawDocsToIdStructure.hasArray\")},function(t,e,n){\"use strict\";n.r(e),n.d(e,\"$Size\",(function(){return N})),n.d(e,\"$all\",(function(){return ct})),n.d(e,\"$and\",(function(){return st})),n.d(e,\"$elemMatch\",(function(){return Q})),n.d(e,\"$eq\",(function(){return q})),n.d(e,\"$exists\",(function(){return et})),n.d(e,\"$gt\",(function(){return X})),n.d(e,\"$gte\",(function(){return Z})),n.d(e,\"$in\",(function(){return G})),n.d(e,\"$lt\",(function(){return Y})),n.d(e,\"$lte\",(function(){return J})),n.d(e,\"$mod\",(function(){return tt})),n.d(e,\"$ne\",(function(){return z})),n.d(e,\"$nin\",(function(){return H})),n.d(e,\"$nor\",(function(){return W})),n.d(e,\"$not\",(function(){return ot})),n.d(e,\"$options\",(function(){return lt})),n.d(e,\"$or\",(function(){return K})),n.d(e,\"$regex\",(function(){return nt})),n.d(e,\"$size\",(function(){return at})),n.d(e,\"$type\",(function(){return it})),n.d(e,\"$where\",(function(){return ut})),n.d(e,\"EqualsOperation\",(function(){return b})),n.d(e,\"createDefaultQueryOperation\",(function(){return ht})),n.d(e,\"createEqualsOperation\",(function(){return O})),n.d(e,\"createOperationTester\",(function(){return P})),n.d(e,\"createQueryOperation\",(function(){return j})),n.d(e,\"createQueryTester\",(function(){return k}));\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function r(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Class extends value \"+String(e)+\" is not a constructor or null\");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var i=function(t){var e=\"[object \"+t+\"]\";return function(t){return s(t)===e}},s=function(t){return Object.prototype.toString.call(t)},c=function(t){return t instanceof Date?t.getTime():a(t)?t.map(c):t&&\"function\"==typeof t.toJSON?t.toJSON():t},a=i(\"Array\"),l=i(\"Object\"),u=i(\"Function\"),p=function(t,e){if(null==t&&t==e)return!0;if(t===e)return!0;if(Object.prototype.toString.call(t)!==Object.prototype.toString.call(e))return!1;if(a(t)){if(t.length!==e.length)return!1;for(var n=0,o=t.length;n<o;n++)if(!p(t[n],e[n]))return!1;return!0}if(l(t)){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(!p(t[r],e[r]))return!1;return!0}return!1},h=function(t,e,n,o,r,i){var s=e[o];if(a(t)&&isNaN(Number(s)))for(var c=0,l=t.length;c<l;c++)if(!h(t[c],e,n,o,c,t))return!1;return o===e.length||null==t?n(t,r,i,0===o):h(t[s],e,n,o+1,s,t)},f=function(){function t(t,e,n,o){this.params=t,this.owneryQuery=e,this.options=n,this.name=o,this.init()}return t.prototype.init=function(){},t.prototype.reset=function(){this.done=!1,this.keep=!1},t}(),d=function(t){function e(e,n,o,r){var i=t.call(this,e,n,o)||this;return i.children=r,i}return r(e,t),e.prototype.reset=function(){this.keep=!1,this.done=!1;for(var t=0,e=this.children.length;t<e;t++)this.children[t].reset()},e.prototype.childrenNext=function(t,e,n,o){for(var r=!0,i=!0,s=0,c=this.children.length;s<c;s++){var a=this.children[s];if(a.done||a.next(t,e,n,o),a.keep||(i=!1),a.done){if(!a.keep)break}else r=!1}this.done=r,this.keep=i},e}(f),y=function(t){function e(e,n,o,r,i){var s=t.call(this,e,n,o,r)||this;return s.name=i,s}return r(e,t),e}(d),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!0,e}return r(e,t),e.prototype.next=function(t,e,n,o){this.childrenNext(t,e,n,o)},e}(d),g=function(t){function e(e,n,o,r,i){var s=t.call(this,n,o,r,i)||this;return s.keyPath=e,s.propop=!0,s._nextNestedValue=function(t,e,n,o){return s.childrenNext(t,e,n,o),!s.done},s}return r(e,t),e.prototype.next=function(t,e,n){h(t,this.keyPath,this._nextNestedValue,0,e,n)},e}(d),_=function(t,e){if(t instanceof Function)return t;if(t instanceof RegExp)return function(e){var n=\"string\"==typeof e&&t.test(e);return t.lastIndex=0,n};var n=c(t);return function(t){return e(n,c(t))}},b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!0,e}return r(e,t),e.prototype.init=function(){this._test=_(this.params,this.options.compare)},e.prototype.next=function(t,e,n){Array.isArray(n)&&!n.hasOwnProperty(e)||this._test(t,e,n)&&(this.done=!0,this.keep=!0)},e}(f),O=function(t,e,n){return new b(t,e,n)},$=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!0,e}return r(e,t),e.prototype.next=function(){this.done=!0,this.keep=!1},e}(f),w=function(t){return e=function(e,n,o,r){var i=typeof c(e),s=t(e);return new b((function(t){return typeof c(t)===i&&s(t)}),n,o,r)},function(t,n,o,r){return null==t?new $(t,n,o,r):e(t,n,o,r)};var e},v=function(t,e,n,o){var r=o.operations[t];return r||E(t),r(e,n,o,t)},E=function(t){throw new Error(\"Unsupported operation: \"+t)},A=function(t,e){for(var n in t)if(e.operations.hasOwnProperty(n)||\"$\"===n.charAt(0))return!0;return!1},S=function(t,e,n,o,r){if(A(e,r)){var i=x(e,n,r),s=i[0];if(i[1].length)throw new Error(\"Property queries must contain only operations, or exact objects.\");return new g(t,e,o,r,s)}return new g(t,e,o,r,[new b(e,o,r)])},j=function(t,e,n){void 0===e&&(e=null);var o=void 0===n?{}:n,r=o.compare,i=o.operations,s={compare:r||p,operations:Object.assign({},i||{})},c=x(t,null,s),a=c[0],l=c[1],u=[];return a.length&&u.push(new g([],t,e,s,a)),u.push.apply(u,l),1===u.length?u[0]:new m(t,e,s,u)},x=function(t,e,n){var o,r=[],i=[];if(!(o=t)||o.constructor!==Object&&o.constructor!==Array&&\"function Object() { [native code] }\"!==o.constructor.toString()&&\"function Array() { [native code] }\"!==o.constructor.toString()||o.toJSON)return r.push(new b(t,t,n)),[r,i];for(var s in t)if(n.operations.hasOwnProperty(s)){var c=v(s,t[s],t,n);if(c&&!c.propop&&e&&!n.operations[e])throw new Error(\"Malformed query. \"+s+\" cannot be matched against property.\");null!=c&&r.push(c)}else\"$\"===s.charAt(0)?E(s):i.push(S(s.split(\".\"),t[s],s,t,n));return[r,i]},P=function(t){return function(e,n,o){return t.reset(),t.next(e,n,o),t.keep}},k=function(t,e){return void 0===e&&(e={}),P(j(t,null,e))},M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!0,e}return r(e,t),e.prototype.init=function(){this._test=_(this.params,this.options.compare)},e.prototype.reset=function(){t.prototype.reset.call(this),this.keep=!0},e.prototype.next=function(t){this._test(t)&&(this.done=!0,this.keep=!1)},e}(f),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!0,e}return r(e,t),e.prototype.init=function(){if(!this.params||\"object\"!=typeof this.params)throw new Error(\"Malformed query. $elemMatch must by an object.\");this._queryOperation=j(this.params,this.owneryQuery,this.options)},e.prototype.reset=function(){t.prototype.reset.call(this),this._queryOperation.reset()},e.prototype.next=function(t){if(a(t)){for(var e=0,n=t.length;e<n;e++){this._queryOperation.reset();var o=t[e];this._queryOperation.next(o,e,t,!1),this.keep=this.keep||this._queryOperation.keep}this.done=!0}else this.done=!1,this.keep=!1},e}(f),D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!0,e}return r(e,t),e.prototype.init=function(){this._queryOperation=j(this.params,this.owneryQuery,this.options)},e.prototype.reset=function(){t.prototype.reset.call(this),this._queryOperation.reset()},e.prototype.next=function(t,e,n,o){this._queryOperation.next(t,e,n,o),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},e}(f),N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!0,e}return r(e,t),e.prototype.init=function(){},e.prototype.next=function(t){a(t)&&t.length===this.params&&(this.done=!0,this.keep=!0)},e}(f),T=function(t){if(0===t.length)throw new Error(\"$and/$or/$nor must be a nonempty array\")},I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!1,e}return r(e,t),e.prototype.init=function(){var t=this;T(this.params),this._ops=this.params.map((function(e){return j(e,null,t.options)}))},e.prototype.reset=function(){this.done=!1,this.keep=!1;for(var t=0,e=this._ops.length;t<e;t++)this._ops[t].reset()},e.prototype.next=function(t,e,n){for(var o=!1,r=!1,i=0,s=this._ops.length;i<s;i++){var c=this._ops[i];if(c.next(t,e,n),c.keep){o=!0,r=c.keep;break}}this.keep=r,this.done=o},e}(f),R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!1,e}return r(e,t),e.prototype.next=function(e,n,o){t.prototype.next.call(this,e,n,o),this.keep=!this.keep},e}(I),F=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!0,e}return r(e,t),e.prototype.init=function(){var t=this;this._testers=this.params.map((function(e){if(A(e,t.options))throw new Error(\"cannot nest $ under \"+t.name.toLowerCase());return _(e,t.options.compare)}))},e.prototype.next=function(t,e,n){for(var o=!1,r=!1,i=0,s=this._testers.length;i<s;i++){if((0,this._testers[i])(t)){o=!0,r=!0;break}}this.keep=r,this.done=o},e}(f),B=function(t){function e(e,n,o,r){var i=t.call(this,e,n,o,r)||this;return i.propop=!0,i._in=new F(e,n,o,r),i}return r(e,t),e.prototype.next=function(t,e,n,o){this._in.next(t,e,n),a(n)&&!o?this._in.keep?(this.keep=!1,this.done=!0):e==n.length-1&&(this.keep=!0,this.done=!0):(this.keep=!this._in.keep,this.done=!0)},e.prototype.reset=function(){t.prototype.reset.call(this),this._in.reset()},e}(f),V=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!0,e}return r(e,t),e.prototype.next=function(t,e,n){n.hasOwnProperty(e)===this.params&&(this.done=!0,this.keep=!0)},e}(f),U=function(t){function e(e,n,o,r){var i=t.call(this,e,n,o,e.map((function(t){return j(t,n,o)})),r)||this;return i.propop=!1,T(e),i}return r(e,t),e.prototype.next=function(t,e,n,o){this.childrenNext(t,e,n,o)},e}(y),L=function(t){function e(e,n,o,r){var i=t.call(this,e,n,o,e.map((function(t){return j(t,n,o)})),r)||this;return i.propop=!0,i}return r(e,t),e.prototype.next=function(t,e,n,o){this.childrenNext(t,e,n,o)},e}(y),q=function(t,e,n){return new b(t,e,n)},z=function(t,e,n,o){return new M(t,e,n,o)},K=function(t,e,n,o){return new I(t,e,n,o)},W=function(t,e,n,o){return new R(t,e,n,o)},Q=function(t,e,n,o){return new C(t,e,n,o)},H=function(t,e,n,o){return new B(t,e,n,o)},G=function(t,e,n,o){return new F(t,e,n,o)},Y=w((function(t){return function(e){return e<t}})),J=w((function(t){return function(e){return e<=t}})),X=w((function(t){return function(e){return e>t}})),Z=w((function(t){return function(e){return e>=t}})),tt=function(t,e,n){var o=t[0],r=t[1];return new b((function(t){return c(t)%o===r}),e,n)},et=function(t,e,n,o){return new V(t,e,n,o)},nt=function(t,e,n){return new b(new RegExp(t,e.$options),e,n)},ot=function(t,e,n,o){return new D(t,e,n,o)},rt={number:function(t){return\"number\"==typeof t},string:function(t){return\"string\"==typeof t},bool:function(t){return\"boolean\"==typeof t},array:function(t){return Array.isArray(t)},null:function(t){return null===t},timestamp:function(t){return t instanceof Date}},it=function(t,e,n){return new b((function(e){if(\"string\"==typeof t){if(!rt[t])throw new Error(\"Type alias does not exist\");return rt[t](e)}return null!=e&&(e instanceof t||e.constructor===t)}),e,n)},st=function(t,e,n,o){return new U(t,e,n,o)},ct=function(t,e,n,o){return new L(t,e,n,o)},at=function(t,e,n){return new N(t,e,n,\"$size\")},lt=function(){return null},ut=function(t,e,n){var o;if(u(t))o=t;else{if(process.env.CSP_ENABLED)throw new Error('In CSP mode, sift does not support strings in \"$where\" condition');o=new Function(\"obj\",\"return \"+t)}return new b((function(t){return o.bind(t)(t)}),e,n)},pt=Object.freeze({__proto__:null,$Size:N,$eq:q,$ne:z,$or:K,$nor:W,$elemMatch:Q,$nin:H,$in:G,$lt:Y,$lte:J,$gt:X,$gte:Z,$mod:tt,$exists:et,$regex:nt,$not:ot,$type:it,$and:st,$all:ct,$size:at,$options:lt,$where:ut}),ht=function(t,e,n){var o=void 0===n?{}:n,r=o.compare,i=o.operations;return j(t,e,{compare:r,operations:Object.assign({},pt,i||{})})};e.default=function(t,e){void 0===e&&(e={});var n=ht(t,null,e);return P(n)}},function(t,e,n){\"use strict\";const o=n(24),r=n(164),i=n(166),s=n(55),c=n(186),a=n(192);function l(t,e){null!=t&&t.discriminatorMapping&&!t.discriminatorMapping.isRoot&&(e[t.discriminatorMapping.key]=t.discriminatorMapping.value)}function u(t,e){const n=t.schema.options.discriminatorKey;return null!=e&&e.hasOwnProperty(n)&&(t=o(t.discriminators,e[n])||t),t}t.exports=function(t,e,n){const o=t.base.now();return e.insertOne?o=>{const r=u(t,e.insertOne.document),i=new r(e.insertOne.document);r.schema.options.timestamps&&!1!==n.timestamps&&i.initializeTimestamps(),null!=n.session&&i.$session(n.session),e.insertOne.document=i,n.skipValidation||e.insertOne.skipValidation?o(null):e.insertOne.document.$validate().then(()=>{o(null)},t=>{o(t,null)})}:e.updateOne?p=>{try{if(!e.updateOne.filter)throw new Error(\"Must provide a filter object.\");if(!e.updateOne.update)throw new Error(\"Must provide an update object.\");const p=u(t,e.updateOne.filter),h=p.schema,f=null!=n.strict?n.strict:p.schema.options.strict;if(l(h,e.updateOne.filter),null!=p.schema.$timestamps&&!1!==e.updateOne.timestamps){const t=p.schema.$timestamps.createdAt,n=p.schema.$timestamps.updatedAt;i(o,t,n,e.updateOne.update,{})}r(o,e.updateOne.update,p.schema),!1!==e.updateOne.setDefaultsOnInsert&&a(e.updateOne.filter,p.schema,e.updateOne.update,{setDefaultsOnInsert:!0,upsert:e.updateOne.upsert}),e.updateOne.filter=s(p.schema,e.updateOne.filter,{strict:f,upsert:e.updateOne.upsert}),e.updateOne.update=c(p.schema,e.updateOne.update,{strict:f,overwrite:!1,upsert:e.updateOne.upsert},p,e.updateOne.filter)}catch(t){return p(t,null)}p(null)}:e.updateMany?p=>{try{if(!e.updateMany.filter)throw new Error(\"Must provide a filter object.\");if(!e.updateMany.update)throw new Error(\"Must provide an update object.\");const p=u(t,e.updateMany.filter),h=p.schema,f=null!=n.strict?n.strict:p.schema.options.strict;if(!1!==e.updateMany.setDefaultsOnInsert&&a(e.updateMany.filter,p.schema,e.updateMany.update,{setDefaultsOnInsert:!0,upsert:e.updateMany.upsert}),null!=p.schema.$timestamps&&!1!==e.updateMany.timestamps){const t=p.schema.$timestamps.createdAt,n=p.schema.$timestamps.updatedAt;i(o,t,n,e.updateMany.update,{})}r(o,e.updateMany.update,p.schema),l(h,e.updateMany.filter),e.updateMany.filter=s(p.schema,e.updateMany.filter,{strict:f,upsert:e.updateMany.upsert}),e.updateMany.update=c(p.schema,e.updateMany.update,{strict:f,overwrite:!1,upsert:e.updateMany.upsert},p,e.updateMany.filter)}catch(t){return p(t,null)}p(null)}:e.replaceOne?o=>{const r=u(t,e.replaceOne.filter),i=r.schema,c=null!=n.strict?n.strict:r.schema.options.strict;l(i,e.replaceOne.filter);try{e.replaceOne.filter=s(r.schema,e.replaceOne.filter,{strict:c,upsert:e.replaceOne.upsert})}catch(t){return o(t,null)}const a=new r(e.replaceOne.replacement,c,!0);if(r.schema.options.timestamps&&a.initializeTimestamps(),null!=n.session&&a.$session(n.session),e.replaceOne.replacement=a,n.skipValidation||e.replaceOne.skipValidation)return e.replaceOne.replacement=e.replaceOne.replacement.toBSON(),void o(null);e.replaceOne.replacement.$validate().then(()=>{e.replaceOne.replacement=e.replaceOne.replacement.toBSON(),o(null)},t=>{o(t,null)})}:e.deleteOne?n=>{const o=u(t,e.deleteOne.filter);l(o.schema,e.deleteOne.filter);try{e.deleteOne.filter=s(o.schema,e.deleteOne.filter)}catch(t){return n(t,null)}n(null)}:e.deleteMany?n=>{const o=u(t,e.deleteMany.filter);l(o.schema,e.deleteMany.filter);try{e.deleteMany.filter=s(o.schema,e.deleteMany.filter)}catch(t){return n(t,null)}n(null)}:t=>{t(new Error(\"Invalid op passed to `bulkWrite()`\"),null)}}},function(t,e,n){\"use strict\";const o=n(113),r=n(109),{trusted:i}=n(52),s=n(111);function c(t,e,n){return t=t.filter(t=>!(t instanceof o)),n?t.filter(t=>{try{return e.cast(t),!0}catch(t){return!1}}):t}t.exports=function(t,e,n,o,a){const l=function(t){if(Array.isArray(t))return t.length>1?{$or:[].concat(t.map(t=>Object.assign({},t)))}:Object.assign({},t[0]);return Object.assign({},t)}(e);if(1===n.size){const e=Array.from(n)[0],u=o.schema.path(e);if(\"_id\"===e&&l._id){if(\"_id\"===e&&l._id){const n=s(l[e])?l[e]:{$eq:l[e]};l[e]={...i({$in:t}),...n}}}else t=c(t,u,a),l[e]=i({$in:t});const p=r(e);for(let n=0;n<p.length-1;++n){const o=p[n];if(null!=l[o]&&null!=l[o].$elemMatch){l[o].$elemMatch[e.slice(o.length+1)]=i({$in:t}),delete l[e];break}}}else{const e=[];Array.isArray(l.$or)?(l.$and=[{$or:l.$or},{$or:e}],delete l.$or):l.$or=e;for(const r of n)if(\"_id\"===r&&l._id){if(\"_id\"===r&&l._id){const e=s(l[r])?l[r]:{$eq:l[r]};l[r]={...i({$in:t}),...e}}}else{t=c(t,o.schema.path(r),a),e.push({[r]:{$in:t}})}}return l}},function(t,e,n){\"use strict\";t.exports=function(){return{result:{ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]},insertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,upsertedCount:0,upsertedIds:{},insertedIds:{},n:0}}},function(t,e,n){\"use strict\";t.exports=function(t){return null==t?null:Object.keys(t)[0]}},function(t,e,n){\"use strict\";const o=n(9),r=n(113),i=n(12),s=n(10),c=n(24),a=n(14),l=n(397),u=n(196),p=n(114),h=n(23),f=n(398),d=n(3),y=n(1).modelSymbol,m=n(1).populateModelSymbol,g=n(43).schemaMixedSymbol,_=n(156);\n/*!\n * ignore\n */\nfunction b(t,e,n,o,r,c,a,l,u,p){const h=null!=r.connection?r.connection:t.db;if(p=void 0===p?a:p,Array.isArray(p)&&(p=d.cloneArrays(p)),null==o)return;let f=o.length;for(;f--;){const t=o[f];if(null==t)continue;let g;if(r.model&&r.model[y])g=r.model;else if(t[y])g=t;else try{g=O(h,t)}catch(t){if(void 0!==a)throw t;g=null}let _=a;const b=Array.isArray(a)?d.array.flatten(a):[],$=c.modelNamesInOrder?c.modelNamesInOrder:o;c.isRefPath&&Array.isArray(a)&&b.length===$.length&&(_=b.filter((e,n)=>$[n]===t));const w=null==r.perDocumentLimit?s(r,\"options.perDocumentLimit\",null):r.perDocumentLimit;if(n[t]&&null==w)n[t].localField.add(c.localField),n[t].foreignField.add(c.foreignField),n[t].docs.push(l),n[t].ids.push(_),n[t].allIds.push(a),n[t].unpopulatedValues.push(p),c.hasMatchFunction&&n[t].match.push(c.match);else{const o={model:g};c.isVirtual&&s(c.virtual,\"options.options\")?o.options=i(c.virtual.options.options):null!=u&&(o.options=Object.assign({},u)),d.merge(o,r),r[m]=g,n[t]={model:g,options:o,match:c.hasMatchFunction?[c.match]:c.match,docs:[l],ids:[_],allIds:[a],unpopulatedValues:[p],localField:new Set([c.localField]),foreignField:new Set([c.foreignField]),justOne:c.justOne,isVirtual:c.isVirtual,virtual:c.virtual,count:c.count,[m]:g},e.push(n[t])}}}function O(t,e){return null==t.models[e]&&null!=t._parent?O(t._parent,e):t.model(e)}\n/*!\n * ignore\n */function $(t,e){return\"function\"!=typeof t||t[y]?t:t.call(e,e)}\n/*!\n * ignore\n */function w(t,e,n,o,r,i){const c=n.schema._getPathType(e),a=\"real\"===c?n.schema.path(e):c.schema,l=a&&a.getters?a.getters:[];e=null!=a&&\"Embedded\"===a.instance?e+\"._id\":e;const u=s(o,\"options\",{}),f=\"getters\"in u?u.getters:s(r,\"options.getters\",!1);if(0!==l.length&&f){const o=null!=t.$__?t:n.hydrate(t),r=d.getValue(e,t);if(Array.isArray(r)){const t=d.getValue(e.split(\".\").slice(0,-1),o);return r.map((e,n)=>a.applyGetters(e,t[n]))}return a.applyGetters(r,o)}return v(h.get(e,t,p),i)}function v(t,e){if(null!=t&&null!=t.$__)return t._id;if(null!=t&&null!=t._id&&(null==e||!e.$isSchemaMap))return t._id;if(Array.isArray(t)){const e=null!=t.__array?t.__array:t;for(let t=0;t<e.length;++t)null!=e[t]&&null!=e[t].$__&&(e[t]=e[t]._id);return d.isMongooseArray(t)&&t.$schema()?t.$schema()._castForPopulate(t,t.$parent()):[].concat(t)}if(\"Object\"===a(t)&&(null==e||null==e[g])){const e=[];for(const n of Object.keys(t))e.push(t[n]);return e}return t instanceof Map?Array.from(t.values()):t}\n/*!\n * ignore\n */function E(t,e,n,o,i,s){if(!n.isRefPath||null==i)return;const c=i.split(\".\");let a=\"\",l=void 0;for(let i=0;i<c.length;++i){const u=c[i];a=a+(0===a.length?\"\":\".\")+u;const p=e.path(a);if(null!=p&&p.$isMongooseArray&&null!=p.caster.discriminators&&0!==Object.keys(p.caster.discriminators).length){const e=d.getValue(a,t),u=o.path.substring(a.length+1),h=p.caster.schema.options.discriminatorKey;l=[];for(const t of e){const e=d.getValue(h,t),o=p.caster.discriminators[e],f=o&&o.schema;if(null==f)continue;const y=f.path(u);if(null==y||null==y.options.refPath){const e=d.getValue(n.localField.substring(a.length+1),t);s.forEach((t,n)=>{t===e&&(s[n]=r(t))});continue}const m=d.getValue(c.slice(i+1).join(\".\"),t);l.push(m)}}}return l}t.exports=function(t,e,n){let r;const i=e.length,a=[],m=n.model&&n.model.modelName||n.model;let A,S,j;const x={},P=t.schema;if(null!=n._localModel&&n._localModel.schema.nested[n.path])return[];const k=u(t.schema,n.path);if(null!=(null==k?null:k.virtual))\n/*!\n * ignore\n */\nreturn function(t,e,n,r){const i=[],c={},a=r.virtual;for(const l of e){let e=null;const u={};let d;const m=r.nestedSchemaPath?r.nestedSchemaPath+\".\":\"\";d=\"string\"==typeof n.localField?n.localField:\"function\"==typeof a.options.localField?m+a.options.localField.call(l,l):Array.isArray(a.options.localField)?a.options.localField.map(t=>m+t):m+a.options.localField,u.count=a.options.count,null==a.options.skip||n.hasOwnProperty(\"skip\")||(n.skip=a.options.skip),null==a.options.limit||n.hasOwnProperty(\"limit\")||(n.limit=a.options.limit),null==a.options.perDocumentLimit||n.hasOwnProperty(\"perDocumentLimit\")||(n.perDocumentLimit=a.options.perDocumentLimit);let g=a.options.foreignField;if(!d||!g)return new o(\"If you are populating a virtual, you must set the localField and foreignField options\");\"function\"==typeof d&&(d=d.call(l,l)),\"function\"==typeof g&&(g=g.call(l,l)),u.isRefPath=!1;let _=null;if(\"justOne\"in n&&void 0!==n.justOne&&(_=n.justOne),a.options.refPath)e=f(a.options.refPath,l,n.path),_=!!a.options.justOne,u.isRefPath=!0;else if(a.options.ref){let t;t=\"function\"!=typeof a.options.ref||a.options.ref[y]?a.options.ref:a.options.ref.call(l,l),_=!!a.options.justOne,e=Array.isArray(t)?t:[t]}u.isVirtual=!0,u.virtual=a,u.justOne=_;let O=s(n,\"match\",null)||s(u,\"virtual.options.match\",null)||s(u,\"virtual.options.options.match\",null),$=\"function\"==typeof O;if($&&(O=O.call(l,l)),Array.isArray(d)&&Array.isArray(g)&&d.length===g.length){O=Object.assign({},O);for(let e=1;e<d.length;++e)O[g[e]]=v(h.get(d[e],l,p),t.schema),$=!0;d=d[0],g=g[0]}u.localField=d,u.foreignField=g,u.match=O,u.hasMatchFunction=$;const E=w(l,d,t,n,a);try{b(t,i,c,e,n,u,E,l)}catch(t){return t}}return i}(t,e,n,k);let M=l(t,P,null,n.path);if(M=Array.isArray(M)?M:[M].filter(t=>null!=t),0===M.length&&!1!==n.strictPopulate&&null!=n._localModel)return new _(n._fullPath||n.path);for(let c=0;c<i;c++){r=e[c];let i=null;const u=null!=r&&null!=r.$__?r.$__schema:P;if(A=l(t,u,r,n.path),null!=A&&A.$isMongooseDocumentArray&&null==A.options.ref&&null==A.options.refPath)continue;if(A&&A.$isUnderneathDocArray&&null!=s(n,\"options.sort\"))return new o(\"Cannot populate with `sort` on path \"+n.path+\" because it is a subproperty of a document array\");j=null;let p=!1,f=null,y=null,_=null;if(null!=A&&\"Embedded\"===A.instance){if(A.options.ref){const e={localField:n.path+\"._id\",foreignField:\"_id\",justOne:!0},o=C(r,A,m,t),i=h.get(n.path,r),s=h.get(\"_id\",i);b(t,a,x,o.modelNames,n,e,s,r,y,i)}continue}if(Array.isArray(A)){const e=A;for(const n of e){let e,o;try{o=C(r,n,m,t),e=o.modelNames,p=p||o.isRefPath,f=f||o.refPath,i=o.justOne}catch(t){return t}if((!p||o.isRefPath)&&e){j=j||[];for(const t of e)-1===j.indexOf(t)&&j.push(t)}}}else{try{const e=C(r,A,m,t);j=e.modelNames,p=e.isRefPath,f=f||e.refPath,i=e.justOne,y=s(A,\"options.populate\",null),p&&(_=j,j=Array.from(new Set(j)))}catch(t){return t}if(!j)continue}const O={},$=n.path,v=\"_id\";if(\"justOne\"in n&&void 0!==n.justOne?i=n.justOne:A&&!A[g]&&(n.path.endsWith(\".\"+A.path)||n.path===A.path)&&(i=Array.isArray(A)?A.every(t=>!t.$isMongooseArray):!A.$isMongooseArray),!j)continue;O.isVirtual=!1,O.justOne=i,O.localField=$,O.foreignField=v;const S=w(r,$,t,n,null,A),k=String(d.getValue(v,r));n._docs[k]=Array.isArray(S)?S.slice():S;let M=s(n,\"match\",null);const D=\"function\"==typeof M;if(D&&(M=M.call(r,r)),O.match=M,O.hasMatchFunction=D,O.isRefPath=p,O.modelNamesInOrder=_,p){j=E(r,P,O,n,f,S)||j}try{b(t,a,x,j,n,O,S,r,y)}catch(t){return t}}return a;function C(t,e,o,r){let i,a=!1,l=null;const u=e;e&&\"Array\"===e.instance&&(e=e.caster),e&&e.$isSchemaMap&&(e=e.$__schemaType);const y=e&&e.options&&e.options.ref;if(S=e&&e.options&&e.options.refPath,null!=e&&e[g]&&!y&&!S&&!o)return{modelNames:null};if(o)i=[o];else if(null!=S){if(\"function\"==typeof S){const o=n.path.slice(0,n.path.length-e.path.length-1),r=h.get(o,t,p),s=Array.isArray(r)?d.array.flatten(r):r?[r]:[];i=new Set;for(const e of s)S=S.call(e,e,n.path),f(S,t,n.path,P,n._queryProjection).forEach(t=>i.add(t));i=Array.from(i)}else i=f(S,t,n.path,P,n._queryProjection);a=!0}else{let o,y,m,g,_=r;const b=r.schema.options.discriminatorKey;if(!e&&b&&(g=d.getValue(b,t))){const t=c(r.discriminators,g)||r;if(null!=t)_=t;else try{_=O(r.db,g)}catch(t){return t}m=_.schema._getSchema(n.path),m&&m.caster&&(m=m.caster)}else m=e;if(u&&u.path.endsWith(\".$*\")?l=!u.$isMongooseArray&&!u._arrayPath:null!=m&&(l=!m.$isMongooseArray&&!m._arrayPath),null!=(o=s(m,\"options.ref\")))if(null!=m&&\"function\"==typeof o&&n.path.endsWith(\".\"+m.path)){i=new Set;const e=n.path.slice(0,n.path.length-m.path.length-1),r=h.get(e,t,p),s=Array.isArray(r)?d.array.flatten(r):r?[r]:[];for(const t of s)i.add($(o,t));i=0===s.length?[$(o,t)]:Array.from(i)}else o=$(o,t),i=[o];else if(null!=(m=s(e,\"options.refPath\")))if(a=!0,\"function\"==typeof y){const e=n.path.slice(0,n.path.length-m.path.length-1),o=h.get(e,t,p),r=Array.isArray(o)?d.array.flatten(o):o?[o]:[];i=new Set;for(const e of r)y=y.call(e,e,n.path),f(y,t,n.path,P,n._queryProjection).forEach(t=>i.add(t));i=Array.from(i)}else i=f(y,t,n.path,P,n._queryProjection)}if(!i){if(null!=n._localModel)return{modelNames:i,justOne:l,isRefPath:a,refPath:S};i=[r.modelName]}return Array.isArray(i)||(i=[i]),{modelNames:i,justOne:l,isRefPath:a,refPath:S}}}},function(t,e,n){\"use strict\";\n/*!\n * ignore\n */const o=n(42),r=n(10),i=n(24),s=n(76),c=n(23),a=n(1).populateModelSymbol;t.exports=function t(e,n,l,u){const p=n.path(u),h=l;if(p)return p;const f=n.discriminatorMapping&&n.discriminatorMapping.key;if(f&&null!=e)if(null!=l&&null!=l[f]){const t=i(e.discriminators,l[f]);n=t?t.schema:n}else if(null!=e.discriminators)return Object.keys(e.discriminators).reduce((n,o)=>{const r=e.discriminators[o];return n.concat(t(r,r.schema,null,u))},[]);const d=u.split(\".\");for(let t=0;t<d.length;++t)\"$\"===d[t]&&(d[t]=\"0\");return function t(e,n,i,u){let p,f,d=e.length+1;for(;d--;){if(f=e.slice(0,d).join(\".\"),p=n.path(f),null==p)continue;if(p.caster){if(p.caster instanceof o)return p.caster;let r=null;if(null!=p.schema&&null!=p.schema.discriminators){const t=p.schema.discriminators,e=f+\".\"+p.schema.options.discriminatorKey,n=i&&c.get(e,i)||[];r=Object.keys(t).reduce((function(e,o){const r=t[o].discriminatorMapping.value;return null!=l&&-1===n.indexOf(o)&&-1===n.indexOf(r)||e.push(t[o]),e}),[])}if(d!==e.length&&p.schema){let o;if(\"$\"===e[d])return d+1===e.length?p:(o=t(e.slice(d+1),n,i?c.get(f,i):null,u.concat(e.slice(0,d))),o&&(o.$isUnderneathDocArray=o.$isUnderneathDocArray||!p.schema.$isSingleNested),o);if(null!=r&&r.length>0){o=[];for(const n of r){const r=t(e.slice(d),n,i?c.get(f,i):null,u.concat(e.slice(0,d)));null!=r&&(r.$isUnderneathDocArray=r.$isUnderneathDocArray||!p.schema.$isSingleNested,r.$isUnderneathDocArray&&(o.$isUnderneathDocArray=!0),o.push(r))}return o}return o=t(e.slice(d),p.schema,i?c.get(f,i):null,u.concat(e.slice(0,d))),o&&(o.$isUnderneathDocArray=o.$isUnderneathDocArray||!p.schema.$isSingleNested),o}if(d!==e.length&&p.$isMongooseArray&&p.casterConstructor.$isMongooseArray){let n=p;for(;n.$isMongooseArray&&!n.$isMongooseDocumentArray;)n=n.casterConstructor;const o=t(e.slice(d),n.schema,null,u.concat(e.slice(0,d)));if(null!=o)return o;if(n.schema.discriminators){const o=[];for(const r of Object.keys(n.schema.discriminators)){const i=n.schema.discriminators[r]||n.schema,s=t(e.slice(d),i,null,u.concat(e.slice(0,d)));null!=s&&o.push(s)}if(o.length>0)return o}}}else if(p.$isSchemaMap&&p.$__schemaType instanceof o)return p.$__schemaType;const y=u.concat([f]).join(\".\");if(null!=h&&h.$__&&h.$populated(y)&&d<e.length){const n=l.$__.populated[y].options[a];if(null!=n){const o=t(e.slice(d),n.schema,i?c.get(f,i):null,u.concat(e.slice(0,d)));return o&&(o.$isUnderneathDocArray=o.$isUnderneathDocArray||!n.schema.$isSingleNested),o}}const m=r(h,f);if(null!=m){const n=Array.isArray(m)&&m.length>0?s.get(m[0]):s.get(m),o=null!=n?n.schema:null;if(null!=o){const n=t(e.slice(d),o,i?c.get(f,i):null,u.concat(e.slice(0,d)));if(null!=n)return n.$isUnderneathDocArray=n.$isUnderneathDocArray||!o.$isSingleNested,n}}return p}}(d,n,l,[])}},function(t,e,n){\"use strict\";const o=n(11),r=n(197),i=n(114),s=n(23),c=n(2),a=n(3),l=/(\\.\\d+$|\\.\\d+\\.)/g;t.exports=function(t,e,n,u,p){if(null==t)return[];if(\"string\"==typeof t&&null!=p&&r(p,t))throw new o(\"refPath `\"+t+\"` must not be excluded in projection, got \"+c.inspect(p));if(l.test(n)){const o=n.split(l);if(\"\"===o[o.length-1])throw new Error(\"Can't populate individual element in an array\");let r=\"\",c=t;for(let t=0;t<o.length;t+=2){const e=o[t];if(!c.startsWith(e+\".\")){if(t===o.length-1){r+=c,c=\"\";break}throw new Error(\"Could not normalize ref path, chunk \"+e+\" not in populated path\")}r+=c.substring(0,e.length)+o[t+1],c=c.substring(e.length+1)}const u=s.get(r,e,i);let p=Array.isArray(u)?u:[u];return p=a.array.flatten(p),p}const h=s.get(t,e,i);let f;return f=null!=u&&u.virtuals.hasOwnProperty(t)?[u.virtuals[t].applyGetters(void 0,e)]:Array.isArray(h)?h:[h],f=a.array.flatten(f),f}},function(t,e,n){\"use strict\";const o=n(10);t.exports=function(t){if(Array.isArray(t)){const e=Object.keys(t[0]);return 1===e.length&&\"_id\"===e[0]&&\"hashed\"!==t[0]._id}if(\"object\"!=typeof t)return!1;const e=o(t,\"key\",{});return 1===Object.keys(e).length&&e.hasOwnProperty(\"_id\")}},function(t,e,n){\"use strict\";const o=n(10),r=n(3);t.exports=function(t,e,n){if(null!=n.textIndexVersion){delete n.key._fts,delete n.key._ftsx;const r={...n.weights,...n.key};if(Object.keys(r).length!==Object.keys(t).length)return!1;for(const n of Object.keys(r)){if(!(n in t))return!1;const i=r[n];if(i!==o(e,\"weights.\"+n)&&(1!==i||null!=o(e,\"weights.\"+n)))return!1}return e.default_language===n.default_language||\"english\"===n.default_language&&null==e.default_language}const i=[\"unique\",\"partialFilterExpression\",\"sparse\",\"expireAfterSeconds\",\"collation\"];for(const t of i)if(t in e||t in n)if(\"collation\"===t){if(null==e[t]||null==n[t])return null==e[t]&&null==n[t];const r=Object.keys(e.collation),i=e.collation,s=n.collation;for(const t of r)if(o(i,t)!==o(s,t))return!1}else if(!r.deepEqual(e[t],n[t]))return!1;const s=Object.keys(t),c=Object.keys(n.key);if(s.length!==c.length)return!1;for(let e=0;e<s.length;++e){if(s[e]!==c[e])return!1;if(!r.deepEqual(t[s[e]],n.key[c[e]]))return!1}return!0}},function(t,e,n){\"use strict\";function o({baseModelName:t,discriminatorMapping:e,indexes:n,indexesType:o}){const i=e&&e.key,s=e&&e.value;if(!i)return n;return Boolean(t)?n.filter(t=>{const e=r(t,o);return e&&e[i]===s}):n.filter(t=>{const e=r(t,o);return!e||!e[i]})}function r(t,e){if(\"schema\"===e){const e=t[1];return e&&e.partialFilterExpression}return t.partialFilterExpression}t.exports={getRelatedSchemaIndexes:function(t,e){return o({baseModelName:t.baseModelName,discriminatorMapping:t.schema.discriminatorMapping,indexes:e,indexesType:\"schema\"})},getRelatedDBIndexes:function(t,e){return o({baseModelName:t.baseModelName,discriminatorMapping:t.schema.discriminatorMapping,indexes:e,indexesType:\"db\"})}}},function(t,e,n){\"use strict\";t.exports=\n/*!\n * ignore\n */\nfunction(t,e,n){let o=0,r=0,i=null;if(e<=0)throw new Error(\"Limit must be positive\");if(0===t.length)return n(null,[]);for(let n=0;n<t.length&&n<e;++n)s();function s(){var e;t[r+o]((e=r+o,(a,l)=>{if(--o,++r,null==i){if(null!=a)return i=a,n(i);if(c[e]=l,r===t.length)return n(null,c);r+o<t.length&&s()}})),++o}const c=[]}},function(t,e,n){\"use strict\";t.exports=function t(e,n,o){if(null!=n)for(let r=0;r<n.length;++r)Array.isArray(n[r])?t(e,n[r],o+\".\"+r):e.push(o+\".\"+r)}},function(t,e,n){\"use strict\";const o=n(10),r=n(23),i=n(190);\n/*!\n * ignore\n */\nt.exports=function(t,e,n){const s=i(o(e,\"select\",null),!0)||i(o(e,\"options.select\",null),!0);if(null!=s)for(const e of t)if(s.hasOwnProperty(\"-\"+e))for(const t of n)null!=t.$__?r.unset(e,t._doc):r.unset(e,t)}},function(t,e,n){\"use strict\";t.exports=function t(e,n,o,r){if(e[r])return;if(e[r]=!0,!o||!o.skipTopLevel){let t=null;for(const o of n){const n=null==o[1]?null:o[1].tags;Array.isArray(n)?(t=t||new Set(e.options.pluginTags||[]),n.find(e=>t.has(e))&&e.plugin(o[0],o[1])):e.plugin(o[0],o[1])}}if(delete(o=Object.assign({},o)).skipTopLevel,!1!==o.applyPluginsToChildSchemas)for(const i of Object.keys(e.paths)){const s=e.paths[i];null!=s.schema&&(t(s.schema,n,o,r),s.caster.prototype.$__setSchema(s.schema))}const i=e.discriminators;if(null==i)return;const s=o.applyPluginsToDiscriminators,c=Object.keys(i);for(const e of c){t(i[e],n,{skipTopLevel:!s},r)}}},function(t,e,n){\"use strict\";t.exports=function(t){let e;if(t=t.toLowerCase(),!~r.indexOf(t)&&(e=o.filter((function(e){return t.match(e[0])})),e[0]))return t.replace(e[0][0],e[0][1]);return t},e.pluralization=[[/human$/gi,\"humans\"],[/(m)an$/gi,\"$1en\"],[/(pe)rson$/gi,\"$1ople\"],[/(child)$/gi,\"$1ren\"],[/^(ox)$/gi,\"$1en\"],[/(ax|test)is$/gi,\"$1es\"],[/(octop|vir)us$/gi,\"$1i\"],[/(alias|status)$/gi,\"$1es\"],[/(bu)s$/gi,\"$1ses\"],[/(buffal|tomat|potat)o$/gi,\"$1oes\"],[/([ti])um$/gi,\"$1a\"],[/sis$/gi,\"ses\"],[/(?:([^f])fe|([lr])f)$/gi,\"$1$2ves\"],[/(hive)$/gi,\"$1s\"],[/([^aeiouy]|qu)y$/gi,\"$1ies\"],[/(x|ch|ss|sh)$/gi,\"$1es\"],[/(matr|vert|ind)ix|ex$/gi,\"$1ices\"],[/([m|l])ouse$/gi,\"$1ice\"],[/(kn|w|l)ife$/gi,\"$1ives\"],[/(quiz)$/gi,\"$1zes\"],[/^goose$/i,\"geese\"],[/s$/gi,\"s\"],[/([^a-z])$/,\"$1\"],[/$/gi,\"s\"]];const o=e.pluralization;e.uncountables=[\"advice\",\"energy\",\"excretion\",\"digestion\",\"cooperation\",\"health\",\"justice\",\"labour\",\"machinery\",\"equipment\",\"information\",\"pollution\",\"sewage\",\"paper\",\"money\",\"species\",\"series\",\"rain\",\"rice\",\"fish\",\"sheep\",\"moose\",\"deer\",\"news\",\"expertise\",\"status\",\"media\"];const r=e.uncountables},function(t){t.exports=JSON.parse('{\"name\":\"mongoose\",\"description\":\"Mongoose MongoDB ODM\",\"version\":\"7.1.0\",\"author\":\"Guillermo Rauch <guillermo@learnboost.com>\",\"keywords\":[\"mongodb\",\"document\",\"model\",\"schema\",\"database\",\"odm\",\"data\",\"datastore\",\"query\",\"nosql\",\"orm\",\"db\"],\"license\":\"MIT\",\"dependencies\":{\"bson\":\"^5.2.0\",\"kareem\":\"2.5.1\",\"mongodb\":\"5.3.0\",\"mpath\":\"0.9.0\",\"mquery\":\"5.0.0\",\"ms\":\"2.1.3\",\"sift\":\"16.0.1\"},\"devDependencies\":{\"@babel/core\":\"7.21.4\",\"@babel/preset-env\":\"7.21.4\",\"@typescript-eslint/eslint-plugin\":\"5.57.0\",\"@typescript-eslint/parser\":\"5.57.0\",\"acquit\":\"1.3.0\",\"acquit-ignore\":\"0.2.1\",\"acquit-require\":\"0.1.1\",\"assert-browserify\":\"2.0.0\",\"axios\":\"1.1.3\",\"babel-loader\":\"8.2.5\",\"benchmark\":\"2.1.4\",\"broken-link-checker\":\"^0.7.8\",\"buffer\":\"^5.6.0\",\"cheerio\":\"1.0.0-rc.12\",\"crypto-browserify\":\"3.12.0\",\"dotenv\":\"16.0.3\",\"dox\":\"1.0.0\",\"eslint\":\"8.37.0\",\"eslint-plugin-markdown\":\"^3.0.0\",\"eslint-plugin-mocha-no-only\":\"1.1.1\",\"express\":\"^4.18.1\",\"highlight.js\":\"11.7.0\",\"lodash.isequal\":\"4.5.0\",\"lodash.isequalwith\":\"4.4.0\",\"marked\":\"4.3.0\",\"mkdirp\":\"^2.1.3\",\"mocha\":\"10.2.0\",\"moment\":\"2.x\",\"mongodb-memory-server\":\"8.12.1\",\"ncp\":\"^2.0.0\",\"nyc\":\"15.1.0\",\"pug\":\"3.0.2\",\"q\":\"1.5.1\",\"sinon\":\"15.0.3\",\"stream-browserify\":\"3.0.0\",\"tsd\":\"0.25.0\",\"typescript\":\"5.0.3\",\"uuid\":\"9.0.0\",\"webpack\":\"5.77.0\",\"fs-extra\":\"~11.1.1\"},\"directories\":{\"lib\":\"./lib/mongoose\"},\"scripts\":{\"docs:clean\":\"npm run docs:clean:stable\",\"docs:clean:stable\":\"rimraf index.html && rimraf -rf ./docs/*.html  && rimraf -rf ./docs/api && rimraf -rf ./docs/tutorials/*.html && rimraf -rf ./docs/typescript/*.html && rimraf -rf ./docs/*.html && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp\",\"docs:clean:5x\":\"rimraf index.html && rimraf -rf ./docs/5.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp\",\"docs:clean:6x\":\"rimraf index.html && rimraf -rf ./docs/6.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp\",\"docs:copy:tmp\":\"mkdirp ./tmp/docs/css && mkdirp ./tmp/docs/js && mkdirp ./tmp/docs/images && mkdirp ./tmp/docs/tutorials && mkdirp ./tmp/docs/typescript && mkdirp ./tmp/docs/api && ncp ./docs/css ./tmp/docs/css --filter=.css$ && ncp ./docs/js ./tmp/docs/js --filter=.js$ && ncp ./docs/images ./tmp/docs/images && ncp ./docs/tutorials ./tmp/docs/tutorials && ncp ./docs/typescript ./tmp/docs/typescript && ncp ./docs/api ./tmp/docs/api && cp index.html ./tmp && cp docs/*.html ./tmp/docs/\",\"docs:copy:tmp:5x\":\"rimraf ./docs/5.x && ncp ./tmp ./docs/5.x\",\"docs:copy:tmp:6x\":\"rimraf ./docs/6.x && ncp ./tmp ./docs/6.x\",\"docs:checkout:gh-pages\":\"git checkout gh-pages\",\"docs:checkout:5x\":\"git checkout 5.x\",\"docs:checkout:6x\":\"git checkout 6.x\",\"docs:generate\":\"node ./scripts/website.js\",\"docs:generate:search\":\"node ./scripts/generateSearch.js\",\"docs:generate:sponsorData\":\"node ./scripts/loadSponsorData.js\",\"docs:merge:stable\":\"git merge master\",\"docs:merge:5x\":\"git merge 5.x\",\"docs:merge:6x\":\"git merge 6.x\",\"docs:test\":\"npm run docs:generate && npm run docs:generate:search\",\"docs:view\":\"node ./scripts/static.js\",\"docs:prepare:publish:stable\":\"npm run docs:checkout:gh-pages && npm run docs:merge:stable && npm run docs:clean:stable && npm run docs:generate && npm run docs:generate:search\",\"docs:prepare:publish:5x\":\"npm run docs:checkout:5x && npm run docs:merge:5x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && npm run docs:checkout:gh-pages && npm run docs:copy:tmp:5x\",\"docs:prepare:publish:6x\":\"npm run docs:checkout:6x && npm run docs:merge:6x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && npm run docs:checkout:gh-pages && npm run docs:copy:tmp:6x\",\"docs:check-links\":\"blc http://127.0.0.1:8089 -ro\",\"lint\":\"eslint .\",\"lint-js\":\"eslint . --ext .js\",\"lint-ts\":\"eslint . --ext .ts\",\"lint-md\":\"eslint . --ext .md\",\"build-browser\":\"(rm ./dist/* || true) && node ./scripts/build-browser.js\",\"prepublishOnly\":\"npm run build-browser\",\"release\":\"git pull && git push origin master --tags && npm publish\",\"release-5x\":\"git pull origin 5.x && git push origin 5.x && git push origin 5.x --tags && npm publish --tag 5x\",\"release-6x\":\"git pull origin 6.x && git push origin 6.x && git push origin 6.x --tags && npm publish --tag legacy\",\"mongo\":\"node ./tools/repl.js\",\"test\":\"mocha --exit ./test/*.test.js\",\"test-deno\":\"deno run --allow-env --allow-read --allow-net --allow-run --allow-sys --allow-write ./test/deno.js\",\"test-rs\":\"START_REPLICA_SET=1 mocha --timeout 30000 --exit ./test/*.test.js\",\"test-tsd\":\"node ./test/types/check-types-filename && tsd\",\"tdd\":\"mocha ./test/*.test.js --inspect --watch --recursive --watch-files ./**/*.{js,ts}\",\"test-coverage\":\"nyc --reporter=html --reporter=text npm test\",\"ts-benchmark\":\"cd ./benchmarks/typescript/simple && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check\"},\"main\":\"./index.js\",\"types\":\"./types/index.d.ts\",\"engines\":{\"node\":\">=14.0.0\"},\"bugs\":{\"url\":\"https://github.com/Automattic/mongoose/issues/new\"},\"repository\":{\"type\":\"git\",\"url\":\"git://github.com/Automattic/mongoose.git\"},\"homepage\":\"https://mongoosejs.com\",\"browser\":\"./dist/browser.umd.js\",\"mocha\":{\"extension\":[\"test.js\"],\"watch-files\":[\"test/**/*.js\"]},\"config\":{\"mongodbMemoryServer\":{\"disablePostinstall\":true}},\"funding\":{\"type\":\"opencollective\",\"url\":\"https://opencollective.com/mongoose\"},\"tsd\":{\"directory\":\"test/types\",\"compilerOptions\":{\"esModuleInterop\":false,\"strict\":true,\"allowSyntheticDefaultImports\":true,\"strictPropertyInitialization\":false,\"noImplicitAny\":false,\"strictNullChecks\":true,\"module\":\"commonjs\",\"target\":\"ES2017\"}}}')},function(t,e,n){\"use strict\";\n/*!\n * Module requirements\n */const o=n(11),r=n(2),i=n(150);class s extends o{constructor(){super(\"\"),this.errors={}}toString(){return i(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(t,e){if(e instanceof s){const{errors:t}=e;for(const e of Object.keys(t))this.addError(e,t[e])}else this.errors[t]=e,this.message=i(this)}}r.inspect.custom&&(s.prototype[r.inspect.custom]=s.prototype.inspect),Object.defineProperty(s.prototype,\"toJSON\",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}}),Object.defineProperty(s.prototype,\"name\",{value:\"SetOptionError\"});s.SetOptionInnerError=class extends o{constructor(t){super(`\"${t}\" is not a valid option to set`)}},\n/*!\n * Module exports\n */\nt.exports=s},function(t,e,n){\"use strict\";const o=n(3);\"undefined\"!=typeof jest&&\"undefined\"!=typeof window&&o.warn(\"Mongoose: looks like you're trying to test a Mongoose app with Jest's default jsdom test environment. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html\"),\"undefined\"!=typeof jest&&null!=setTimeout.clock&&\"function\"==typeof setTimeout.clock.Date&&o.warn(\"Mongoose: looks like you're trying to test a Mongoose app with Jest's mock timers enabled. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html\")},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(17),r=n(411);let i=!1;t.exports=function(){return i?r:o},\n/*!\n * ignore\n */\nt.exports.setBrowser=function(t){i=t}},function(t,e,n){\"use strict\";\n/*!\n * Module dependencies.\n */const o=n(17),r=n(8).EventEmitter,i=n(9),s=n(68),c=n(27),a=i.ValidationError,l=n(94),u=n(33);function p(t,e,n,r,a){if(!(this instanceof p))return new p(t,e,n,r,a);if(u(e)&&!e.instanceOfSchema&&(e=new s(e)),e=this.schema||e,!this.schema&&e.options._id&&void 0===(t=t||{})._id&&(t._id=new c),!e)throw new i.MissingSchemaError;this.$__setSchema(e),o.call(this,t,n,r,a),l(this,e,{decorateDoc:!0});for(const t in e.methods)this[t]=e.methods[t];for(const t in e.statics)this[t]=e.statics[t]}\n/*!\n * Inherit from the NodeJS document\n */p.prototype=Object.create(o.prototype),p.prototype.constructor=p,\n/*!\n * ignore\n */\np.events=new r,\n/*!\n * Browser doc exposes the event emitter API\n */\np.$emitter=new r,[\"on\",\"once\",\"emit\",\"listeners\",\"removeListener\",\"setMaxListeners\",\"removeAllListeners\",\"addListener\"].forEach((function(t){p[t]=function(){return p.$emitter[t].apply(p.$emitter,arguments)}})),\n/*!\n * Module exports.\n */\np.ValidationError=a,t.exports=p},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){const o=n(123),r=n(240);o.connect(\"mongodb://localhost:27017/jobListings\",{useNewUrlParser:!0});const i=o.connection;i.on(\"error\",t=>console.error(t)),i.once(\"open\",()=>console.log(\"connected to mongoose\"));const s=[{title:\"Marketing Specialist\",description:\"We are looking for a marketing specialist with experience in social media and digital marketing.\",location:\"chennai\",deadline:new Date(\"2023-06-30\"),phone:\"9486558751\",email:\"marketing@example.com\",active:!0},{title:\"Software Engineer\",description:\"We are looking for a software engineer with experience in ReactJS and NodeJS.\",location:\"bangalore\",deadline:new Date(\"2023-05-15\"),phone:\"9486558752\",email:\"jobs@example.com\",active:!0},{title:\"Data Analyst test deleted\",description:\"We are looking for a data analyst with experience in SQL and data visualization tools.\",location:\"chennai\",deadline:new Date(\"2023-05-05\"),phone:\"9486558753\",email:\"data@example.com\",active:!1}];r.insertMany(s).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}]));","extractedComments":[]}